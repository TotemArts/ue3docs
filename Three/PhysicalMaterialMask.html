<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
	"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title> UDK | PhysicalMaterialMask    </title>

<style type="text/css" media="all">@import "rsrc/twiki_webs.css";</style>
<style type="text/css" media="all">@import "rsrc/udn_new.css";</style>
<link rel="icon" href="rsrc/Three/WebPreferences/favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="rsrc/Three/WebPreferences/favicon.ico" type="image/x-icon" />


<!-- view.static_udn3.tmpl  -->
<script language="JavaScript" type="text/javascript" src="rsrc/udn.js"></script>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

</head>
<p />
<body id="webbgThree">
<p />

<p />
<div id="webThree"><div id="head">
<!--
<div class="header">
 -->
<div style="background: url(/pub/webbg_udn.jpg); background-repeat: no-repeat; height:140px; width: 100%;" >
<!--
<div style="background: transparent url(/pub/udn_header_bg.jpg); background-repeat: repeat-x; height:140px; width: 100%; margin-left: 991px;">
 -->
<p />
<div id="nav">
<ul class="nav">
<font color=black>|</font>&nbsp;&nbsp;<li class=nav_Three><a href="../Main/WebHome.html" class="twikiLink">Main</a></li><font color=black>|</font><li class=nav_Three><a href="../Two/WebHome.html" class="twikiLink">UnrealEngine2</a></li><font color=black>|</font><li class=nav_Three><a href="WebHome.html" class="twikiLink">UnrealEngine3</a></li><font color=black>|</font><li class=nav_Three><a href="https://docs.unrealengine.com" class="twikiLink">UnrealEngine4</a></li><font color=black>|</font><li class=nav_Three><a href="../Main/BusinessAndLegal.html" class="twikiLink">Business &amp; Legal</a></li><font color=black>|</font>
</ul><br><br><br>
</div>
</div>
</div> <!-- end head -->
<div id="pagedefault">
<div id="maincol">
<div id="tool">
<div id="tooltop">UDN</div>
<div id="tooltext" style="padding: 10px 10px 10px 10px;">
Search public documentation: <br>
<form ACTION="/search/index.php" METHOD="GET" NAME="main" ID="main">
<input TYPE="TEXT" NAME="q" SIZE="15" STYLE="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: xx-small;">
<input TYPE="SUBMIT" VALUE="Search" STYLE="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: xx-small;"><br>
</form>
</div>
<div id="toolband">PhysicalMaterialMask  </b></div>
<div id="tooltext">
<a href="PhysicalMaterialMaskJP.html" class="twikiLink">日本語訳</a><br><a href="PhysicalMaterialMaskCH.html" class="twikiLink">中国翻译</a><br><a href="PhysicalMaterialMaskKR.html" class="twikiLink">한국어</a><br>

<!-- Three/PhysicalMaterialMask -->
<hr size="1" noshade="noshade" />
Interested in the Unreal Engine? <br>
Visit the <a href="http://www.unrealtechnology.com" target="_top">Unreal Technology</a> site.<br>
<br>
Looking for jobs and company info? <br>
Check out the <a href="http://www.epicgames.com" target="_top">Epic games</a> site.<br>
<br>
Questions about support via UDN? <br>
Contact the <a href="../Main/ContactUDNStaff.html" class="twikiLink">UDN Staff</a> <br>
<br>
</div> <!-- end toolbox content -->
<div id="toolbottom"></div>
</div> <!-- end tool -->
<p />
<noautolink>
<div style="padding:0px 0px 0px 4px;font:10px Verdana;">
<b><a href="WebHome.html" class="twikiLink">UE3 Home</a></b> &gt; <b><a href="PhysicsHome.html" class="twikiLink">Physics</a></b> &gt; Physical Material Masks
</div>
<hr size="1" noshade="noshade">
<p />
<h1><a name="Physical Material Masks"></a> Physical Material Masks </h1>
<hr size="1" noshade="noshade">
<p />
<div class="twikiToc"> <ul>
<li> <a href="PhysicalMaterialMask.html#Physical Material Masks"> Physical Material Masks</a> <ul>
<li> <a href="PhysicalMaterialMask.html#Overview"> Overview</a>
</li> <li> <a href="PhysicalMaterialMask.html#Using Physical Material Masks"> Using Physical Material Masks  </a>
</li> <li> <a href="PhysicalMaterialMask.html#One bit monochrome textures"> One bit monochrome textures</a> <ul>
<li> <a href="PhysicalMaterialMask.html#Importing one bit textures"> Importing one bit textures</a>
</li></ul>
</li> <li> <a href="PhysicalMaterialMask.html#Example setup"> Example setup</a>
</li> <li> <a href="PhysicalMaterialMask.html#How it works"> How it works</a>
</li> <li> <a href="PhysicalMaterialMask.html#Notes:"> Notes:</a>
</li></ul>
</li></ul>
</div>
<p />
<h2><a name="Overview"></a> Overview </h2>
<hr size="1" noshade="noshade">
A physical material mask provides the ability to use two physical materials on different parts of a graphical material. A physical material mask can be used to create unique effects on a static mesh without the need for multiple elements and materials. A simple example is a window mesh that has a material which is partly wood (for a window frame) and partly glass (for a window). You can set up a physical material mask to play a glass breaking sound when the glass part of the material is hit, and a wood cracking sound when the wood part of the material is hit.
<p />
<h2><a name="Using Physical Material Masks"></a> Using Physical Material Masks </h2>
<hr size="1" noshade="noshade">
Physical material masks consist of four properties on Materials or Material Instances.
<p /> <ul>
<li> <strong>Phys Material Mask</strong> - This is a one bit texture that serves as a mask. The physical material used depends on a the color (black or white) of a hit pixel during a collision.
</li> <li> <strong>Phys Material Mask UVChannel</strong> - This is the UV channel that should be used for the masked texture.  This UV channel should contain the texture coordinates used to map the mask texture to a specific static mesh.
</li> <li> <strong>Black Physical Material</strong> - The physical material to use when the black portion of the mask texture is hit during a collision.
</li> <li> <strong>White Physical Material</strong> - The physical material to use when the white portion of the mask texture is hit during a collision.
</li></ul>
<p />
<h2><a name="One bit monochrome textures"></a> One bit monochrome textures </h2>
<hr size="1" noshade="noshade">
A one bit monochrome texture is a texture where each pixel is represented by one bit. If the bit is 0, the pixel is black and if the bit is 1 the pixel is white. When a collision with a static mesh occurs, the physical material mask system uses this texture to decide which physical material to use.
<p />
<h3><a name="Importing one bit textures"></a> Importing one bit textures </h3>
There are two ways to import a one bit texture.   <ul>
<li> You can use an imaging program such as Adobe Photoshop which supports saving one bit bmp formatted textures.  You can then import the bmp file like normal into the editor and it will automatically detect it as a one bit texture.
</li> <li> You can import a 32 bit texture with your physical material mask in the alpha channel.  When the texture import dialog appears, under the compression settings category select TC_OneBitMonochrome. You can also chose this compression setting later in the texture viewer.
</li></ul>
<p />
<img src="rsrc/Three/PhysicalMaterialMask/OneBitCompressionSettings.png" alt="OneBitCompressionSettings.png" width='354' height='173' />
<p />
Using OneBitMonochrome compression will remove the RGB channels of your texture and convert the alpha channel to a one bit texture.  Using this method can be useful if you want to create your one bit texture in the alpha channel using the RGB channels of your material's diffuse texture as a guide.
<img src="rsrc/TWiki/TWikiDocGraphics/warning.gif" alt="ALERT!" title="ALERT!" width="16" height="16" border="0" /> <strong>Note:</strong> Alpha channels are 8 bit which means their values range from 0-255. Since a 1 bit texture ranges from 0-1, values less than 128 will be 0 and values greater than or equal to 128 will be 1 when compressed.
<p />
<h2><a name="Example setup"></a> Example setup </h2>
<hr size="1" noshade="noshade">
This is an example setup using the following window mesh.
<p />
<img src="rsrc/Three/PhysicalMaterialMask/Window.png" alt="Window.png" width='670' height='555' />
<p />
The first thing I did before importing the mesh, is to create a set of UV coordinates for the mask texture. This workflow is exactly the same as creating UVs for any mesh you import. You don't have to do this if the default set of texture coordinates in UV channel 0 are acceptable. These are the UV coordinates I have created which are in UV channel 1 of the mesh:
<p />
<img src="rsrc/Three/PhysicalMaterialMask/UVs.PNG" alt="UVs.PNG" width='473' height='424' />
<p />
Then I used an image editing program such as Photoshop to create my one bit texture which I then imported to the editor.
<p />
<img src="rsrc/Three/PhysicalMaterialMask/TextureMask.PNG" alt="TextureMask.PNG" width='728' height='581' />
<p />
The black areas represent the windows and the white areas represent the frame.  Also note the red circle.  The format for this texture is A1 which must be the format of the mask texture for physical material masking to work.
<p />
This is what the mask would look like if it were mapped on the window mesh:
<p />
<img src="rsrc/TWiki/TWikiDocGraphics/warning.gif" alt="ALERT!" title="ALERT!" width="16" height="16" border="0" /> <strong>Note:</strong> A1 formatted textures cannot be used for normal rendering.
<p />
<img src="rsrc/Three/PhysicalMaterialMask/WindowMasked.png" alt="WindowMasked.png" width='532' height='502' />
<p />
As you can see the black areas properly match up to the windows and the white areas match up to the window frame.
<p />
Now all thats left to do is to set up the mask on the material which is a simple manner of setting a few properties on the material.
<p />
<img src="rsrc/TWiki/TWikiDocGraphics/warning.gif" alt="ALERT!" title="ALERT!" width="16" height="16" border="0" /> <strong>Note:</strong> For this step I used a material instance constant, parented to the actual material of the mesh because I did not want to modify the actual material.
<p />
<img src="rsrc/Three/PhysicalMaterialMask/MaskProperties.PNG" alt="MaskProperties.PNG" width='488' height='101' />
<p />
After this we are ready to go provided we have a valid white and black physical material. See <a href="PhysicalMaterial.html" target="_top">this link</a> for learning more about physical materials.
<p />
<h2><a name="How it works"></a> How it works </h2>
<hr size="1" noshade="noshade">
When a line check hits a static mesh, Unreal finds the triangle that was hit and the graphical material on that triangle. If the material has valid physical material mask settings, a texture lookup is done into a one bit texture to find what pixel was hit. If the pixel is black the line check returns the black physical material. If the pixel is white, the line check returns the white physical material. Your game must have proper code setup to use physical materials returned from line checks in order to see results from physical material masks.
<p />
<h2><a name="Notes:"></a> Notes: </h2>
<hr size="1" noshade="noshade"> <ul>
<li> When using physical material masks on material instances, you can override only portions of the physical material mask on the instance. The non-overridden parts will be found by looking at the material instances parent.
</li> <li> A1 formatted textures do not use GPU memory, only system memory. They are never mipmapped and are never streamed.
</li></ul>
</noautolink>
<p />
<p />
<p />
<p />
<p />
<p />


<!-- BEGIN UE4 NOTICE -->



<div id="version_message" style="display:none;">

    <div style="position:fixed;top:0px;left:0px;width:100%;height:100%;background:#000;opacity:0.5;">

    </div>

    <div style="position:fixed;top:50%;left:50%;margin:-70px 0px 0px -240px;background:#FFF;border-radius:6px;width:480px;box-shadow:0px 5px 30px -5px rgba(0,0,0,0.9);">

        <div style="font-size:16px;font-weight:bold;background: url(rsrc/Three/warning.png) no-repeat scroll 5px 5px;padding:4px 10px 5px 25px;height:21px;width:440px;">

            Important!

        </div>

        <div style="font-size:11px;padding:5px 10px 10px;width:460px;">

            <p>You are viewing documentation for the <strong>Unreal Development Kit (UDK)</strong>.</p>



            <p>If you are looking for the Unreal Engine 4 documentation, please visit the <a style="color:#000;" href="https://docs.unrealengine.com">Unreal Engine 4 Documentation</a> site.</p>

        </div>

        <div style="height:20px;padding:4px;margin:6px;border-top:1px solid #a0a0a0;">

            <form onsubmit="return closeVersionMessage();">

                <input type="checkbox" id="dismiss" value="dismiss" />

                <label for="dsimiss">Don't show me this again</label>

                <input type="submit" value="Close" style="cursor:pointer;float:right;width:60px;color:#f0f0f0;font-weight:bold;background:#882222;height:24px;padding:2px 3px 3px;text-align:center;border:1px outset #000;" />

            </form>

        </div>

    </div>

</div>



<script type="text/javascript">

    window.onload = function () {

        LoadVersionMessage();

    }



    function LoadVersionMessage()

    {

        var showMessage = "false";
        if(showMessage != "false")

        {

            showVersionMessage();

        }

    }



    function showVersionMessage()

    {

        var message = document.getElementById("version_message");

        if(message)

        {

            message.style.display = "block";

        }

    }



    function closeVersionMessage() {

        var dismiss = document.getElementById("dismiss");

        var message = document.getElementById("version_message");

        if (message) {

            message.style.display = "none";

        }

        if (dismiss.checked) {

            eraseCookie("doc_version_message");

            createCookie("doc_version_message", "false", 365);

            dismiss.checked = false;

        }

        return false;

    }



    function createCookie(name, value, days) {

        if (days) {

            var date = new Date();

            date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));

            var expires = "; expires=" + date.toGMTString();

        }

        else var expires = "";

        document.cookie = name + "=" + value + expires + "; path=/";

    }



    function readCookie(name) {

        var nameEQ = name + "=";

        var ca = document.cookie.split(';');

        for (var i = 0; i < ca.length; i++) {

            var c = ca[i];

            while (c.charAt(0) == ' ') c = c.substring(1, c.length);

            if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);

        }

        return null;

    }



    function eraseCookie(name) {

        createCookie(name, "", -1);

    }

</script>



<!-- END UE4 NOTICE -->



</div></div><div id="footer"><div style="BACKGROUND-COLOR: transparent; margin: 0; padding: 0; width: 100%;"><div>&nbsp;</div><div style="float: left; text-align: left; vertical-align: bottom; width: 50%;"><a href="http://www.videogamevoters.org"><img src="rsrc/vgvn.jpg" border="0" width="234" height="60" alt="Video Game Voters Network" /></a></div><div style="float: right; text-align: right; vertical-align: bottom; width: 50%;">Copyright &copy; 2001-2012 <a href="http://www.epicgames.com" target="_top">Epic Games, Inc.</a><br /><a href="../Main/TermsAndConditions.html" class="twikiLink">Terms and Conditions</a><br /><a href="http://epicgames.com/privacynotice" target="_top">Privacy Notice</a></div></div></div></div>
<p />
</html></body>
