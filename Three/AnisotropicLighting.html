<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
	"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title> UDK | AnisotropicLighting    </title>

<style type="text/css" media="all">@import "rsrc/twiki_webs.css";</style>
<style type="text/css" media="all">@import "rsrc/udn_new.css";</style>
<link rel="icon" href="rsrc/Three/WebPreferences/favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="rsrc/Three/WebPreferences/favicon.ico" type="image/x-icon" />


<!-- view.static_udn3.tmpl  -->
<script language="JavaScript" type="text/javascript" src="rsrc/udn.js"></script>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

</head>
<p />
<body id="webbgThree">
<p />

<p />
<div id="webThree"><div id="head">
<!--
<div class="header">
 -->
<div style="background: url(/pub/webbg_udn.jpg); background-repeat: no-repeat; height:140px; width: 100%;" >
<!--
<div style="background: transparent url(/pub/udn_header_bg.jpg); background-repeat: repeat-x; height:140px; width: 100%; margin-left: 991px;">
 -->
<p />
<div id="nav">
<ul class="nav">
<font color=black>|</font>&nbsp;&nbsp;<li class=nav_Three><a href="../Main/WebHome.html" class="twikiLink">Main</a></li><font color=black>|</font><li class=nav_Three><a href="../Two/WebHome.html" class="twikiLink">UnrealEngine2</a></li><font color=black>|</font><li class=nav_Three><a href="WebHome.html" class="twikiLink">UnrealEngine3</a></li><font color=black>|</font><li class=nav_Three><a href="https://docs.unrealengine.com" class="twikiLink">UnrealEngine4</a></li><font color=black>|</font><li class=nav_Three><a href="../Main/BusinessAndLegal.html" class="twikiLink">Business &amp; Legal</a></li><font color=black>|</font>
</ul><br><br><br>
</div>
</div>
</div> <!-- end head -->
<div id="pagedefault">
<div id="maincol">
<div id="tool">
<div id="tooltop">UDN</div>
<div id="tooltext" style="padding: 10px 10px 10px 10px;">
Search public documentation: <br>
<form ACTION="/search/index.php" METHOD="GET" NAME="main" ID="main">
<input TYPE="TEXT" NAME="q" SIZE="15" STYLE="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: xx-small;">
<input TYPE="SUBMIT" VALUE="Search" STYLE="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: xx-small;"><br>
</form>
</div>
<div id="toolband">AnisotropicLighting  </b></div>
<div id="tooltext">
<a href="AnisotropicLightingJP.html" class="twikiLink">日本語訳</a><br><a href="AnisotropicLightingCH.html" class="twikiLink">中国翻译</a><br><a href="AnisotropicLightingKR.html" class="twikiLink">한국어</a><br>

<!-- Three/AnisotropicLighting -->
<hr size="1" noshade="noshade" />
Interested in the Unreal Engine? <br>
Visit the <a href="http://www.unrealtechnology.com" target="_top">Unreal Technology</a> site.<br>
<br>
Looking for jobs and company info? <br>
Check out the <a href="http://www.epicgames.com" target="_top">Epic games</a> site.<br>
<br>
Questions about support via UDN? <br>
Contact the <a href="../Main/ContactUDNStaff.html" class="twikiLink">UDN Staff</a> <br>
<br>
</div> <!-- end toolbox content -->
<div id="toolbottom"></div>
</div> <!-- end tool -->
<p />
<noautolink>
<p />
<div style="padding:0px 0px 0px 4px;font:10px Verdana;">
<b><a href="WebHome.html" class="twikiLink">UE3 Home</a></b> &gt; <b><a href="MaterialsAndTexturesHome.html" class="twikiLink">Materials &amp; Textures</a></b> &gt; Anisotropic Lighting <br/>
<b><a href="WebHome.html" class="twikiLink">UE3 Home</a></b> &gt; <b><a href="LightingAndShadowsHome.html" class="twikiLink">Lighting &amp; Shadows</a></b> &gt; Anisotropic Lighting <br/>
<b><a href="WebHome.html" class="twikiLink">UE3 Home</a></b> &gt; <b><a href="LightingArtistHome.html" class="twikiLink">Lighting Artist</a></b> &gt; Anisotropic Lighting
</div>
<hr size="1" noshade="noshade">
<h1><a name="Anisotropic Lighting"></a> Anisotropic Lighting </h1>
<hr size="1" noshade="noshade">
<p />
<div class="twikiToc"> <ul>
<li> <a href="AnisotropicLighting.html#Anisotropic Lighting"> Anisotropic Lighting</a> <ul>
<li> <a href="AnisotropicLighting.html#Overview"> Overview</a>
</li> <li> <a href="AnisotropicLighting.html#Settings"> Settings</a>
</li> <li> <a href="AnisotropicLighting.html#Tangent Space"> Tangent Space</a>
</li> <li> <a href="AnisotropicLighting.html#AnisotropicDirection"> AnisotropicDirection</a>
</li> <li> <a href="AnisotropicLighting.html#Using Normal Maps"> Using Normal Maps</a>
</li> <li> <a href="AnisotropicLighting.html#Example Package"> Example Package</a>
</li></ul>
</li></ul>
</div>
<p />
<h2><a name="Overview"></a> Overview </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
An anisotropic surface such as brushed metal, the shiny side of a CD, or human hair, gets its characteristic look from the fine grain, grooves or strands at the surface. When performing lighting with regular materials, the calculation only considers  the surface's normal vector, the vector to the light, and the vector to the camera. But for anisotropic surfaces there is not really a continuous normal vector to use, because each strand or groove has a variety of different possible normal directions all perpendicular to the direction of the groove.
<p />
In the MLM_Anisotropic lighting model, the lighting calculation makes use of the tangential direction of the grooves or strands to model how the light will be reflected by the surface. You must supply this direction to the material using the AnisotropicDirection input.
<p />
Unreal's static lightmap data does not capture the anisotropic direction information very well, so anisotropic materials should be avoided on this type of geometry. However, with <a href="Lightmass.html" class="twikiLink">Lightmass</a> and <a href="DominantLights.html" class="twikiLink">DominantLights</a>, the shadow is precomputed but the specular is fully dynamic, so anisotropic materials will work well in this situation.
<p />
<h2><a name="Settings"></a> Settings </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
To use the anisotropic lighting model, you just have to set LightingModel to MLM_Anisotropic.
<p />
The default direction of the grain is (0,1) which corresponds to "down" in UV space. If you change the material view to Sphere, you will see the circle type Specular effect you see on people's hair when under bright lights:
<p />
<img src="rsrc/Three/AnisotropicLighting/aniso1.jpg" alt="aniso1.jpg" width='313' height='559' />
<p />
<h2><a name="Tangent Space"></a> Tangent Space </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
Lighting calculations occur in 'tangent space', which is the space defined by the texture mapping's U and V directions in the mesh's UV coordinates. The red channel represents U (the direction moving from left to right in the texture map), green represents V (downward direction in the texture map) and blue represents the direction out of the surface of the texture.
<p />
To store tangent space vector values inside a texture (such as a normal map), the directions are encoded in the texture's colors. The range 0-255 represent values from -1 to 1, with 0 is stored in the texture as color value 127. This is why normal maps are typically R=127,G=127,B=255 which represents a vector (0,0,1), pointing out of the plane of the texture surface.
<p />
It is important that any texture used as a tangent space map is imported with one of the TC_NormalMap compression settings, as the UnpackMin and UnPackMax properties need to be correctly set to give a range of -1 to 1. The texture's SRGB setting should also be disabled.
<p />
<h2><a name="AnisotropicDirection"></a> AnisotropicDirection </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
The direction you need to specify to your AnisotropicDirection input depends on how you unwraped the UVs for your mesh. Looking at your mesh's texture map, do you want the direction of the grain to run horizontally or vertically? If the direction of the grain is all horizontal, you could use a Constant3 with value (1,0,0) to represent that direction. If the direction of the grain is all vertical, you should use a value of (0,1,0).
<p />
But if the grain is horizontal in some areas and vertical in other areas, you will need to use a texture map to represent your anisotropic direction. Paint color R=255,G=127,B=127 in the areas where the grain runs horizontal and R=127,G=255,B=127 in the areas it is vertical and use this as the anisotropic direction map. If you have a more complicated direction, you'll need to work out what color represents the direction you want.
<p />
<div style="float: right; clear: left;"><img src="rsrc/Three/AnisotropicLighting/anisomap_thumb.jpg" alt="anisomap_thumb.jpg" width='64' height='64' /></div>
<p />
Here is an example of a direction map where the direction corresponds to the tangent direction around a circle. Unfortunately I do not know of any tools to make this kind of map. This circular one was generated using a simple C program.
<p />
A material using that map:<br/>
<img src="rsrc/Three/AnisotropicLighting/brushedmetalmaterial.jpg" alt="Material with brushed metal aniso map" width='674' height='659' />
<p />
A surface with that material:<br/>
<img src="rsrc/Three/AnisotropicLighting/brushedmetal.jpg" alt="Screenshot of the brushed metal material on a surface" width='884' height='484' />
<p />
<h2><a name="Using Normal Maps"></a> Using Normal Maps </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
You can also specify a normal map as usual and the normal will perturb the anisotropic direction.
<p />
<img src="rsrc/Three/AnisotropicLighting/aniso_normal.jpg" alt="aniso_normal.jpg" width='667' height='663' />
<p />
<h2><a name="Example Package"></a> Example Package </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p /> <ul>
<li> <a href="rsrc/Three/AnisotropicLighting/AnisoTest.upk" target="_top">AnisoTest.upk</a>: Example containing the brushed metal material above.
</li></ul>
<p />
</noautolink>
<p />
<p />
<p />
<p />
<p />
<p />


<!-- BEGIN UE4 NOTICE -->



<div id="version_message" style="display:none;">

    <div style="position:fixed;top:0px;left:0px;width:100%;height:100%;background:#000;opacity:0.5;">

    </div>

    <div style="position:fixed;top:50%;left:50%;margin:-70px 0px 0px -240px;background:#FFF;border-radius:6px;width:480px;box-shadow:0px 5px 30px -5px rgba(0,0,0,0.9);">

        <div style="font-size:16px;font-weight:bold;background: url(rsrc/Three/warning.png) no-repeat scroll 5px 5px;padding:4px 10px 5px 25px;height:21px;width:440px;">

            Important!

        </div>

        <div style="font-size:11px;padding:5px 10px 10px;width:460px;">

            <p>You are viewing documentation for the <strong>Unreal Development Kit (UDK)</strong>.</p>



            <p>If you are looking for the Unreal Engine 4 documentation, please visit the <a style="color:#000;" href="https://docs.unrealengine.com">Unreal Engine 4 Documentation</a> site.</p>

        </div>

        <div style="height:20px;padding:4px;margin:6px;border-top:1px solid #a0a0a0;">

            <form onsubmit="return closeVersionMessage();">

                <input type="checkbox" id="dismiss" value="dismiss" />

                <label for="dsimiss">Don't show me this again</label>

                <input type="submit" value="Close" style="cursor:pointer;float:right;width:60px;color:#f0f0f0;font-weight:bold;background:#882222;height:24px;padding:2px 3px 3px;text-align:center;border:1px outset #000;" />

            </form>

        </div>

    </div>

</div>



<script type="text/javascript">

    window.onload = function () {

        LoadVersionMessage();

    }



    function LoadVersionMessage()

    {

        var showMessage = "false";
        if(showMessage != "false")

        {

            showVersionMessage();

        }

    }



    function showVersionMessage()

    {

        var message = document.getElementById("version_message");

        if(message)

        {

            message.style.display = "block";

        }

    }



    function closeVersionMessage() {

        var dismiss = document.getElementById("dismiss");

        var message = document.getElementById("version_message");

        if (message) {

            message.style.display = "none";

        }

        if (dismiss.checked) {

            eraseCookie("doc_version_message");

            createCookie("doc_version_message", "false", 365);

            dismiss.checked = false;

        }

        return false;

    }



    function createCookie(name, value, days) {

        if (days) {

            var date = new Date();

            date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));

            var expires = "; expires=" + date.toGMTString();

        }

        else var expires = "";

        document.cookie = name + "=" + value + expires + "; path=/";

    }



    function readCookie(name) {

        var nameEQ = name + "=";

        var ca = document.cookie.split(';');

        for (var i = 0; i < ca.length; i++) {

            var c = ca[i];

            while (c.charAt(0) == ' ') c = c.substring(1, c.length);

            if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);

        }

        return null;

    }



    function eraseCookie(name) {

        createCookie(name, "", -1);

    }

</script>



<!-- END UE4 NOTICE -->



</div></div><div id="footer"><div style="BACKGROUND-COLOR: transparent; margin: 0; padding: 0; width: 100%;"><div>&nbsp;</div><div style="float: left; text-align: left; vertical-align: bottom; width: 50%;"><a href="http://www.videogamevoters.org"><img src="rsrc/vgvn.jpg" border="0" width="234" height="60" alt="Video Game Voters Network" /></a></div><div style="float: right; text-align: right; vertical-align: bottom; width: 50%;">Copyright &copy; 2001-2012 <a href="http://www.epicgames.com" target="_top">Epic Games, Inc.</a><br /><a href="../Main/TermsAndConditions.html" class="twikiLink">Terms and Conditions</a><br /><a href="http://epicgames.com/privacynotice" target="_top">Privacy Notice</a></div></div></div></div>
<p />
</html></body>
