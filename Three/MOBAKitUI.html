<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
	"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title> UDK | MOBAKitUI    </title>

<style type="text/css" media="all">@import "rsrc/twiki_webs.css";</style>
<style type="text/css" media="all">@import "rsrc/udn_new.css";</style>
<link rel="icon" href="rsrc/Three/WebPreferences/favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="rsrc/Three/WebPreferences/favicon.ico" type="image/x-icon" />


<!-- view.static_udn3.tmpl  -->
<script language="JavaScript" type="text/javascript" src="rsrc/udn.js"></script>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

</head>
<p />
<body id="webbgThree">
<p />

<p />
<div id="webThree"><div id="head">
<!--
<div class="header">
 -->
<div style="background: url(/pub/webbg_udn.jpg); background-repeat: no-repeat; height:140px; width: 100%;" >
<!--
<div style="background: transparent url(/pub/udn_header_bg.jpg); background-repeat: repeat-x; height:140px; width: 100%; margin-left: 991px;">
 -->
<p />
<div id="nav">
<ul class="nav">
<font color=black>|</font>&nbsp;&nbsp;<li class=nav_Three><a href="../Main/WebHome.html" class="twikiLink">Main</a></li><font color=black>|</font><li class=nav_Three><a href="../Two/WebHome.html" class="twikiLink">UnrealEngine2</a></li><font color=black>|</font><li class=nav_Three><a href="WebHome.html" class="twikiLink">UnrealEngine3</a></li><font color=black>|</font><li class=nav_Three><a href="https://docs.unrealengine.com" class="twikiLink">UnrealEngine4</a></li><font color=black>|</font><li class=nav_Three><a href="../Main/BusinessAndLegal.html" class="twikiLink">Business &amp; Legal</a></li><font color=black>|</font>
</ul><br><br><br>
</div>
</div>
</div> <!-- end head -->
<div id="pagedefault">
<div id="maincol">
<div id="tool">
<div id="tooltop">UDN</div>
<div id="tooltext" style="padding: 10px 10px 10px 10px;">
Search public documentation: <br>
<form ACTION="/search/index.php" METHOD="GET" NAME="main" ID="main">
<input TYPE="TEXT" NAME="q" SIZE="15" STYLE="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: xx-small;">
<input TYPE="SUBMIT" VALUE="Search" STYLE="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: xx-small;"><br>
</form>
</div>
<div id="toolband">MOBAKitUI  </b></div>
<div id="tooltext">
<a href="MOBAKitUICH.html" class="twikiLink">中国翻译</a><br><a href="MOBAKitUIKR.html" class="twikiLink">한국어</a><br>

<!-- Three/MOBAKitUI -->
<hr size="1" noshade="noshade" />
Interested in the Unreal Engine? <br>
Visit the <a href="http://www.unrealtechnology.com" target="_top">Unreal Technology</a> site.<br>
<br>
Looking for jobs and company info? <br>
Check out the <a href="http://www.epicgames.com" target="_top">Epic games</a> site.<br>
<br>
Questions about support via UDN? <br>
Contact the <a href="../Main/ContactUDNStaff.html" class="twikiLink">UDN Staff</a> <br>
<br>
</div> <!-- end toolbox content -->
<div id="toolbottom"></div>
</div> <!-- end tool -->
<p />
<noautolink>
<div style="padding:0px 0px 0px 4px;font:10px Verdana;">
<style type="text/css" media="all">@import "rsrc/UDNCSS_test.css";</style>
<b><a href="WebHome.html" class="twikiLink">UE3 Home</a></b> &gt; <b><a href="DevelopmentKitGems.html" class="twikiLink">Unreal Development Kit Gems</a></b> &gt; <b><a href="MOBAKit.html" class="twikiLink">MOBA Starter Kit</a></b> &gt; UI <br/>
</div>
<hr size="1" noshade="noshade">
<p />
<h1><a name="MOBA Starter Kit - UI"></a> MOBA Starter Kit - UI </h1>
<hr size="1" noshade="noshade">
<p />
<strong><em>Last tested against UDK May, 2012</em></strong>
<p />
<div class="twikiToc"> <ul>
<li> <a href="MOBAKitUI.html#MOBA Starter Kit - UI"> MOBA Starter Kit - UI</a> <ul>
<li> <a href="MOBAKitUI.html#Overview"> Overview</a>
</li> <li> <a href="MOBAKitUI.html#Hero Area"> Hero Area</a> <ul>
<li> <a href="MOBAKitUI.html#Health"> Health</a>
</li> <li> <a href="MOBAKitUI.html#Mana"> Mana</a>
</li> <li> <a href="MOBAKitUI.html#Portrait"> Portrait</a>
</li> <li> <a href="MOBAKitUI.html#Spells"> Spells</a>
</li> <li> <a href="MOBAKitUI.html#Stats"> Stats</a>
</li></ul>
</li> <li> <a href="MOBAKitUI.html#Inventory Area"> Inventory Area</a> <ul>
<li> <a href="MOBAKitUI.html#Current Inventory Slots"> Current Inventory Slots</a>
</li> <li> <a href="MOBAKitUI.html#Stash Inventory Slots"> Stash Inventory Slots</a>
</li> <li> <a href="MOBAKitUI.html#Cash text field"> Cash text field</a>
</li> <li> <a href="MOBAKitUI.html#Shop button"> Shop button</a>
</li></ul>
</li> <li> <a href="MOBAKitUI.html#Messages"> Messages</a>
</li> <li> <a href="MOBAKitUI.html#Top Area"> Top Area</a> <ul>
<li> <a href="MOBAKitUI.html#Main Menu button"> Main Menu button</a>
</li> <li> <a href="MOBAKitUI.html#Day Night movie clip"> Day Night movie clip</a>
</li> <li> <a href="MOBAKitUI.html#Kill / Deaths / Assists stats"> Kill / Deaths / Assists stats</a>
</li></ul>
</li></ul>
</li></ul>
</div>
<p />
<h2><a name="Overview"></a> Overview </h2>
<hr size="1" noshade="noshade">
MOBA's generally have a lot of information on the HUD. All of the HUD in the MOBA Starter Kit is done within Scaleform, and while the HUD classes still exists; it is mostly just a shell to forward commands to Scaleform or to pass along the Canvas instance. Some parts of the HUD is described in other documents, so this document focuses on areas which do not have their own sections.
<p />
<h2><a name="Hero Area"></a> Hero Area </h2>
<hr size="1" noshade="noshade">
<p />
<img src="rsrc/Three/MOBAKitUI/MOBAKitHeroArea.jpg" alt="MOBAKitHeroArea.jpg" width='800' height='444' />
<p />
The hero area contains information about the state of the hero. It shows the hero's health, level, mana, portrait, spells and stats. The majority of the hero area box GFx widgets are cached in <strong>UDKMOBAGFxHUD::ConfigHero()</strong>. Most of the core logic is done in <strong>UDKMOBAGFxHUD::UpdateCurrentHero()</strong> which is called by <strong>UDKMOBAGFxHUD::Tick()</strong>.
<p />
<h3><a name="Health"></a> Health </h3>
The health portion has three parts to it. <ul>
<li> Health bar
</li> <li> Current health text
</li> <li> Regeneration of health text
</li></ul>
<p />
Within <strong>UDKMOBAGFxHUD::UpdateCurrentHero()</strong> is where the health bar is kept up to date. A mask is used make the bar appear to scale down. This technique was used over scaling the health bar, as it ensured that the graphic did not scale as well. It's also a little easier to keep up to date, as you only need to calculate the position of the mask. The health bar text is also kept up to date in the same place, and it is done by setting the text of the text fields.
<p />
<h3><a name="Mana"></a> Mana </h3>
The mana portion has three parts to it. <ul>
<li> Mana bar
</li> <li> Current mana text
</li> <li> Regeneration of mana text
</li></ul>
<p />
The mana bar is kept up to date in the same fashion as the health bar.
<p />
<h3><a name="Portrait"></a> Portrait </h3>
The portrait used depends on the platform. On the Mobile platform a static pre-rendered image is used, while on the PC platform a real time dynamic render target is used to produce an animating portrait. This is handled via <strong>UDKMOBAGFxHUD::SetHeroPortrait()</strong>, and all it does is set the texture resource to a Texture2D which is a parameter in that function.
<p />
On the mobile platform, <strong>UDKMOBAHUD_Mobile::PostRender()</strong> is used to set the portrait. In this case, all this function does is to set a texture to the GFx widget.
<p />
On the PC platform, <strong>UDKMOBAHUD_PC::PostRender()</strong> is used to set the portrait. On the PC platform it creates an off screen render target which captures an animating skeletal mesh that is spawned somewhere randomly in the map so that it doesn't interfere with the map. This creates the animating portrait without having to pre-render a portrait movie. This also allows you also change the hero art without having to rerender the portrait movie. You can also include other fancy effects such as particle effects, lighting effects and so forth.
<p />
<h3><a name="Spells"></a> Spells </h3>
The spells section is created dynamically from complex Scaleform widgets. This is handled in <strong>UDKMOBAGFxHUD::ConfigSpells()</strong>. <strong>UDKMOBAGFxHUD::ConfigSpells()</strong> iterates over the heroes spells and dynamically attaches new GFx widgets to the HUD. It then binds those buttons to the appropriate event listeners and sets up everything else.
<p />
The event listeners are what handle aspects such as leveling up a spell, triggering a spell and so forth.
<p />
<h3><a name="Stats"></a> Stats </h3>
The stats section mostly just has text fields that are updated as the hero is updated. This is primarily updated in <strong>UDKMOBAGFxHUD::UpdateHeroStats()</strong>, and this simply grabs the values from the hero and assigns them to the text fields that have been cached within <strong>UDKMOBAGFxHUD::ConfigHero()</strong>.
<p />
<p />
<h2><a name="Inventory Area"></a> Inventory Area </h2>
<hr size="1" noshade="noshade">
<p />
<img src="rsrc/Three/MOBAKitUI/MOBAKitInventoryArea.jpg" alt="MOBAKitInventoryArea.jpg" width='800' height='453' />
<p />
The inventory area contains both the player's current inventory items and the player's stash inventory items. Both are predefined in Scaleform, and use a complex movie clip to handle the items. A text field is used to maintain the amount of money the player has, and the shop button is just a simple button which can have its chrome updated to indicate if the player was in the shop area or not. These are all cached in <strong>UDKMOBAGFxHUD::ConfigInventory()</strong>.
<p />
<h3><a name="Current Inventory Slots"></a> Current Inventory Slots </h3>
Current inventory slots are on the left and are bigger than the stash inventory slots. These updated via <strong>UDKMOBAGFxHUD::NotifyItemReceived()</strong> which is called from <strong>UDKMOBAPawnReplicationInfo</strong> when the inventory array has changed. What this does is simply look up the cached GFx inventory array, and assigns the various widgets to the appropriate values.
<p />
<h3><a name="Stash Inventory Slots"></a> Stash Inventory Slots </h3>
This is updated in the same manner as current inventory slots.
<p />
<h3><a name="Cash text field"></a> Cash text field </h3>
This is updated via the function <strong>UDKMOBAGFxHUD::NotifyMoneyUpdated()</strong>, and it simply sets the text of the text field. This is called by <strong>UDKMOBAPlayerReplicationInfo::MoneyUpdated()</strong> when the <strong>UDKMOBAPlayerReplicationInfo.Money</strong> variable has changed.
<p />
<h3><a name="Shop button"></a> Shop button </h3>
When this GFxClikWidget is initialized in <strong>UDKMOBAGFxHUD::ConfigInventory()</strong> it binds an event listener to a delegate called <strong>PressShop()</strong>. This delegate simply toggles the visibility of the <strong>ShopAreaMC</strong>. <strong>UDKMOBAGFxHUD::ToggleShopButtonChrome()</strong> is also used to change the color of the chrome button. The change of the color indicates whether the player is within their shop volume or not.
<p />
<h2><a name="Messages"></a> Messages </h2>
<hr size="1" noshade="noshade">
<p />
<img src="rsrc/Three/MOBAKitUI/MOBAKitMessageArea.jpg" alt="MOBAKitMessageArea.jpg" width='800' height='453' />
<p />
Messages are dynamically spawned movie clips that have text fields that are set. They also animate fading in and fading out to make the UI feel more polished and dynamic. Some helper functions have been added to <strong>UDKMOBAGFxHUD</strong> to make it easier to add messages.
<p /> <ul>
<li> <strong>UDKMOBAGFxHUD::AddCenteredMessage()</strong> - This adds a message in the center of the screen.
</li> <li> <strong>UDKMOBAGFxHUD::AddMessage()</strong> - This adds a message on the left of the screen.
</li></ul>
<p />
Both of these functions call <strong>UDKMOBAGFxHUD::AddGenericMessage()</strong> which either creates a new symbol to attach to the HUD or reuse an old symbol that has been hidden. After a symbol is selected, the function then shuffles the visible messages upwards and places the new symbol at the bottom. The text of the symbol is set and the symbol is told to play an animation using a frame name specified in Adobe Flash Professional.
<p />
To maintain the messages, <strong>UDKMOBAGFxHUD::UpdateGenericLogMessages()</strong> is called in <strong>UDKMOBAGFxHUD::Tick()</strong>. This function iterates over the appropriate message arrays, and checks if they have expired or not. If they have expired then the message symbol is told to play an animation using a frame name specified in Adobe Flash Professional.
<p />
<h2><a name="Top Area"></a> Top Area </h2>
<hr size="1" noshade="noshade">
<p />
<img src="rsrc/Three/MOBAKitUI/MOBAKitTopArea.jpg" alt="MOBAKitTopArea.jpg" width='800' height='453' />
<p />
The top area contains information about the general state of the game. On the far left is the main menu button, in the center is the kill count for the teams, an area where hero icons are shown and a day night clock, and on the far right is the kill, deaths and assists stats.
<p />
<h3><a name="Main Menu button"></a> Main Menu button </h3>
The main menu button is cached in <strong>UDKMOBAGFxHUD::ConfigHUD()</strong> and the button is set up with event listeners. The event listener which binds to the button press simply opens up the main menu. It opens up the main menu by first checking if the main menu instance has already been attached to the scene or not. If it hasn't, then a new main menu instance is created and attached to the menu storage movie clip. The menu storage menu clip exists to ensure that the layering of the symbols is maintained. If it has been created, then its visibility is set true. It then pauses the game.
<p />
When the main menu is open, it has two options. Either to return to the game or to exit from the game. If the player returns to the game, then the game is then unpaused and the main menu is hidden. If the player wants to exit the game, then the HUD is first closed and the the <strong>exit</strong> command is called from the console.
<p />
<img src="rsrc/Three/MOBAKitUI/MOBAKitMainMenu.jpg" alt="MOBAKitMainMenu.jpg" width='808' height='458' />
<p />
<h3><a name="Day Night movie clip"></a> Day Night movie clip </h3>
The day night movie clip are cached in <strong>UDKMOBAGFxHUD::ConfigHUD()</strong> and is updated in <strong>UDKMOBAGFxHUD::UpdateGameTimer()</strong> and <strong>UDKMOBAGFxHUD::UpdateDayNightCycle()</strong> which are called in <strong>UDKMOBAGFxHUD::Tick()</strong>. <strong>UDKMOBAGFxHUD::UpdateGameTimer()</strong> updates the text field of the day night text field. <strong>UDKMOBAGFxHUD::UpdateDayNightCycle()</strong> calculates which animation to play, and then tells the day night indicator movie clip to play the appropriate animation.
<p />
<h3><a name="Kill / Deaths / Assists stats"></a> Kill / Deaths / Assists stats </h3>
The text fields are cached in <strong>UDKMOBAGFxHUD::ConfigHUD()</strong>. <strong>UDKMOBAGFxHUD::UpdateStats()</strong> is called via <strong>UDKMOBAGFxHUD::Tick()</strong> and checks the values of the player's PRI and sets the text fields to the appropriate values.
<p />
</noautolink>
<p />
<p />
<p />
<p />
<p />
<p />


<!-- BEGIN UE4 NOTICE -->



<div id="version_message" style="display:none;">

    <div style="position:fixed;top:0px;left:0px;width:100%;height:100%;background:#000;opacity:0.5;">

    </div>

    <div style="position:fixed;top:50%;left:50%;margin:-70px 0px 0px -240px;background:#FFF;border-radius:6px;width:480px;box-shadow:0px 5px 30px -5px rgba(0,0,0,0.9);">

        <div style="font-size:16px;font-weight:bold;background: url(rsrc/Three/warning.png) no-repeat scroll 5px 5px;padding:4px 10px 5px 25px;height:21px;width:440px;">

            Important!

        </div>

        <div style="font-size:11px;padding:5px 10px 10px;width:460px;">

            <p>You are viewing documentation for the <strong>Unreal Development Kit (UDK)</strong>.</p>



            <p>If you are looking for the Unreal Engine 4 documentation, please visit the <a style="color:#000;" href="https://docs.unrealengine.com">Unreal Engine 4 Documentation</a> site.</p>

        </div>

        <div style="height:20px;padding:4px;margin:6px;border-top:1px solid #a0a0a0;">

            <form onsubmit="return closeVersionMessage();">

                <input type="checkbox" id="dismiss" value="dismiss" />

                <label for="dsimiss">Don't show me this again</label>

                <input type="submit" value="Close" style="cursor:pointer;float:right;width:60px;color:#f0f0f0;font-weight:bold;background:#882222;height:24px;padding:2px 3px 3px;text-align:center;border:1px outset #000;" />

            </form>

        </div>

    </div>

</div>



<script type="text/javascript">

    window.onload = function () {

        LoadVersionMessage();

    }



    function LoadVersionMessage()

    {

        var showMessage = "false";
        if(showMessage != "false")

        {

            showVersionMessage();

        }

    }



    function showVersionMessage()

    {

        var message = document.getElementById("version_message");

        if(message)

        {

            message.style.display = "block";

        }

    }



    function closeVersionMessage() {

        var dismiss = document.getElementById("dismiss");

        var message = document.getElementById("version_message");

        if (message) {

            message.style.display = "none";

        }

        if (dismiss.checked) {

            eraseCookie("doc_version_message");

            createCookie("doc_version_message", "false", 365);

            dismiss.checked = false;

        }

        return false;

    }



    function createCookie(name, value, days) {

        if (days) {

            var date = new Date();

            date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));

            var expires = "; expires=" + date.toGMTString();

        }

        else var expires = "";

        document.cookie = name + "=" + value + expires + "; path=/";

    }



    function readCookie(name) {

        var nameEQ = name + "=";

        var ca = document.cookie.split(';');

        for (var i = 0; i < ca.length; i++) {

            var c = ca[i];

            while (c.charAt(0) == ' ') c = c.substring(1, c.length);

            if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);

        }

        return null;

    }



    function eraseCookie(name) {

        createCookie(name, "", -1);

    }

</script>



<!-- END UE4 NOTICE -->



</div></div><div id="footer"><div style="BACKGROUND-COLOR: transparent; margin: 0; padding: 0; width: 100%;"><div>&nbsp;</div><div style="float: left; text-align: left; vertical-align: bottom; width: 50%;"><a href="http://www.videogamevoters.org"><img src="rsrc/vgvn.jpg" border="0" width="234" height="60" alt="Video Game Voters Network" /></a></div><div style="float: right; text-align: right; vertical-align: bottom; width: 50%;">Copyright &copy; 2001-2012 <a href="http://www.epicgames.com" target="_top">Epic Games, Inc.</a><br /><a href="../Main/TermsAndConditions.html" class="twikiLink">Terms and Conditions</a><br /><a href="http://epicgames.com/privacynotice" target="_top">Privacy Notice</a></div></div></div></div>
<p />
</html></body>
