<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
	"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title> UDK | LightingReference    </title>

<style type="text/css" media="all">@import "rsrc/twiki_webs.css";</style>
<style type="text/css" media="all">@import "rsrc/udn_new.css";</style>
<link rel="icon" href="rsrc/Three/WebPreferences/favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="rsrc/Three/WebPreferences/favicon.ico" type="image/x-icon" />


<!-- view.static_udn3.tmpl  -->
<script language="JavaScript" type="text/javascript" src="rsrc/udn.js"></script>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

</head>
<p />
<body id="webbgThree">
<p />

<p />
<div id="webThree"><div id="head">
<!--
<div class="header">
 -->
<div style="background: url(/pub/webbg_udn.jpg); background-repeat: no-repeat; height:140px; width: 100%;" >
<!--
<div style="background: transparent url(/pub/udn_header_bg.jpg); background-repeat: repeat-x; height:140px; width: 100%; margin-left: 991px;">
 -->
<p />
<div id="nav">
<ul class="nav">
<font color=black>|</font>&nbsp;&nbsp;<li class=nav_Three><a href="../Main/WebHome.html" class="twikiLink">Main</a></li><font color=black>|</font><li class=nav_Three><a href="../Two/WebHome.html" class="twikiLink">UnrealEngine2</a></li><font color=black>|</font><li class=nav_Three><a href="WebHome.html" class="twikiLink">UnrealEngine3</a></li><font color=black>|</font><li class=nav_Three><a href="https://docs.unrealengine.com" class="twikiLink">UnrealEngine4</a></li><font color=black>|</font><li class=nav_Three><a href="../Main/BusinessAndLegal.html" class="twikiLink">Business &amp; Legal</a></li><font color=black>|</font>
</ul><br><br><br>
</div>
</div>
</div> <!-- end head -->
<div id="pagedefault">
<div id="maincol">
<div id="tool">
<div id="tooltop">UDN</div>
<div id="tooltext" style="padding: 10px 10px 10px 10px;">
Search public documentation: <br>
<form ACTION="/search/index.php" METHOD="GET" NAME="main" ID="main">
<input TYPE="TEXT" NAME="q" SIZE="15" STYLE="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: xx-small;">
<input TYPE="SUBMIT" VALUE="Search" STYLE="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: xx-small;"><br>
</form>
</div>
<div id="toolband">LightingReference  </b></div>
<div id="tooltext">
<a href="LightingReferenceJP.html" class="twikiLink">日本語訳</a><br><a href="LightingReferenceCH.html" class="twikiLink">中国翻译</a><br><a href="LightingReferenceKR.html" class="twikiLink">한국어</a><br>

<!-- Three/LightingReference -->
<hr size="1" noshade="noshade" />
Interested in the Unreal Engine? <br>
Visit the <a href="http://www.unrealtechnology.com" target="_top">Unreal Technology</a> site.<br>
<br>
Looking for jobs and company info? <br>
Check out the <a href="http://www.epicgames.com" target="_top">Epic games</a> site.<br>
<br>
Questions about support via UDN? <br>
Contact the <a href="../Main/ContactUDNStaff.html" class="twikiLink">UDN Staff</a> <br>
<br>
</div> <!-- end toolbox content -->
<div id="toolbottom"></div>
</div> <!-- end tool -->
<p />
<noautolink>
<p />
<div style="padding:0px 0px 0px 4px;font:10px Verdana;">
<b><a href="WebHome.html" class="twikiLink">UE3 Home</a></b> &gt; <b><a href="LightingAndShadowsHome.html" class="twikiLink">Lighting &amp; Shadows</a></b> &gt; Lighting Reference <br/>
<b><a href="WebHome.html" class="twikiLink">UE3 Home</a></b> &gt; <b><a href="LevelDesignerHome.html" class="twikiLink">Level Designer</a></b> &gt; Lighting Reference <br/>
<b><a href="WebHome.html" class="twikiLink">UE3 Home</a></b> &gt; <b><a href="LightingArtistHome.html" class="twikiLink">Lighting Artist</a></b> &gt; Lighting Reference
</div>
<hr size="1" noshade="noshade">
<h1><a name="Lighting Reference"></a> Lighting Reference </h1>
<hr size="1" noshade="noshade">
<p />
<div class="twikiToc"> <ul>
<li> <a href="LightingReference.html#Lighting Reference"> Lighting Reference</a> <ul>
<li> <a href="LightingReference.html#Overview"> Overview</a>
</li> <li> <a href="LightingReference.html#Legacy options"> Legacy options</a>
</li> <li> <a href="LightingReference.html#Overview of Light Types and Options"> Overview of Light Types and Options</a> <ul>
<li> <a href="LightingReference.html#Global Light Properties"> Global Light Properties</a>
</li> <li> <a href="LightingReference.html#PointLight"> PointLight</a> <ul>
<li> <a href="LightingReference.html#PointLightMovable">PointLightMovable</a>
</li> <li> <a href="LightingReference.html#PointLightToggleable">PointLightToggleable</a>
</li></ul>
</li> <li> <a href="LightingReference.html#Spotlight"> Spotlight</a> <ul>
<li> <a href="LightingReference.html#SpotLightMovable">SpotLightMovable</a>
</li> <li> <a href="LightingReference.html#SpotlightToggleable">SpotlightToggleable</a>
</li></ul>
</li> <li> <a href="LightingReference.html#DirectionalLight"> DirectionalLight</a> <ul>
<li> <a href="LightingReference.html#DirectionalLightToggleable"> DirectionalLightToggleable</a>
</li></ul>
</li> <li> <a href="LightingReference.html#Skylight"> Skylight</a>
</li></ul>
</li> <li> <a href="LightingReference.html#LightingChannels"> LightingChannels</a> <ul>
<li> <a href="LightingReference.html#LightAffectsClassification"> LightAffectsClassification</a>
</li></ul>
</li> <li> <a href="LightingReference.html#Light Functions"> Light Functions</a> <ul>
<li> <a href="LightingReference.html#SourceMaterial"> SourceMaterial</a>
</li> <li> <a href="LightingReference.html#Scale"> Scale</a>
</li></ul>
</li> <li> <a href="LightingReference.html#Lightmaps"> Lightmaps</a> <ul>
<li> <a href="LightingReference.html#LightComponent._UseDirectLightMap"> UseDirectLightMap</a>
</li> <li> <a href="LightingReference.html#PrimitiveComponent.b_ForceDirectLightMap"> PrimitiveComponent.bForceDirectLightMap</a>
</li></ul>
</li> <li> <a href="LightingReference.html#LightVolumes"> LightVolumes</a>
</li> <li> <a href="LightingReference.html#Primitive Lighting Options"> Primitive Lighting Options</a> <ul>
<li> <a href="LightingReference.html#Lighting Subdivisions"> Lighting Subdivisions</a>
</li> <li> <a href="LightingReference.html#Primitive Lighting Channels"> Primitive Lighting Channels</a>
</li></ul>
</li> <li> <a href="LightingReference.html#Moving Lights And What Occurs"> Moving Lights And What Occurs</a>
</li></ul>
</li></ul>
</div>
<p />
<h2><a name="Overview"></a> Overview </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
In Unreal Engine 3, we place light actors in the world to illuminate our scenes and characters. To manage the behavior of these lights we have created a number of different classes of lights and options to control them. These options give us a very broad spectrum of usage cases ranging from very simple baked lighting to very complex dynamic lighting. The kind of lighting you choose may vary based on the requirements of your project. This guide will serve to explain the various options so that you can understand the limitations and tradeoffs between different lighting options and make the most appropriate choices. We will also attempt to give rough estimates of the performance cost associated with enabling certain options.
<p />
<h2><a name="Legacy options"></a> Legacy options </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
The options on this page are accurate but not all relevant anymore.  UE3 lighting has undergone several revisions and old lighting options have to be supported to maintain backwards compatibility.  For static lighting, the current state of the art is to use <a href="DominantLights.html" class="twikiLink">DominantLights</a> in conjunction with <a href="Lightmass.html" class="twikiLink">Lightmass</a>.  For moving objects, <a href="LightEnvironments.html" class="twikiLink">LightEnvironments</a> are the way to go.
<p />
<h2><a name="Overview of Light Types and Options"></a> Overview of Light Types and Options </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
<h3><a name="Global Light Properties"></a> Global Light Properties </h3>
Here is a quick rundown of the most common light properties. A pointlight is used as it is the most general case light. Note will be made where an option does not apply to all light types.
<p />
<img alt="PointlightProperties.jpg" src="rsrc/Three/LightingReference/PointlightProperties.jpg" />
<p />
<strong>bCastCompositeShadow:</strong> This option affects <a href="LightEnvironments.html" class="twikiLink">LightEnvironments</a>.
<p />
<strong>bEnabled:</strong> This allows you to toggle a light on and off. Static lights cannot be toggled in game, but this flag is useful to toggle while editing lights if you want to quickly see how much affect it has on the scene.
<p />
<strong>bForceDynamicLight:</strong> Setting this option will preclude any precomputation for that light (no Lightmaps or ShadowMaps), forcing it to be a dynamic light casting stencil shadows. This has no affect for <a href="LightingReference.html#Skylight" class="twikiAnchorLink">SkyLights.</a> For more about stencil shadows check out the <a href="ShadowingReference.html#Shadow_Buffer_Shadows" class="twikiAnchorLink">ShadowingReference Document.</a>
<p />
<p />
<strong>bOnlyAffectSameAndSpecifiedLevels:</strong> With this option, a light will only affect actors that are in the same streaming level. This is sometimes useful if you want light influences to be per level. You can also add other levels to affect in the OtherLevelsToAffect array.
<p />
<strong>Brightness:</strong> Simply controls the brightness of the light. There is no upper limit to brightness, but we recommend staying below a brightness of 16 for lightmap lights as you will sacrifice range in your lightmaps if the brightness goes much higher.
<p />
<strong>bUseVolumes:</strong> Allows you to Limit a lights influence to within a volume placed in the world. Refer to <a href="LightingReference.html#LightVolumes" class="twikiAnchorLink">below</a> for a complete explanation of Light Volumes.
<p />
<strong>CastDynamicShadows:</strong> If a light is affecting dynamic actors, this flag tells the light if it should cast a dynamic shadow or not. It is always better for performance to set this to false. This has no affect for <a href="LightingReference.html#Skylight" class="twikiAnchorLink">SkyLights.</a>
<p />
<strong>CastShadows:</strong> If set to False, this option will override <em>CastDynamicShadows</em> and <em>CastStaticShadows</em>. If it is set to true, then the other two options will control static and dynamic shadowing. This has no affect for <a href="LightingReference.html#Skylight" class="twikiAnchorLink">SkyLights.</a>
<p />
<strong>CastStaticShadows:</strong> This tells a light weather or not to cast a shadow from static geometry. It is often useful to disable static shadowing for static fill lights. These are often used to fake bounce lighting. This has no affect for <a href="LightingReference.html#Skylight" class="twikiAnchorLink">SkyLights.</a>
<p />
<strong>ExclusionVolumes:</strong> This array refers to the option bUseVolumes. Refer to <a href="LightingReference.html#LightVolumes" class="twikiAnchorLink">below</a> for a complete explanation of Light Volumes.
<p />
<strong>FalloffExponent:</strong> This allows you to modify the falloff of a light. The default falloff is 2. The smaller the number, the sharper the falloff and the more the brightness is maintained until the radius is reached.
<p />
<img alt="FalloffExponent.jpg" src="rsrc/Three/LightingReference/FalloffExponent.jpg" />
<p />
FalloffExponent has no affect for <a href="LightingReference.html#DirectionalLight" class="twikiAnchorLink">DirectionalLights</a> or <a href="LightingReference.html#Skylight" class="twikiAnchorLink">SkyLights.</a>
<p />
<strong>Function:</strong> A LightFunction allows you to modify a light by combining its effect with an emissive material. Refer to <a href="LightingReference.html#LightFunctions" class="twikiAnchorLink">below</a> for a complete explanation of Light Functions.
<p />
<strong>InclusionVolumes:</strong> This array refers to the option bUseVolumes. Refer to <a href="LightingReference.html#LightVolumes" class="twikiAnchorLink">below</a> for a complete explanation of Light Volumes.
<p />
<strong>LightAffectsClassification (LAC):</strong> We have created a few classifications of lights which are basically just presets of light properties. The classification will draw on the sprite icon to make it easy to spot different light types when flying around a level in the editor (for instance, in the falloff image above, the S on the light icons represents a static light). Refer to <a href="LightingReference.html#LightAffectsClassification" class="twikiAnchorLink">below</a> for a complete explanation of LACs.
<p />
<strong>LightColor:</strong> Simply controls the color of a light.
<p />
<img alt="lightcolor.jpg" src="rsrc/Three/LightingReference/lightcolor.jpg" />
<p />
There are three ways to choose a light color: <ol>
<li> Manually enter the color values for R G B. These values range from 0 through 255.
</li> <li> Use the color picker (button above the red arrow).
</li> <li> Pick a color from an editor viewport (button above the blue arrow).
</li></ol>
<p />
<strong>LightingChannels:</strong> We use lighting channels to control the influences between lights and primitives. This functionality replaces the previous light exclusion functionality. Refer to <a href="LightingReference.html#LightingChannels" class="twikiAnchorLink">below</a> for a complete explanation of Lighting Channels.
<p />
<strong>LightShadowMode:</strong> This option allows you to pick between regular shadowing and modulated shadowing for a dynamic light. <a href="ModulatedShadows.html" class="twikiLink">ModulatedShadows</a> allow for a dynamic shadow to be cast even on a completely Light-Mapped surface.
<p />
Refer to the <a href="ShadowingReference.html#Shadow_Buffer_Shadows" class="twikiAnchorLink">ShadowingReference</a> for a complete explanation of the various types of dynamic shadowing and how to choose between them. This has no affect for <a href="LightingReference.html#Skylight" class="twikiAnchorLink">SkyLights.</a>
<p />
<strong>ModShadowColor:</strong> If using modulated shadows, this controls the shadow color. Refer to the <a href="ShadowingReference.html#Shadow_Buffer_Shadows" class="twikiAnchorLink">ShadowingReference</a> and <a href="ModulatedShadows.html" class="twikiLink">ModulatedShadows</a> for a complete explanation of the various types of dynamic shadowing and how to choose between them.
<p />
<strong>OtherLevelsToAffect:</strong> This option refers back to bOnlyAffectSameAndSpecifiedLevels. If bOnlyAffectSameAndSpecifiedLevels is true, lights will also affect levels which are added to the OtherLevelsToAffect array.
<p />
<strong>Radius:</strong> This controls the maximum radius of a light. Radius has no affect for <a href="LightingReference.html#DirectionalLight" class="twikiAnchorLink">DirectionalLights</a> or <a href="LightingReference.html#Skylight" class="twikiAnchorLink">SkyLights.</a> <a href="LightingReference.html#Spotlight" class="twikiAnchorLink">SpotLights</a> use radius but they also have additional options to control cone and falloff, which work in tandem with the radius.
<p />
<strong>ShadowFalloffExponent:</strong> This works just like the FalloffExponent, but this controls the falloff of a modulated shadow. Refer to <a href="ShadowingReference.html#Shadow_Buffer_Shadows" class="twikiAnchorLink">ShadowingReference</a> for a complete explanation modulated shadows and how you might use this option.
<p />
<strong>ShadowProjectionTechnique:</strong> This chooses the shadow buffer filtering method for the current light.  See <a href="https://udn.epicgames.com/Three/ShadowBufferFilteringOptions" class="restricted" class="restricted" class="twikiLink">ShadowBufferFilteringOptions</a> for more info.
<p />
<strong>Translation:</strong> This allows the light source to be translated away from the actual light actor in relative units. This is in place to allow coders to modify a light source, there is no real reason for a content person to modify the translation of a light.
<p />
<strong>UseDirectLightMap:</strong> If this is set to true, the light will be baked into a lightmap for all static primitives it affects. Lightmaps are the cheapest kind of lighting in UnrealEngine3. At E3 2006, both Gears of War and UT2007 exclusively used lightmaps for the static parts of the environments. Refer to <a href="LightingReference.html#Lightmaps" class="twikiAnchorLink">below</a> for a complete section on lightmaps and the tradeoffs you make to choose them.
<p />
<h3><a name="PointLight"></a> PointLight </h3>
<img alt="PointLights.jpg" src="rsrc/Three/LightingReference/PointLights.jpg" />
<p />
A PointLight is a light that illuminates in all directions, radiating from a point in space.
<p />
In the actor browser, you will see there are three different classes for pointlight. Regular PointLights cannot be moved or toggled ingame; they are completely static. Thankfully, we have two additional classes which provide this functionality as needed.
<p />
<img alt="lightclasses.jpg" src="rsrc/Three/LightingReference/lightclasses.jpg" />
<p />
<h4><a name="PointLightMovable"></a> PointLightMovable </h4>
The same as a regular PointLight but you can move its location ingame using matinee. To do this, simply hook up the PointLight to a group in Matinee and create a float property track for it. You can also toggle a PointLightMovable on and off ingame using kismet. A PointLightMovable cannot use <a href="LightingReference.html#Lightmaps" class="twikiAnchorLink">Lightmaps.</a>
<p />
<h4><a name="PointLightToggleable"></a> PointLightToggleable </h4>
This is the same as a regular PointLight but you can toggle it on and off ingame using kismet. You cannot move a PointlightToggleable ingame. A PointLightToggleable cannot use <a href="LightingReference.html#Lightmaps" class="twikiAnchorLink">Lightmaps.</a>
<p />
<h3><a name="Spotlight"></a> Spotlight </h3>
A SpotLight is a directional cone of light.
<p />
<img alt="SpotLightComponents.jpg" src="rsrc/Three/LightingReference/SpotLightComponents.jpg" />
<p />
<strong>InnerConeAngle</strong>
<p />
This determines the angle in degrees from the center for the "hot spot" of the SpotLight. Default is 1.0 degrees.  The Maximum is 89.0 degrees.
<p />
Brightness is consistent throughout the hot spot, then fades off to the end of the light's effect.  This is illustrated below.  The top SpotLight has an InnerConeAngle of 0 degrees, which results in a smooth gradation from bright (center of light's effect) to dark (edge of light's effect).  The bottom SpotLight has in InnerConeAngle of 40 degrees, which results in a light effect that is consistently bright for most of the effect and fades off quickly at the edges.
<p />
<img alt="InnerConeAngle.jpg" src="rsrc/Three/LightingReference/InnerConeAngle.jpg" />
<p />
<strong>OuterConeAngle</strong>
<p />
This determines the angle in degrees from the center of the SpotLight to the outer edge of the light's effect .  Default is 44.0 degrees.  The maximum is 89.0 degrees.
<p />
<em>Note:</em> If the OuterConeAngle is less than the InnerConeAngle, the resulting light will have a sharp crisp edge.
<p />
<img alt="SpotLightCrisp.jpg" src="rsrc/Three/LightingReference/SpotLightCrisp.jpg" />
<p />
<strong>Radius</strong>
<p />
This determines the distance of the reach of the SpotLight.  Default is 1024.0.
<p />
<p />
The diagram below helps illustrate the relationship of the SpotLight properties:
<p />
<img alt="SpotDiagram.jpg" src="rsrc/Three/LightingReference/SpotDiagram.jpg" />
<p />
In the actor browser, you will see there are three different classes for SpotLight. Regular SpotLights cannot be moved or toggled ingame; they are completely static. Thankfully, we have two additional classes which provide this functionality as needed.
<p />
<img alt="lightclasses.jpg" src="rsrc/Three/LightingReference/lightclasses.jpg" />
<p />
<p />
<h4><a name="SpotLightMovable"></a> SpotLightMovable </h4>
The same as a regular SpotLight but you can move its location ingame using matinee. To do this, simply hook up the SpotLight to a group in Matinee and create a float property track for it. You can also toggle a SpotLightMovable on and off ingame using kismet. A SpotLightMovable cannot use <a href="LightingReference.html#Lightmaps" class="twikiAnchorLink">Lightmaps.</a>
<p />
<h4><a name="SpotlightToggleable"></a> SpotlightToggleable </h4>
This is the same as a regular SpotLight but you can toggle it on and off ingame using kismet. You cannot move a SpotLightToggleable ingame. A SpotLightToggleable cannot use <a href="LightingReference.html#Lightmaps" class="twikiAnchorLink">Lightmaps.</a>
<p />
<h3><a name="DirectionalLight"></a> DirectionalLight </h3>
<p />
<img alt="pcShadows.jpg" src="rsrc/Three/LightingReference/pcShadows.jpg" />
<p />
A DirectionalLight is a light source that emits parallel rays of light in a specific direction.  DirectionalLights simulate the light from the sun or other heavenly bodies (such as the moon).
<p />
<strong>Note:</strong> A DirectionalLight points directly downward by default.  This default angle can cause z-fighting with objects and their shadow volumes.  Even if you are lighting for high noon, you should rotate your sun a few degrees to avoid this.
<p />
In the actor browser, you will see there are two different classes for DirectionalLight. Regular DirectionalLights cannot be moved or toggled ingame; they are completely static. Thankfully, we have an additional class which provides this functionality as needed.
<p />
<img alt="lightclasses.jpg" src="rsrc/Three/LightingReference/lightclasses.jpg" />
<p />
<p />
<h4><a name="DirectionalLightToggleable"></a> DirectionalLightToggleable </h4>
This is the same as a regular DirectionalLight but you can toggle it on and off ingame using kismet. You cannot move a DirectionalLightToggleable ingame. A DirectionalLightToggleable cannot use <a href="LightingReference.html#Lightmaps" class="twikiAnchorLink">Lightmaps.</a>
<p />
<h3><a name="Skylight"></a> Skylight </h3>
A SkyLight is a hemispherical light source (imagine a hemisphere around and above your map shining inward) that simulates the scattering of light from the sky.  It cannot be rotated.  It does not cast shadows.
<p />
It is possible to create a character-only skylight using <a href="LightingReference.html#LightingChannels" class="twikiAnchorLink">Lighting Channels.</a> This is a relatively cheap and easy way of giving your character a constant ambient color so that you don't have to place as many character fill lights as pointlights in the world.
<p />
<h2><a name="LightingChannels"></a> LightingChannels </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
Lighting Channels replace the previous `Light Exclusion' functionality that allowed you to exclude a light from a primitive on a per-object basis.
<p />
We use lighting channels to control the influences between all lights and primitives. Both lights and primitives share the same Lighting Channel options. Here is what the LightingChannels look like for lights (located under LightComponent.LightingChannels):
<p />
<img alt="lightingchannels_light.jpg" src="rsrc/Three/LightingReference/lightingchannels_light.jpg" />
<p />
<p />
Here is what the LightingChannels look like for static meshes (located under StaticMeshComponent.Lighting.LightingChannels):
<p />
<img alt="lightingchannels_primitive.jpg" src="rsrc/Three/LightingReference/lightingchannels_primitive.jpg" />
<p />
<p />
Anytime there is an overlapping channel between a light and a primitive, the light will affect the primitive. It does not matter if there is one channel overlap or all 8 channels overlapping.
<p />
These are the default Lighting Channel settings for various primitives:
<p />
BSP is only in the BSP channel and this cannot be modified.
<p />
Static Meshes default to being in the Static Channel.
<p />
Dynamic actors (characters, rigid bodies, interpactors, etc) default to being in the dynamic channel.
<p />
The rest of the lighting channels are unused by default and are available to use for multiple lighting setups. For instance, one trick that we use sometimes is to put all foliage in one of the unnamed channels, and then add a directional light to the level which is only in that unnamed lighting channel and is set to not cast shadows. This directional light can then be used to modify the color of the foliage in the level.
<p />
To illustrate the affect of lighting channels, look at the image below. In this image, the blue light on the left is only in the BSP channel, while the orange light on the right is in both the BSP and Static lighting channels. Notice that the BSP floor is receiving both lights, while the static mesh is only receiving the orange light since it is a static mesh and only in the static channel.
<p />
<img alt="lightingchannels_stairs.jpg" src="rsrc/Three/LightingReference/lightingchannels_stairs.jpg" />
<p />
<p />
<h3><a name="LightAffectsClassification"></a> LightAffectsClassification </h3>
<p />
Lights now have a:  Light Affects Classification.  An LAC is a set of "presets" that are applied to a light's LightComponent.  So instead of manually setting light flags (e.g. CastDynamicShadows) you now simply:
    1 Select the light
    1 Right click
    1 Set what this Light Affects and then choose one of the options on that menu.  (Affecting only Dynamic Objects, Affecting only Static Objects, Affecting both Dynamic and Static Objects )
<p />
The light will now be set to the flags which are appropriate for that that type of light for that specific classification.
<p />
The high level idea here is to have the defaults for lights be performance friendly and make sense for what that light is commonly utilized for.
<p />
Lights are now broadly categorized into the following sets:
<p />
0) Lights which affect Dynamic Primitives in the world.  ( characters, movers, vehicles, physic objects bouncing around, projectiles )
<p />
1) Lights which affect Static Primitives in the world.  ( static meshes that have been placed, BSP which has been placed )
<p />
2) Lights which affect both Dynamic and Static Primitives in the world.
<p />
3) Lights which the user has set flags which do not match any of the above.
<p />
Each of the above categories is shown via a Letter on the Light Sprite Icon in the editor.
<pre>
Affects Dynamics: D
Affects Statics:  S
Affects Dynamics and Statics:  D/S
User Selected:    U

A nice way to think about lights is the following:

How cast light  Light Mobility / OnOffness      What it Affects
Directional     Stationary                      UserSelected
Point           Toggleable                      Dynamics
Spot            Moveable (implies toggleable)   Statics and DynamicsAndStatics
</pre>
<p />
<p />
Those three categories map directly to the types of lights one places in a level.
<p />
<p />
With the new LAC settings the goal is to look at a level and see:
<p />
-LOTS of S classified lights.   These are the lights one uses to light the level for basically no performance cost as the lighting is baked into the level.
<p />
-1-2 DynamicAndStatic affecting lights per "scene" (these will probably be your directional lights which represent the sun or the major light source which is "tying" the scene together)
<p />
-a small number of D classified lights per "area" which are small radius / cone and there for the doing nice window lighting, or computer screen glow
<p />
-a number of U classified lights where there was a special need to go away from the norm.
<p />
<h2><a name="Light Functions"></a> Light Functions </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
<img alt="LightFunctionCombo.jpg" src="rsrc/Three/LightingReference/LightFunctionCombo.jpg" />
<p />
A LightFunction allows you to modify your light by combining its effect with an emissive material.  For more on material creation take a look at the <a href="MaterialsTutorial.html" class="twikiLink">MaterialsTutorial.</a>  The material is projected by the light in the same manner in which it projects light--PointLights project in all directions, SpotLights project the material in a cone, etc.  This flexible technique can be used to create all manner of effects from disco ball reflections to light shining in from a stained-glass window.
<p />
<strong>Note:</strong>  If the material used does not have an emissive component, the light will go black.
<p />
<strong>Note:</strong>  For a material to work as a light function, it must have bUsedAsLightFunction=True set in the material properties.
<p />
<img alt="LightFunction.jpg" src="rsrc/Three/LightingReference/LightFunction.jpg" />
<p />
Clicking "New" under Function will bring up two new properties:
<p />
<strong>Note:</strong>  In the past light functions usually got cut because they cost too much GPU time.  Most of the cost is overhead based on the number of lights with a normal shadow or light function active.  With dominant lights, we are already paying this overhead so the only extra cost of having a light function is applying the light function material to the screen.  If you have a simple material with 1 or 2 texture lookups this takes about 1ms, so it is fairly cheap (this is about how much one layer of height fog costs, or 1/3rd of SSAO).  A light function on a normal light costs the 1ms to apply the material plus a per-light overhead of about 1.5ms.
<p />
<h3><a name="SourceMaterial"></a> SourceMaterial </h3>
This is the material to be applied to the light.  Select it in the GenericBrowser and hit "Use."
<p />
<h3><a name="Scale"></a> Scale </h3>
The material can be scaled in the X, Y, and Z dimensions.
<p />
Generally you use the <code>LightVector</code> expression in the material editor to do mapping.  For point lights, just use <code>LightVector</code> to index into a cube map.  For spot lights, people usually use <code>(LightVector.rg/LightVector.b+1)/2</code> to index into a 2d texture, although this doesn't take the spot light's cone angle into account, and some further fudging will be required.  For directional lights, you may want to try using the <code>TextureCoordinates</code> expression.
<p />
<h2><a name="Lightmaps"></a> Lightmaps </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
<img alt="LightMapVsShadowMap.jpg" src="rsrc/Three/LightingReference/LightMapVsShadowMap.jpg" />
<p />
Light-maps can be used to approximate the effect of many lights on a surface with constant storage size and rendering time. Lightmaps in Unreal Engine 3 still take advantage of the normal map and specular qualities in a material, but lighting is baked as generalized from three directions.
<p />
<table cellspacing="1" cellpadding="1" class="twikiTable" border="0"><tr><td bgcolor="#eaeaea" class="twikiFirstCol"> &nbsp; </td><td bgcolor="#eaeaea"> Shadow-maps </td><td bgcolor="#eaeaea"> Light-maps </td></tr>
<tr><td bgcolor="#ffffff" class="twikiFirstCol"> Rendering </td><td bgcolor="#ffffff"> A primitive is re-rendered for each shadow-mapped light affecting it </td><td bgcolor="#ffffff"> All light-mapped lights affecting a primitive can be rendered in a single pass </td></tr>
<tr><td bgcolor="#eaeaea" class="twikiFirstCol"> Storage </td><td bgcolor="#eaeaea"> A separate shadow-map is stored for each light affecting a primitive </td><td bgcolor="#eaeaea"> A single light-map is stored for each primitive </td></tr>
<tr><td bgcolor="#ffffff" class="twikiFirstCol"> Dynamic shadows </td><td bgcolor="#ffffff"> Yes </td><td bgcolor="#ffffff"> No </td></tr>
</table>
<p />
Because a light-map doesn't keep each light's effect on the primitive separate, it cannot mask out individual lights with dynamic shadows cast by that light.  Because of this, light-maps should only be used on lights which don't cast dynamic shadows.
<p />
The recommended way to use light-maps is to have only the brightest lights in a scene use shadow-maps and dynamic shadows, and use light-maps for all the secondary lights in the scene.
<p />
<h3><a name="LightComponent._UseDirectLightMap"></a> LightComponent.UseDirectLightMap </h3>
<p />
If a light has UseDirectLightMap=True, the light reaching a primitive directly from the light will be stored in the primitive's light-map.  The default is True for static lights.
<p />
<h3><a name="PrimitiveComponent.b_ForceDirectLightMap"></a> PrimitiveComponent.bForceDirectLightMap </h3>
<p />
If a primitive has bForceDirectLightMap=True, all lights hitting the primitive will behave as if they had UseDirectLightMap=True set.  This is useful as an optimization for primitives where the difference between shadow-maps and light-maps isn't noticeable even for the brightest lights.  The default is true.
<p />
<h2><a name="LightVolumes"></a> LightVolumes </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
Light volumes allow you to restrict a light to only influence actors that are within certain volumes (inclusion volumes), or restrict a light from affecting actors in certain volumes (exclusion volumes).  For this to work, bUseVolumes must be True.
<p />
There are two cases that slightly change the way LightVolumes work.
<p />
1)   If a light has bUseVolumes true and only has volumes listed under the InclusionVolumes array, then the light will be restricted within those volumes and will not affect actors that are outside of those volumes.
<p />
2)   If a light has bUseVolumes true and only has volumes listed under the ExclusionVolumes array, then the light will be restricted to affect actors everywhere except within those volumes.
<p />
In the following example image, the pointlight has bUseVolumes=True and then lists one volume under InclusionVolumes. This volume is just around the light, but the bottom of the volume extends to below the BSP floor. After rebuilding lighting, notice how the static mesh is not receiving any light, even though it is clearly within the radius of the pointlight. Since the volume extends below the BSP floor, the BSP is included in the lights influence.
<p />
<img alt="lightvolumes.jpg" src="rsrc/Three/LightingReference/lightvolumes.jpg" />
<p />
<p />
Light Volumes are applied on top of any existing <a href="LightingReference.html#LightingChannels" class="twikiAnchorLink">Lighting Channel</a> settings.
<p />
<h2><a name="Primitive Lighting Options"></a> Primitive Lighting Options </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
Most of this guide has focused on settings associated with Light Actors, but Primitives have important lighting options as well.
<p />
<img alt="primitivelightingoptions.jpg" src="rsrc/Three/LightingReference/primitivelightingoptions.jpg" />
<p />
<p />
<strong>bAcceptsDynamicLights:</strong> This determines weather or not a primitive will receive dynamic lights during the game. An example of this would be the muzzle flash of a gun illuminating the scene. You might opt to set this to be false for small decorative objects in order to optimize the dynamic lighting in your game.
<p />
<strong>bAcceptsLights:</strong> Turning this off will make an object receive no lighting, regardless of any other options. This should be set to false for static meshes that use only unlit materials.
<p />
<strong>bCastDynamicShadow:</strong> If this is true, a static mesh will cast a dynamic shadow. This includes casting a dynamic shadow onto players. This defaults to false for performance reasons.
<p />
<strong>bForceDirectLightMap:</strong> If this is true, all lights affecting this primitive will be converted into lightmaps. This is the most performance friendly option and the default is true for performance reasons.
<p />
<strong>bUsePrecomputedShadows:</strong> If this is set to false, the static mesh will not rebuild lighting and will be considered dynamic. This should never be set to false unless you have a very special case and know exactly what you are doing. The default is true.
<p />
<strong>CastShadow:</strong> This determines weather or not a static mesh will cast a shadow. If this is false, it will override CastDynamicShadows.
<p />
<strong>bOverrideLightMapResolution:</strong> If this is set to true, then the field below (OverriddenLightMapResolution) will override the lightmap resolution specified for a given static mesh in its properties. <em>Note that this refers to the static mesh properties as accessed by double clicking the static mesh in the Generic Browser.</em> If this is false, then the static meshes default lightmap resolution will by used. The default is true.
<p />
<strong>OverriddenLightMapResolution:</strong> if bOverrideLightMapResolution is true, then this number is used to determine the resolution used for rendering either a LightMap or a ShadowMap for the static mesh. If this is set to 0 vertex lighting will be used. The default is 0 for memory reasons.
<p />
<h3><a name="Lighting Subdivisions"></a> Lighting Subdivisions </h3>
In Unreal Engine 2, all static meshes used vertex lighting. With low polygon objects, vertex lighting often introduces unsightly artifacts if a single vertex happens to be completely shadowed by a thin object (such as a wire).
<p />
Unreal Engine 3 addresses this issue by subdividing the lighting traces on objects. This prevents harsh shadow bugs. These settings only take effect when lighting is rebuilt. The more subdivisions you use, the longer rebuilding lighting will take.
<p />
<strong>bUseSubDivisions:</strong> Defaults to True. If this is false, none of the other AdvancedLighting options will have an effect.
<p />
<strong>MaxSubDivisions:</strong> Specifies the maximum number of SubDivisions that will be traced when building lighting for a static mesh.
<p />
<strong>MinSubDivisions:</strong> Specifies the minimum number of subdivisions that will be traced when building lighting for a static mesh.
<p />
<strong>SubDivisionStepSize:</strong> The amount of subdivisions used is biased by the size of the mesh (or rather, distance between vertices). This sets the step size in unreal units for lighting traces. By default, the step size is 16, so a very small mesh will be clamped by the MinSubDivisions, and a very large mesh will subdivide to the amount specified by MaxSubDivisions.
<p />
There are some cases where you might wish to disable subdivisions altogether. A case that comes to mind is in the use of vertex lighting for modular meshes. In this example, the lighting between these modular wall sections must be seamless, but because there is a large shadow affecting the majority of the wall section on the left, subdivisions are averaging that shadow across the mesh. This is a rather extreme example as using a fairly low resolution lightmap in this case fixes the problem and maintains the shadow.
<p />
<img alt="subdivisionseams.jpg" src="rsrc/Three/LightingReference/subdivisionseams.jpg" />
<p />
<h3><a name="Primitive Lighting Channels"></a> Primitive Lighting Channels </h3>
<p />
Refer to the <a href="LightingReference.html#LightingChannels" class="twikiAnchorLink">Lighting Channels</a> Section above for a description of these options.
<p />
<p />
<h2><a name="Moving Lights And What Occurs"></a> Moving Lights And What Occurs </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
When you move a light which is accumulating light into a lightmap OR if your move an object which was lightmapped, then the lightmap(s) which were being affected will be replaced and you will see the scene as if you have not rebuilt lighting.  (e.g.  You have a desk with a Direct Light mapped lamp on it.  Moving that lamp will invalidate the lightmap and then update in real time so you can see a good approximation of it instead of having to rebuild lighting.)   This increases iteration time for the content teams.
<p />
<noautolink>
</noautolink>
<p />
<p />
<p />
<p />
<p />
<p />


<!-- BEGIN UE4 NOTICE -->



<div id="version_message" style="display:none;">

    <div style="position:fixed;top:0px;left:0px;width:100%;height:100%;background:#000;opacity:0.5;">

    </div>

    <div style="position:fixed;top:50%;left:50%;margin:-70px 0px 0px -240px;background:#FFF;border-radius:6px;width:480px;box-shadow:0px 5px 30px -5px rgba(0,0,0,0.9);">

        <div style="font-size:16px;font-weight:bold;background: url(rsrc/Three/warning.png) no-repeat scroll 5px 5px;padding:4px 10px 5px 25px;height:21px;width:440px;">

            Important!

        </div>

        <div style="font-size:11px;padding:5px 10px 10px;width:460px;">

            <p>You are viewing documentation for the <strong>Unreal Development Kit (UDK)</strong>.</p>



            <p>If you are looking for the Unreal Engine 4 documentation, please visit the <a style="color:#000;" href="https://docs.unrealengine.com">Unreal Engine 4 Documentation</a> site.</p>

        </div>

        <div style="height:20px;padding:4px;margin:6px;border-top:1px solid #a0a0a0;">

            <form onsubmit="return closeVersionMessage();">

                <input type="checkbox" id="dismiss" value="dismiss" />

                <label for="dsimiss">Don't show me this again</label>

                <input type="submit" value="Close" style="cursor:pointer;float:right;width:60px;color:#f0f0f0;font-weight:bold;background:#882222;height:24px;padding:2px 3px 3px;text-align:center;border:1px outset #000;" />

            </form>

        </div>

    </div>

</div>



<script type="text/javascript">

    window.onload = function () {

        LoadVersionMessage();

    }



    function LoadVersionMessage()

    {

        var showMessage = "false";
        if(showMessage != "false")

        {

            showVersionMessage();

        }

    }



    function showVersionMessage()

    {

        var message = document.getElementById("version_message");

        if(message)

        {

            message.style.display = "block";

        }

    }



    function closeVersionMessage() {

        var dismiss = document.getElementById("dismiss");

        var message = document.getElementById("version_message");

        if (message) {

            message.style.display = "none";

        }

        if (dismiss.checked) {

            eraseCookie("doc_version_message");

            createCookie("doc_version_message", "false", 365);

            dismiss.checked = false;

        }

        return false;

    }



    function createCookie(name, value, days) {

        if (days) {

            var date = new Date();

            date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));

            var expires = "; expires=" + date.toGMTString();

        }

        else var expires = "";

        document.cookie = name + "=" + value + expires + "; path=/";

    }



    function readCookie(name) {

        var nameEQ = name + "=";

        var ca = document.cookie.split(';');

        for (var i = 0; i < ca.length; i++) {

            var c = ca[i];

            while (c.charAt(0) == ' ') c = c.substring(1, c.length);

            if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);

        }

        return null;

    }



    function eraseCookie(name) {

        createCookie(name, "", -1);

    }

</script>



<!-- END UE4 NOTICE -->



</div></div><div id="footer"><div style="BACKGROUND-COLOR: transparent; margin: 0; padding: 0; width: 100%;"><div>&nbsp;</div><div style="float: left; text-align: left; vertical-align: bottom; width: 50%;"><a href="http://www.videogamevoters.org"><img src="rsrc/vgvn.jpg" border="0" width="234" height="60" alt="Video Game Voters Network" /></a></div><div style="float: right; text-align: right; vertical-align: bottom; width: 50%;">Copyright &copy; 2001-2012 <a href="http://www.epicgames.com" target="_top">Epic Games, Inc.</a><br /><a href="../Main/TermsAndConditions.html" class="twikiLink">Terms and Conditions</a><br /><a href="http://epicgames.com/privacynotice" target="_top">Privacy Notice</a></div></div></div></div>
<p />
</html></body>
