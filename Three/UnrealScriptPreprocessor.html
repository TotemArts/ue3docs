<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
	"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title> UDK | UnrealScriptPreprocessor    </title>

<style type="text/css" media="all">@import "rsrc/twiki_webs.css";</style>
<style type="text/css" media="all">@import "rsrc/udn_new.css";</style>
<link rel="icon" href="rsrc/Three/WebPreferences/favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="rsrc/Three/WebPreferences/favicon.ico" type="image/x-icon" />


<!-- view.static_udn3.tmpl  -->
<script language="JavaScript" type="text/javascript" src="rsrc/udn.js"></script>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

</head>
<p />
<body id="webbgThree">
<p />

<p />
<div id="webThree"><div id="head">
<!--
<div class="header">
 -->
<div style="background: url(/pub/webbg_udn.jpg); background-repeat: no-repeat; height:140px; width: 100%;" >
<!--
<div style="background: transparent url(/pub/udn_header_bg.jpg); background-repeat: repeat-x; height:140px; width: 100%; margin-left: 991px;">
 -->
<p />
<div id="nav">
<ul class="nav">
<font color=black>|</font>&nbsp;&nbsp;<li class=nav_Three><a href="../Main/WebHome.html" class="twikiLink">Main</a></li><font color=black>|</font><li class=nav_Three><a href="../Two/WebHome.html" class="twikiLink">UnrealEngine2</a></li><font color=black>|</font><li class=nav_Three><a href="WebHome.html" class="twikiLink">UnrealEngine3</a></li><font color=black>|</font><li class=nav_Three><a href="https://docs.unrealengine.com" class="twikiLink">UnrealEngine4</a></li><font color=black>|</font><li class=nav_Three><a href="../Main/BusinessAndLegal.html" class="twikiLink">Business &amp; Legal</a></li><font color=black>|</font>
</ul><br><br><br>
</div>
</div>
</div> <!-- end head -->
<div id="pagedefault">
<div id="maincol">
<div id="tool">
<div id="tooltop">UDN</div>
<div id="tooltext" style="padding: 10px 10px 10px 10px;">
Search public documentation: <br>
<form ACTION="/search/index.php" METHOD="GET" NAME="main" ID="main">
<input TYPE="TEXT" NAME="q" SIZE="15" STYLE="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: xx-small;">
<input TYPE="SUBMIT" VALUE="Search" STYLE="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: xx-small;"><br>
</form>
</div>
<div id="toolband">UnrealScriptPreprocessor  </b></div>
<div id="tooltext">
<a href="UnrealScriptPreprocessorJP.html" class="twikiLink">日本語訳</a><br><a href="UnrealScriptPreprocessorCH.html" class="twikiLink">中国翻译</a><br><a href="UnrealScriptPreprocessorKR.html" class="twikiLink">한국어</a><br>

<!-- Three/UnrealScriptPreprocessor -->
<hr size="1" noshade="noshade" />
Interested in the Unreal Engine? <br>
Visit the <a href="http://www.unrealtechnology.com" target="_top">Unreal Technology</a> site.<br>
<br>
Looking for jobs and company info? <br>
Check out the <a href="http://www.epicgames.com" target="_top">Epic games</a> site.<br>
<br>
Questions about support via UDN? <br>
Contact the <a href="../Main/ContactUDNStaff.html" class="twikiLink">UDN Staff</a> <br>
<br>
</div> <!-- end toolbox content -->
<div id="toolbottom"></div>
</div> <!-- end tool -->
<p />
<noautolink>
<p />
<div style="padding:0px 0px 0px 4px;font:10px Verdana;">
<b><a href="WebHome.html" class="twikiLink">UE3 Home</a></b> &gt; <b><a href="UnrealScriptHome.html" class="twikiLink">UnrealScript</a></b> &gt; UnrealScript Preprocessor (UPP)
</div>
<hr size="1" noshade="noshade">
<h1><a name="UnrealScript Preprocessor (UPP)"></a> UnrealScript Preprocessor (UPP) </h1>
<hr size="1" noshade="noshade">
<p />
<div class="twikiToc"> <ul>
<li> <a href="UnrealScriptPreprocessor.html#UnrealScript Preprocessor (UPP)"> UnrealScript Preprocessor (UPP)</a> <ul>
<li> <a href="UnrealScriptPreprocessor.html#Overview"> Overview</a>
</li> <li> <a href="UnrealScriptPreprocessor.html#The Basics"> The Basics</a>
</li> <li> <a href="UnrealScriptPreprocessor.html#Scope"> Scope</a>
</li> <li> <a href="UnrealScriptPreprocessor.html#Using Macros"> Using Macros</a>
</li> <li> <a href="UnrealScriptPreprocessor.html#Macro Parameters"> Macro Parameters</a>
</li> <li> <a href="UnrealScriptPreprocessor.html#Built-in Macros"> Built-in Macros</a> <ul>
<li> <a href="UnrealScriptPreprocessor.html#define"> define</a>
</li> <li> <a href="UnrealScriptPreprocessor.html#if / else / endif"> if / else / endif</a>
</li> <li> <a href="UnrealScriptPreprocessor.html#include"> include</a>
</li> <li> <a href="UnrealScriptPreprocessor.html#isdefined"> isdefined</a>
</li> <li> <a href="UnrealScriptPreprocessor.html#undefine"> undefine</a>
</li> <li> <a href="UnrealScriptPreprocessor.html#log / warn"> log / warn</a>
</li> <li> <a href="UnrealScriptPreprocessor.html#logd"> logd</a>
</li> <li> <a href="UnrealScriptPreprocessor.html#assert"> assert</a>
</li></ul>
</li> <li> <a href="UnrealScriptPreprocessor.html#Command-line Interactions"> Command-line Interactions</a>
</li></ul>
</li></ul>
</div>
<p />
<h2><a name="Overview"></a> Overview </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
In the Unreal Engine 3, the UnrealScript compiler now supports a preprocessor. The preprocessor works much like the C++ preprocessor and is perfect for supporting conditional compilation via <strong>macros</strong>.
<p />
<h2><a name="The Basics"></a> The Basics </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
Macro processing happens <em>before</em> UnrealScript compilation. Since it is a separate phase it is not connected to the lexical conventions of UnrealScript.
<p />
<h2><a name="Scope"></a> Scope </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
Macros are file-scope, meaning a macro defined on line X of the script class (.uc) file is only usable on lines X+n in that file and not in any other files (unless it is included in another .uc file). However, you can create a Globals.uci file in your project's root folder (i.e. Development\Src\MyProject\Globals.uci), and those macros will be automatically available to all classes in the package.
<p />
<p />
<h2><a name="Using Macros"></a> Using Macros </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
A macro is invited using the <strong>`</strong> (backtick character) before the name of the macro. So, to expand the <strong><em>hello</em></strong> macro with no parameters, the following line would work:
<p />
<pre>
`hello
</pre>
<p />
Equivalently, the name of the macro can be enclosed in { } after the tick as in:
<pre>
`{hello}
</pre>
<p />
This makes it possible to "insert" the expansion of a macro into the middle of text that does not have conveniently placed whitespace:
<pre>
hippo`{hello}potamus
</pre>
<p />
But how does the <strong><em>hello</em></strong> macro get defined? The built-in macro <strong><em>define</em></strong> works very similar to a C++ define: <ol>
<li> the <code><b>`define</b></code> keyword, followed by at least one whitespace character
</li> <li> the name of the new macro (and optionally a function parameter list), followed by at least one whitespace character
</li> <li> the definition of the body of the macro
</li></ol>
<p />
So <strong><em>hello</em></strong> is defined with:
<pre>
`define   hello   &#34;Hello, World!&#34;
</pre>
<p />
Thereafter, <strong><em>`hello</em></strong> is replaced with <strong>"Hello, World!"</strong> (complete with quotes). All results of macro expansion are, again, scanned for opportunities to expand macros. Macro expansions can include macros that will, in turn, be expanded; also means that "infinitely recursive" macros can be written.
<p />
You may embed new lines into macro expansions by using the "\n" notation, which can be helpful for debugging your preprocessor macros, and is essential for working with macros intended to be used in DefaultProperties.  Example:
<p />
<pre>
`define EndComboBox(Name) \
    End Object \n\
    MenuObjects.Add(`Name)
</pre>
<p />
<h2><a name="Macro Parameters"></a> Macro Parameters </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
Macro parameters are passed positionally, in a comma separated list between parentheses right after the name of the macro. The opening parenthesis of this list MUST come immediately after the macro name in order to be recognized as part of the macro call. See the <a href="UnrealScriptPreprocessor.html#define" class="twikiAnchorLink">notes below</a> regarding the built-in macro <strong><em>define</em></strong> for more details about macro parameters.
<p />
<p />
<p />
<h2><a name="Built-in Macros"></a> Built-in Macros </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
<h3><a name="define"></a> define </h3>
<p />
<code><b>`define &lt;macroname&gt;[&lt;(paramA[,paramB...])&gt;] [&lt;macrodefinition&gt;]</b></code><br>
<p />
Defines the named macro to expand to the given definition. If no definition is provided, the macro is defined but expands to the empty string.
<p />
Parameters for the macro are specified in a typeless function parameter list immediately after the name of the macro.  In the macro definition, the parameters are referenced by name and prefixed with a backtick.  For example:
<p />
<pre>
`define DeclareInt(x) var int `x;
</pre>
<p />
The special macro <code>`#</code> repesents the number of parameters specified and can be referenced only within the macro definition.
<p />
<h3><a name="if / else / endif"></a> if / else / endif </h3>
<p />
<code><b>
`if(&lt;value&gt;)<br>
`else<br>
`endif
</b></code><br>
<p />
These three macros together support conditional compilation. The &lt;value&gt; parameter is processed and if it is expanded to a non-empty string, the if-check evaluates to true;  otherwise it is considered to be false.
<p />
The text between <strong><em>`if</em></strong> and either <strong><em>`else</em></strong> (if present) or <strong><em>`endif</em></strong> are emitted into the processed output if the condition is true; if the condition is not true, only the end-of-line characters are emitted so that the line numbers in the processed text match up with those in the original text.
<p />
The text between the (optional) <strong><em>`else</em></strong> and <strong><em>`endif</em></strong> are emitted if the original condition is false.
<p />
Note that macros in non-emitted code are not evaluated (except for <strong><em>`if</em></strong> groupings which are processed only for tracking nesting levels).
<p />
<h3><a name="include"></a> include </h3>
<p />
<code><b>`include(&lt;filename&gt;)</b></code><br>
<p />
Includes the text of the file &lt;filename&gt; at the current location. By default, &lt;filename&gt; is relative to the directory specified by the EditPackagesInPath of the Editor.EditorEngine section of your game's .ini file.  If you specify only the filename (i.e. no directory), it will search for the include file in the classes directory for the package currently being compiled.
<p />
<h3><a name="isdefined"></a> isdefined </h3>
<p />
<code><b>
`isdefined(&lt;macroname&gt;)<br>
`notdefined(&lt;macroname&gt;)<br>
</b></code><br>
<p />
Evaluate to the string "1" if the macro is (is not) defined, regardless of the definition. Useful with conditional compilation.
<p />
<h3><a name="undefine"></a> undefine </h3>
<p />
<code><b>`undefine(&lt;macroname&gt;)</b></code><br>
<p />
Remove the current definition of &lt;macroname&gt;. Will not work for macro parameter names (`cond, `txt, `#, etc).
<p />
<h3><a name="log / warn"></a> log / warn </h3>
<p />
<code><b>`log(string OutputString, optional bool bRequiredCondition, optional name LogTag);</b></code><br>
<code><b>`warn(string OutputString, optional bool bRequiredCondition);</b></code><br><br>
<p />
Wrapper macros for the LogInternal and WarnInternal functions declared in Object.uc.  If <i>bRequiredCondition</i> is specified, the message will only be logged if the condition is true.<br>
<p />
Both macros are disabled if scripts are compiled with the <strong>-final_release</strong> switch.
<p />
<h3><a name="logd"></a> logd </h3>
<p />
<code><b>`logd(string OutputString, optional bool bRequiredCondition, optional name LogTag);</b></code><br><br>
<p />
Identical to the `log macro, except that it is only enabled if scripts are compiled in debug mode.
<p />
This macro is disabled if scripts are compiled with the <strong>-final_release</strong> switch.
<p />
<h3><a name="assert"></a> assert </h3>
<p />
<code><b>`assert(bool bCondition);</b></code><br><br>
<p />
Wrapper macro for the <strong><em>Assert</em></strong> intrinsic expression.
<p />
This macro is disabled if scripts are compiled with the <strong>-final_release</strong> switch.
<p />
<p />
<h2><a name="Command-line Interactions"></a> Command-line Interactions </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
There are a number of switches that can be passed to make which will affect the script preprocessor.
<p /> <dl>
<dt> <code><b>debug</b></code> </dt><dd> causes UPP to define the macro `debug
</dd> <dt> <code><b>final_release</b></code> </dt><dd> causes UPP to define the macro `final_release, as well as disable all wrapper macros (`log, `logd, `warn, `assert).
</dd> <dt> <code><b>nopreprocess</b></code> </dt><dd> turns off all macro and comment preprocessing, passing the exact text from the input file to the class factory. This is primarily for timing and speed testing but if some required text file contains the macro invitation character outside macros, it is possible to use this to compile that file.
</dd> <dt> <code><b>intermediate</b></code> </dt><dd> tells UPP to save the processed versions of the files it compiles. This can be time and space consuming for the entire source tree but it can be invaluable when tracking down macro errors. The files are stored in:<br> GameDirectory/PreprocessedFiles/&lt;<i>PackageName</i>&gt;/&lt;<i>ClassName</i>&gt;.uc
</dd></dl>
<p />
</noautolink>
<p />
<p />
<p />
<p />
<p />
<p />


<!-- BEGIN UE4 NOTICE -->



<div id="version_message" style="display:none;">

    <div style="position:fixed;top:0px;left:0px;width:100%;height:100%;background:#000;opacity:0.5;">

    </div>

    <div style="position:fixed;top:50%;left:50%;margin:-70px 0px 0px -240px;background:#FFF;border-radius:6px;width:480px;box-shadow:0px 5px 30px -5px rgba(0,0,0,0.9);">

        <div style="font-size:16px;font-weight:bold;background: url(rsrc/Three/warning.png) no-repeat scroll 5px 5px;padding:4px 10px 5px 25px;height:21px;width:440px;">

            Important!

        </div>

        <div style="font-size:11px;padding:5px 10px 10px;width:460px;">

            <p>You are viewing documentation for the <strong>Unreal Development Kit (UDK)</strong>.</p>



            <p>If you are looking for the Unreal Engine 4 documentation, please visit the <a style="color:#000;" href="https://docs.unrealengine.com">Unreal Engine 4 Documentation</a> site.</p>

        </div>

        <div style="height:20px;padding:4px;margin:6px;border-top:1px solid #a0a0a0;">

            <form onsubmit="return closeVersionMessage();">

                <input type="checkbox" id="dismiss" value="dismiss" />

                <label for="dsimiss">Don't show me this again</label>

                <input type="submit" value="Close" style="cursor:pointer;float:right;width:60px;color:#f0f0f0;font-weight:bold;background:#882222;height:24px;padding:2px 3px 3px;text-align:center;border:1px outset #000;" />

            </form>

        </div>

    </div>

</div>



<script type="text/javascript">

    window.onload = function () {

        LoadVersionMessage();

    }



    function LoadVersionMessage()

    {

        var showMessage = "false";
        if(showMessage != "false")

        {

            showVersionMessage();

        }

    }



    function showVersionMessage()

    {

        var message = document.getElementById("version_message");

        if(message)

        {

            message.style.display = "block";

        }

    }



    function closeVersionMessage() {

        var dismiss = document.getElementById("dismiss");

        var message = document.getElementById("version_message");

        if (message) {

            message.style.display = "none";

        }

        if (dismiss.checked) {

            eraseCookie("doc_version_message");

            createCookie("doc_version_message", "false", 365);

            dismiss.checked = false;

        }

        return false;

    }



    function createCookie(name, value, days) {

        if (days) {

            var date = new Date();

            date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));

            var expires = "; expires=" + date.toGMTString();

        }

        else var expires = "";

        document.cookie = name + "=" + value + expires + "; path=/";

    }



    function readCookie(name) {

        var nameEQ = name + "=";

        var ca = document.cookie.split(';');

        for (var i = 0; i < ca.length; i++) {

            var c = ca[i];

            while (c.charAt(0) == ' ') c = c.substring(1, c.length);

            if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);

        }

        return null;

    }



    function eraseCookie(name) {

        createCookie(name, "", -1);

    }

</script>



<!-- END UE4 NOTICE -->



</div></div><div id="footer"><div style="BACKGROUND-COLOR: transparent; margin: 0; padding: 0; width: 100%;"><div>&nbsp;</div><div style="float: left; text-align: left; vertical-align: bottom; width: 50%;"><a href="http://www.videogamevoters.org"><img src="rsrc/vgvn.jpg" border="0" width="234" height="60" alt="Video Game Voters Network" /></a></div><div style="float: right; text-align: right; vertical-align: bottom; width: 50%;">Copyright &copy; 2001-2012 <a href="http://www.epicgames.com" target="_top">Epic Games, Inc.</a><br /><a href="../Main/TermsAndConditions.html" class="twikiLink">Terms and Conditions</a><br /><a href="http://epicgames.com/privacynotice" target="_top">Privacy Notice</a></div></div></div></div>
<p />
</html></body>
