<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
	"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title> UDK | UT3CustomCharacters    </title>

<style type="text/css" media="all">@import "rsrc/twiki_webs.css";</style>
<style type="text/css" media="all">@import "rsrc/udn_new.css";</style>
<link rel="icon" href="rsrc/Three/WebPreferences/favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="rsrc/Three/WebPreferences/favicon.ico" type="image/x-icon" />


<!-- view.static_udn3.tmpl  -->
<script language="JavaScript" type="text/javascript" src="rsrc/udn.js"></script>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

</head>
<p />
<body id="webbgThree">
<p />

<p />
<div id="webThree"><div id="head">
<!--
<div class="header">
 -->
<div style="background: url(/pub/webbg_udn.jpg); background-repeat: no-repeat; height:140px; width: 100%;" >
<!--
<div style="background: transparent url(/pub/udn_header_bg.jpg); background-repeat: repeat-x; height:140px; width: 100%; margin-left: 991px;">
 -->
<p />
<div id="nav">
<ul class="nav">
<font color=black>|</font>&nbsp;&nbsp;<li class=nav_Three><a href="../Main/WebHome.html" class="twikiLink">Main</a></li><font color=black>|</font><li class=nav_Three><a href="../Two/WebHome.html" class="twikiLink">UnrealEngine2</a></li><font color=black>|</font><li class=nav_Three><a href="WebHome.html" class="twikiLink">UnrealEngine3</a></li><font color=black>|</font><li class=nav_Three><a href="https://docs.unrealengine.com" class="twikiLink">UnrealEngine4</a></li><font color=black>|</font><li class=nav_Three><a href="../Main/BusinessAndLegal.html" class="twikiLink">Business &amp; Legal</a></li><font color=black>|</font>
</ul><br><br><br>
</div>
</div>
</div> <!-- end head -->
<div id="pagedefault">
<div id="maincol">
<div id="tool">
<div id="tooltop">UDN</div>
<div id="tooltext" style="padding: 10px 10px 10px 10px;">
Search public documentation: <br>
<form ACTION="/search/index.php" METHOD="GET" NAME="main" ID="main">
<input TYPE="TEXT" NAME="q" SIZE="15" STYLE="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: xx-small;">
<input TYPE="SUBMIT" VALUE="Search" STYLE="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: xx-small;"><br>
</form>
</div>
<div id="toolband">UT3CustomCharacters  </b></div>
<div id="tooltext">
<a href="UT3CustomCharactersJP.html" class="twikiLink">日本語訳</a><br><a href="UT3CustomCharactersCH.html" class="twikiLink">中国翻译</a><br><a href="UT3CustomCharactersKR.html" class="twikiLink">한국어</a><br>

<!-- Three/UT3CustomCharacters -->
<hr size="1" noshade="noshade" />
Interested in the Unreal Engine? <br>
Visit the <a href="http://www.unrealtechnology.com" target="_top">Unreal Technology</a> site.<br>
<br>
Looking for jobs and company info? <br>
Check out the <a href="http://www.epicgames.com" target="_top">Epic games</a> site.<br>
<br>
Questions about support via UDN? <br>
Contact the <a href="../Main/ContactUDNStaff.html" class="twikiLink">UDN Staff</a> <br>
<br>
</div> <!-- end toolbox content -->
<div id="toolbottom"></div>
</div> <!-- end tool -->
<p />
<h1><a name="Creating Custom Characters for UT3"></a> Creating Custom Characters for UT3 </h1>
<p />
<em>Document Summary: Guide to creating custom characters for the third generation Unreal Tournament game.</em>
<p />
<em>Document Changelog: Created by Paul Jones<sup>?</sup>; updated by <a href="https://udn.epicgames.com/Main/ChrisMielke" class="restricted" class="restricted" class="twikiLink">Chris Mielke</a> and <a href="https://udn.epicgames.com/Main/AaronHerzog" class="restricted" class="restricted" class="twikiLink">Aaron Herzog</a>. Maintained by Richard Nalezynski<sup>?</sup>.</em>
<p />
<div class="twikiToc"> <ul>
<li> <a href="UT3CustomCharacters.html#Creating Custom Characters for UT3"> Creating Custom Characters for UT3</a> <ul>
<li> <a href="UT3CustomCharacters.html#Overview"> Overview</a>
</li> <li> <a href="UT3CustomCharacters.html#Skeletons"> Skeletons</a> <ul>
<li> <a href="UT3CustomCharacters.html#Weighting a Mesh to a Skeleton"> Weighting a Mesh to a Skeleton</a>
</li></ul>
</li> <li> <a href="UT3CustomCharacters.html#Exporting"> Exporting</a>
</li> <li> <a href="UT3CustomCharacters.html#Importing"> Importing</a>
</li> <li> <a href="UT3CustomCharacters.html#Adding Sockets to the Mesh"> Adding Sockets to the Mesh</a>
</li> <li> <a href="UT3CustomCharacters.html#Configuring the Mesh for Use In-Game"> Configuring the Mesh for Use In-Game</a>
</li></ul>
</li></ul>
</div>
<p />
<noautolink>
<p />
<h2><a name="Overview"></a> Overview </h2>
<p />
This document discusses the UT3 Character skeletons, as well as how to import the mesh content into the engine and configure it to run in-game.
<p />
<p />
<h2><a name="Skeletons"></a> Skeletons </h2>
<p />
In UT3 there are 4 different main skeletons used:  <ul>
<li> human male
</li> <li> human female
</li> <li> krall
</li> <li> corrupt
</li></ul>
<p />
Each skeleton type has a “master skeleton” file which contains all bones used by every character of that type.  It is not necessary for a character mesh to make use of all the bones; however it is necessary that the master skeleton have every bone for every character.  For example, if one wants to create a character with a new cloth type that doesn’t exist yet, like cloth hanging from each wrist, those bones need to be added to the master skeleton so that each mesh works correctly during the character creation process.
<p />
Because the master skeleton has every bone that exists, it is a good idea to use the master skeleton max file for skinning a new mesh since it is easy to see all the bones available for use.
<p />
Download the master skeleton max files here:
<p /> <ul>
<li> <a href="rsrc/Three/UT3CustomCharacters/UT3_Male.max" target="_top">UT3_Male.max</a> (3D Studio Max 9)
</li> <li> <a href="rsrc/Three/UT3CustomCharacters/UT3_Female.max" target="_top">UT3_Female.max</a> (3D Studio Max 9)
</li> <li> <a href="rsrc/Three/UT3CustomCharacters/UT3_Krall.max" target="_top">UT3_Krall.max</a> (3D Studio Max 9)
</li> <li> <a href="rsrc/Three/UT3CustomCharacters/UT3_Corrupt.max" target="_top">UT3_Corrupt.max</a> (3D Studio Max 2009)
</li></ul>
<p />
<strong>NOTE</strong>: <em>A Biped rig is included with some of the skeletons. The Biped rig is just an additional skeleton that's easier to animate. When an animation is done, we bake the animation onto the original skeleton, delete the biped, and export the animation.</em>
<p />
Additionally, the following first person skeleton is available for reference: <ul>
<li> <a href="rsrc/Three/UT3CustomCharacters/SK_WP_1P_Arm_Bones.max" target="_top">SK_WP_1P_Arm_Bones.max</a>
</li></ul>
<p />
For simplicity’s sake, this document is going to go over getting characters imported using bones that already exist. For more information regarding editing of the master skeleton and corresponding phat asset read the Creating Custom Skeletons for Characters in Unreal Tournament 3<sup>?</sup> document.
<p />
<h3><a name="Weighting a Mesh to a Skeleton"></a> Weighting a Mesh to a Skeleton </h3>
<p />
When creating a custom mesh, it is best to create the mesh with the skeleton in mind.  The mesh should be modeled with all the joints matching the location already defined by the skeleton.  For meshes that don’t follow this rule, the skeleton joints can be rotated to get them to line up to joints in a mesh.  The animations in game will orient the bones back to where they need to be to play correctly.
Although bones can be rotated, they should never be translated or moved to try and place them where joints are in a mesh.  This will give unexpected results in game and squash or stretch a mesh because the animations define where the bones translation will be.  For example, if a mesh has shorter legs than defined by the skeleton, and the skeleton’s leg bones are moved to compensate, the legs will be stretched longer in game to match the length of the other character’s legs.  This keeps all pieces connected correctly during the in-game character setup.  The correct way to fit meshes to the skeleton is to rotate the joints as needed to get them as close as possible if needed and/or modify the mesh to fit.  Creating characters with different proportions will require a new master skeleton, and if the proportions are very different than characters that already exist, they may require their own animations as well which is beyond the scope of this document.
<p />
Consider the Malcolm mesh.   He has been modeled in pieces so that he works with character creation.  The pieces are made to match the in game character creation pieces.  These mesh pieces are ready to be weighted to the skeleton: <ul>
<li> Head
</li> <li> Arms
</li> <li> Shoulderpads
</li> <li> Torso
</li> <li> Thighs
</li> <li> Boots
</li></ul>
<p />
<img alt="Marcus-Mesh.jpg" src="rsrc/Three/UT3CustomCharacters/Marcus-Mesh.jpg" />
<p />
Merge in the bones from the UT3_Male.max file, delete the bones that aren’t needed, and then weight the mesh to the skeleton.  In this case, Malcolm doesn’t have any use for the cloth bones so those can be deleted.
<p />
<img alt="Marcus-Bones.jpg" src="rsrc/Three/UT3CustomCharacters/Marcus-Bones.jpg" />
<p />
<p />
<h2><a name="Exporting"></a> Exporting </h2>
<p />
Next is to export your character and get it into the engine.  Each mesh piece will be exported separately as its own skeletal mesh using ActorX.
<p />
Download ActorX plugins here: <a href="ActorX.html" class="twikiLink">ActorX</a>
<p />
Malcolm’s boots will be used as an example for getting mesh pieces into the engine.  Use the same process for the other pieces.
<p />
To export Malcolm’s boots, first load up ActorX.  Then make sure the <em>Skin Export</em> settings are correct.
<p />
<img alt="ActorX.jpg" src="rsrc/Three/UT3CustomCharacters/ActorX.jpg" />
<p />
The <em>all skin-type</em> setting ensures that weighted meshes in the scene will be exported.  The <em>all selected</em> setting is an easy way to export each piece one at a time.  If for some reason <em>all selected</em> isn’t working or isn’t available in a version of ActorX, simply delete the meshes you do not wish to export, but DO NOT delete any part of the skeleton.  Just make sure to save your scene before deleting any meshes, so you have a complete version to go back to; and remember not to overwrite that file after deleting meshes.
<p />
Fill in the <em>output folder</em> and <em>mesh file</em> name fields in ActorX, and with the boot mesh selected, press the <em>Save mesh/refpose</em> button to create a skeletal animation (.psk) file.  If there is any animation on the skeleton, ActorX will use the first frame of the timeline (usually frame 0), as the export pose.
<p />
<p />
<h2><a name="Importing"></a> Importing </h2>
<p />
Open up the editor and in the <a href="https://udn.epicgames.com/Three/GenericBrowserReference" class="restricted" class="restricted" class="twikiLink">Generic Browser</a> window, go up to “file” -&gt; “import”.  Navigate to the psk file that your export created and click “open”.
<p />
<img alt="UnrealEd-GenericImport.jpg" src="rsrc/Three/UT3CustomCharacters/UnrealEd-GenericImport.jpg" />
<p />
After you select <em>Open</em>, another window will come up asking what you want to do with your animation file.  The <em>Package</em> field in this window lets you import into an existing package or create a new one.  To create a new package, type the name of a package that doesn't already exist.  The new package will be created and your mesh will be imported into it when you select <em>OK</em>.  To import to an existing package, type the name of an existing package or select it from the drop-down list.  In this window, you can also create a group within the package via the <em>Group</em> field, as well as change the mesh name via the <em>Name</em> field.
<p />
<img alt="UnrealEd-ImportMesh.jpg" src="rsrc/Three/UT3CustomCharacters/UnrealEd-ImportMesh.jpg" />
<p />
Once the mesh has been imported, save the package in the following directory:
<pre>
\My Documents\My Games\Unreal Tournament 3\UTGame\Unpublished\CookedPC\CustomChars
</pre>
<p />
<p />
<h2><a name="Adding Sockets to the Mesh"></a> Adding Sockets to the Mesh </h2>
<p />
Sockets are user-defined points on a skeletal mesh.  They can be added to any skeletal mesh, and in UT3, they are used for multiple things, including points from which to emit particles or places to attach weapons.  These need to be added to each mesh in order for your character to function correctly in-game.  To add sockets, double-click on the skeletal mesh on which you would like to add them in the <a href="https://udn.epicgames.com/Three/GenericBrowserReference" class="restricted" class="restricted" class="twikiLink">Generic Browser</a> window.  A skeletal mesh/animation set editor window will come up.  Click on the <em>Socket Manager</em> icon, or select <em>Socket Manager</em> from the <em>Mesh</em> menu to bring up the Socket Manager window.
<p />
<img alt="AnimSetEditor-SocketEditor.jpg" src="rsrc/Three/UT3CustomCharacters/AnimSetEditor-SocketEditor.jpg" />
<p />
Sockets are created by selecting New Socket, choosing which bone the socket will be attached to, and then creating a name for the socket.
<p />
Here is a list of sockets needed:
<p />
<table cellspacing="1" cellpadding="1" class="twikiTable" border="0"><tr><td bgcolor="#eaeaea" class="twikiFirstCol"> Mesh Name </td><td bgcolor="#eaeaea"> <font color="#008000">Socket Name</font> </td><td bgcolor="#eaeaea"> <font color="#0000ff">Bone Name</font> </td></tr>
<tr><td bgcolor="#ffffff" class="twikiFirstCol"> Arm Mesh </td><td bgcolor="#ffffff"> <font color="#008000">WeaponPoint</font> </td><td bgcolor="#ffffff"> <font color="#0000ff">b_RightWeapon</font> </td></tr>
<tr><td bgcolor="#eaeaea" class="twikiFirstCol"> &nbsp; </td><td bgcolor="#eaeaea"> <font color="#008000">DualWeaponPoint</font> </td><td bgcolor="#eaeaea"> <font color="#0000ff">b_LeftWeapon</font> </td></tr>
<tr><td bgcolor="#ffffff" class="twikiFirstCol"> Boot Mesh </td><td bgcolor="#ffffff"> <font color="#008000">L_JB</font> </td><td bgcolor="#ffffff"> <font color="#0000ff">b_LeftAnkle</font> </td></tr>
<tr><td bgcolor="#eaeaea" class="twikiFirstCol"> &nbsp; </td><td bgcolor="#eaeaea"> <font color="#008000">R_JB </td><td bgcolor="#eaeaea"> <font color="#0000ff">b_RightAnkle</font> </td></tr>
<tr><td bgcolor="#ffffff" class="twikiFirstCol"> Torso Mesh </td><td bgcolor="#ffffff"> <font color="#008000">HeadShotGoreSocket</font> </td><td bgcolor="#ffffff"> <font color="#0000ff">b_Neck</font> </td></tr>
</table>
<p />
Boot meshes need two sockets to give a place for particles to emit from when using jump boots.  These socket names are <font color="#008000">L_JB</font> for the left foot and <font color="#008000">R_JB</font> for the right foot.  For example, to add the <font color="#008000">L_JB</font> socket, select <em>New Socket</em>, choose the bone <font color="#0000ff">b_LeftAnkle</font>, then for the socket name type <font color="#008000">L_JB</font>.
<p />
Sockets can be translated and rotated so they can be placed in the correct place relative to the mesh.  Upon creation, these sockets appear at the origin of the ankle bone.  But the particles need to emit from the bottom of the foot.  In the Socket Manager window, the first two icons are <em>translate socket</em> and <em>rotate socket</em>.  With <em>translate socket</em> on, move the socket to the bottom of the foot.  Some sockets may need rotating as well to make sure that particles emit the correct direction or that objects attach with the correct orientation.  You can open the Socket Manager window on other skeletal meshes that shipped with the game to get an idea of how and where these sockets should be placed.
<p />
<p />
<h2><a name="Configuring the Mesh for Use In-Game"></a> Configuring the Mesh for Use In-Game </h2>
<p />
All that is left is configure the custom character to let the game know where your skeletal meshes are and how to use them.  This is done by editing a configuration (.ini) file:
<p />
<pre>
\My Documents\My Games\Unreal Tournament 3\UTGame\Config\UTCustomChar.ini
</pre>
<p />
To add Malcolm’s boots to the UT3 Character Creation menu, a line needs to be added to the configuration file indicating that there is another pair of boots to be used.  Malcolm looks like an Iron Guard character so the piece would fit best there.  Scrolling down in the configuration file you come to where all the Boots are located, and narrowed down further by which family they are located in – in this case, the ironguard family (shown as IRNM).
<p />
<pre>
Parts&#61;(Part&#61;PART&#95;Boots,ObjectName&#61;&#34;CH&#95;IronGuard&#95;Male.Mesh.SK&#95;CH&#95;IronG&#95;Male&#95;Boots01&#34;,PartID&#61;&#34;A&#34;,FamilyID&#61;&#34;IRNM&#34;)
Parts&#61;(Part&#61;PART&#95;Boots,ObjectName&#61;&#34;CH&#95;IronGuard&#95;Male.Mesh.SK&#95;CH&#95;IronG&#95;Male&#95;Boots02&#34;,PartID&#61;&#34;B&#34;,FamilyID&#61;&#34;IRNM&#34;)
Parts&#61;(Part&#61;PART&#95;Boots,ObjectName&#61;&#34;CH&#95;IronGuard&#95;Male.Mesh.SK&#95;CH&#95;IronG&#95;Male&#95;Boots03&#34;,PartID&#61;&#34;C&#34;,FamilyID&#61;&#34;IRNM&#34;)
</pre>
<p />
The naming convention for the Objectname is: <code>Package.Group.Subgroup.Mesh</code> (note the periods between each section).  For example, if the new mesh was named “Malcolm_Boots”, and existed in a package called “Malcolm”, with no group, the Objectname would simply be “Malcolm.Malcolm_Boots”.
<p />
The naming convention for the Objectname is: Package.Group.Subgroup.Mesh (note the periods between each section).  For example, if the new mesh was named “Malcolm_Boots”, and existed in a package called “Malcolm”, with no group, the Objectname would simply be “Malcolm.Malcolm_Boots”.
<p />
<pre>
Parts&#61;(Part&#61;PART&#95;Boots,ObjectName&#61;&#34;Malcolm.Malcolm&#95;Boots&#34;,PartID&#61;&#34;D&#34;,FamilyID&#61;&#34;IRNM&#34;)
</pre>
<p />
Save the configuration file and run the game.  Your new piece should now show up in the UT3 Character Creation menu.
<p />
</noautolink>
<p />
<p />
<p />
<p />
<p />
<p />


<!-- BEGIN UE4 NOTICE -->



<div id="version_message" style="display:none;">

    <div style="position:fixed;top:0px;left:0px;width:100%;height:100%;background:#000;opacity:0.5;">

    </div>

    <div style="position:fixed;top:50%;left:50%;margin:-70px 0px 0px -240px;background:#FFF;border-radius:6px;width:480px;box-shadow:0px 5px 30px -5px rgba(0,0,0,0.9);">

        <div style="font-size:16px;font-weight:bold;background: url(rsrc/Three/warning.png) no-repeat scroll 5px 5px;padding:4px 10px 5px 25px;height:21px;width:440px;">

            Important!

        </div>

        <div style="font-size:11px;padding:5px 10px 10px;width:460px;">

            <p>You are viewing documentation for the <strong>Unreal Development Kit (UDK)</strong>.</p>



            <p>If you are looking for the Unreal Engine 4 documentation, please visit the <a style="color:#000;" href="https://docs.unrealengine.com">Unreal Engine 4 Documentation</a> site.</p>

        </div>

        <div style="height:20px;padding:4px;margin:6px;border-top:1px solid #a0a0a0;">

            <form onsubmit="return closeVersionMessage();">

                <input type="checkbox" id="dismiss" value="dismiss" />

                <label for="dsimiss">Don't show me this again</label>

                <input type="submit" value="Close" style="cursor:pointer;float:right;width:60px;color:#f0f0f0;font-weight:bold;background:#882222;height:24px;padding:2px 3px 3px;text-align:center;border:1px outset #000;" />

            </form>

        </div>

    </div>

</div>



<script type="text/javascript">

    window.onload = function () {

        LoadVersionMessage();

    }



    function LoadVersionMessage()

    {

        var showMessage = "false";
        if(showMessage != "false")

        {

            showVersionMessage();

        }

    }



    function showVersionMessage()

    {

        var message = document.getElementById("version_message");

        if(message)

        {

            message.style.display = "block";

        }

    }



    function closeVersionMessage() {

        var dismiss = document.getElementById("dismiss");

        var message = document.getElementById("version_message");

        if (message) {

            message.style.display = "none";

        }

        if (dismiss.checked) {

            eraseCookie("doc_version_message");

            createCookie("doc_version_message", "false", 365);

            dismiss.checked = false;

        }

        return false;

    }



    function createCookie(name, value, days) {

        if (days) {

            var date = new Date();

            date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));

            var expires = "; expires=" + date.toGMTString();

        }

        else var expires = "";

        document.cookie = name + "=" + value + expires + "; path=/";

    }



    function readCookie(name) {

        var nameEQ = name + "=";

        var ca = document.cookie.split(';');

        for (var i = 0; i < ca.length; i++) {

            var c = ca[i];

            while (c.charAt(0) == ' ') c = c.substring(1, c.length);

            if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);

        }

        return null;

    }



    function eraseCookie(name) {

        createCookie(name, "", -1);

    }

</script>



<!-- END UE4 NOTICE -->



</div></div><div id="footer"><div style="BACKGROUND-COLOR: transparent; margin: 0; padding: 0; width: 100%;"><div>&nbsp;</div><div style="float: left; text-align: left; vertical-align: bottom; width: 50%;"><a href="http://www.videogamevoters.org"><img src="rsrc/vgvn.jpg" border="0" width="234" height="60" alt="Video Game Voters Network" /></a></div><div style="float: right; text-align: right; vertical-align: bottom; width: 50%;">Copyright &copy; 2001-2012 <a href="http://www.epicgames.com" target="_top">Epic Games, Inc.</a><br /><a href="../Main/TermsAndConditions.html" class="twikiLink">Terms and Conditions</a><br /><a href="http://epicgames.com/privacynotice" target="_top">Privacy Notice</a></div></div></div></div>
<p />
</html></body>
