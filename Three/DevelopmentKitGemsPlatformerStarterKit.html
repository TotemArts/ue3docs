<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
	"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title> UDK | DevelopmentKitGemsPlatformerStarterKit    </title>

<style type="text/css" media="all">@import "rsrc/twiki_webs.css";</style>
<style type="text/css" media="all">@import "rsrc/udn_new.css";</style>
<link rel="icon" href="rsrc/Three/WebPreferences/favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="rsrc/Three/WebPreferences/favicon.ico" type="image/x-icon" />


<!-- view.static_udn3.tmpl  -->
<script language="JavaScript" type="text/javascript" src="rsrc/udn.js"></script>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

</head>
<p />
<body id="webbgThree">
<p />

<p />
<div id="webThree"><div id="head">
<!--
<div class="header">
 -->
<div style="background: url(/pub/webbg_udn.jpg); background-repeat: no-repeat; height:140px; width: 100%;" >
<!--
<div style="background: transparent url(/pub/udn_header_bg.jpg); background-repeat: repeat-x; height:140px; width: 100%; margin-left: 991px;">
 -->
<p />
<div id="nav">
<ul class="nav">
<font color=black>|</font>&nbsp;&nbsp;<li class=nav_Three><a href="../Main/WebHome.html" class="twikiLink">Main</a></li><font color=black>|</font><li class=nav_Three><a href="../Two/WebHome.html" class="twikiLink">UnrealEngine2</a></li><font color=black>|</font><li class=nav_Three><a href="WebHome.html" class="twikiLink">UnrealEngine3</a></li><font color=black>|</font><li class=nav_Three><a href="https://docs.unrealengine.com" class="twikiLink">UnrealEngine4</a></li><font color=black>|</font><li class=nav_Three><a href="../Main/BusinessAndLegal.html" class="twikiLink">Business &amp; Legal</a></li><font color=black>|</font>
</ul><br><br><br>
</div>
</div>
</div> <!-- end head -->
<div id="pagedefault">
<div id="maincol">
<div id="tool">
<div id="tooltop">UDN</div>
<div id="tooltext" style="padding: 10px 10px 10px 10px;">
Search public documentation: <br>
<form ACTION="/search/index.php" METHOD="GET" NAME="main" ID="main">
<input TYPE="TEXT" NAME="q" SIZE="15" STYLE="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: xx-small;">
<input TYPE="SUBMIT" VALUE="Search" STYLE="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: xx-small;"><br>
</form>
</div>
<div id="toolband">DevelopmentKitGemsPlatformerStarterKit  </b></div>
<div id="tooltext">
<a href="DevelopmentKitGemsPlatformerStarterKitJP.html" class="twikiLink">日本語訳</a><br><a href="DevelopmentKitGemsPlatformerStarterKitCH.html" class="twikiLink">中国翻译</a><br><a href="DevelopmentKitGemsPlatformerStarterKitKR.html" class="twikiLink">한국어</a><br>

<!-- Three/DevelopmentKitGemsPlatformerStarterKit -->
<hr size="1" noshade="noshade" />
Interested in the Unreal Engine? <br>
Visit the <a href="http://www.unrealtechnology.com" target="_top">Unreal Technology</a> site.<br>
<br>
Looking for jobs and company info? <br>
Check out the <a href="http://www.epicgames.com" target="_top">Epic games</a> site.<br>
<br>
Questions about support via UDN? <br>
Contact the <a href="../Main/ContactUDNStaff.html" class="twikiLink">UDN Staff</a> <br>
<br>
</div> <!-- end toolbox content -->
<div id="toolbottom"></div>
</div> <!-- end tool -->
<p />
<noautolink>
<div style="padding:0px 0px 0px 4px;font:10px Verdana;">
<b><a href="WebHome.html" class="twikiLink">UE3 Home</a></b> &gt; <b><a href="DevelopmentKitGems.html" class="twikiLink">Unreal Development Kit Gems</a></b> &gt; Platformer Starter Kit <br/>
<b><a href="WebHome.html" class="twikiLink">UE3 Home</a></b> &gt; <b><a href="GettingStartedProgramming.html" class="twikiLink">Getting Started: Programming</a> </b> &gt; Platformer Starter Kit
</div>
<hr size="1" noshade="noshade">
<p />
<h1><a name="Platformer Starter Kit"></a> Platformer Starter Kit </h1>
<hr size="1" noshade="noshade">
<p />
<strong><em>Last tested against UDK June, 2011</em></strong>
<p />
<div class="twikiToc"> <ul>
<li> <a href="DevelopmentKitGemsPlatformerStarterKit.html#Platformer Starter Kit"> Platformer Starter Kit</a> <ul>
<li> <a href="DevelopmentKitGemsPlatformerStarterKit.html#Overview"> Overview</a>
</li> <li> <a href="DevelopmentKitGemsPlatformerStarterKit.html#What's included?"> What's included?</a>
</li> <li> <a href="DevelopmentKitGemsPlatformerStarterKit.html#Code structure"> Code structure</a> <ul>
<li> <a href="DevelopmentKitGemsPlatformerStarterKit.html#How does the camera work?"> How does the camera work?</a>
</li> <li> <a href="DevelopmentKitGemsPlatformerStarterKit.html#How does the game work?"> How does the game work?</a>
</li> <li> <a href="DevelopmentKitGemsPlatformerStarterKit.html#How does the non player controlled pawns work?"> How does the non player controlled pawns work?</a>
</li> <li> <a href="DevelopmentKitGemsPlatformerStarterKit.html#How does the player controls work?"> How does the player controls work?</a>
</li> <li> <a href="DevelopmentKitGemsPlatformerStarterKit.html#How does the weapon work?"> How does the weapon work?</a>
</li> <li> <a href="DevelopmentKitGemsPlatformerStarterKit.html#Why use a separate player pawn?"> Why use a separate player pawn?</a>
</li></ul>
</li> <li> <a href="DevelopmentKitGemsPlatformerStarterKit.html#How to use this starter kit?"> How to use this starter kit?</a>
</li> <li> <a href="DevelopmentKitGemsPlatformerStarterKit.html#Downloads"> Downloads</a>
</li></ul>
</li></ul>
</div>
<p />
<h2><a name="Overview"></a> Overview </h2>
<hr size="1" noshade="noshade">
This starter kit has example code which you can use as a starting point to develop a side scrolling platformer game such as <a href="http://www.epicgames.com/games/epic/">Shadow Complex</a>.
<p />
<style type="text/css" media="all">@import "rsrc/UDNCSS_test.css";</style>
<p />
<div class="header_img">
<img src="rsrc/Three/DevelopmentKitGemsPlatformerStarterKit/ShadowComplex.jpg" alt="ShadowComplex.jpg" />
</div>
<p />
<h2><a name="What's included?"></a> What's included? </h2>
<hr size="1" noshade="noshade"> <ul>
<li> <strong>Non player controller pawns (SPG_AIPawn)</strong> - This NPC pawn is able to chase after the player. When it bumps into the player it will then explode and deal some damage to the player. Players have to shoot them to avoid getting killed.
</li> <li> <strong>Side scrolling camera (SPG_Camera + SPG_CameraProperties)</strong> - This camera adds an offset, that is stored in SPG_CameraProperties) to the player's location. It then adjusts the camera's rotation to face the player to create a side scrolling camera.
</li> <li> <strong>Game info using an archetyped pawn and weapon (SPG_GameInfo)</strong> - The game info creates an archetyped pawn for the player and gives the player an archetyped weapons. Archetypes are used here as it allows game designers to quickly adjust parameters without having to recompile.
</li> <li> <strong>Inventory manager (SPG_InventoryManager)</strong> - Inventory managers by default aren't able to spawn inventory based on archetypes.
</li> <li> <strong>Player controller (SPG_PlayerController)</strong> - This player controller locks the movement axis as well as handling player rotation.
</li> <li> <strong>Player pawn (SPG_PlayerPawn)</strong> - This player pawn handles turning to act like a platformer pawn, which interpolates between left and right only. It also handles aiming up and down. It also has code which handles where weapon projectiles should fire from.
</li> <li> <strong>Weapon (SPG_Weapon)</strong> - This weapon class can be archetyped as most of the properties have been exposed to Unreal Editor. It also handles mesh attachment as well as special effects and sounds when the player fires the weapon.
</li> <li> <strong>HUD (SPG_HUD)</strong> - Simple HUD which displays the health of the player's pawn.
</li> <li> <strong>Pick up (SPG_HealthPickup)</strong> - Simple pick up that NPC's randomly drop when they die.
</li></ul>
<p />
All of the code is well documented, and thus won't be reflected here. Please download the code and content in the download link before. The rest of this document will explain how it's structured to allow you to further expand on this starter kit, into the game you want to create.
<p />
<h2><a name="Code structure"></a> Code structure </h2>
<hr size="1" noshade="noshade">
<p />
<h3><a name="How does the camera work?"></a> How does the camera work? </h3>
The camera works by setting the camera's location and rotation within SPG_Camera. Which camera class to use is defined within the PlayerController. Within SPG_PlayerController, notice how SPG_Camera is defined in the default properties.
<p />
For every frame that is rendered, the UpdateViewTarget function is called. SPG_Camera sets the camera location to the target's location, which is usually the player's pawn, plus the CameraOffset stored within the archetype of SPG_CameraProperties. This was done to allow adjusts to the camera offset by done within Unreal Editor and on the fly without having to recompile the source code.
<p />
Finally, the rotation of the camera is set by aiming the camera towards the target's location. This ensures that the camera is always looking at the target regardless of the offset.
<p />
<h3><a name="How does the game work?"></a> How does the game work? </h3>
The game info is set by Unreal Editor when playing within Unreal Editor. You may need to tweak the configuration files to make this the default game type. SPG_GameInfo stores references to two archetypes, one for the player's pawn and the player's default weapon. Archetypes are used here to allow quick adjustments within Unreal Editor and on the fly without having to recompile the source code.
<p />
When the player requests a pawn, SpawnDefaultPawnFor is called. Here the player pawn archetype is spawned and given to the player.
<p />
When the default inventory is given to pawns, the archetyped weapon is given to the pawn.
<p />
SPG_GameInfo also defines the player controller class and the HUD class within the default properties.
<p />
<h3><a name="How does the non player controlled pawns work?"></a> How does the non player controlled pawns work? </h3>
In this stater pack, there are pawns that simply run up to you and explode on contact. Because only simple logic is required, AIControllers is not required at all.
<p />
By default the pawn's physics mode is set to falling. This ensures that pawns that are spawned in the air will fall to ground. When the pawn lands on the ground or another actor, the Landed event is called. When this is called the pawn's physics is set to PHYS_Flying. This makes it easier to simple adjust the velocity and acceleration to ensure that the pawn is chasing after the player.
<p />
At every tick, the NPC pawn checks if it is has en enemy. If it doesn't, it will assign one by looking up any local player controllers and their pawns. If it does have an enemy and it is flying, then it will set its rotation to look towards the enemy. It will also set its velocity and acceleration to move towards the enemy.
<p />
When the pawn is killed, it called the PlayDying function. The PlayDying function enables the rag doll mode for the skeletal mesh.
<p />
If per chance, a pick up is to be spawned; it is then created using the referenced archetype.
<p />
When the pawn bumps into a player pawn, it simply explodes, deals some damage and then destroys itself.
<p />
<h3><a name="How does the player controls work?"></a> How does the player controls work? </h3>
The player controls are done within SPG_PlayerController.PlayerWalking.PlayerMove. By using the camera rotation's axes, we can make sure that the pawns move using camera view coordinates. Since this is side scrolling game, only the Y axis is required and the aStrafe values is required. This forces the player to only be able to move to the left or to the right.
<p />
As the player moves in either direction, the desired rotation is set. This ensures that the player's pawn looks to the left or the right depending on the movement.
<p />
Normally, in UpdateRotation both the mouse X and mouse Y would be handled, however since the yaw is automated only mouse Y needs to be processed. Mouse Y in this case would control the pitch of the pawn. This is then handed off to the pawn.
<p />
In SPG_Pawn, the yaw is done by rotating the pawn where as the pitch is done by adjusting the aim offset anim node within the pawn's skeletal mesh component's anim tree. The aim offset anim node tweens the player's pawn to different aiming poses which work well. Review <a href="AnimationNodes.html#AnimNodeAimOffset" class="twikiAnchorLink">animation nodes</a> for further clarification.
<p />
<h3><a name="How does the weapon work?"></a> How does the weapon work? </h3>
Weapons in this stater kit work very similar to how weapons work in Unreal Tournament 3.
<p />
When the weapon is first spawned and given to the player, ClientGivenTo is executed. This is where SPG_Weapon attaches the third person weapon mesh onto the player's pawn.
<p />
When the player fires the weapon, it sends it to the appropriate firing state which eventually calls ProjectileFire. The projectile's spawned location and rotation is acquired from the player pawn's GetWeaponStartTraceLocation and GetAdjustedAimFor functions. In the case of SPG_PlayerPawn it simple returns a socket's location and rotation. This ensures that the projectile is fired from the correct place and flies away in the correct direction.
<p />
When the weapon is fired, PlayFireEffects is called, which activates the muzzle flash. When the weapon stops firing, StopFireEffects is called, which deactivates the muzzle flash.
<p />
<h3><a name="Why use a separate player pawn?"></a> Why use a separate player pawn? </h3>
A separate player pawn was used in this starter kit since some of the functionality only applied to the player's pawn such as aiming up and down. As these don't apply to the NPC's it was decided to separate it out. It also allows an easy way to check if the pawn belonged to a player or not, although this could have easily be done by also checking the pawn's controller.
<p />
<h2><a name="How to use this starter kit?"></a> How to use this starter kit? </h2>
<hr size="1" noshade="noshade">
<p /> <ol>
<li> <a href="http://www.udk.com/download">Download</a> UDK.
</li> <li> Install UDK.
</li> <li> <a href="rsrc/Three/DevelopmentKitGemsPlatformerStarterKit/PlatformerStarterKit.zip" target="_top">Download</a> the zip file.
</li> <li> Unzip the contents into your UDK base directory. (<em>e.g</em> C:\Projects\UDK-2011-08\) Windows may inform you that you may be overwriting existing files or folders. Click Ok on all of them. <br/> <img src="rsrc/Three/DevelopmentKitGemsPlatformerStarterKit/PSK_00_UnzipContents.jpg" alt="PSK_00_UnzipContents.jpg" width='636' height='468' />
</li> <li> Open up <strong>DefaultEngine.ini</strong> inside the <strong>UDKGame\Config</strong> directory with Notepad. (<em>e.g</em> C:\Projects\UDK-2011-08\UDKGame\Config\DefaultEngine.ini) <br/> <img src="rsrc/Three/DevelopmentKitGemsPlatformerStarterKit/PSK_01_FindDefaultEngine.jpg" alt="PSK_01_FindDefaultEngine.jpg" width='758' height='668' />
</li> <li> Search for <strong>EditPackages</strong>. <br/> <img src="rsrc/Three/DevelopmentKitGemsPlatformerStarterKit/PSK_02_OpenDefaultEngine.jpg" alt="PSK_02_OpenDefaultEngine.jpg" width='758' height='562' />
</li> <li> Add <strong>+EditPackages=StarterPlatformGame</strong> <br/> <img src="rsrc/Three/DevelopmentKitGemsPlatformerStarterKit/PSK_03_ModifyDefaultEngine.jpg" alt="PSK_03_ModifyDefaultEngine.jpg" width='758' height='562' />
</li> <li> Launch the <strong>Unreal Frontend Application</strong> inside the <strong>Binaries</strong> directory. (<em>e.g</em> C:\Projects\UDK-2011-08\Binaries\UnrealFrontend.exe) <br/> <img src="rsrc/Three/DevelopmentKitGemsPlatformerStarterKit/PSK_04_FindUnrealFrontEnd.jpg" alt="PSK_04_FindUnrealFrontEnd.jpg" width='758' height='668' />
</li> <li> Click on <strong>Script</strong>, then <strong>Full Recompile</strong>. <br/> <img src="rsrc/Three/DevelopmentKitGemsPlatformerStarterKit/PSK_05_FullRecompile.jpg" alt="PSK_05_FullRecompile.jpg" width='758' height='627' />
</li> <li> You should see the StarterPlatformGame package get compiled last. <br/> <img src="rsrc/Three/DevelopmentKitGemsPlatformerStarterKit/PSK_06_CompileResults.jpg" alt="PSK_06_CompileResults.jpg" width='758' height='627' />
</li> <li> Click on <strong>UnrealEd</strong> to open up Unreal Editor. <br/> <img src="rsrc/Three/DevelopmentKitGemsPlatformerStarterKit/PSK_07_UnrealEd.jpg" alt="PSK_07_UnrealEd.jpg" width='758' height='627' />
</li> <li> Click on the <strong>Open</strong> button, and open up <strong>StarterPlatformMap.udk</strong>. <br/> <img src="rsrc/Three/DevelopmentKitGemsPlatformerStarterKit/PSK_08_OpenMap.jpg" alt="PSK_08_OpenMap.jpg" width='218' height='407' /> <br/> <img src="rsrc/Three/DevelopmentKitGemsPlatformerStarterKit/PSK_09_Finish.jpg" alt="PSK_09_Finish.jpg" width='758' height='512' />
</li> <li> Click on the <strong>Play In Editor</strong> button to play the platform starter kit. <br/> <img src="rsrc/Three/DevelopmentKitGemsPlatformerStarterKit/PSK_10_PIE.jpg" alt="PSK_10_PIE.jpg" width='784' height='422' />
</li></ol>
<p />
With the starter platformer kit setup, you can now start modifying it towards the game you want to create. The Unrealscript code is located within <strong>Development\Src\StarterPlatformGame\Classes\</strong>.uc*, and all of the content is contained within <strong>UDKGame\Content\StarterPlatformGameContent.upk</strong>.
<p />
<h2><a name="Downloads"></a> Downloads </h2>
<hr size="1" noshade="noshade">
<img src="rsrc/Three/DevelopmentKitGemsPlatformerStarterKit/StarterPlatformerKit.jpg" alt="StarterPlatformerKit.jpg" width='809' height='600' />
<p /> <ul>
<li> <a href="rsrc/Three/DevelopmentKitGemsPlatformerStarterKit/PlatformerStarterKit-2011-Oct.zip" target="_top">Download</a> the code and content for this starter kit.
</li></ul>
<p />
</noautolink>
<p />
<p />
<p />
<p />
<p />
<p />


<!-- BEGIN UE4 NOTICE -->



<div id="version_message" style="display:none;">

    <div style="position:fixed;top:0px;left:0px;width:100%;height:100%;background:#000;opacity:0.5;">

    </div>

    <div style="position:fixed;top:50%;left:50%;margin:-70px 0px 0px -240px;background:#FFF;border-radius:6px;width:480px;box-shadow:0px 5px 30px -5px rgba(0,0,0,0.9);">

        <div style="font-size:16px;font-weight:bold;background: url(rsrc/Three/warning.png) no-repeat scroll 5px 5px;padding:4px 10px 5px 25px;height:21px;width:440px;">

            Important!

        </div>

        <div style="font-size:11px;padding:5px 10px 10px;width:460px;">

            <p>You are viewing documentation for the <strong>Unreal Development Kit (UDK)</strong>.</p>



            <p>If you are looking for the Unreal Engine 4 documentation, please visit the <a style="color:#000;" href="https://docs.unrealengine.com">Unreal Engine 4 Documentation</a> site.</p>

        </div>

        <div style="height:20px;padding:4px;margin:6px;border-top:1px solid #a0a0a0;">

            <form onsubmit="return closeVersionMessage();">

                <input type="checkbox" id="dismiss" value="dismiss" />

                <label for="dsimiss">Don't show me this again</label>

                <input type="submit" value="Close" style="cursor:pointer;float:right;width:60px;color:#f0f0f0;font-weight:bold;background:#882222;height:24px;padding:2px 3px 3px;text-align:center;border:1px outset #000;" />

            </form>

        </div>

    </div>

</div>



<script type="text/javascript">

    window.onload = function () {

        LoadVersionMessage();

    }



    function LoadVersionMessage()

    {

        var showMessage = "false";
        if(showMessage != "false")

        {

            showVersionMessage();

        }

    }



    function showVersionMessage()

    {

        var message = document.getElementById("version_message");

        if(message)

        {

            message.style.display = "block";

        }

    }



    function closeVersionMessage() {

        var dismiss = document.getElementById("dismiss");

        var message = document.getElementById("version_message");

        if (message) {

            message.style.display = "none";

        }

        if (dismiss.checked) {

            eraseCookie("doc_version_message");

            createCookie("doc_version_message", "false", 365);

            dismiss.checked = false;

        }

        return false;

    }



    function createCookie(name, value, days) {

        if (days) {

            var date = new Date();

            date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));

            var expires = "; expires=" + date.toGMTString();

        }

        else var expires = "";

        document.cookie = name + "=" + value + expires + "; path=/";

    }



    function readCookie(name) {

        var nameEQ = name + "=";

        var ca = document.cookie.split(';');

        for (var i = 0; i < ca.length; i++) {

            var c = ca[i];

            while (c.charAt(0) == ' ') c = c.substring(1, c.length);

            if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);

        }

        return null;

    }



    function eraseCookie(name) {

        createCookie(name, "", -1);

    }

</script>



<!-- END UE4 NOTICE -->



</div></div><div id="footer"><div style="BACKGROUND-COLOR: transparent; margin: 0; padding: 0; width: 100%;"><div>&nbsp;</div><div style="float: left; text-align: left; vertical-align: bottom; width: 50%;"><a href="http://www.videogamevoters.org"><img src="rsrc/vgvn.jpg" border="0" width="234" height="60" alt="Video Game Voters Network" /></a></div><div style="float: right; text-align: right; vertical-align: bottom; width: 50%;">Copyright &copy; 2001-2012 <a href="http://www.epicgames.com" target="_top">Epic Games, Inc.</a><br /><a href="../Main/TermsAndConditions.html" class="twikiLink">Terms and Conditions</a><br /><a href="http://epicgames.com/privacynotice" target="_top">Privacy Notice</a></div></div></div></div>
<p />
</html></body>
