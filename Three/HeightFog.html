<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
	"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title> UDK | HeightFog    </title>

<style type="text/css" media="all">@import "rsrc/twiki_webs.css";</style>
<style type="text/css" media="all">@import "rsrc/udn_new.css";</style>
<link rel="icon" href="rsrc/Three/WebPreferences/favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="rsrc/Three/WebPreferences/favicon.ico" type="image/x-icon" />


<!-- view.static_udn3.tmpl  -->
<script language="JavaScript" type="text/javascript" src="rsrc/udn.js"></script>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

</head>
<p />
<body id="webbgThree">
<p />

<p />
<div id="webThree"><div id="head">
<!--
<div class="header">
 -->
<div style="background: url(/pub/webbg_udn.jpg); background-repeat: no-repeat; height:140px; width: 100%;" >
<!--
<div style="background: transparent url(/pub/udn_header_bg.jpg); background-repeat: repeat-x; height:140px; width: 100%; margin-left: 991px;">
 -->
<p />
<div id="nav">
<ul class="nav">
<font color=black>|</font>&nbsp;&nbsp;<li class=nav_Three><a href="../Main/WebHome.html" class="twikiLink">Main</a></li><font color=black>|</font><li class=nav_Three><a href="../Two/WebHome.html" class="twikiLink">UnrealEngine2</a></li><font color=black>|</font><li class=nav_Three><a href="WebHome.html" class="twikiLink">UnrealEngine3</a></li><font color=black>|</font><li class=nav_Three><a href="https://docs.unrealengine.com" class="twikiLink">UnrealEngine4</a></li><font color=black>|</font><li class=nav_Three><a href="../Main/BusinessAndLegal.html" class="twikiLink">Business &amp; Legal</a></li><font color=black>|</font>
</ul><br><br><br>
</div>
</div>
</div> <!-- end head -->
<div id="pagedefault">
<div id="maincol">
<div id="tool">
<div id="tooltop">UDN</div>
<div id="tooltext" style="padding: 10px 10px 10px 10px;">
Search public documentation: <br>
<form ACTION="/search/index.php" METHOD="GET" NAME="main" ID="main">
<input TYPE="TEXT" NAME="q" SIZE="15" STYLE="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: xx-small;">
<input TYPE="SUBMIT" VALUE="Search" STYLE="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: xx-small;"><br>
</form>
</div>
<div id="toolband">HeightFog  </b></div>
<div id="tooltext">
<a href="HeightFogJP.html" class="twikiLink">日本語訳</a><br><a href="HeightFogCH.html" class="twikiLink">中国翻译</a><br><a href="HeightFogKR.html" class="twikiLink">한국어</a><br>

<!-- Three/HeightFog -->
<hr size="1" noshade="noshade" />
Interested in the Unreal Engine? <br>
Visit the <a href="http://www.unrealtechnology.com" target="_top">Unreal Technology</a> site.<br>
<br>
Looking for jobs and company info? <br>
Check out the <a href="http://www.epicgames.com" target="_top">Epic games</a> site.<br>
<br>
Questions about support via UDN? <br>
Contact the <a href="../Main/ContactUDNStaff.html" class="twikiLink">UDN Staff</a> <br>
<br>
</div> <!-- end toolbox content -->
<div id="toolbottom"></div>
</div> <!-- end tool -->
<p />
<noautolink>
<p />
<div style="padding:0px 0px 0px 4px;font:10px Verdana;">
<b><a href="WebHome.html" class="twikiLink">UE3 Home</a></b> &gt; <b><a href="ParticlesAndEffectsHome.html" class="twikiLink">Particle &amp; Effects</a></b> &gt; <b><a href="FogEffectsHome.html" class="twikiLink">Fog Effects</a></b> &gt; Height Fog
</div>
<hr size="1" noshade="noshade">
<h1><a name="Height Fog"></a> Height Fog </h1>
<hr size="1" noshade="noshade">
<p />
<div class="twikiToc"> <ul>
<li> <a href="HeightFog.html#Height Fog"> Height Fog</a> <ul>
<li> <a href="HeightFog.html#Overview"> Overview</a>
</li> <li> <a href="HeightFog.html#Versions"> Versions</a>
</li> <li> <a href="HeightFog.html#Using Height Fog"> Using Height Fog</a> <ul>
<li> <a href="HeightFog.html#Height Fog Properties"> Height Fog Properties</a>
</li></ul>
</li> <li> <a href="HeightFog.html#Animating Height Fog"> Animating Height Fog</a> <ul>
<li> <a href="HeightFog.html#Color"> Color</a>
</li></ul>
</li> <li> <a href="HeightFog.html#Interaction with transparency"> Interaction with transparency</a>
</li> <li> <a href="HeightFog.html#Performance implications"> Performance implications</a>
</li> <li> <a href="HeightFog.html#Volumetric Fog"> Volumetric Fog</a>
</li> <li> <a href="HeightFog.html#Exponential Height Fog"> Exponential Height Fog</a>
</li> <li> <a href="HeightFog.html#Performance"> Performance</a>
</li></ul>
</li></ul>
</div>
<p />
<h2><a name="Overview"></a> Overview </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
This document covers Height Fog and its uses. It assumes that you have a level already set up in which you would like to add Height Fog.
<p />
For more information on setting up a level, see the <a href="CreatingLevels.html" class="twikiLink">Creating Levels</a> page.
<p />
<h2><a name="Versions"></a> Versions </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
The one layer version of height fog was added in QA_APPROVED_BUILD_JUNE_2007.  Before that, the four layer version was always used and there was no performance benefit to using less than four layers.
<p />
<h2><a name="Using Height Fog"></a> Using Height Fog </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
In the <em>Actor</em> tab of the Generic Browser, select the <strong>HeightFog</strong> Actor, which is under <em>Info</em>. Right-click in the world and select <em>Add HeightFog Here</em>. Open the HeightFog Properties by either double-clicking the Actor; right-clicking on the newly-placed Actor and select <em>Properties</em>; or pressing <em>F4</em>.
<p />
Positioning the HeightFog Actor will determine the height of the HeightFog.
<p />
<h3><a name="Height Fog Properties"></a> Height Fog Properties </h3>
<p />
In the <em>Height Fog</em> section you can edit the following properties related to the component:
<p /> <ul>
<li> <strong>Density</strong> - affects the scale for the fog layer's thickness
</li> <li> <strong>Extinction Distance</strong> - the distance at which light passing through the fog is 100% extinguished
</li> <li> <strong>Light Brightness</strong> - affects the inscattering color
</li> <li> <strong>Light Color</strong> - fog color blended with the scene
</li> <li> <strong>Start Distance</strong> - the distance at which fog starts affecting the scene
</li></ul>
<p />
<p />
<h2><a name="Animating Height Fog"></a> Animating Height Fog </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
To animate Height Fog, use Matinee to animate the HeightFog Actor values. For more information, see the <a href="MatineeUserGuide.html" class="twikiLink">Matinee User Guide</a> page.
<p />
<h3><a name="Color"></a> Color </h3>
<p />
Height Fog Color is now able to be changed at runtime using the Color Property Track in Matinee. Here’s how to set up Matinee to let you change Height Fog Color in-game:
<p /> <ol>
<li> Create a HeightFog Actor.
</li> <li> Create a group in Matinee with that Actor attached.
</li> <li> Create a color property track in the above group.
</li> <li> A dialog should appear letting you choose which color property to interpolate. There should be only one option since the HeightFog Actor has only one property that is a color.
</li> <li> Once that track is set up, you can place keyframes and use the context menu (right-click) or the <a href="CurveEditorUserGuide.html" class="twikiLink">Curve Editor</a> to set the color for each key.
</li></ol>
<p />
<h2><a name="Interaction with transparency"></a> Interaction with transparency </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
Transparency can't be handled during the main fog pass so it is a special case.  Fog on transparent objects is calculated per-vertex, which means that transparent meshes need to be reasonably tessellated to look right.  Materials using modulative blending can't be fogged, unless they are decal materials.
<p />
<h2><a name="Performance implications"></a> Performance implications </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
Height Fog is rendered with a full screen pass blended onto the scene color. There is a one layer version and a four layer version.  These are applied based on how many HeightFog Actors exist in the level, so if there is only one actor the one layer version will be used.  The four layer version takes about twice as long to render as the one layer version, so use just one HeightFog Actor if possible.  There is also a small performance gain to be had from setting the Start Distance so that nearby objects in the world are not fogged at all.
<p />
<h2><a name="Volumetric Fog"></a> Volumetric Fog </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
Use <a href="FogVolumes.html" class="twikiLink">FogVolumes</a> to have localized fog effects.  This feature can also be faked by using sheets of unlit translucency and special materials. See the <a href="VolumetricLightingGuide.html" class="twikiLink">Volumetric Lighting Guide</a> for information on setting up a volumetric lightbeam.
<p />
<p />
<h2><a name="Exponential Height Fog"></a> Exponential Height Fog </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
The May QA build has a new type of global fog called Exponential Height Fog. You place these in your level just like normal height fog actors (found under 'Actor Classes' -&gt; 'Info'), but the rendering behavior is different. Exponential Height Fog creates more density in low places of a map and less density in high places. The transition is smooth so you never get a hard cutoff like the existing constant density height fog does. Exponential Height Fog also provides two fog colors, one for the hemisphere facing the dominant directional light (or straight up if none exists), and another color for the opposite hemisphere.
<p />
Here's VCTF-Necropolis with the existing constant density height fog and Exponential Height Fog, using different colors for the hemisphere facing the light and the opposite:
<p />
     <img src="rsrc/Three/HeightFog/ExponHeightFog.jpg" alt="ExponHeightFog.jpg" width='643' height='714' />
<p />
<h2><a name="Performance"></a> Performance </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
The rendering cost of Exponential Height Fog is similar to two layers of constant density height fog with an additional optimization:
<p />
The FogStartDistance can be used to artificially keep some defined area in front of the viewer without fog. This also helps performance as pixels can be culled by the z buffer.
<p />
The following images show this applied:
<p />
     <img src="rsrc/Three/HeightFog/FogStartDistance.jpg" alt="FogStartDistance.jpg" width='630' height='1050' />
<p />
Depending on the scene content and when using a far fog start distance the rendering cost can be 50% or less.
This optimization is implemented by rendering a full screen quad that has a z value and depth test enabled.
<p />
The following two console variables allow to overwrite the editor settings: FogStartDistance, FogDensity
<p />
They are helpful to test existing levels and to find a good start distance. Use the ? as parameter to get more help.
<p />
</noautolink>
<p />
<p />
<p />
<p />
<p />
<p />


<!-- BEGIN UE4 NOTICE -->



<div id="version_message" style="display:none;">

    <div style="position:fixed;top:0px;left:0px;width:100%;height:100%;background:#000;opacity:0.5;">

    </div>

    <div style="position:fixed;top:50%;left:50%;margin:-70px 0px 0px -240px;background:#FFF;border-radius:6px;width:480px;box-shadow:0px 5px 30px -5px rgba(0,0,0,0.9);">

        <div style="font-size:16px;font-weight:bold;background: url(rsrc/Three/warning.png) no-repeat scroll 5px 5px;padding:4px 10px 5px 25px;height:21px;width:440px;">

            Important!

        </div>

        <div style="font-size:11px;padding:5px 10px 10px;width:460px;">

            <p>You are viewing documentation for the <strong>Unreal Development Kit (UDK)</strong>.</p>



            <p>If you are looking for the Unreal Engine 4 documentation, please visit the <a style="color:#000;" href="https://docs.unrealengine.com">Unreal Engine 4 Documentation</a> site.</p>

        </div>

        <div style="height:20px;padding:4px;margin:6px;border-top:1px solid #a0a0a0;">

            <form onsubmit="return closeVersionMessage();">

                <input type="checkbox" id="dismiss" value="dismiss" />

                <label for="dsimiss">Don't show me this again</label>

                <input type="submit" value="Close" style="cursor:pointer;float:right;width:60px;color:#f0f0f0;font-weight:bold;background:#882222;height:24px;padding:2px 3px 3px;text-align:center;border:1px outset #000;" />

            </form>

        </div>

    </div>

</div>



<script type="text/javascript">

    window.onload = function () {

        LoadVersionMessage();

    }



    function LoadVersionMessage()

    {

        var showMessage = "false";
        if(showMessage != "false")

        {

            showVersionMessage();

        }

    }



    function showVersionMessage()

    {

        var message = document.getElementById("version_message");

        if(message)

        {

            message.style.display = "block";

        }

    }



    function closeVersionMessage() {

        var dismiss = document.getElementById("dismiss");

        var message = document.getElementById("version_message");

        if (message) {

            message.style.display = "none";

        }

        if (dismiss.checked) {

            eraseCookie("doc_version_message");

            createCookie("doc_version_message", "false", 365);

            dismiss.checked = false;

        }

        return false;

    }



    function createCookie(name, value, days) {

        if (days) {

            var date = new Date();

            date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));

            var expires = "; expires=" + date.toGMTString();

        }

        else var expires = "";

        document.cookie = name + "=" + value + expires + "; path=/";

    }



    function readCookie(name) {

        var nameEQ = name + "=";

        var ca = document.cookie.split(';');

        for (var i = 0; i < ca.length; i++) {

            var c = ca[i];

            while (c.charAt(0) == ' ') c = c.substring(1, c.length);

            if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);

        }

        return null;

    }



    function eraseCookie(name) {

        createCookie(name, "", -1);

    }

</script>



<!-- END UE4 NOTICE -->



</div></div><div id="footer"><div style="BACKGROUND-COLOR: transparent; margin: 0; padding: 0; width: 100%;"><div>&nbsp;</div><div style="float: left; text-align: left; vertical-align: bottom; width: 50%;"><a href="http://www.videogamevoters.org"><img src="rsrc/vgvn.jpg" border="0" width="234" height="60" alt="Video Game Voters Network" /></a></div><div style="float: right; text-align: right; vertical-align: bottom; width: 50%;">Copyright &copy; 2001-2012 <a href="http://www.epicgames.com" target="_top">Epic Games, Inc.</a><br /><a href="../Main/TermsAndConditions.html" class="twikiLink">Terms and Conditions</a><br /><a href="http://epicgames.com/privacynotice" target="_top">Privacy Notice</a></div></div></div></div>
<p />
</html></body>
