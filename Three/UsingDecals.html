<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
	"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title> UDK | UsingDecals    </title>

<style type="text/css" media="all">@import "rsrc/twiki_webs.css";</style>
<style type="text/css" media="all">@import "rsrc/udn_new.css";</style>
<link rel="icon" href="rsrc/Three/WebPreferences/favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="rsrc/Three/WebPreferences/favicon.ico" type="image/x-icon" />


<!-- view.static_udn3.tmpl  -->
<script language="JavaScript" type="text/javascript" src="rsrc/udn.js"></script>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

</head>
<p />
<body id="webbgThree">
<p />

<p />
<div id="webThree"><div id="head">
<!--
<div class="header">
 -->
<div style="background: url(/pub/webbg_udn.jpg); background-repeat: no-repeat; height:140px; width: 100%;" >
<!--
<div style="background: transparent url(/pub/udn_header_bg.jpg); background-repeat: repeat-x; height:140px; width: 100%; margin-left: 991px;">
 -->
<p />
<div id="nav">
<ul class="nav">
<font color=black>|</font>&nbsp;&nbsp;<li class=nav_Three><a href="../Main/WebHome.html" class="twikiLink">Main</a></li><font color=black>|</font><li class=nav_Three><a href="../Two/WebHome.html" class="twikiLink">UnrealEngine2</a></li><font color=black>|</font><li class=nav_Three><a href="WebHome.html" class="twikiLink">UnrealEngine3</a></li><font color=black>|</font><li class=nav_Three><a href="https://docs.unrealengine.com" class="twikiLink">UnrealEngine4</a></li><font color=black>|</font><li class=nav_Three><a href="../Main/BusinessAndLegal.html" class="twikiLink">Business &amp; Legal</a></li><font color=black>|</font>
</ul><br><br><br>
</div>
</div>
</div> <!-- end head -->
<div id="pagedefault">
<div id="maincol">
<div id="tool">
<div id="tooltop">UDN</div>
<div id="tooltext" style="padding: 10px 10px 10px 10px;">
Search public documentation: <br>
<form ACTION="/search/index.php" METHOD="GET" NAME="main" ID="main">
<input TYPE="TEXT" NAME="q" SIZE="15" STYLE="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: xx-small;">
<input TYPE="SUBMIT" VALUE="Search" STYLE="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: xx-small;"><br>
</form>
</div>
<div id="toolband">UsingDecals  </b></div>
<div id="tooltext">
<a href="UsingDecalsJP.html" class="twikiLink">日本語訳</a><br><a href="UsingDecalsCH.html" class="twikiLink">中国翻译</a><br><a href="UsingDecalsKR.html" class="twikiLink">한국어</a><br>

<!-- Three/UsingDecals -->
<hr size="1" noshade="noshade" />
Interested in the Unreal Engine? <br>
Visit the <a href="http://www.unrealtechnology.com" target="_top">Unreal Technology</a> site.<br>
<br>
Looking for jobs and company info? <br>
Check out the <a href="http://www.epicgames.com" target="_top">Epic games</a> site.<br>
<br>
Questions about support via UDN? <br>
Contact the <a href="../Main/ContactUDNStaff.html" class="twikiLink">UDN Staff</a> <br>
<br>
</div> <!-- end toolbox content -->
<div id="toolbottom"></div>
</div> <!-- end tool -->
<p />
<noautolink>
<p />
<div style="padding:0px 0px 0px 4px;font:10px Verdana;">
<b><a href="WebHome.html" class="twikiLink">UE3 Home</a></b> &gt; <b><a href="ParticlesAndEffectsHome.html" class="twikiLink">Particle &amp; Effects</a></b> &gt; <b><a href="DecalsHome.html" class="twikiLink">Decals</a></b> &gt; Using Decals
</div>
<hr size="1" noshade="noshade">
<h1><a name="Using Decals"></a> Using Decals </h1>
<hr size="1" noshade="noshade">
<p />
<div class="twikiToc"> <ul>
<li> <a href="UsingDecals.html#Using Decals"> Using Decals</a> <ul>
<li> <a href="UsingDecals.html#Overview"> Overview</a>
</li> <li> <a href="UsingDecals.html#What are decals?"> What are decals?</a> <ul>
<li> <a href="UsingDecals.html#&quot;Static&quot; decals"> "Static" decals</a>
</li> <li> <a href="UsingDecals.html#&quot;Dynamic&quot; decals"> "Dynamic" decals</a>
</li></ul>
</li> <li> <a href="UsingDecals.html#Decal Materials"> Decal Materials</a> <ul>
<li> <a href="UsingDecals.html#Creating Decal Materials"> Creating Decal Materials</a>
</li></ul>
</li> <li> <a href="UsingDecals.html#Adding decals to the level"> Adding decals to the level</a> <ul>
<li> <a href="UsingDecals.html#Creating decals"> Creating decals</a>
</li> <li> <a href="UsingDecals.html#Sizing, tiling and offsetting"> Sizing, tiling and offsetting</a>
</li> <li> <a href="UsingDecals.html#Controlling receiving surfaces"> Controlling receiving surfaces</a>
</li></ul>
</li> <li> <a href="UsingDecals.html#For Programmers"> For Programmers</a>
</li> <li> <a href="UsingDecals.html#Troubleshooting"> Troubleshooting</a> <ul>
<li> <a href="UsingDecals.html#Conflict with mipmaps"> Conflict with mipmaps</a>
</li> <li> <a href="UsingDecals.html#Not Rendering"> Not Rendering</a>
</li> <li> <a href="UsingDecals.html#Z-Fighting"> Z-Fighting</a>
</li></ul>
</li></ul>
</li></ul>
</div>
<p />
<p />
<h2><a name="Overview"></a> Overview </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
The document is the decal system reference.  For content creators, it describes how to create decal materials, add decals to a level, manipulate them and control what they affect.  For programmers, this page contains an overview of the decal system architecture.
<p />
<p />
<h2><a name="What are decals?"></a> What are decals? </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
A decal is a type of primitive that projects a material onto surfaces in a scene.  Decals specify an oriented volume that is intersected with the scene geometry when the decal is created.  All surfaces lying within the decal volume have the decal material projected onto them. Decals in UE3 are unlike projectors in UE2 in that once created, decals are unchanging.  In other words, an actor moving between the decal and a receiving surface will not have the decal material projected onto it.  True light projector behaviour is achieved in UE3 with LightFunctions (see <a href="LightingReference.html" class="twikiLink">Lighting Reference</a>). Decals are great for providing variety to a scene, hiding mesh instancing, covering up seams, etc.
<p />
<h3><a name="&quot;Static&quot; decals"></a> "Static" decals </h3>
<p />
"Static" decals are decals that are placed in the level in UnrealEd.  The runtime cost of a static decal is roughly the same as a static mesh, except that decals have far fewer polys and do not collide, block, or cast shadows.
<p />
<h3><a name="&quot;Dynamic&quot; decals"></a> "Dynamic" decals </h3>
<p />
"Dynamic" decals are decals spawned during gameplay -- as a weapon hit effect, for example.  Decals spawned in game have a one-time creation cost, after which the per-frame cost is the same as a static decal (just the draw call).
<p />
<p />
<h2><a name="Decal Materials"></a> Decal Materials </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
Decal Materials are a special type of material that have additional shader code specific to the way decals are lit.  Decals can be assigned regular materials, but this will cause the lighting on your decal to be incorrect.  Rebuilding a map or checking a map for errors will notify you of decals which have invalid materials.
<p />
Material instance chains are supported by decals, but as with simple materials, the decal will only light correctly if the material instances refer to decal materials.
<p />
Making the distinction between materials and decal materials is significant for a variety of reasons:
<p /> <ol>
<li> Decals using transparent materials render differently with respect to fog than other transparent mesh types.
</li> <li> Decals using lit materials must transform normals computed in the material to the decal tangent frame.
</li> <li> Shaders that aren't used with decals (e.g. shadows, z-only, velocity, etc) are not compiled for decal materials, meaning that a decal material applied to a non-decal mesh will not correctly e.g. cast shadows, participate in motion blur, etc.
</li></ol>
<p />
<h3><a name="Creating Decal Materials"></a> Creating Decal Materials </h3>
<p />
Like regular materials, Decal Materials are created by right-clicking in the <a href="ContentBrowserReference.html" class="twikiLink">Content Browser</a> and selecting <em>New Decal Material</em>.  Select a name for the material and a destination package and press <em>OK</em>.  You will see a new decal material object in the <a href="ContentBrowserReference.html" class="twikiLink">Content Browser</a>; double-click on it to open the material editor and configure your material.
<p />
<img alt="shot1.jpg" src="rsrc/Three/UsingDecals/shot1.jpg" />
<p />
<img alt="shot7.jpg" src="rsrc/Three/UsingDecals/shot7.jpg" />
<p />
<p />
<h2><a name="Adding decals to the level"></a> Adding decals to the level </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
<h3><a name="Creating decals"></a> Creating decals </h3>
<p />
The easiest way to add decals to a scene is to select a decal material in the Generic Browser, then hold down 'D' and left click on a surface in the perspective viewport.  This will create a decal that projects onto that surface.  Alternatively, you can create a decal through the regular right click menu's Add Actor options; however, decals instanced this way will have to be manually oriented.
<p />
<img alt="shot3.jpg" src="rsrc/Three/UsingDecals/shot3.jpg" />
<p />
<h3><a name="Sizing, tiling and offsetting"></a> Sizing, tiling and offsetting </h3>
<p />
Once the decal is created, it can be positioned and oriented using the translation and rotation widgets.
<p />
<img alt="shot4.jpg" src="rsrc/Three/UsingDecals/shot4.jpg" />
<p />
The non-uniform scaling widget controls the width, height and far-plane distance of the decal volume.
<p />
The Decal Material can be tiled and offset (moved) by setting the OffsetX, OffsetY, TileX and TileY properties.  These properties are also linked to the non-uniform scaling widget; shift dragging on the non-uniform scaling widget controls the decal material tiling, while ALT dragging controls the offset.
<p />
In the image below, a wide tiling decal covers a seam between BSP pieces.
<p />
<img alt="shot8.jpg" src="rsrc/Three/UsingDecals/shot8.jpg" />
<p />
<h3><a name="Controlling receiving surfaces"></a> Controlling receiving surfaces </h3>
<p />
The DecalFilter property category contains a list of properties that can be used to control what surfaces the decal can project onto.  Checkboxes are provided for controlling whether the decal can project onto BSP, skeletal meshes, static meshes or terrain.
<p />
In the image below, the decal has been set to not project onto BSP, and thus only the portion of decal on the static mesh is visible.
<p />
<img alt="shot5.jpg" src="rsrc/Three/UsingDecals/shot5.jpg" />
<p />
Decals also have Filter and FilterMode properties that allow per-actor control over what the decal can project onto.  In the example below, a static mesh has been added to with a FilterMode of FM_Ignore, meaning only that static mesh is ignored by the decal.
<p />
<img alt="shot6.jpg" src="rsrc/Three/UsingDecals/shot6.jpg" />
<p />
<p />
<h2><a name="For Programmers"></a> For Programmers </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
See the <a href="DecalsTechnicalGuide.html" class="twikiLink">Decals Technical Guide</a>.
<p />
<p />
<h2><a name="Troubleshooting"></a> Troubleshooting </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
<h3><a name="Conflict with mipmaps"></a> Conflict with mipmaps </h3>
<p />
Enabling mipmapping on decal textures can produce artifacts around decal edges:
<p />
<img alt="decalbug.jpg" src="rsrc/Three/UsingDecals/decalbug.jpg" />
<p />
Here is a detailed description of the problem and its workaround:
<p />
Decal texture coordinates are computed by projecting the receiving geometry onto the decal image plane.
<p />
If receiving geometry is clipped against the decal frustum (the default behaviour), no fill exists outside the decal frustum, and the
value all decal texture coordinates will be in [0,1].
<p />
If the decal component is projecting on terrain or has UDecalComponent::bNoClip set to TRUE, then the decal geometry is not clipped to the decal frustum; rather, the original mesh's vertices are used as 'decal vertices'. As compared to the default behaviour, the 'noClip' path results in extra fill, but a cheaper association time as no clipping is performed.
<p />
Note that in the 'noClip' approach, vertices that project outside of the decal image plane will have negative-valued texture coordinates, meaning that the address mode of textures used in the decal material need to use clamped texture addressing.
<p />
The streaking is because the filtering used to compute the lower-level mips is bleeding non-zero colour to an edge texel, and that texel is being streaked across other fragments because of the clamped addressing on the texture.  To fix the streaking, open the texture properties for the textures in the decal material and set the bPreserveBorderR/G/B/A flags on the texture, so that transparent border pixels are preserved on lower mips.
<p />
<h3><a name="Not Rendering"></a> Not Rendering </h3>
<p />
If a placed decal isn't showing up in the editor or in game, check the following: <ul>
<li> The viewport is set to the 'Lit' viewmode (decals don't show up if there's no lighting).
</li> <li> The decal is in the same level as the receiver (or duplicated into each level in the case of having to project on receivers from multiple levels).
</li> <li> bAcceptsStaticDecals is TRUE on the receiving mesh components.
</li> <li> The decal has the appropriate bProjectsOnBSP/StaticMeshes/etc flags set.
</li> <li> The decal doesn't have anything in it's decal filter.
</li></ul>
<p />
<h3><a name="Z-Fighting"></a> Z-Fighting </h3>
<p />
Decals use a depth bias to avoid z-fighting with the attached geometry, and they don't write to depth to avoid z-fighting with each other.  In most cases, z-fighting caused by decals can be solved by tweaking the depth bias.  For placed decals the depth bias can be set per-instance.  This is usually the best way to go since it won't affect other parts of the game.  For dynamically placed decals (blood, bullet marks, etc) tweak the global default.  This is the DepthBias property of DecalComponent.uc, set in the DefaultProperties.
<p />
</noautolink>
<p />
<p />
<p />
<p />
<p />
<p />


<!-- BEGIN UE4 NOTICE -->



<div id="version_message" style="display:none;">

    <div style="position:fixed;top:0px;left:0px;width:100%;height:100%;background:#000;opacity:0.5;">

    </div>

    <div style="position:fixed;top:50%;left:50%;margin:-70px 0px 0px -240px;background:#FFF;border-radius:6px;width:480px;box-shadow:0px 5px 30px -5px rgba(0,0,0,0.9);">

        <div style="font-size:16px;font-weight:bold;background: url(rsrc/Three/warning.png) no-repeat scroll 5px 5px;padding:4px 10px 5px 25px;height:21px;width:440px;">

            Important!

        </div>

        <div style="font-size:11px;padding:5px 10px 10px;width:460px;">

            <p>You are viewing documentation for the <strong>Unreal Development Kit (UDK)</strong>.</p>



            <p>If you are looking for the Unreal Engine 4 documentation, please visit the <a style="color:#000;" href="https://docs.unrealengine.com">Unreal Engine 4 Documentation</a> site.</p>

        </div>

        <div style="height:20px;padding:4px;margin:6px;border-top:1px solid #a0a0a0;">

            <form onsubmit="return closeVersionMessage();">

                <input type="checkbox" id="dismiss" value="dismiss" />

                <label for="dsimiss">Don't show me this again</label>

                <input type="submit" value="Close" style="cursor:pointer;float:right;width:60px;color:#f0f0f0;font-weight:bold;background:#882222;height:24px;padding:2px 3px 3px;text-align:center;border:1px outset #000;" />

            </form>

        </div>

    </div>

</div>



<script type="text/javascript">

    window.onload = function () {

        LoadVersionMessage();

    }



    function LoadVersionMessage()

    {

        var showMessage = "false";
        if(showMessage != "false")

        {

            showVersionMessage();

        }

    }



    function showVersionMessage()

    {

        var message = document.getElementById("version_message");

        if(message)

        {

            message.style.display = "block";

        }

    }



    function closeVersionMessage() {

        var dismiss = document.getElementById("dismiss");

        var message = document.getElementById("version_message");

        if (message) {

            message.style.display = "none";

        }

        if (dismiss.checked) {

            eraseCookie("doc_version_message");

            createCookie("doc_version_message", "false", 365);

            dismiss.checked = false;

        }

        return false;

    }



    function createCookie(name, value, days) {

        if (days) {

            var date = new Date();

            date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));

            var expires = "; expires=" + date.toGMTString();

        }

        else var expires = "";

        document.cookie = name + "=" + value + expires + "; path=/";

    }



    function readCookie(name) {

        var nameEQ = name + "=";

        var ca = document.cookie.split(';');

        for (var i = 0; i < ca.length; i++) {

            var c = ca[i];

            while (c.charAt(0) == ' ') c = c.substring(1, c.length);

            if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);

        }

        return null;

    }



    function eraseCookie(name) {

        createCookie(name, "", -1);

    }

</script>



<!-- END UE4 NOTICE -->



</div></div><div id="footer"><div style="BACKGROUND-COLOR: transparent; margin: 0; padding: 0; width: 100%;"><div>&nbsp;</div><div style="float: left; text-align: left; vertical-align: bottom; width: 50%;"><a href="http://www.videogamevoters.org"><img src="rsrc/vgvn.jpg" border="0" width="234" height="60" alt="Video Game Voters Network" /></a></div><div style="float: right; text-align: right; vertical-align: bottom; width: 50%;">Copyright &copy; 2001-2012 <a href="http://www.epicgames.com" target="_top">Epic Games, Inc.</a><br /><a href="../Main/TermsAndConditions.html" class="twikiLink">Terms and Conditions</a><br /><a href="http://epicgames.com/privacynotice" target="_top">Privacy Notice</a></div></div></div></div>
<p />
</html></body>
