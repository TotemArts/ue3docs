<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
	"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title> UDK | WorldPositionOffset    </title>

<style type="text/css" media="all">@import "rsrc/twiki_webs.css";</style>
<style type="text/css" media="all">@import "rsrc/udn_new.css";</style>
<link rel="icon" href="rsrc/Three/WebPreferences/favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="rsrc/Three/WebPreferences/favicon.ico" type="image/x-icon" />


<!-- view.static_udn3.tmpl  -->
<script language="JavaScript" type="text/javascript" src="rsrc/udn.js"></script>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

</head>
<p />
<body id="webbgThree">
<p />

<p />
<div id="webThree"><div id="head">
<!--
<div class="header">
 -->
<div style="background: url(/pub/webbg_udn.jpg); background-repeat: no-repeat; height:140px; width: 100%;" >
<!--
<div style="background: transparent url(/pub/udn_header_bg.jpg); background-repeat: repeat-x; height:140px; width: 100%; margin-left: 991px;">
 -->
<p />
<div id="nav">
<ul class="nav">
<font color=black>|</font>&nbsp;&nbsp;<li class=nav_Three><a href="../Main/WebHome.html" class="twikiLink">Main</a></li><font color=black>|</font><li class=nav_Three><a href="../Two/WebHome.html" class="twikiLink">UnrealEngine2</a></li><font color=black>|</font><li class=nav_Three><a href="WebHome.html" class="twikiLink">UnrealEngine3</a></li><font color=black>|</font><li class=nav_Three><a href="https://docs.unrealengine.com" class="twikiLink">UnrealEngine4</a></li><font color=black>|</font><li class=nav_Three><a href="../Main/BusinessAndLegal.html" class="twikiLink">Business &amp; Legal</a></li><font color=black>|</font>
</ul><br><br><br>
</div>
</div>
</div> <!-- end head -->
<div id="pagedefault">
<div id="maincol">
<div id="tool">
<div id="tooltop">UDN</div>
<div id="tooltext" style="padding: 10px 10px 10px 10px;">
Search public documentation: <br>
<form ACTION="/search/index.php" METHOD="GET" NAME="main" ID="main">
<input TYPE="TEXT" NAME="q" SIZE="15" STYLE="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: xx-small;">
<input TYPE="SUBMIT" VALUE="Search" STYLE="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: xx-small;"><br>
</form>
</div>
<div id="toolband">WorldPositionOffset  </b></div>
<div id="tooltext">
<a href="WorldPositionOffsetJP.html" class="twikiLink">日本語訳</a><br><a href="WorldPositionOffsetCH.html" class="twikiLink">中国翻译</a><br><a href="WorldPositionOffsetKR.html" class="twikiLink">한국어</a><br>

<!-- Three/WorldPositionOffset -->
<hr size="1" noshade="noshade" />
Interested in the Unreal Engine? <br>
Visit the <a href="http://www.unrealtechnology.com" target="_top">Unreal Technology</a> site.<br>
<br>
Looking for jobs and company info? <br>
Check out the <a href="http://www.epicgames.com" target="_top">Epic games</a> site.<br>
<br>
Questions about support via UDN? <br>
Contact the <a href="../Main/ContactUDNStaff.html" class="twikiLink">UDN Staff</a> <br>
<br>
</div> <!-- end toolbox content -->
<div id="toolbottom"></div>
</div> <!-- end tool -->
<p />
<noautolink>
<div style="padding:0px 0px 0px 4px;font:10px Verdana;">
<b><a href="WebHome.html" class="twikiLink">UE3 Home</a></b> &gt; <b><a href="MaterialsAndTexturesHome.html" class="twikiLink">Materials &amp; Textures</a></b> &gt; World Position Offset
</div>
<hr size="1" noshade="noshade">
<h1><a name="World Position Offset"></a> World Position Offset </h1>
<hr size="1" noshade="noshade">
<p />
<em>Document Changelog: Created by <a href="https://udn.epicgames.com/Main/DanielWright" class="restricted" class="restricted" class="twikiLink">Daniel Wright</a>.</em>
<p />
<div class="twikiToc"> <ul>
<li> <a href="WorldPositionOffset.html#World Position Offset"> World Position Offset</a> <ul>
<li> <a href="WorldPositionOffset.html#Overview"> Overview</a>
</li> <li> <a href="WorldPositionOffset.html#How it works"> How it works</a>
</li> <li> <a href="WorldPositionOffset.html#Vertex shader"> Vertex shader</a>
</li> <li> <a href="WorldPositionOffset.html#Useful material expressions"> Useful material expressions</a> <ul>
<li> <a href="WorldPositionOffset.html#Inputs that change per vertex"> Inputs that change per vertex</a>
</li> <li> <a href="WorldPositionOffset.html#Inputs that are constant per vertex"> Inputs that are constant per vertex</a>
</li></ul>
</li> <li> <a href="WorldPositionOffset.html#Performance considerations"> Performance considerations</a>
</li> <li> <a href="WorldPositionOffset.html#Limitations"> Limitations</a>
</li></ul>
</li></ul>
</div>
<p />
<h2><a name="Overview"></a> Overview </h2>
<hr size="1" noshade="noshade">
<p />
World Position Offset allows artists to modify vertex world position in the material editor, which allows arbitrary deformation effects and custom ambient animation for different types of objects.
<p />
<h2><a name="How it works"></a> How it works </h2>
<hr size="1" noshade="noshade">
<p />
Whatever you plug in to the World Position Offset input simply gets added to the vertex's position. For example, the below nodes create a constantly moving sine wave down the Z axis of a mesh which offsets its vertices in the x axis:
<p />
<img alt="WorldPositionOffsetNodes.jpg" src="rsrc/Three/WorldPositionOffset/WorldPositionOffsetNodes.jpg" />
<p />
Here is the effect of that material applied to a pillar mesh:
<p />
<img alt="WorldPositionOffset.jpg" src="rsrc/Three/WorldPositionOffset/WorldPositionOffset.jpg" />
<p />
It's probably a good idea to brush up on vector math and geometry before trying to create anything complicated.
Here are a few useful pages: <ul>
<li> <a href="http://en.wikipedia.org/wiki/Trigonometric_functions">Trigonometric functions</a>
</li> <li> <a href="http://en.wikipedia.org/wiki/Euclidean_vector">Euclidean vector</a>
</li></ul>
<p />
<h2><a name="Vertex shader"></a> Vertex shader </h2>
<hr size="1" noshade="noshade">
<p />
The World Position Offset material input is executed in the vertex shader. This is different from all the other existing material inputs, which are applied in the pixel shader. A large number of the <a href="MaterialsCompendium.html" class="twikiLink">material nodes</a> exposed in the material editor won't work in vertex shaders, specifically anything involving a texture lookup. These nodes will notify you with an error saying "Invalid node used in vertex shader input!". All of the math functions work along with WorldPosition, VertexColor and most of the constants such as Time and ObjectPosition.
<p />
A consequence of operating in the vertex shader is that the tessellation of the mesh is important, since only vertices are deformed. You can see this in the image above.
<p />
Notice that the material editor shows vertex instructions in the top left if you plug something in to World Position Offset which will let you track how expensive of a vertex shader you are creating.
<p />
<h2><a name="Useful material expressions"></a> Useful material expressions </h2>
<hr size="1" noshade="noshade">
<p />
See the <a href="MaterialsCompendium.html" class="twikiLink">MaterialsCompendium</a> for descriptions of all of these nodes.
<p /> <ul>
<li> <a href="MaterialsCompendium.html#WindDirectionAndSpeed" class="twikiAnchorLink">WindDirectionAndSpeed</a> - Use this node to coordinate wind animations between different objects in a level.
</li> <li> <a href="MaterialsCompendium.html#RotateAboutAxis" class="twikiAnchorLink">RotateAboutAxis</a> - Helper node that makes rotating about an arbitrary axis simple.
</li> <li> <a href="MaterialsCompendium.html#FoliageNormalizedRotationAxisAndAngle" class="twikiAnchorLink">FoliageNormalizedRotationAxisAndAngle</a> - Use in conjunction with <a href="InteractiveFoliageActor.html" class="twikiLink">InteractiveFoliageActor</a>'s to get more interactive levels.
</li></ul>
<p />
<h3><a name="Inputs that change per vertex"></a> Inputs that change per vertex </h3>
<p />
World position is useful for adding variation between vertices, for example a field of grass with waves of wind blowing through.  Vertex color is useful for applying arbitrary weights to different parts of a mesh. You can even paint vertex influences using the <a href="MeshPaintReference.html" class="twikiLink">Mesh paint tool</a> and have these affect the animation.  A good approach is to have a different color per leaf bunch that changes the sine wave phase per leaf, and then paint into another channel to weight how much each vertex can move. As of QA_APPROVED_BUILD_DEC_2009, the <a href="MaterialsCompendium.html#WorldNormal" class="twikiAnchorLink">WorldNormal</a> node can also be used to access the vertex's world space normal.
<p />
<h3><a name="Inputs that are constant per vertex"></a> Inputs that are constant per vertex </h3>
<p />
WindDirectionAndSpeed is useful for getting wind parameters from any wind actors placed in the level, which can be changed at runtime.  ObjectWorldPosition is useful for adding variation per-object.  And of course, Time is useful for procedural animation over time.
<p />
<h2><a name="Performance considerations"></a> Performance considerations </h2>
<hr size="1" noshade="noshade">
<p />
World Position Offset generates vertex shader code, which is executed once per vertex. You can track how many instructions you are adding by comparing the Vertex shader instruction count with and without your nodes connected. To know the actual impact, setup a level on your target platform and profile with and without the World Position Offset using a tool like <a href="https://udn.epicgames.com/Three/PerfHUD" class="restricted" class="restricted" class="twikiLink">PerfHUD</a> or PIX.
<p />
<h2><a name="Limitations"></a> Limitations </h2>
<hr size="1" noshade="noshade">
<p />
World Position Offset does not work with anything that accesses vertex positions on the CPU. This means decals and shadow volumes won't render correctly, along with some other effects.  It also does not change collision or affect physics, it is purely a visual effect, so it's best not to do large offsets with this method, but use physics instead.
<p />
 <strong>Warning - offseting positions outside of an object's bounds will cause rendering artifacts!</strong>  You can see the bounds that are used for culling by enabling the Show Bounds show flag and selecting an object in the editor.  In QA_APPROVED_BUILD_MAY_2010, a property called BoundsScale has been added to primitive component to allow increasing the bounds on meshes with large deformation.
<p />
</noautolink>
<p />
<p />
<p />
<p />
<p />
<p />


<!-- BEGIN UE4 NOTICE -->



<div id="version_message" style="display:none;">

    <div style="position:fixed;top:0px;left:0px;width:100%;height:100%;background:#000;opacity:0.5;">

    </div>

    <div style="position:fixed;top:50%;left:50%;margin:-70px 0px 0px -240px;background:#FFF;border-radius:6px;width:480px;box-shadow:0px 5px 30px -5px rgba(0,0,0,0.9);">

        <div style="font-size:16px;font-weight:bold;background: url(rsrc/Three/warning.png) no-repeat scroll 5px 5px;padding:4px 10px 5px 25px;height:21px;width:440px;">

            Important!

        </div>

        <div style="font-size:11px;padding:5px 10px 10px;width:460px;">

            <p>You are viewing documentation for the <strong>Unreal Development Kit (UDK)</strong>.</p>



            <p>If you are looking for the Unreal Engine 4 documentation, please visit the <a style="color:#000;" href="https://docs.unrealengine.com">Unreal Engine 4 Documentation</a> site.</p>

        </div>

        <div style="height:20px;padding:4px;margin:6px;border-top:1px solid #a0a0a0;">

            <form onsubmit="return closeVersionMessage();">

                <input type="checkbox" id="dismiss" value="dismiss" />

                <label for="dsimiss">Don't show me this again</label>

                <input type="submit" value="Close" style="cursor:pointer;float:right;width:60px;color:#f0f0f0;font-weight:bold;background:#882222;height:24px;padding:2px 3px 3px;text-align:center;border:1px outset #000;" />

            </form>

        </div>

    </div>

</div>



<script type="text/javascript">

    window.onload = function () {

        LoadVersionMessage();

    }



    function LoadVersionMessage()

    {

        var showMessage = "false";
        if(showMessage != "false")

        {

            showVersionMessage();

        }

    }



    function showVersionMessage()

    {

        var message = document.getElementById("version_message");

        if(message)

        {

            message.style.display = "block";

        }

    }



    function closeVersionMessage() {

        var dismiss = document.getElementById("dismiss");

        var message = document.getElementById("version_message");

        if (message) {

            message.style.display = "none";

        }

        if (dismiss.checked) {

            eraseCookie("doc_version_message");

            createCookie("doc_version_message", "false", 365);

            dismiss.checked = false;

        }

        return false;

    }



    function createCookie(name, value, days) {

        if (days) {

            var date = new Date();

            date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));

            var expires = "; expires=" + date.toGMTString();

        }

        else var expires = "";

        document.cookie = name + "=" + value + expires + "; path=/";

    }



    function readCookie(name) {

        var nameEQ = name + "=";

        var ca = document.cookie.split(';');

        for (var i = 0; i < ca.length; i++) {

            var c = ca[i];

            while (c.charAt(0) == ' ') c = c.substring(1, c.length);

            if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);

        }

        return null;

    }



    function eraseCookie(name) {

        createCookie(name, "", -1);

    }

</script>



<!-- END UE4 NOTICE -->



</div></div><div id="footer"><div style="BACKGROUND-COLOR: transparent; margin: 0; padding: 0; width: 100%;"><div>&nbsp;</div><div style="float: left; text-align: left; vertical-align: bottom; width: 50%;"><a href="http://www.videogamevoters.org"><img src="rsrc/vgvn.jpg" border="0" width="234" height="60" alt="Video Game Voters Network" /></a></div><div style="float: right; text-align: right; vertical-align: bottom; width: 50%;">Copyright &copy; 2001-2012 <a href="http://www.epicgames.com" target="_top">Epic Games, Inc.</a><br /><a href="../Main/TermsAndConditions.html" class="twikiLink">Terms and Conditions</a><br /><a href="http://epicgames.com/privacynotice" target="_top">Privacy Notice</a></div></div></div></div>
<p />
</html></body>
