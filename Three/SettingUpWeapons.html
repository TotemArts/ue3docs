<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
	"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title> UDK | SettingUpWeapons    </title>

<style type="text/css" media="all">@import "rsrc/twiki_webs.css";</style>
<style type="text/css" media="all">@import "rsrc/udn_new.css";</style>
<link rel="icon" href="rsrc/Three/WebPreferences/favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="rsrc/Three/WebPreferences/favicon.ico" type="image/x-icon" />


<!-- view.static_udn3.tmpl  -->
<script language="JavaScript" type="text/javascript" src="rsrc/udn.js"></script>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

</head>
<p />
<body id="webbgThree">
<p />

<p />
<div id="webThree"><div id="head">
<!--
<div class="header">
 -->
<div style="background: url(/pub/webbg_udn.jpg); background-repeat: no-repeat; height:140px; width: 100%;" >
<!--
<div style="background: transparent url(/pub/udn_header_bg.jpg); background-repeat: repeat-x; height:140px; width: 100%; margin-left: 991px;">
 -->
<p />
<div id="nav">
<ul class="nav">
<font color=black>|</font>&nbsp;&nbsp;<li class=nav_Three><a href="../Main/WebHome.html" class="twikiLink">Main</a></li><font color=black>|</font><li class=nav_Three><a href="../Two/WebHome.html" class="twikiLink">UnrealEngine2</a></li><font color=black>|</font><li class=nav_Three><a href="WebHome.html" class="twikiLink">UnrealEngine3</a></li><font color=black>|</font><li class=nav_Three><a href="https://docs.unrealengine.com" class="twikiLink">UnrealEngine4</a></li><font color=black>|</font><li class=nav_Three><a href="../Main/BusinessAndLegal.html" class="twikiLink">Business &amp; Legal</a></li><font color=black>|</font>
</ul><br><br><br>
</div>
</div>
</div> <!-- end head -->
<div id="pagedefault">
<div id="maincol">
<div id="tool">
<div id="tooltop">UDN</div>
<div id="tooltext" style="padding: 10px 10px 10px 10px;">
Search public documentation: <br>
<form ACTION="/search/index.php" METHOD="GET" NAME="main" ID="main">
<input TYPE="TEXT" NAME="q" SIZE="15" STYLE="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: xx-small;">
<input TYPE="SUBMIT" VALUE="Search" STYLE="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: xx-small;"><br>
</form>
</div>
<div id="toolband">SettingUpWeapons  </b></div>
<div id="tooltext">
<a href="SettingUpWeaponsJP.html" class="twikiLink">日本語訳</a><br><a href="SettingUpWeaponsCH.html" class="twikiLink">中国翻译</a><br><a href="SettingUpWeaponsKR.html" class="twikiLink">한국어</a><br>

<!-- Three/SettingUpWeapons -->
<hr size="1" noshade="noshade" />
Interested in the Unreal Engine? <br>
Visit the <a href="http://www.unrealtechnology.com" target="_top">Unreal Technology</a> site.<br>
<br>
Looking for jobs and company info? <br>
Check out the <a href="http://www.epicgames.com" target="_top">Epic games</a> site.<br>
<br>
Questions about support via UDN? <br>
Contact the <a href="../Main/ContactUDNStaff.html" class="twikiLink">UDN Staff</a> <br>
<br>
</div> <!-- end toolbox content -->
<div id="toolbottom"></div>
</div> <!-- end tool -->
<p />
<noautolink>
<p />
<div style="padding:0px 0px 0px 4px;font:10px Verdana;">
<b><a href="WebHome.html" class="twikiLink">UE3 Home</a></b> &gt; <b><a href="GameplayHome.html" class="twikiLink">Gameplay Elements</a></b> &gt; Setting Up Weapons
</div>
<hr size="1" noshade="noshade">
<h1><a name="Setting Up Weapons"></a> Setting Up Weapons </h1>
<hr size="1" noshade="noshade">
<p />
<div class="twikiToc"> <ul>
<li> <a href="SettingUpWeapons.html#Setting Up Weapons"> Setting Up Weapons</a> <ul>
<li> <a href="SettingUpWeapons.html#Modeling Weapons - Setup and Rigging"> Modeling Weapons - Setup and Rigging</a>
</li> <li> <a href="SettingUpWeapons.html#Weapon Export"> Weapon Export</a>
</li> <li> <a href="SettingUpWeapons.html#Weapon Import and Setup"> Weapon Import and Setup</a> <ul>
<li> <a href="SettingUpWeapons.html#Setting Up Sockets"> Setting Up Sockets</a>
</li> <li> <a href="SettingUpWeapons.html#Creating Projectiles"> Creating Projectiles</a>
</li> <li> <a href="SettingUpWeapons.html#Setting Up Muzzle Flashes"> Setting Up Muzzle Flashes</a>
</li></ul>
</li> <li> <a href="SettingUpWeapons.html#For Programmers"> For Programmers</a> <ul>
<li> <a href="SettingUpWeapons.html#Creating The Script File"> Creating The Script File</a>
</li> <li> <a href="SettingUpWeapons.html#Tuning Weapons"> Tuning Weapons</a> <ul>
<li> <a href="SettingUpWeapons.html#Useful Console Commands"> Useful Console Commands</a>
</li></ul>
</li></ul>
</li></ul>
</li></ul>
</div>
<p />
<h2><a name="Modeling Weapons - Setup and Rigging"></a> Modeling Weapons - Setup and Rigging </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
Weapons in Unreal Engine 3 use a skeletal mesh to render in both first person and third person. The first person mesh will generally be higher-poly as it is usually seen close up. Depending on the placement of the weapon when being used in first person, any polys that will never be seen can be omitted to save on rendering time. The third person mesh is usually used when viewing the player in third person and as the pickup mesh. As such, it has the ability to be seen from all angles and should not have any omitted polys. It won't usually be seen up close, however; so small details can be left out the keep the poly count as low as possible.
<p />
<img alt="firstpersonmesh.jpg" src="rsrc/Three/SettingUpWeapons/firstpersonmesh.jpg" /> <img alt="thirdpersonmesh.jpg" src="rsrc/Three/SettingUpWeapons/thirdpersonmesh.jpg" />
<p />
How you set up the skeleton for for the first person mesh of any particular weapon is dependent on what will be needed to setup the desired animations. In general, a weapon will have a root bone located where the player would grip the weapon and a child bone where the muzzle flash would be located. The bone is not used directly for attaching muzzle flashes and other effects, but sockets based on them will be used and having them in the right positions makes setting up the sockets that much easier.
<p />
For the third person mesh, the skeleton will probably be much simpler as most of the animation used when viewing the weapon in first person is skipped in third person as it isn't needed. The root bone shoud be placed where the weapon will be gripped with the dominant hand. A child bone may be placed where the off hand would grip the weapon if this is desired for the particular weapon or supported in your game in general. As with the first person mesh, a child bone can be placed where the muzzle flash will be located.
<p />
An example of a weapon skeleton is shown here:
<p />
<img alt="firstpersonskeleton.jpg" src="rsrc/Three/SettingUpWeapons/firstpersonskeleton.jpg" />
<p />
It will probably be desirable to decide upon a naming scheme ahead of time to use for any bones or sockets that will be accessed directly through script or make sure your programmers provide the ability to specify the names of the bones being used.
<p />
<h2><a name="Weapon Export"></a> Weapon Export </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
Exporting a weapon skeletal mesh into the engine is done in exactly the same way as a standard skeletal mesh. You can either choose to use <a href="ActorX.html" class="twikiLink">ActorX</a> to export your mesh and animations to a .PSK and .PSA file, respectively; or you can make use of Unreal's <a href="FBXImporterUserGuide.html" class="twikiLink">FBX Import pipeline</a> by exporting your mesh and animations to an .FBX file with your 3D application's built-in export tools. You should export the mesh and each of the animations that will be needed for that particular weapon.
<p />
<!-- <img alt="actorxexport.jpg" src="" /> <img alt="fbxexport.jpg" src="" /> -->
<p />
<h2><a name="Weapon Import and Setup"></a> Weapon Import and Setup </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
The .PSK file (or .FBX file depending on your preferred file format) for the weapon should be imported into the Content Browser as a skeletal mesh.
<p />
<img alt="meshimportpsk.jpg" src="rsrc/Three/SettingUpWeapons/meshimportpsk.jpg" /> <img alt="meshimport_fbx.jpg" src="rsrc/Three/SettingUpWeapons/meshimport_fbx.jpg" />
<p />
Textures and materials for the weapon should also be imported, set up, and assigned to the skeletal mesh. In the AnimSet Editor, you can create a new AnimSet for the weapon from the File menu by choosing <em>New AnimSet...</em> and then providing a Package, Group (optional), and Name.
<p />
<img alt="newanimset.jpg" src="rsrc/Three/SettingUpWeapons/newanimset.jpg" />
<p />
Then, the .PSA file containing any animations for the weapon should be imported into the weapons's AnimSet by choosing <em>Import PSA...</em>, again from the File menu in the AnimSet Editor.
<p />
<img alt="newanimation.jpg" src="rsrc/Three/SettingUpWeapons/newanimation.jpg" />
<p />
If you are using the .FBX file format, you would choose <em>Import FBX Animation...</em> here, instead, to import your animations.
<p />
<h3><a name="Setting Up Sockets"></a> Setting Up Sockets </h3>
<p />
Sockets were mentioned previously as being used as attachment points for muzzle flashes as well as any additional effects the weapon may require. Sockets are essentially locators parented to a specific bone which can named and then be offset and given their own individual rotation. This provides an easy way to attach or spawn items at specific locations.
<p />
Sockets are added to a skeletal mesh inside of UnrealEd through the AnimSet Editor. Press the <img alt="toolbar_socket.jpg" src="rsrc/Three/SettingUpWeapons/toolbar_socket.jpg" /> button in the toolbar to open the Socket Manager.
<p />
<img alt="socketmanager.jpg" src="rsrc/Three/SettingUpWeapons/socketmanager.jpg" />
<p />
The <img alt="newsocket_button.jpg" src="rsrc/Three/SettingUpWeapons/newsocket_button.jpg" /> button will open a new dialog that lists all the bones available in the mesh.
<p />
<img alt="newsocket_bone.jpg" src="rsrc/Three/SettingUpWeapons/newsocket_bone.jpg" />
<p />
Select the bone that was added at the tip of the barrel of the mesh and then press <em>OK</em>. This will bring up another dialog where the new socket can be given a name that will be used to identify it in code.
<p />
<img alt="newsocket_name.jpg" src="rsrc/Three/SettingUpWeapons/newsocket_name.jpg" />
<p />
Once you've entered a name, press <em>OK</em> to add the new socket. It should appear in the Preview Pane of the AnimSet Editor and in the socket list of the Socket Manager.
<p />
<img alt="newsocket_complete.jpg" src="rsrc/Three/SettingUpWeapons/newsocket_complete.jpg" />
<p />
<h3><a name="Creating Projectiles"></a> Creating Projectiles </h3>
<p />
A projectile is the physical representation of the weapon fire. The visual component of Projectiles in Unreal are simply particle systems. Creating particle sytems for projectiles is a straightforward process similar to making any other particle system. Essentially, you want to set up a particle system that recreates how you want to the projectile to appear while in flight. The particle system can be made up of as many emitters as necessary to get the desired effect.
<p />
Some examples of projectile particle systems are shown below:
<p />
<img alt="projectile_link.jpg" src="rsrc/Three/SettingUpWeapons/projectile_link.jpg" /> <img alt="projectile_rocket.jpg" src="rsrc/Three/SettingUpWeapons/projectile_rocket.jpg" /> <img alt="projectile_shock.jpg" src="rsrc/Three/SettingUpWeapons/projectile_shock.jpg" />
<p />
<h3><a name="Setting Up Muzzle Flashes"></a> Setting Up Muzzle Flashes </h3>
<p />
Muzzle flashes are used to simulate the projectile being expelled from the barrel of the weapon, like the flash you would see when a gun is fired in real life. The weapon system in Unreal uses a particle system as the visual component of a muzzle flash. As with projectiles, the particle system for a muzzle flash can be made up of as many emitters as necessary to get the desired look.
<p />
Some examples of muzzle flash particle systems are shown below:
<p />
<img alt="mf_link.jpg" src="rsrc/Three/SettingUpWeapons/mf_link.jpg" /> <img alt="mf_rocket.jpg" src="rsrc/Three/SettingUpWeapons/mf_rocket.jpg" /> <img alt="mf_shock.jpg" src="rsrc/Three/SettingUpWeapons/mf_shock.jpg" />
<p />
<h2><a name="For Programmers"></a> For Programmers </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
Once you have all the assets set up correctly, you need to give some information to a programmer for implementation. The information the programmer will need is:
<p /> <ul>
<li> The name of the 1st Person Mesh.
</li> <li> The name of the Animation Set.
</li> <li> The name of the Pickup Mesh.
</li> <li> The names of the Pick up, Equip, Put down, and Firing Sounds.
</li> <li> The names of the Projectile Particle Systems (if firing projectiles).
</li> <li> The names of the Muzzle Flash Particle Systems.
</li> <li> The name of the Crosshair Texture and Coordinates.
</li></ul>
<p />
For efficient iteration, it's best to come up with a set of standards for this information.
<p />
<h3><a name="Creating The Script File"></a> Creating The Script File </h3>
<p />
Here is how you would enter all of the needed information into a very basic UnrealScript .uc file for your weapon:
<p />
<span style="font:12px Courier;">
MyWeapon.uc
</span>
<p />
<div class="codesnippet">
<pre>
class MyWeapon extends UTWeapon;

defaultproperties
{
   Begin Object class&#61;AnimNodeSequence Name&#61;MeshSequenceA
      bCauseActorAnimEnd&#61;true
   End Object

   // Weapon SkeletalMesh
   Begin Object Name&#61;FirstPersonMesh
      SkeletalMesh&#61;SkeletalMesh&#39;WP&#95;LinkGun.Mesh.SK&#95;WP&#95;Linkgun&#95;1P&#39;
      AnimSets(0)&#61;AnimSet&#39;WP&#95;LinkGun.Anims.K&#95;WP&#95;LinkGun&#95;1P&#95;Base&#39;
      Animations&#61;MeshSequenceA
      Scale&#61;0.9
      FOV&#61;60.0
   End Object

   // Pickup SkeletalMesh
   Begin Object Name&#61;PickupMesh
      SkeletalMesh&#61;SkeletalMesh&#39;WP&#95;LinkGun.Mesh.SK&#95;WP&#95;LinkGun&#95;3P&#39;
   End Object

   WeaponFireTypes(0)&#61;EWFT&#95;Projectile
   WeaponProjectiles(0)&#61;class&#39;UTProj&#95;LinkPlasma&#39;

   WeaponEquipSnd&#61;SoundCue&#39;A&#95;Weapon&#95;Link.Cue.A&#95;Weapon&#95;Link&#95;RaiseCue&#39;
   WeaponPutDownSnd&#61;SoundCue&#39;A&#95;Weapon&#95;Link.Cue.A&#95;Weapon&#95;Link&#95;LowerCue&#39;
   WeaponFireSnd(0)&#61;SoundCue&#39;A&#95;Weapon&#95;Link.Cue.A&#95;Weapon&#95;Link&#95;FireCue&#39;
   WeaponFireSnd(1)&#61;SoundCue&#39;A&#95;Weapon&#95;Link.Cue.A&#95;Weapon&#95;Link&#95;AltFireCue&#39;
   PickupSound&#61;SoundCue&#39;A&#95;Pickups.Weapons.Cue.A&#95;Pickup&#95;Weapons&#95;Link&#95;Cue&#39;

   MuzzleFlashSocket&#61;MuzzleFlashSocket
   MuzzleFlashPSCTemplate&#61;ParticleSystem&#39;WP&#95;LinkGun.Effects.P&#95;FX&#95;LinkGun&#95;MF&#95;Primary&#39;

   CrosshairImage&#61;Texture2D&#39;UI&#95;HUD.HUD.UTCrossHairs&#39;
   CrossHairCoordinates&#61;(U&#61;384,V&#61;0,UL&#61;64,VL&#61;64)
}
</pre>
</div>
<p />
<h3><a name="Tuning Weapons"></a> Tuning Weapons </h3>
<p />
There are many parameters which control how a weapon functions, found within several classes including the weapon class itself as well as classes for any projectiles being used. An explanation of many of the commonly used parameters as well as how weapons function on the code side is available on the <a href="WeaponsTechnicalGuide.html" class="twikiLink">Weapons Technical Guide</a> page.
<p />
<h4><a name="Useful Console Commands"></a> Useful Console Commands </h4>
<p />
One feature of the Unreal Engine which is very useful for tuning weapons is the <code>editactor</code> console command. While using the weapon you can type <code>editactor class=weapon</code> at the console, and a property window should pop up. This allows you to tune almost all of the parameters as you use the weapon, making iteration very quick.
<p />
</noautolink>
<p />
<style type="text/css">
<!--
div.codesnippet
{
    margin:0px 10px;
    padding:0px 10px;
    background:#f0f0f0;
    font:12px Courier;
    max-height:500px;
    overflow:auto;
    border:2px inset #989898;
}
-->
</style>
<p />
<p />
<p />
<p />
<p />
<p />


<!-- BEGIN UE4 NOTICE -->



<div id="version_message" style="display:none;">

    <div style="position:fixed;top:0px;left:0px;width:100%;height:100%;background:#000;opacity:0.5;">

    </div>

    <div style="position:fixed;top:50%;left:50%;margin:-70px 0px 0px -240px;background:#FFF;border-radius:6px;width:480px;box-shadow:0px 5px 30px -5px rgba(0,0,0,0.9);">

        <div style="font-size:16px;font-weight:bold;background: url(rsrc/Three/warning.png) no-repeat scroll 5px 5px;padding:4px 10px 5px 25px;height:21px;width:440px;">

            Important!

        </div>

        <div style="font-size:11px;padding:5px 10px 10px;width:460px;">

            <p>You are viewing documentation for the <strong>Unreal Development Kit (UDK)</strong>.</p>



            <p>If you are looking for the Unreal Engine 4 documentation, please visit the <a style="color:#000;" href="https://docs.unrealengine.com">Unreal Engine 4 Documentation</a> site.</p>

        </div>

        <div style="height:20px;padding:4px;margin:6px;border-top:1px solid #a0a0a0;">

            <form onsubmit="return closeVersionMessage();">

                <input type="checkbox" id="dismiss" value="dismiss" />

                <label for="dsimiss">Don't show me this again</label>

                <input type="submit" value="Close" style="cursor:pointer;float:right;width:60px;color:#f0f0f0;font-weight:bold;background:#882222;height:24px;padding:2px 3px 3px;text-align:center;border:1px outset #000;" />

            </form>

        </div>

    </div>

</div>



<script type="text/javascript">

    window.onload = function () {

        LoadVersionMessage();

    }



    function LoadVersionMessage()

    {

        var showMessage = "false";
        if(showMessage != "false")

        {

            showVersionMessage();

        }

    }



    function showVersionMessage()

    {

        var message = document.getElementById("version_message");

        if(message)

        {

            message.style.display = "block";

        }

    }



    function closeVersionMessage() {

        var dismiss = document.getElementById("dismiss");

        var message = document.getElementById("version_message");

        if (message) {

            message.style.display = "none";

        }

        if (dismiss.checked) {

            eraseCookie("doc_version_message");

            createCookie("doc_version_message", "false", 365);

            dismiss.checked = false;

        }

        return false;

    }



    function createCookie(name, value, days) {

        if (days) {

            var date = new Date();

            date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));

            var expires = "; expires=" + date.toGMTString();

        }

        else var expires = "";

        document.cookie = name + "=" + value + expires + "; path=/";

    }



    function readCookie(name) {

        var nameEQ = name + "=";

        var ca = document.cookie.split(';');

        for (var i = 0; i < ca.length; i++) {

            var c = ca[i];

            while (c.charAt(0) == ' ') c = c.substring(1, c.length);

            if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);

        }

        return null;

    }



    function eraseCookie(name) {

        createCookie(name, "", -1);

    }

</script>



<!-- END UE4 NOTICE -->



</div></div><div id="footer"><div style="BACKGROUND-COLOR: transparent; margin: 0; padding: 0; width: 100%;"><div>&nbsp;</div><div style="float: left; text-align: left; vertical-align: bottom; width: 50%;"><a href="http://www.videogamevoters.org"><img src="rsrc/vgvn.jpg" border="0" width="234" height="60" alt="Video Game Voters Network" /></a></div><div style="float: right; text-align: right; vertical-align: bottom; width: 50%;">Copyright &copy; 2001-2012 <a href="http://www.epicgames.com" target="_top">Epic Games, Inc.</a><br /><a href="../Main/TermsAndConditions.html" class="twikiLink">Terms and Conditions</a><br /><a href="http://epicgames.com/privacynotice" target="_top">Privacy Notice</a></div></div></div></div>
<p />
</html></body>
