<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
	"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title> UDK | DevelopmentKitFirstScriptProject    </title>

<style type="text/css" media="all">@import "rsrc/twiki_webs.css";</style>
<style type="text/css" media="all">@import "rsrc/udn_new.css";</style>
<link rel="icon" href="rsrc/Three/WebPreferences/favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="rsrc/Three/WebPreferences/favicon.ico" type="image/x-icon" />


<!-- view.static_udn3.tmpl  -->
<script language="JavaScript" type="text/javascript" src="rsrc/udn.js"></script>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

</head>
<p />
<body id="webbgThree">
<p />

<p />
<div id="webThree"><div id="head">
<!--
<div class="header">
 -->
<div style="background: url(/pub/webbg_udn.jpg); background-repeat: no-repeat; height:140px; width: 100%;" >
<!--
<div style="background: transparent url(/pub/udn_header_bg.jpg); background-repeat: repeat-x; height:140px; width: 100%; margin-left: 991px;">
 -->
<p />
<div id="nav">
<ul class="nav">
<font color=black>|</font>&nbsp;&nbsp;<li class=nav_Three><a href="../Main/WebHome.html" class="twikiLink">Main</a></li><font color=black>|</font><li class=nav_Three><a href="../Two/WebHome.html" class="twikiLink">UnrealEngine2</a></li><font color=black>|</font><li class=nav_Three><a href="WebHome.html" class="twikiLink">UnrealEngine3</a></li><font color=black>|</font><li class=nav_Three><a href="https://docs.unrealengine.com" class="twikiLink">UnrealEngine4</a></li><font color=black>|</font><li class=nav_Three><a href="../Main/BusinessAndLegal.html" class="twikiLink">Business &amp; Legal</a></li><font color=black>|</font>
</ul><br><br><br>
</div>
</div>
</div> <!-- end head -->
<div id="pagedefault">
<div id="maincol">
<div id="tool">
<div id="tooltop">UDN</div>
<div id="tooltext" style="padding: 10px 10px 10px 10px;">
Search public documentation: <br>
<form ACTION="/search/index.php" METHOD="GET" NAME="main" ID="main">
<input TYPE="TEXT" NAME="q" SIZE="15" STYLE="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: xx-small;">
<input TYPE="SUBMIT" VALUE="Search" STYLE="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: xx-small;"><br>
</form>
</div>
<div id="toolband">DevelopmentKitFirstScriptProject  </b></div>
<div id="tooltext">
<a href="DevelopmentKitFirstScriptProjectJP.html" class="twikiLink">日本語訳</a><br><a href="DevelopmentKitFirstScriptProjectCH.html" class="twikiLink">中国翻译</a><br><a href="DevelopmentKitFirstScriptProjectKR.html" class="twikiLink">한국어</a><br>

<!-- Three/DevelopmentKitFirstScriptProject -->
<hr size="1" noshade="noshade" />
Interested in the Unreal Engine? <br>
Visit the <a href="http://www.unrealtechnology.com" target="_top">Unreal Technology</a> site.<br>
<br>
Looking for jobs and company info? <br>
Check out the <a href="http://www.epicgames.com" target="_top">Epic games</a> site.<br>
<br>
Questions about support via UDN? <br>
Contact the <a href="../Main/ContactUDNStaff.html" class="twikiLink">UDN Staff</a> <br>
<br>
</div> <!-- end toolbox content -->
<div id="toolbottom"></div>
</div> <!-- end tool -->
<p />
<noautolink>
<h1><a name="Your first _UnrealScript project"></a> Your first UnrealScript project </h1>
<p />
<em>Document Summary: A guide for creating your first UnrealScript project in the Unreal Development Kit.</em>
<p />
<em>Document Changelog: Initial part of the example game.</em>
<p />
<div class="twikiToc"> <ul>
<li> <a href="DevelopmentKitFirstScriptProject.html#Your first _UnrealScript project"> Your first UnrealScript project</a> <ul>
<li> <a href="DevelopmentKitFirstScriptProject.html#Overview"> Overview</a>
</li> <li> <a href="DevelopmentKitFirstScriptProject.html#Setting up the environment"> Setting up the environment</a> <ul>
<li> <a href="DevelopmentKitFirstScriptProject.html#Setting up UDK"> Setting up UDK</a> <ul>
<li> <a href="DevelopmentKitFirstScriptProject.html#UDK directory layout"> UDK directory layout </a>
</li></ul>
</li> <li> <a href="DevelopmentKitFirstScriptProject.html#IDE/Editor"> IDE/Editor</a> <ul>
<li> <a href="DevelopmentKitFirstScriptProject.html#nFringe"> nFringe</a>
</li> <li> <a href="DevelopmentKitFirstScriptProject.html#WOTgreal"> WOTgreal</a>
</li> <li> <a href="DevelopmentKitFirstScriptProject.html#Other editors"> Other editors</a>
</li></ul>
</li> <li> <a href="DevelopmentKitFirstScriptProject.html#Other important things"> Other important things</a>
</li></ul>
</li> <li> <a href="DevelopmentKitFirstScriptProject.html#Example application"> Example application</a> <ul>
<li> <a href="DevelopmentKitFirstScriptProject.html#Project setup"> Project setup</a>
</li> <li> <a href="DevelopmentKitFirstScriptProject.html#UnrealScript Class Hierarchy"> UnrealScript Class Hierarchy</a> <ul>
<li> <a href="DevelopmentKitFirstScriptProject.html#GameInfo subclass"> GameInfo subclass</a> <ul>
<li> <a href="DevelopmentKitFirstScriptProject.html#Class declaration"> Class declaration</a>
</li> <li> <a href="DevelopmentKitFirstScriptProject.html#The new player controller"> The new player controller</a>
</li> <li> <a href="DevelopmentKitFirstScriptProject.html#Greeting the user"> Greeting the user</a>
</li></ul>
</li> <li> <a href="DevelopmentKitFirstScriptProject.html#PlayerController subclass"> PlayerController subclass</a> <ul>
<li> <a href="DevelopmentKitFirstScriptProject.html#Crosshair"> Crosshair</a>
</li> <li> <a href="DevelopmentKitFirstScriptProject.html#The fire button"> The fire button</a>
</li> <li> <a href="DevelopmentKitFirstScriptProject.html#What we are looking at"> What we are looking at</a>
</li></ul>
</li> <li> <a href="DevelopmentKitFirstScriptProject.html#End of the example"> End of the example</a>
</li></ul>
</li> <li> <a href="DevelopmentKitFirstScriptProject.html#Compiling"> Compiling</a>
</li> <li> <a href="DevelopmentKitFirstScriptProject.html#Testing"> Testing</a>
</li> <li> <a href="DevelopmentKitFirstScriptProject.html#Debugging"> Debugging</a>
</li></ul>
</li> <li> <a href="DevelopmentKitFirstScriptProject.html#Further reading"> Further reading</a>
</li></ul>
</li></ul>
</div>
<p />
<h2><a name="Overview"></a> Overview </h2>
<p />
This tutorial will guide you through setting up your first UnrealScript project for the UDK. This tutorial is not about creating a complete game with the UDK, nor will it give a detailed description of the game framework as it is present in the UDK.
<p />
<h2><a name="Setting up the environment"></a> Setting up the environment </h2>
<p />
Before you start programming you will need to set up your development environment.
<p />
<h3><a name="Setting up UDK"></a> Setting up UDK </h3>
<p />
Start off by getting the <a href="http://udk.com/download.html" target="_top">latest version of the UDK</a>. Execute the installer and follow the instructions. It is best to install the UDK in an easy to find directory on your system, and not hidden away somewhere in the "Program Files" directory. You will be visiting the UDK directory quite often during development.
<p />
New versions of the UDK will be made available regulary. But it is wise not to jump the gun and update to the latest version as soon as it is available. Certain things might have changed that could break your current project. When a new UDK version is released make sure your project is in a stable state. And then migrate to the newer version and make sure everything still works.
<p />
<h4><a name="UDK directory layout"></a> UDK directory layout </h4>
<p />
The UDK installation directory has the following layout (some might not exist until the first time you run the UDK):
<p /> <ul>
<li> <code>Binaries</code> ; Contains various utilities. <ul>
<li> <code>ActorX</code> ; ActorX plugins for various 3D Modeling programs.
</li> <li> <code>FaceFXPlugins</code> ; FaceFX plugins for various 3D Modeling programs.
</li> <li> <code>InstallData</code> ; Files used during the installation of the UDK.
</li> <li> <code>SpeedTreeModeler</code> ; SpeedTree tools.
</li> <li> <code>Win32</code> ; This directory contains the UDK executable and various required libraries.
</li> <li> <code>Win64</code> ; Here you will find the 64bit versions of the UDK executables which can be used when you have a 64bit version of MS Windows.
</li> <li> <code>Windows</code> ; Contains an install file to install various runtime libraries required by the UDK. These libraries have already been installed on your system during the setup.
</li></ul>
</li> <li> <code>Development</code> ; The development directory. <ul>
<li> <code>Src</code> ; This directory is used for all source files, including UnrealScript source. The directory already contains the UnrealScript sources of the code included with the UDK. You will be adding your own source to the same directory.
</li></ul>
</li> <li> <code>Engine</code> ; This directory is used for the base files of the UnrealEngine. You should not change any of the content in this directory, that's what the <code>UDKGame</code> directory is for. Everything in this directory can be used by your application even if you are creating a commercial UDK application. <ul>
<li> <code>Config</code> ; This contains the base configuration files, these files are usually inherited by the configuration files in the <code>UDKGame</code> directory.
</li> <li> <code>Content</code> ; Content packages.
</li> <li> <code>EditorResources</code> ; Resource files used by the editor.
</li> <li> <code>Localization</code> ; Localization files. Every language as its own subdirectory containing the localized files.
</li> <li> <code>Shaders</code> ; Shader source files.
</li> <li> <code>Stats</code> ; Template files used to create reports about various development statistics.
</li></ul>
</li> <li> <code>UDKGame</code> ; This is the directory you will be adding new content to.  <ul>
<li> <code>Build</code>
</li> <li> <code>Config</code> ; This directory contains two types of configuration files, the default configuration files, and the materialized configuration files which will be updated over time. The default configuration files provide the default configuration for the system and will never be updated by the engine.
</li> <li> <code>Content</code> ; Contains all content packages (including levels) for your application. You may use any content included in these directories in a commercial UDK application except for any assets marked as a SkeletalMesh in the Content Browser (see ContentBrowserReference). There is no fixed setup for the subdirectories, it all depends on the configuration.
</li> <li> <code>Localization</code> ; The localization files.
</li> <li> <code>Logs</code> ; This directory is used for log files and crash reports.
</li> <li> <code>Movies</code> ; This directory is reserved for the Bink movies which can be shown in-game. Note: you are required to include and show the <code>UE3_logo.bik</code> movie in your application.
</li> <li> <code>Script</code> ; This directory contains the compiled script packages.
</li> <li> <code>Splash</code> ; Contains the splash screens for the editor and game while they are starting.
</li></ul>
</li></ul>
<p />
<h3><a name="IDE/Editor"></a> IDE/Editor </h3>
<p />
The UDK does not contain an editor for writing UnrealScript. UnrealScript is much like Java. The source code is stored in plain text files. So you can use your favorite text editor to write your code.
<p />
There are however some special editors that provide more functionality.
<p />
<h4><a name="nFringe"></a> nFringe </h4>
<p />
The most notable editor at the moment is nFringe by Pixel Mine Games. nFringe provides a total integrated development environment for UE3, and thus also for the UDK. nFringe builds upon the Visual Studio IDE provided by Microsoft. It works with both the professional version of Visual Studio as with the free Visual Studio Express.
<p />
nFringe is free for non-commercial projects. More information about nFringe can be found <a href="http://pixelminegames.com/nFringe.aspx" target="_top">here</a>.
<p />
To install nFridge follow <a href="http://wiki.pixelminegames.com/index.php?title=Tools:nFringe#First_time_installation" target="_top">these instructions</a>.
<p />
You should use nFringe in the <a href="http://wiki.pixelminegames.com/index.php?title=Tools:nFringe:UnrealScript:LicenseeProjects" target="_top">Licensee Project</a> mode rather than the "General/Mod Project" mode. This is because the UDK behaves pretty much as a true licensed UE3, but with only UnrealScript access.
<p />
The project you set up is not specifically for one package, it is for the whole UDK as a single project. So you should store the project and solution files in <code>UDK\Development\src</code>, just like the instructions mention.
<p />
nFringe does not automatically manage the UnrealScript packages. You will manually have to create the proper directory structure for each package, and also update the configuration so that the package will be included in the compilation process. See the <a href="DevelopmentKitFirstScriptProject.html#ProjectSetup" class="twikiAnchorLink">project setup</a> for the details.
<p />
<h4><a name="WOTgreal"></a> WOTgreal </h4>
<p />
And other IDE specifically written for the UnrealEngine is WOTgreal. WOTgreal has partial support for UnrealEngine3. Various features of WOTgreal do not work well with the UE3 set up. But you can still write UnrealScript and use the code insight and code completion features.
<p />
To use WOTgreal you first need to <a href="http://www.wotgreal.com/" target="_top">download</a> the latest stable release. After that download the latest development release and extract the content to the installation directory overwriting the previous files. To use WOTgreal in Windows Vista you to start it with administrative privileges.
<p />
<div style="float: right; clear: right;"><a href="rsrc/Three/DevelopmentKitFirstScriptProject/WOTGrealConfig1.png"><img src="rsrc/Three/DevelopmentKitFirstScriptProject/WOTGrealConfig1_small.png" alt="WOTGrealConfig1.png" /></a></div>
Setting up WOTgreal for the UDK takes some work. When you start it you first need to set up a "game type". In the "tools" menu select "Game Types Configurations". In the "Configure Game Types" dialog add a new game type with the following information:
<p />
<div style="float: right; clear: right;"><a href="rsrc/Three/DevelopmentKitFirstScriptProject/WOTGrealConfig2.png"><img src="rsrc/Three/DevelopmentKitFirstScriptProject/WOTGrealConfig2_small.png" alt="WOTGrealConfig2.png" /></a></div> <dl>
<dt> Display name  </dt><dd> <code>UDK</code> (or any name you like)
</dd> <dt> Game EXE name </dt><dd> <code>udk</code>
</dd> <dt> Menu name </dt><dd> <code>UDK</code>
</dd> <dt> Use "extends" instead of "expands"  </dt><dd>
</dd> <dt> Game Architecture  </dt><dd> "UE3"
</dd></dl>
<p />
All other settings have no real use at the moment. Now save the settings by pressing the "OK" button and return to the main WOTgreal screen.
<p />
Open the preferences through the "Options" menu. In the preferences window select "Game Information". Select game type "UDK" from the list.
<p />
<div style="float: right; clear: right;"><a href="rsrc/Three/DevelopmentKitFirstScriptProject/WOTGrealConfig3.png"><img src="rsrc/Three/DevelopmentKitFirstScriptProject/WOTGrealConfig3_small.png" alt="WOTGrealConfig3.png" /></a></div>
And update the following settings, where {UDK directory} is the directory where you installed the UDK.
<p /> <dl>
<dt> UCC.exe File  </dt><dd> <code>{UDK directory}\binaries\win32\udk.com</code>
</dd> <dt> Game Root Dir  </dt><dd> <code>{UDK directory}</code>
</dd> <dt> Source Root Dir  </dt><dd> <code>{UDK directory}\Development\Src</code>
</dd></dl>
<p />
<strong>Note:</strong> it is important to the <code>udk.com</code> and not <code>udk.exe</code>.
<p />
<div style="float: right; clear: right;"><a href="rsrc/Three/DevelopmentKitFirstScriptProject/WOTGrealConfig4.png"><img src="rsrc/Three/DevelopmentKitFirstScriptProject/WOTGrealConfig4_small.png" alt="WOTGrealConfig4.png" /></a></div>
<div style="float: right; clear: right;"><a href="rsrc/Three/DevelopmentKitFirstScriptProject/WOTGrealConfig5.png"><img src="rsrc/Three/DevelopmentKitFirstScriptProject/WOTGrealConfig5_small.png" alt="WOTGrealConfig5.png" /></a></div>
After this go to the "Compiling &amp; Debugging" sections. In the "Pre-Compile" tab select the option "Do nothing for pre-compilation". In the compile tab select the option "Run this program/... to compile". And enter the following: <code>c:\windows\system32\cmd.exe /C {UDK directory}\binaries\win32\udk.com make</code>.
<p />
In the "Post-Compile" tab enter the following location as the log name: <code>{UDK directory}\UDKGame\Logs\Launch.log</code>.
<p />
After these steps WOTgreal should be usable. to populate the packages and classes trees press F5. This make take a while.
<p />
WOTgreal does not show UnrealScript interfaces, but you can use the editor to write them. Pre-processor directives are also not recognized, but as long as you do not use them in declarations you should not encounter any issues.
<p />
Unlike nFringe WOTgreal does create the proper directory structure for UnrealScript packages. However, it does not update the configuration to have the package included during the compilation. See the <a href="DevelopmentKitFirstScriptProject.html#ProjectSetup" class="twikiAnchorLink">project setup</a> section for additional information.
<p />
<h4><a name="Other editors"></a> Other editors </h4>
<p />
Of course you can also choose you use your favorite text editor. For quite some editors there are syntax highlighers for UnrealScript, and maybe other advanced features. See the community driven <a href="http://wiki.beyondunreal.com/Legacy:Text_Editor" target="_top">UnrealWiki</a> for more information about other editors.
<p />
When using a normal text editor you might also want to use the tool called UnCodeX. It provides a class and package tree like you would also find in nFringe or WOTgreal, and various other features that are a useful addition to the plain text editors. You should download the latest stable release, and after installation download the latest development release which provides support for UE3.
<p />
<h3><a name="Other important things"></a> Other important things </h3>
<p />
In the near future when the development of your application takes off you might want to think about using a <a href="http://en.wikipedia.org/wiki/Version_control" target="_top">version control system</a>. A version control system can serve two important roles. The most important role of all is that it provides a backup and track record of your development. When you make a mistake in your development you could easily restore an earlier version. The second important role is that it will allow you to work with multiple people on the same project.
<p />
<h2><a name="Example application"></a> Example application </h2>
<p />
This section will discuss the development of a small application for the UDK. We are going to call this application <code>CluOne</code>.
<p />
This small application does not do much. It provides a simple system to request some information about the in game element you are currently looking at.
<p />
<a name="ProjectSetup"></a>
<h3><a name="Project setup"></a> Project setup </h3>
<p />
<img src="rsrc/Three/DevelopmentKitFirstScriptProject/SrcDir.png" alt="SrcDir.png" width='177' height='186' />
<p />
As mentioned earlier, the directory <code>UDK\Development\src</code> is the location for the source code. That directory already contains the source code for all the UnrealScript classes in the UDK. Every subdirectory is for a single package.
<p />
The source code of <code>CluOne</code> should be added to this directory. The example application is a small application, thus a single package will suffice. Create a directory called <code>CluOne</code> in the <code>UDK\Development\src</code> directory. In that <code>CluOne</code> directory, create another directory called <code>Classes</code>. The UnrealScript compiler looks for the UnrealScript code in the <code>UDK\Development\src\*\Classes</code> directories. All other content in the package directories is ignored.
<p />
Even though the <code>CluOne</code> directory exists in the <code>src</code> directory the compiler will not pick it up, automatically. The configuration file needs to be updated to register the <code>CluOne</code> package as a valid UnrealScript package.
<p />
Open the file <code>UDK\UDKGame\Config\UDKEngine.ini</code> and look for the section called <code>[UnrealEd.EditorEngine]</code>. In this section you see some entries called <code>EditPackages</code>. These are the default packages the compiler will consider for compiling. <code>EditPackages</code> are reserved for the base UDK packages, custom packages should be added as <code>ModEditPackages</code>.
<p />
Thus for the <code>CluOne</code> package the entry <code>ModEditPackages=CluOne</code> should be added. The order in which packages are listed in the <code>EditPackages</code> and <code>ModEditPackages</code> is of importance. It defines the order in which the packages will be compiled, which influence the the class hierarchy. A class cannot be compiled when its parent class has not been compiled yet. The UnrealScript compiler is not as sophisticated as other compilers, such as the Java compiler, it can not figure out the order of compilation for itself.
<p />
<h3><a name="UnrealScript Class Hierarchy"></a> UnrealScript Class Hierarchy </h3>
<p />
The UDK comes with a lot of UnrealScript classes--over 2000 of them. It is not important to know what all these classes do. It is best to use nFringe, WOTgreal or UnCodeX to inspect the whole class hierarchy.
<p />
There are two very important and quite distinct base classes. First there is the base class <code>Object</code>, from which all other UnrealScript classes are derived. <code>Object</code> defines a lot of core functions, including various operators. The second important class is <code>Actor</code>. The <code>Actor</code> class is the base class for all "moving" or "living" elements in the game. All visible elements in a level are <code>Actors</code>, but not all <code>Actors</code> are visible. For example, all subclasses of <code>Info</code> are invisible by default. <code>Object</code> classes are used for utility or lightweight functionality, but also for the user interface. UnrealScript classes that need to have network functionality (i.e. communicate between client and server) need to be a subclass of <code>Actor</code>.
<p />
This tutorial is going to extend the following classes:
<p /> <dl>
<dt> GameInfo  </dt><dd> This is the main class for the game logic. When creating an application with the UDK you will mostlikely create a subclass of this game.
</dd> <dt> PlayerController  </dt><dd> This class represents a player, not the visible part, but it processes the input and performs actions. The actual visual representation of the player (if there is any) is performed by a <code>Pawn</code> subclass.
</dd></dl>
<p />
<h4><a name="GameInfo subclass"></a> GameInfo subclass </h4>
<p />
The entry point for most applications is a <code>GameInfo</code> subclass. This class defines which <code>PlayerController</code> class is created, and various other important game logic classes. For this tutorial the class is briefly skimmed, there is too much information to explain it all.
<p />
<h5><a name="Class declaration"></a> Class declaration </h5>
<p />
To create a new class you simply create a file with the same name as you want the class to be called in the <code>Classes</code> directory of the package that should contain the class. For the <code>CluOne</code> application a <code>GameInfo</code> subclass is created with the name <code>CluOneGame</code> and it is saved to the file <code>UDK\Development\Src\CluOne\Classes\CluOneGame.uc</code>.
<p />
The class declaration of an UnrealScript class is as follows:
<pre>
class CluOneGame extends GameInfo;
</pre>
<p />
Note that it ends with a semicolon (;), and that there are no curly braces. Every thing after the class declaration belongs to that class. Only one class can be declared per file.
<p />
<h5><a name="The new player controller"></a> The new player controller </h5>
<p />
The <code>CluOne</code> application uses a new PlayerController class. When a user connects to the game, the <code>GameInfo</code> class creates a controller for this user. In order for the <code>GameInfo</code> class to create the correct class the following code is added to the end of the source.
<p />
<pre>
defaultproperties
{
    PlayerControllerClass=class'CluOnePlayerController'
}
</pre>
<p />
The <code>defaultproperties</code> block defines default values of certain variables. This is much like variable initializers in other programming languages (but not exactly the same). The default <code>GameInfo</code> implementation creates a <code>PlayerController</code> instance based on the value of the <code>PlayerControllerClass</code> variable. There are of course other ways to create the correct class instance, but this is the easiest and best method.
<p />
<h5><a name="Greeting the user"></a> Greeting the user </h5>
<p />
There is a whole chain of events triggered in the <code>GameInfo</code> class when a user connects to the game server. (Even in single player, or "StandAlone" mode, you can think of the Unreal Engine as a "game server")
<p />
Three of these events are <code>PreLogin</code>, <code>Login</code>, and <code>PostLogin</code>. The event names give away their order. At the <code>PostLogin</code> event the user is completely connected, and can be interfaced with.
<p />
At this point the user should be greeted:
<pre>
event PostLogin( PlayerController NewPlayer )
{
    super.PostLogin(NewPlayer);
    NewPlayer.ClientMessage("Welcome to the grid "$NewPlayer.PlayerReplicationInfo.PlayerName);
    NewPlayer.ClientMessage("Point at an object and press the left mouds button to retrieve the target's information");
}
</pre>
<p />
The default player name is defined by the variable <code>DefaultPlayerName</code>, which is defined as a localized string. The proper way to change the default name is to update the localization files. But for now we will hardcode the players name using the following function:
<pre>
event PlayerController Login(string Portal, string Options, const UniqueNetID UniqueID, out string ErrorMessage)
{
	local PlayerController PC;
	PC = super.Login(Portal, Options, UniqueID, ErrorMessage);
	ChangeName(PC, "Clu", true);
    return PC;
}
</pre>
<p />
<h4><a name="PlayerController subclass"></a> PlayerController subclass </h4>
<p />
The most exciting stuff goes on in the custom PlayerController class.  Each new class needs to be in its own file with the same name as you want the class to be called in the <code>Classes</code> directory of the package that should contain the class. For the <code>CluOne</code> application a <code>PlayerController</code> subclass is created with the name <code>CluOnePlayerController</code> and it is saved to the file <code>UDK\Development\Src\CluOne\Classes\CluOnePlayerController.uc</code>.
<p />
We start of by the simple declaration of the class:
<p />
<pre>
class CluOnePlayerController extends PlayerController;
</pre>
<p />
<h5><a name="Crosshair"></a> Crosshair </h5>
<p />
By default the PlayerController class does not show a crossair. Various existing subclasses do show crossairs. There are various ways to eventually draw the crossair. You could delegate it to an inventory item the player is currently holding. Or you could draw it from the HUD. Or you can draw it directly from the PlayerController.
<p />
The <code>DrawHud(...)</code> function is called from the current HUD on the PlayerController so that it can draw additional stuff on the screen. The following code draws a nice little green cross in the middle of the screen.
<p />
<pre>
/**
 * Draw a crosshair. This function is called by the Engine.HUD class.
 */
function DrawHUD( HUD H )
{
	local float CrosshairSize;
	super.DrawHUD(H);

	H.Canvas.SetDrawColor(0,255,0,255);

	CrosshairSize = 4;

	H.Canvas.SetPos(H.CenterX - CrosshairSize, H.CenterY);
	H.Canvas.DrawRect(2*CrosshairSize + 1, 1);

	H.Canvas.SetPos(H.CenterX, H.CenterY - CrosshairSize);
	H.Canvas.DrawRect(1, 2*CrosshairSize + 1);
}
</pre>
<p />
<h5><a name="The fire button"></a> The fire button </h5>
<p />
Now that we can see what we are looking at. We need some way to initiate the "looking at stuff". We could always look, but we decided to only look for specific information when the user presses the left mouse button.
<p />
Through the input handling system the left mouse button is mapped as the fire action. The fire action is actually a sequence "console commands" which are executed. (See the file <code>Engine\Config\BaseInput.ini</code>)
<p />
Functions with the <code>exec</code> modifier defined in certain classes (like the player controller class) are accepted as the so called "console commands". One of the console commands executed by the fire action is <code>StartFire</code>. The <code>StartFire</code> command is defined in the PlayerController class.
<p />
In our custom player controller class we are going to override this function and add our own logic to it:
<p />
<pre>
/*
 * The default state for the player controller
 */
auto state PlayerWaiting
{
	/*
	 * The function called when the user presses the fire key (left mouse button by default)
	 */
	exec function StartFire( optional byte FireModeNum )
	{
		showTargetInfo();
	}
}
</pre>
<p />
As you can see the <code>StartFire</code> function is actually declared in the a state called <code>PlayerWaiting</code>. Actor classes in the UnrealEngine are implicit state machines. This means that depending on the current state of the actor it calls one implementation of a function rather than the other one. So, depending on a state of an actor you could have different behavior when the fire button is pressed. The default state (i.e. "auto state") for the player controller is the <code>PlayerWaiting</code> state. So that is why we overwrote the <code>StartFire</code> function in that state.
<p />
The actual code to show information of what we are looking at is implemented in the <code>showTargetInfo</code> function.
<p />
<h5><a name="What we are looking at"></a> What we are looking at </h5>
<p />
In order to figure our what the current player is looking at we need to trace the line of sight up to the first thing we encounter. This is done using the <code>trace(...)</code> function defined in the <code>Actor</code> class. Trace functions are used a lot to figure our if things are visible, or used to set targets for weapon fire.
<p />
We use the trace function to find the first game element the line of sight encounters. When something was encountered we play a sound and print a few lines of information about the element.
<p />
<pre>
/*
 * Print information about the thing we are looking at
 */
function showTargetInfo()
{
	local vector loc, norm, end;
	local TraceHitInfo hitInfo;
	local Actor traceHit;

	end = Location + normal(vector(Rotation))*32768; // trace to "infinity"
	traceHit = trace(loc, norm, end, Location, true,, hitInfo);

	ClientMessage("");

	if (traceHit == none)
	{
		ClientMessage("Nothing found, try again.");
		return;
	}

	// Play a sound to confirm the information
	ClientPlaySound(SoundCue'A_Vehicle_Cicada.SoundCues.A_Vehicle_Cicada_TargetLock');

	// By default only 4 console messages are shown at the time
 	ClientMessage("Hit: "$traceHit$"  class: "$traceHit.class.outer.name$"."$traceHit.class);
 	ClientMessage("Location: "$loc.X$","$loc.Y$","$loc.Z);
 	ClientMessage("Material: "$hitInfo.Material$"  PhysMaterial: "$hitInfo.PhysMaterial);
	ClientMessage("Component: "$hitInfo.HitComponent);
}
</pre>
<p />
Tracing is done from a starting point to a given end point. As start point we use the current location of the player controller. As end point we try to point to "infinity". This is done by extending the current location of the player controller with a normalized vector of the current rotation. The rotation defines the angle of the camera. The normalized vector is multiplied with the maximum distance of the world (which is between -32767 and 32768 in size). This is some basic vector math, something you will need to understand properly if you want to do anything in 3D.
<p />
The <code>ClientMessage(...)</code> function prints some information in the console of the current player. This function is also used for chatter between players or certain game events. It's also a nice way to print debug information on screen (but remember to remove the debug code in that case before you ship your application.)
<p />
<h4><a name="End of the example"></a> End of the example </h4>
<p />
This is the end of the tiny UnrealScript example. There is much more to know before you can write a real application with the UDK. Check the end of this document for additional information about UnrealScript and the game framework of the UnrealEngine.
<p />
You can download the <a href="rsrc/Three/DevelopmentKitFirstScriptProject/CluOne-source.zip" target="_top">source code of this example here</a>.
<p />
<h3><a name="Compiling"></a> Compiling </h3>
<p />
There are a couple of methods to compile your source code. when you are using an IDE with UDK support you could easily press the compile button to compile your project.
<p />
An other way to compile the code is to use the UnrealFrontend. When you start the frontend simple press the "Make" button in the toolbar and it will initialize the compiler. You can press the button as often as you'd like. It will only compile code when there have been changes to the source files. You can also initiate a full recompile. You can do this by pressing the down arrow next to the make button and select "Full Recompile".
<p />
<img src="rsrc/Three/DevelopmentKitFirstScriptProject/FrontendMake.png" alt="FrontendMake.png" width='422' height='137' />
<p />
One problem with the frontend is that it does not always show the full compile output. And therefore requiring you to open the log file by hand.
<p />
The third way, and actually the way the previous two methods start the compiler, is by executing a commandline. A normal compile is issued by
<p />
<pre>
C:\UDK\UDK-2009-11\Binaries\Win32\udk.com make
</pre>
<p />
To perform a full recompile simply add the <code>-full</code> argument on the commandline.
<p />
You should use the <code>udk.com</code> executable when you execute console command rather than the <code>udk.exe</code> executable. They both have the same effect, but the <code>udk.com</code> command will print output to the standard output, where the <code>udk.exe</code> will show it in a special window. When you want to use the compiler in build script (like a Makefile or Ant build script) you need to have the output on the standard output. In this case you also want to add the commandline switch <code>-unattended</code>. This suppresses any interactive prompts during the compilation.
<p />
If your packages are not listen in the compilation process, then make sure you added them as <code>ModEditPackages</code> in the <code>[UnrealEd.EditorEngine]</code> section of the <code>UDKGame\Config\UDKEngine.ini</code> file.
<p />
<h3><a name="Testing"></a> Testing </h3>
<p />
When the code compiled succesfully the application can be tested so see if the new functionality behaves as it should.
<p />
In most cases the application is tested by starting the UDK in client mode with a given launch URL. To start the <code>CluOne</code> application the UDK should be started with:
<p />
<pre>
C:\UDK\UDK-2009-11\Binaries\Win32\udk ExampleMap?game=CluOne.CluOneGame
</pre>
<p />
In this case the launch URL is <code>ExampleMap?game=CluOne.CluOneGame</code>. The URL starts with either a map name (in this case <code>ExampleMap</code>) or a hostname/ip for a server to join. After this comes a set of <code>?key=value</code> elements. These control various settings. The most important <code>key</code> is <code>game</code>, it defines which <code>GameInfo</code> subclass to create when starting the game. The value is the fully qualified name of the class, i.e. <code>PackageName.ClassName</code>. Other valid <code>?key=value</code> elements are usually determined by the <code>GameInfo</code> subclass that is created.
<p />
The map <code>ExampleMap</code> is used because it is a small map, so it loads quickly.
<p />
<h3><a name="Debugging"></a> Debugging </h3>
<p />
An the moment of writing there is no fancy debugger support for the UDK. Maybe in the future nFringe will enable proper UnrealScript debugging for the UDK, just as it has for UT3. Then you will be able to set breakpoints and step through the code. But until that happens you are stuck with classic debugging methods.
<p />
Usually when things do not work as you expected there are two possible causes:
<p /> <ol>
<li> The code is not called
</li> <li> You are trying to access unset data (i.e. a null pointer reference)
</li></ol>
<p />
The latter can easily be detected by inspecting the logs. During development it is vital to keep an eye on the logs, it contains vital information. The best way to keep an eye on the logs is to start the client with console logging enabled. You can do this with the following command
<p />
<pre>
C:\UDK\UDK-2010-05\Binaries\Win32\udk.exe -log
</pre>
<p />
This will open a console window with live logging output. Otherwise you might need to close the client first before you can read the log file in the <code>UDKGame\Logs</code> directory.
<p />
When inspecting the log output you should watch for lines like the following:
<p />
<pre>
Log: Accessed None 'AccessControl'
        UTDeathmatch DM-Deck.TheWorld:PersistentLevel.UTDeathmatch_0
        Function Engine.GameInfo:Login:0358
</pre>
<p />
An "Accessed None" is the UnrealScript equivalent of a null pointer exception. The log tells you the name of the variable that was being read, but which was none/null, in this case <code>AccessControl</code>. It also tells you the function where this happened: <code>Login</code> in the class <code>Engine.GameInfo</code>. The number <code>0358</code> is <em>not</em> the line number. It is actually the byte-code offset. So just ignore it, because there is no easy way to convert that to a line number. But you at least know where something went wrong.
<p />
A good way to keep track on what is happening, and what is not happening, is to add additional information to the log output. You can simply do that by writing code like this:
<p />
<pre>
`log("This will add a line to the log output");
</pre>
<p />
Note the back-tick (<code>`</code> not to be confused with the quote character <code>'</code>) in front of <code>log</code>. This is actually a <a href="UnrealScriptPreprocessor.html" class="twikiLink">preprocessor directive</a> that creates the real logging call. The full signature for this macro is:
<p />
<pre>
`log(logMessage,expression,prefix);
</pre>
<p /> <dl>
<dt> <code>logMessage</code>  </dt><dd> this is the message you want to log.
</dd> <dt> <code>expression</code>  </dt><dd> an expression, if provided it needs to be true for the message to be logged.
</dd> <dt> <code>prefix</code>  </dt><dd> a name to use to prefix your log message, this is very useful to distinguish your log message from all others
</dd></dl>
<p />
Using this simple statement you can keep track on when certain things happen.
<p />
<pre>
function foo(Bar quux)
{
    if (quux == none)
    {
        `log("foo was called but quux was none");
    }
    else {
        `log("Performing foo on "$quux)
    }
}
</pre>
<p />
For other useful debug macro directives see the file <code>Development\src\Core\Globals.uci</code>.
<p />
An other very useful feature for debugging is the function <code>ScriptTrace()</code>, defined in <code>Object</code>. Calling this function will dump a stack trace to the log output. This will allow you to see the chain of function calls that lead up to the current point.
<p />
One important note, make sure that your code compiles without warnings. A warning is not an issue at compiletime, but it often results in errors when the code is executed.
<p />
<h2><a name="Further reading"></a> Further reading </h2>
<p /> <ul>
<li> <a href="UnrealScriptReference.html" class="twikiLink">UnrealScriptReference</a> <ul>
<li> <a href="UnrealScriptCheatSheet.html" class="twikiLink">UnrealScriptCheatSheet</a>: Convenient printable summary of UnrealScript syntax.
</li> <li> <a href="MasteringUnrealScriptBaptismByFire.html" class="twikiLink">Mastering Unreal: UnrealScript Baptism By Fire</a>
</li> <li> <a href="MasteringUnrealScriptClasses.html" class="twikiLink">Mastering Unreal: UnrealScript Classes</a>
</li> <li> <a href="MasteringUnrealScriptFunctions.html" class="twikiLink">Mastering Unreal: UnrealScript Functions</a>
</li> <li> <a href="MasteringUnrealScriptStates.html" class="twikiLink">Mastering Unreal: UnrealScript States</a>
</li> <li> <a href="MasteringUnrealScriptDelegates.html" class="twikiLink">Mastering Unreal: UnrealScript Delegates</a>
</li> <li> <a href="MasteringUnrealScriptInterfaces.html" class="twikiLink">Mastering Unreal: UnrealScript Interfaces</a>
</li> <li> <a href="MasteringUnrealScriptPreProcessor.html" class="twikiLink">Mastering Unreal: UnrealScript PreProcessor</a>
</li></ul>
</li> <li> <a href="ConfigurationFiles.html" class="twikiLink">ConfigurationFiles</a>
</li> <li> <a href="NetworkingOverview.html" class="twikiLink">NetworkingOverview</a>
</li></ul>
</noautolink>
<p />
<p />
<p />
<p />
<p />
<p />


<!-- BEGIN UE4 NOTICE -->



<div id="version_message" style="display:none;">

    <div style="position:fixed;top:0px;left:0px;width:100%;height:100%;background:#000;opacity:0.5;">

    </div>

    <div style="position:fixed;top:50%;left:50%;margin:-70px 0px 0px -240px;background:#FFF;border-radius:6px;width:480px;box-shadow:0px 5px 30px -5px rgba(0,0,0,0.9);">

        <div style="font-size:16px;font-weight:bold;background: url(rsrc/Three/warning.png) no-repeat scroll 5px 5px;padding:4px 10px 5px 25px;height:21px;width:440px;">

            Important!

        </div>

        <div style="font-size:11px;padding:5px 10px 10px;width:460px;">

            <p>You are viewing documentation for the <strong>Unreal Development Kit (UDK)</strong>.</p>



            <p>If you are looking for the Unreal Engine 4 documentation, please visit the <a style="color:#000;" href="https://docs.unrealengine.com">Unreal Engine 4 Documentation</a> site.</p>

        </div>

        <div style="height:20px;padding:4px;margin:6px;border-top:1px solid #a0a0a0;">

            <form onsubmit="return closeVersionMessage();">

                <input type="checkbox" id="dismiss" value="dismiss" />

                <label for="dsimiss">Don't show me this again</label>

                <input type="submit" value="Close" style="cursor:pointer;float:right;width:60px;color:#f0f0f0;font-weight:bold;background:#882222;height:24px;padding:2px 3px 3px;text-align:center;border:1px outset #000;" />

            </form>

        </div>

    </div>

</div>



<script type="text/javascript">

    window.onload = function () {

        LoadVersionMessage();

    }



    function LoadVersionMessage()

    {

        var showMessage = "false";
        if(showMessage != "false")

        {

            showVersionMessage();

        }

    }



    function showVersionMessage()

    {

        var message = document.getElementById("version_message");

        if(message)

        {

            message.style.display = "block";

        }

    }



    function closeVersionMessage() {

        var dismiss = document.getElementById("dismiss");

        var message = document.getElementById("version_message");

        if (message) {

            message.style.display = "none";

        }

        if (dismiss.checked) {

            eraseCookie("doc_version_message");

            createCookie("doc_version_message", "false", 365);

            dismiss.checked = false;

        }

        return false;

    }



    function createCookie(name, value, days) {

        if (days) {

            var date = new Date();

            date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));

            var expires = "; expires=" + date.toGMTString();

        }

        else var expires = "";

        document.cookie = name + "=" + value + expires + "; path=/";

    }



    function readCookie(name) {

        var nameEQ = name + "=";

        var ca = document.cookie.split(';');

        for (var i = 0; i < ca.length; i++) {

            var c = ca[i];

            while (c.charAt(0) == ' ') c = c.substring(1, c.length);

            if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);

        }

        return null;

    }



    function eraseCookie(name) {

        createCookie(name, "", -1);

    }

</script>



<!-- END UE4 NOTICE -->



</div></div><div id="footer"><div style="BACKGROUND-COLOR: transparent; margin: 0; padding: 0; width: 100%;"><div>&nbsp;</div><div style="float: left; text-align: left; vertical-align: bottom; width: 50%;"><a href="http://www.videogamevoters.org"><img src="rsrc/vgvn.jpg" border="0" width="234" height="60" alt="Video Game Voters Network" /></a></div><div style="float: right; text-align: right; vertical-align: bottom; width: 50%;">Copyright &copy; 2001-2012 <a href="http://www.epicgames.com" target="_top">Epic Games, Inc.</a><br /><a href="../Main/TermsAndConditions.html" class="twikiLink">Terms and Conditions</a><br /><a href="http://epicgames.com/privacynotice" target="_top">Privacy Notice</a></div></div></div></div>
<p />
</html></body>
