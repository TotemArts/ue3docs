<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
	"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title> UDK | MOBAKitShop    </title>

<style type="text/css" media="all">@import "rsrc/twiki_webs.css";</style>
<style type="text/css" media="all">@import "rsrc/udn_new.css";</style>
<link rel="icon" href="rsrc/Three/WebPreferences/favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="rsrc/Three/WebPreferences/favicon.ico" type="image/x-icon" />


<!-- view.static_udn3.tmpl  -->
<script language="JavaScript" type="text/javascript" src="rsrc/udn.js"></script>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

</head>
<p />
<body id="webbgThree">
<p />

<p />
<div id="webThree"><div id="head">
<!--
<div class="header">
 -->
<div style="background: url(/pub/webbg_udn.jpg); background-repeat: no-repeat; height:140px; width: 100%;" >
<!--
<div style="background: transparent url(/pub/udn_header_bg.jpg); background-repeat: repeat-x; height:140px; width: 100%; margin-left: 991px;">
 -->
<p />
<div id="nav">
<ul class="nav">
<font color=black>|</font>&nbsp;&nbsp;<li class=nav_Three><a href="../Main/WebHome.html" class="twikiLink">Main</a></li><font color=black>|</font><li class=nav_Three><a href="../Two/WebHome.html" class="twikiLink">UnrealEngine2</a></li><font color=black>|</font><li class=nav_Three><a href="WebHome.html" class="twikiLink">UnrealEngine3</a></li><font color=black>|</font><li class=nav_Three><a href="https://docs.unrealengine.com" class="twikiLink">UnrealEngine4</a></li><font color=black>|</font><li class=nav_Three><a href="../Main/BusinessAndLegal.html" class="twikiLink">Business &amp; Legal</a></li><font color=black>|</font>
</ul><br><br><br>
</div>
</div>
</div> <!-- end head -->
<div id="pagedefault">
<div id="maincol">
<div id="tool">
<div id="tooltop">UDN</div>
<div id="tooltext" style="padding: 10px 10px 10px 10px;">
Search public documentation: <br>
<form ACTION="/search/index.php" METHOD="GET" NAME="main" ID="main">
<input TYPE="TEXT" NAME="q" SIZE="15" STYLE="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: xx-small;">
<input TYPE="SUBMIT" VALUE="Search" STYLE="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: xx-small;"><br>
</form>
</div>
<div id="toolband">MOBAKitShop  </b></div>
<div id="tooltext">
<a href="MOBAKitShopCH.html" class="twikiLink">中国翻译</a><br><a href="MOBAKitShopKR.html" class="twikiLink">한국어</a><br>

<!-- Three/MOBAKitShop -->
<hr size="1" noshade="noshade" />
Interested in the Unreal Engine? <br>
Visit the <a href="http://www.unrealtechnology.com" target="_top">Unreal Technology</a> site.<br>
<br>
Looking for jobs and company info? <br>
Check out the <a href="http://www.epicgames.com" target="_top">Epic games</a> site.<br>
<br>
Questions about support via UDN? <br>
Contact the <a href="../Main/ContactUDNStaff.html" class="twikiLink">UDN Staff</a> <br>
<br>
</div> <!-- end toolbox content -->
<div id="toolbottom"></div>
</div> <!-- end tool -->
<p />
<noautolink>
<div style="padding:0px 0px 0px 4px;font:10px Verdana;">
<style type="text/css" media="all">@import "rsrc/UDNCSS_test.css";</style>
<b><a href="WebHome.html" class="twikiLink">UE3 Home</a></b> &gt; <b><a href="DevelopmentKitGems.html" class="twikiLink">Unreal Development Kit Gems</a></b> &gt; <b><a href="MOBAKit.html" class="twikiLink">MOBA Starter Kit</a></b> &gt; Shop <br/>
</div>
<hr size="1" noshade="noshade">
<p />
<h1><a name="MOBA Starter Kit - Shop"></a> MOBA Starter Kit - Shop </h1>
<hr size="1" noshade="noshade">
<p />
<strong><em>Last tested against UDK May, 2012</em></strong>
<p />
<div class="twikiToc"> <ul>
<li> <a href="MOBAKitShop.html#MOBA Starter Kit - Shop"> MOBA Starter Kit - Shop</a> <ul>
<li> <a href="MOBAKitShop.html#Overview"> Overview</a>
</li> <li> <a href="MOBAKitShop.html#UDKMOBAGFx_HUD"> UDKMOBAGFx_HUD</a> <ul>
<li> <a href="MOBAKitShop.html#Functions"> Functions</a>
</li></ul>
</li> <li> <a href="MOBAKitShop.html#UDKMOBAGFxHUDProperties"> UDKMOBAGFxHUDProperties</a> <ul>
<li> <a href="MOBAKitShop.html#Variables"> Variables</a>
</li></ul>
</li> <li> <a href="MOBAKitShop.html#UDKMOBAPlayerController"> UDKMOBAPlayerController</a> <ul>
<li> <a href="MOBAKitShop.html#Functions"> Functions</a>
</li></ul>
</li> <li> <a href="MOBAKitShop.html#UDKMOBAPawnReplicationInfo"> UDKMOBAPawnReplicationInfo</a> <ul>
<li> <a href="MOBAKitShop.html#Functions"> Functions</a>
</li> <li> <a href="MOBAKitShop.html#Variables"> Variables</a>
</li></ul>
</li> <li> <a href="MOBAKitShop.html#UDKMOBAShopAreaVolume"> UDKMOBAShopAreaVolume</a> <ul>
<li> <a href="MOBAKitShop.html#Functions"> Functions</a>
</li> <li> <a href="MOBAKitShop.html#Variables"> Variables</a>
</li></ul>
</li></ul>
</li></ul>
</div>
<p />
<h2><a name="Overview"></a> Overview </h2>
<hr size="1" noshade="noshade">
The shop system is a graphical user interface widget which allows players to purchase new items for their heroes.
<p />
<img src="rsrc/Three/MOBAKitShop/UDKMOBAShop.jpg" alt="UDKMOBAShop.jpg" width='800' height='453' />
<p />
<h2><a name="UDKMOBAGFx_HUD"></a> UDKMOBAGFx_HUD </h2>
<hr size="1" noshade="noshade">
This is the Scaleform HUD class which initializes and sets up the shop interface.
<p />
<h3><a name="Functions"></a> Functions </h3> <ul>
<li> <strong>ConfigShop()</strong> - This function is called when the Scaleform HUD is first initialized. It configures all of the widgets involved with the shop and caches them into variables for easy access later on. It also reads the UDKMOBAGFxHUDProperties archetype and populates the shop categories and items. Lastly, it also binds the button events to the appropriate delegates. Once the shop has been set up, this function then hides it automatically.
</li> <li> <strong>UpdateShop()</strong> - This function shows the appropriate tool tip when the mouse is over a shop category radio button.
</li> <li> <strong>ChangeShopItemType()</strong> - This function is called when clicking on an item type radio button. This changes what item category movie clip is currently visible.
</li> <li> <strong>ChangeShopCategory()</strong> - This function is called when clicking on an item category radio button. This changes what item list is currently visible.
</li> <li> <strong>PressShopItem()</strong> - This function is called when clicking on a shop item list. This handles the case where the player wants to purchase something.
</li></ul>
<p />
<h2><a name="UDKMOBAGFxHUDProperties"></a> UDKMOBAGFxHUDProperties </h2>
<hr size="1" noshade="noshade">
This is an archetype-able object which stores how all of the items are stored and presented in the GUI.
<p />
<img src="rsrc/Three/MOBAKitShop/UDKMOBAGFxHUDProperties.jpg" alt="UDKMOBAGFxHUDProperties.jpg" width='726' height='741' />
<p />
<h3><a name="Variables"></a> Variables </h3> <ul>
<li> <strong>Shop</strong> - An array of structs which further define the shop item. These structs define the list of item types (basic, upgrades, etc). <ul>
<li> <strong>LocalizedItemTypeLabel</strong> - Localized name of the item type.
</li> <li> <strong>ItemTypeRBName</strong> - Name of the item type radio button symbol in the Flash GUI.
</li> <li> <strong>ItemCategoryMCName</strong> - Name of the item category movie clip in the Flash GUI.
</li> <li> <strong>ItemCategories</strong> - An array of structs which further define the shop item. These struts define the list of item categories (basics 1, basics 2, basics 3, etc). <ul>
<li> <strong>ItemCategoryRBName</strong> - Name of the item category radio button symbol in the Flash GUI.
</li> <li> <strong>ItemCategoryLstName</strong> - Name of the item category list symbol in the Flash GUI.
</li> <li> <strong>LocalizedItemCategoryTooltip</strong> - Localized name of the item category.
</li> <li> <strong>ItemArchetypes</strong> - Array of item archetypes that can be purchased from this item type and item category.
</li></ul>
</li></ul>
</li></ul>
<p />
<h2><a name="UDKMOBAPlayerController"></a> UDKMOBAPlayerController </h2>
<hr size="1" noshade="noshade">
The player controller contains functions which handles the replication required to allow players to purchase items from the shop. Replication is handled here, as the GUI itself is never replicated nor can it handle replication.
<p />
<h3><a name="Functions"></a> Functions </h3> <ul>
<li> <strong>PurchaseItem()</strong> - This function can be executed on the server or the client and starts the purchasing logic. First a check is done to make sure that the player is able to purchase the item requested. If the game is running on the client, then it will perform a remote procedure call (<strong>UDKMOBAPlayerController::ServerPurchaseItem()</strong>) so that the server can execute the purchase logic on its side; and also simulated the purchase on its side to remove any lag. If the game is running on the server, then it will just call <strong>UDKMOBAPawnReplicationInfo::PurchaseItem()</strong>.
</li> <li> <strong>ServerPurchaseItem()</strong> - This function is called when the server is told be the client to do so. This calls <strong>UDKMOBAPawnReplicationInfo::PurchaseItem()</strong>.
</li> <li> <strong>CanPurchaseItem()</strong> - This function returns true of false depending if the user is able to purchase the requested item or not.
</li></ul>
<p />
<h2><a name="UDKMOBAPawnReplicationInfo"></a> UDKMOBAPawnReplicationInfo </h2>
<hr size="1" noshade="noshade">
This replication info is used for the hero pawns. This separation was done to allow the possibility for players to control multiple heroes at once. Thus, items are stored within this replication info.
<p />
<h3><a name="Functions"></a> Functions </h3> <ul>
<li> <strong>PurchaseItem()</strong> - This function is executed on the server when the player wishes to purchase an item. At this point, the game has already verified that the player is able to purchase this item and no more further checks are done. The player's cash is modified using <strong>UDKMOBAPlayerReplicationInfo::ModifyMoney()</strong> and the item is spawned. Next is deciding how the item is given to the player. If the player is within a valid shop area volume and has space within his/her inventory then it is given directly to the player. If the player is not within a valid shop area volume or has no more space within his/her inventory and has space within his/her stash then it is placed within the stash. Otherwise, the item is then dropped onto the ground which can later be picked up by other players. Depending on where the item is placed, auto created items are checked for and are combined
</li> <li> <strong>CheckForItemAutoCreation()</strong> - This function is executed on the server when a new item has been purchased or grabbed from the stash. It iterates over the items within the inventory, and checks if they have all the items they need in order to create a new inventory item. If they do, then the old items are destroyed and the new item is given.
</li></ul>
<p />
<h3><a name="Variables"></a> Variables </h3> <ul>
<li> <strong>MAX_ITEM_COUNT</strong> - A constant which defines the maximum amount of items the player can carry.
</li> <li> <strong>MAX_STASH_COUNT</strong> - A constant which defined the maximum amount of items the player can stash.
</li> <li> <strong>Items</strong> - Items that this hero has. This is maintained between the server and the client.
</li> <li> <strong>DroppedItemArchetype</strong> - Default dropped item archetype. This actor template is defined by the game designer to set how dropped pick ups look like.
</li></ul>
<p />
<h2><a name="UDKMOBAShopAreaVolume"></a> UDKMOBAShopAreaVolume </h2>
<hr size="1" noshade="noshade">
This volume defines the area of the map which players can buy items that go into their hero's inventory rather than into their stash.
<p />
<img src="rsrc/Three/MOBAKitShop/UDKMOBAShopAreaVolume.jpg" alt="UDKMOBAShopAreaVolume.jpg" width='800' height='453' />
<p />
<h3><a name="Functions"></a> Functions </h3> <ul>
<li> <strong>GetTeamNum()</strong> - Returns <strong>TeamNum</strong>.
</li></ul>
<p />
<h3><a name="Variables"></a> Variables </h3> <ul>
<li> <strong>TeamNum</strong> - Index of the team that this shop area volume belongs to.
</li> <li> <strong>UpperLeftCorner</strong> - Upper left corner in world coordinates of this volume. This is used to spawn dropped inventory items.
</li> <li> <strong>LowerRightCorner</strong> - Lower right corner in world coordinates of this volume. This is used to spawn dropped inventory items.
</li></ul>
<p />
</noautolink>
<p />
<p />
<p />
<p />
<p />
<p />


<!-- BEGIN UE4 NOTICE -->



<div id="version_message" style="display:none;">

    <div style="position:fixed;top:0px;left:0px;width:100%;height:100%;background:#000;opacity:0.5;">

    </div>

    <div style="position:fixed;top:50%;left:50%;margin:-70px 0px 0px -240px;background:#FFF;border-radius:6px;width:480px;box-shadow:0px 5px 30px -5px rgba(0,0,0,0.9);">

        <div style="font-size:16px;font-weight:bold;background: url(rsrc/Three/warning.png) no-repeat scroll 5px 5px;padding:4px 10px 5px 25px;height:21px;width:440px;">

            Important!

        </div>

        <div style="font-size:11px;padding:5px 10px 10px;width:460px;">

            <p>You are viewing documentation for the <strong>Unreal Development Kit (UDK)</strong>.</p>



            <p>If you are looking for the Unreal Engine 4 documentation, please visit the <a style="color:#000;" href="https://docs.unrealengine.com">Unreal Engine 4 Documentation</a> site.</p>

        </div>

        <div style="height:20px;padding:4px;margin:6px;border-top:1px solid #a0a0a0;">

            <form onsubmit="return closeVersionMessage();">

                <input type="checkbox" id="dismiss" value="dismiss" />

                <label for="dsimiss">Don't show me this again</label>

                <input type="submit" value="Close" style="cursor:pointer;float:right;width:60px;color:#f0f0f0;font-weight:bold;background:#882222;height:24px;padding:2px 3px 3px;text-align:center;border:1px outset #000;" />

            </form>

        </div>

    </div>

</div>



<script type="text/javascript">

    window.onload = function () {

        LoadVersionMessage();

    }



    function LoadVersionMessage()

    {

        var showMessage = "false";
        if(showMessage != "false")

        {

            showVersionMessage();

        }

    }



    function showVersionMessage()

    {

        var message = document.getElementById("version_message");

        if(message)

        {

            message.style.display = "block";

        }

    }



    function closeVersionMessage() {

        var dismiss = document.getElementById("dismiss");

        var message = document.getElementById("version_message");

        if (message) {

            message.style.display = "none";

        }

        if (dismiss.checked) {

            eraseCookie("doc_version_message");

            createCookie("doc_version_message", "false", 365);

            dismiss.checked = false;

        }

        return false;

    }



    function createCookie(name, value, days) {

        if (days) {

            var date = new Date();

            date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));

            var expires = "; expires=" + date.toGMTString();

        }

        else var expires = "";

        document.cookie = name + "=" + value + expires + "; path=/";

    }



    function readCookie(name) {

        var nameEQ = name + "=";

        var ca = document.cookie.split(';');

        for (var i = 0; i < ca.length; i++) {

            var c = ca[i];

            while (c.charAt(0) == ' ') c = c.substring(1, c.length);

            if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);

        }

        return null;

    }



    function eraseCookie(name) {

        createCookie(name, "", -1);

    }

</script>



<!-- END UE4 NOTICE -->



</div></div><div id="footer"><div style="BACKGROUND-COLOR: transparent; margin: 0; padding: 0; width: 100%;"><div>&nbsp;</div><div style="float: left; text-align: left; vertical-align: bottom; width: 50%;"><a href="http://www.videogamevoters.org"><img src="rsrc/vgvn.jpg" border="0" width="234" height="60" alt="Video Game Voters Network" /></a></div><div style="float: right; text-align: right; vertical-align: bottom; width: 50%;">Copyright &copy; 2001-2012 <a href="http://www.epicgames.com" target="_top">Epic Games, Inc.</a><br /><a href="../Main/TermsAndConditions.html" class="twikiLink">Terms and Conditions</a><br /><a href="http://epicgames.com/privacynotice" target="_top">Privacy Notice</a></div></div></div></div>
<p />
</html></body>
