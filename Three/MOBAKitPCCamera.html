<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
	"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title> UDK | MOBAKitPCCamera    </title>

<style type="text/css" media="all">@import "rsrc/twiki_webs.css";</style>
<style type="text/css" media="all">@import "rsrc/udn_new.css";</style>
<link rel="icon" href="rsrc/Three/WebPreferences/favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="rsrc/Three/WebPreferences/favicon.ico" type="image/x-icon" />


<!-- view.static_udn3.tmpl  -->
<script language="JavaScript" type="text/javascript" src="rsrc/udn.js"></script>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

</head>
<p />
<body id="webbgThree">
<p />

<p />
<div id="webThree"><div id="head">
<!--
<div class="header">
 -->
<div style="background: url(/pub/webbg_udn.jpg); background-repeat: no-repeat; height:140px; width: 100%;" >
<!--
<div style="background: transparent url(/pub/udn_header_bg.jpg); background-repeat: repeat-x; height:140px; width: 100%; margin-left: 991px;">
 -->
<p />
<div id="nav">
<ul class="nav">
<font color=black>|</font>&nbsp;&nbsp;<li class=nav_Three><a href="../Main/WebHome.html" class="twikiLink">Main</a></li><font color=black>|</font><li class=nav_Three><a href="../Two/WebHome.html" class="twikiLink">UnrealEngine2</a></li><font color=black>|</font><li class=nav_Three><a href="WebHome.html" class="twikiLink">UnrealEngine3</a></li><font color=black>|</font><li class=nav_Three><a href="https://docs.unrealengine.com" class="twikiLink">UnrealEngine4</a></li><font color=black>|</font><li class=nav_Three><a href="../Main/BusinessAndLegal.html" class="twikiLink">Business &amp; Legal</a></li><font color=black>|</font>
</ul><br><br><br>
</div>
</div>
</div> <!-- end head -->
<div id="pagedefault">
<div id="maincol">
<div id="tool">
<div id="tooltop">UDN</div>
<div id="tooltext" style="padding: 10px 10px 10px 10px;">
Search public documentation: <br>
<form ACTION="/search/index.php" METHOD="GET" NAME="main" ID="main">
<input TYPE="TEXT" NAME="q" SIZE="15" STYLE="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: xx-small;">
<input TYPE="SUBMIT" VALUE="Search" STYLE="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: xx-small;"><br>
</form>
</div>
<div id="toolband">MOBAKitPCCamera  </b></div>
<div id="tooltext">
<a href="https://udn.epicgames.com/Three/MOBAKitPCCameraJP" class="restricted" class="restricted" class="twikiLink">日本語訳</a><br><a href="MOBAKitPCCameraCH.html" class="twikiLink">中国翻译</a><br><a href="MOBAKitPCCameraKR.html" class="twikiLink">한국어</a><br>

<!-- Three/MOBAKitPCCamera -->
<hr size="1" noshade="noshade" />
Interested in the Unreal Engine? <br>
Visit the <a href="http://www.unrealtechnology.com" target="_top">Unreal Technology</a> site.<br>
<br>
Looking for jobs and company info? <br>
Check out the <a href="http://www.epicgames.com" target="_top">Epic games</a> site.<br>
<br>
Questions about support via UDN? <br>
Contact the <a href="../Main/ContactUDNStaff.html" class="twikiLink">UDN Staff</a> <br>
<br>
</div> <!-- end toolbox content -->
<div id="toolbottom"></div>
</div> <!-- end tool -->
<p />
<noautolink>
<div style="padding:0px 0px 0px 4px;font:10px Verdana;">
<style type="text/css" media="all">@import "rsrc/UDNCSS_test.css";</style>
<b><a href="WebHome.html" class="twikiLink">UE3 Home</a></b> &gt; <b><a href="DevelopmentKitGems.html" class="twikiLink">Unreal Development Kit Gems</a></b> &gt; <b><a href="MOBAKit.html" class="twikiLink">MOBA Starter Kit</a></b> &gt; PC Camera System <br/>
</div>
<hr size="1" noshade="noshade">
<p />
<h1><a name="MOBA Starter Kit - PC Camera System"></a> MOBA Starter Kit - PC Camera System </h1>
<hr size="1" noshade="noshade">
<p />
<strong><em>Last tested against UDK May, 2012</em></strong>
<p />
<div class="twikiToc"> <ul>
<li> <a href="MOBAKitPCCamera.html#MOBA Starter Kit - PC Camera System"> MOBA Starter Kit - PC Camera System</a> <ul>
<li> <a href="MOBAKitPCCamera.html#Overview"> Overview</a>
</li> <li> <a href="MOBAKitPCCamera.html#Why use _UDKMOBACameraProperties and _UDKMOBACameraProperties_PC?"> Why use UDKMOBACameraProperties and UDKMOBACameraProperties_PC?</a> <ul>
<li> <a href="MOBAKitPCCamera.html#UDKMOBACameraProperties Variables"> UDKMOBACameraProperties Variables</a>
</li> <li> <a href="MOBAKitPCCamera.html#UDKMOBACameraProperties_PC Variables"> UDKMOBACameraProperties_PC Variables</a>
</li></ul>
</li> <li> <a href="MOBAKitPCCamera.html#UDKMOBACamera"> UDKMOBACamera</a> <ul>
<li> <a href="MOBAKitPCCamera.html#Functions"> Functions</a>
</li> <li> <a href="MOBAKitPCCamera.html#Variables"> Variables</a>
</li></ul>
</li> <li> <a href="MOBAKitPCCamera.html#UDKMOBACamera_PC"> UDKMOBACamera_PC</a> <ul>
<li> <a href="MOBAKitPCCamera.html#Functions"> Functions</a>
</li> <li> <a href="MOBAKitPCCamera.html#Variables"> Variables</a>
</li></ul>
</li> <li> <a href="MOBAKitPCCamera.html#UDKMOBACamera_PC::_UpdateViewTarget()"> UDKMOBACamera_PC::UpdateViewTarget()</a>
</li></ul>
</li></ul>
</div>
<p />
<h2><a name="Overview"></a> Overview </h2>
<hr size="1" noshade="noshade">
The PC camera systems is more of a traditional RTS style camera system. It supports moving the camera around by moving the mouse to the edges of the screen, tracking of the player's hero and it also uses a fixed height positioning system. The fixed height positioning system ensures that the camera is always at the same height regardless of the terrain below. This makes the camera feel a lot less jerky when moving around.
<p />
The relevant classes are:
<p /> <ul>
<li> <strong>UDKMOBACamera</strong> - This is the base camera class which provides a common interface for the game to use.
</li> <li> <strong>UDKMOBACameraProperties</strong> - This is an archetype class object which is used for data storage.
</li> <li> <strong>UDKMOBACamera_PC</strong> - This is the PC variation of the camera.
</li> <li> <strong>UDKMOBACameraProperties_PC</strong> - This is the PC variation of the camera properties.
</li></ul>
<p />
<h2><a name="Why use _UDKMOBACameraProperties and _UDKMOBACameraProperties_PC?"></a> Why use UDKMOBACameraProperties and UDKMOBACameraProperties_PC? </h2>
<hr size="1" noshade="noshade">
Using archetypes to store data which is used by UDKMOBACamera and UDKMOBACameraProperties_PC makes it much easier to iterate changes within Unreal Editor as it provides real time feedback as to what those property changes will look like in game.
<p />
<h3><a name="UDKMOBACameraProperties Variables"></a> UDKMOBACameraProperties Variables </h3> <ul>
<li> <strong>Rotation</strong> - Constant camera rotation. This property sets the fix camera rotation and is usually pointed down wards in this case.
</li> <li> <strong>BlendSpeed</strong> - Speed at which the camera blends from one place to another. The higher number is, the faster that the camera will blend from one place to another.
</li></ul>
<p />
<h3><a name="UDKMOBACameraProperties_PC Variables"></a> UDKMOBACameraProperties_PC Variables </h3> <ul>
<li> <strong>MovementPlane</strong> - This is a point on the plane that the camera uses as it's fixed height.
</li> <li> <strong>MovementPlaneNormal</strong> - This is a normal which represents the plane that the camera uses as it's fixed height. It's possible to have a sloped plane to make the camera move differently.
</li></ul>
<p />
<h2><a name="UDKMOBACamera"></a> UDKMOBACamera </h2>
<hr size="1" noshade="noshade">
<h3><a name="Functions"></a> Functions </h3> <ul>
<li> <strong>SetDesiredCameraLocation()</strong> - This sets the desired camera location.
</li></ul>
<p />
<h3><a name="Variables"></a> Variables </h3> <ul>
<li> <strong>DesiredCameraLocation</strong> - Current desired camera location.
</li> <li> <strong>IsTrackingHeroPawn</strong> - If true, then the camera should be tracking the hero.
</li></ul>
<p />
<h2><a name="UDKMOBACamera_PC"></a> UDKMOBACamera_PC </h2>
<hr size="1" noshade="noshade">
<h3><a name="Functions"></a> Functions </h3> <ul>
<li> <strong>UpdateViewTarget()</strong> - This is the main function which is used by the camera to calculate where it should be.
</li></ul>
<p />
<h3><a name="Variables"></a> Variables </h3> <ul>
<li> <strong>CameraProperties</strong> - Reference to the UDKMOBACameraProperties_PC archetype.
</li></ul>
<p />
<h2><a name="UDKMOBACamera_PC::_UpdateViewTarget()"></a> UDKMOBACamera_PC::UpdateViewTarget() </h2>
<hr size="1" noshade="noshade">
This function is responsible for where the camera is placed in the PC version.
<p />
First, the function performs an early out by checking if the <strong>CameraProperties</strong> variable is none. If it is, then it just returns the default implementation.
<p />
Next, the functions checks if the player wants to move the camera around. It first checks if the hardware mouse position is at the edges of the screen, using a buffer of eight pixels. If the mouse is at any of the edges, then it sets the appropriate variables stored in <strong>CameraMoveDirection</strong>. It then adds any <strong>PlayerInput</strong> contributions, such as when the player uses the arrow keys or the WASD keys. <strong>CameraDirection</strong> is then normalized so that the final movement speed is constant.
<p />
If <strong>CameraMoveDirection</strong> is not zero, meaning a player is moving the camera and the camera was tracking the player's hero, then it should be disabled.
<p />
If the camera is tracking the player's hero, then the camera just uses the player's hero location as the desired camera location. Otherwise the camera's desired location is calculated based on the camera move direction and speed.
<p />
First the axes is grabbed. This is required to get the local coordinates based on the camera's rotation. This ensures that when the player wishes to pan the camera upwards, the camera then moves in the direction which represents up on the screen as this may not necessarily be Vect(0.f, 1.f, 0.f). We first handle the the up and down movement. The reason why <strong>CameraDirectionY</strong> + Rot(0, 16384, 0) is used is because <strong>CameraDirectionX</strong> is not the direction which represents up and down. Instead we need to adjust <strong>CameraDirectionY</strong> by 90 degrees to create that axis instead. It probably is more technically correct to use quaternions for a more accurate result; but this is fast and reasonable accurate. A similar calculation is then used for the left and right axis.
<p />
Once the <strong>DesiredCameraLocation</strong> has been calculated, a line plane intersection is then performed. The plane is defined in UDKMOBACameraProperties_PC by a point and a normal. By performing a line plane intersection, it is guaranteed that the camera's location will be height stable.
<p />
From there the camera is then blended to the <strong>CameraIntersectionPoint</strong> to produce the camera's location.
<p />
The camera's rotation is set to the <strong>Rotation</strong> value defined in the camera properties.
<p />
</noautolink>
<p />
<p />
<p />
<p />
<p />
<p />


<!-- BEGIN UE4 NOTICE -->



<div id="version_message" style="display:none;">

    <div style="position:fixed;top:0px;left:0px;width:100%;height:100%;background:#000;opacity:0.5;">

    </div>

    <div style="position:fixed;top:50%;left:50%;margin:-70px 0px 0px -240px;background:#FFF;border-radius:6px;width:480px;box-shadow:0px 5px 30px -5px rgba(0,0,0,0.9);">

        <div style="font-size:16px;font-weight:bold;background: url(rsrc/Three/warning.png) no-repeat scroll 5px 5px;padding:4px 10px 5px 25px;height:21px;width:440px;">

            Important!

        </div>

        <div style="font-size:11px;padding:5px 10px 10px;width:460px;">

            <p>You are viewing documentation for the <strong>Unreal Development Kit (UDK)</strong>.</p>



            <p>If you are looking for the Unreal Engine 4 documentation, please visit the <a style="color:#000;" href="https://docs.unrealengine.com">Unreal Engine 4 Documentation</a> site.</p>

        </div>

        <div style="height:20px;padding:4px;margin:6px;border-top:1px solid #a0a0a0;">

            <form onsubmit="return closeVersionMessage();">

                <input type="checkbox" id="dismiss" value="dismiss" />

                <label for="dsimiss">Don't show me this again</label>

                <input type="submit" value="Close" style="cursor:pointer;float:right;width:60px;color:#f0f0f0;font-weight:bold;background:#882222;height:24px;padding:2px 3px 3px;text-align:center;border:1px outset #000;" />

            </form>

        </div>

    </div>

</div>



<script type="text/javascript">

    window.onload = function () {

        LoadVersionMessage();

    }



    function LoadVersionMessage()

    {

        var showMessage = "false";
        if(showMessage != "false")

        {

            showVersionMessage();

        }

    }



    function showVersionMessage()

    {

        var message = document.getElementById("version_message");

        if(message)

        {

            message.style.display = "block";

        }

    }



    function closeVersionMessage() {

        var dismiss = document.getElementById("dismiss");

        var message = document.getElementById("version_message");

        if (message) {

            message.style.display = "none";

        }

        if (dismiss.checked) {

            eraseCookie("doc_version_message");

            createCookie("doc_version_message", "false", 365);

            dismiss.checked = false;

        }

        return false;

    }



    function createCookie(name, value, days) {

        if (days) {

            var date = new Date();

            date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));

            var expires = "; expires=" + date.toGMTString();

        }

        else var expires = "";

        document.cookie = name + "=" + value + expires + "; path=/";

    }



    function readCookie(name) {

        var nameEQ = name + "=";

        var ca = document.cookie.split(';');

        for (var i = 0; i < ca.length; i++) {

            var c = ca[i];

            while (c.charAt(0) == ' ') c = c.substring(1, c.length);

            if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);

        }

        return null;

    }



    function eraseCookie(name) {

        createCookie(name, "", -1);

    }

</script>



<!-- END UE4 NOTICE -->



</div></div><div id="footer"><div style="BACKGROUND-COLOR: transparent; margin: 0; padding: 0; width: 100%;"><div>&nbsp;</div><div style="float: left; text-align: left; vertical-align: bottom; width: 50%;"><a href="http://www.videogamevoters.org"><img src="rsrc/vgvn.jpg" border="0" width="234" height="60" alt="Video Game Voters Network" /></a></div><div style="float: right; text-align: right; vertical-align: bottom; width: 50%;">Copyright &copy; 2001-2012 <a href="http://www.epicgames.com" target="_top">Epic Games, Inc.</a><br /><a href="../Main/TermsAndConditions.html" class="twikiLink">Terms and Conditions</a><br /><a href="http://epicgames.com/privacynotice" target="_top">Privacy Notice</a></div></div></div></div>
<p />
</html></body>
