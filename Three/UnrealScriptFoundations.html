<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
	"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title> UDK | UnrealScriptFoundations    </title>

<style type="text/css" media="all">@import "rsrc/twiki_webs.css";</style>
<style type="text/css" media="all">@import "rsrc/udn_new.css";</style>
<link rel="icon" href="rsrc/Three/WebPreferences/favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="rsrc/Three/WebPreferences/favicon.ico" type="image/x-icon" />


<!-- view.static_udn3.tmpl  -->
<script language="JavaScript" type="text/javascript" src="rsrc/udn.js"></script>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

</head>
<p />
<body id="webbgThree">
<p />

<p />
<div id="webThree"><div id="head">
<!--
<div class="header">
 -->
<div style="background: url(/pub/webbg_udn.jpg); background-repeat: no-repeat; height:140px; width: 100%;" >
<!--
<div style="background: transparent url(/pub/udn_header_bg.jpg); background-repeat: repeat-x; height:140px; width: 100%; margin-left: 991px;">
 -->
<p />
<div id="nav">
<ul class="nav">
<font color=black>|</font>&nbsp;&nbsp;<li class=nav_Three><a href="../Main/WebHome.html" class="twikiLink">Main</a></li><font color=black>|</font><li class=nav_Three><a href="../Two/WebHome.html" class="twikiLink">UnrealEngine2</a></li><font color=black>|</font><li class=nav_Three><a href="WebHome.html" class="twikiLink">UnrealEngine3</a></li><font color=black>|</font><li class=nav_Three><a href="https://docs.unrealengine.com" class="twikiLink">UnrealEngine4</a></li><font color=black>|</font><li class=nav_Three><a href="../Main/BusinessAndLegal.html" class="twikiLink">Business &amp; Legal</a></li><font color=black>|</font>
</ul><br><br><br>
</div>
</div>
</div> <!-- end head -->
<div id="pagedefault">
<div id="maincol">
<div id="tool">
<div id="tooltop">UDN</div>
<div id="tooltext" style="padding: 10px 10px 10px 10px;">
Search public documentation: <br>
<form ACTION="/search/index.php" METHOD="GET" NAME="main" ID="main">
<input TYPE="TEXT" NAME="q" SIZE="15" STYLE="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: xx-small;">
<input TYPE="SUBMIT" VALUE="Search" STYLE="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: xx-small;"><br>
</form>
</div>
<div id="toolband">UnrealScriptFoundations  </b></div>
<div id="tooltext">
<a href="UnrealScriptFoundationsJP.html" class="twikiLink">日本語訳</a><br><a href="UnrealScriptFoundationsCH.html" class="twikiLink">中国翻译</a><br><a href="UnrealScriptFoundationsKR.html" class="twikiLink">한국어</a><br>

<!-- Three/UnrealScriptFoundations -->
<hr size="1" noshade="noshade" />
Interested in the Unreal Engine? <br>
Visit the <a href="http://www.unrealtechnology.com" target="_top">Unreal Technology</a> site.<br>
<br>
Looking for jobs and company info? <br>
Check out the <a href="http://www.epicgames.com" target="_top">Epic games</a> site.<br>
<br>
Questions about support via UDN? <br>
Contact the <a href="../Main/ContactUDNStaff.html" class="twikiLink">UDN Staff</a> <br>
<br>
</div> <!-- end toolbox content -->
<div id="toolbottom"></div>
</div> <!-- end tool -->
<p />
<noautolink>
<p />
<div style="padding:0px 0px 0px 4px;font:10px Verdana;">
<b><a href="WebHome.html" class="twikiLink">UE3 Home</a></b> &gt; <b><a href="UnrealScriptHome.html" class="twikiLink">UnrealScript Home</a></b> &gt; UnrealScript Foundation Concepts
</div>
<hr size="1" noshade="noshade">
<h1><a name="UnrealScript Foundation Concepts"></a> UnrealScript Foundation Concepts </h1>
<hr size="1" noshade="noshade">
<p />
<div class="twikiToc"> <ul>
<li> <a href="UnrealScriptFoundations.html#UnrealScript Foundation Concepts"> UnrealScript Foundation Concepts</a> <ul>
<li> <a href="UnrealScriptFoundations.html#Overview"> Overview</a>
</li> <li> <a href="UnrealScriptFoundations.html#What is an _UnrealScript?"> What is an UnrealScript?</a>
</li> <li> <a href="UnrealScriptFoundations.html#Script Naming and Location"> Script Naming and Location</a>
</li> <li> <a href="UnrealScriptFoundations.html#Anatomy of an _UnrealScript"> Anatomy of an UnrealScript</a>
</li> <li> <a href="UnrealScriptFoundations.html#Scripts and Classes vs Objects and Actors"> Scripts and Classes vs Objects and Actors</a>
</li> <li> <a href="UnrealScriptFoundations.html#Communication Between Scripts"> Communication Between Scripts</a>
</li> <li> <a href="UnrealScriptFoundations.html#How Do You Use Existing Scripts?"> How Do You Use Existing Scripts?</a>
</li> <li> <a href="UnrealScriptFoundations.html#What Class To Extend From"> What Class To Extend From</a>
</li> <li> <a href="UnrealScriptFoundations.html#Object Hierarchy"> Object Hierarchy</a>
</li> <li> <a href="UnrealScriptFoundations.html#UnrealScript Programming Strategy"> UnrealScript Programming Strategy</a>
</li></ul>
</li></ul>
</div>
<p />
<style type="text/css" media="all">@import "rsrc/UDNCSS_test.css";</style>
<p />
<h2><a name="Overview"></a> Overview </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
The UnrealScript language is a custom built scripting language used solely by the Unreal Engine to add new gameplay items to games made with the Unreal Engine without requiring the entire engine be recompiled. It provides gameplay programmers with features specifically designed for use in games and makes creating event-based gameplay much easier and more efficient to implement.
<p />
The topics discussed here may contain mentions of language features, such as classes, variables, functions, etc., that are not themselves covered within the scope of this document. This page is meant more to cover certain concepts that do not necessarily deal with a specific language feature but are extremely important to understand, especially when starting out. Please see the <a href="UnrealScriptReference.html" class="twikiLink">UnrealScript Reference</a> for complete details of all language features.
<p />
<h2><a name="What is an _UnrealScript?"></a> What is an UnrealScript? </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
Each UnrealScript file is also often referred to an UnrealScript. This is a simple text file with a <code><b>.uc</b></code> file extension that contains the definition of a single UnrealScript Class. See <a href="UnrealScriptClasses.html" class="twikiLink">UnrealScript Classes</a> for more information on what a class is and how they are used by the engine as well as how to define new classes.
<p />
UnrealScripts can be created with virtually any text editor program, though some text editors do provide highlighters and other special functionality specific to UnrealScript that make working with them much easier. Certain IDEs - nFringe and WOTGreal - also provide a complete integrated solution for developing Unreal projects using UnrealScript.
<p />
<h2><a name="Script Naming and Location"></a> Script Naming and Location </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
The name of the UnrealScript file must always match exactly the name of the class it defines. If there is a discrepancy between the file name and class name, an error will occur during the compiling process.
<p />
UnrealScripts reside in various folders inside the <code><b>Development\Src</b></code> directory. This directory contains many folders by default - Core, Engine, UDKBase, UnrealEd, etc. - each representing a different UnrealScript project, or package. Inside each of those package folders is a <code><b>Classes</b></code> folder that contains all the UnrealScripts belonging to that package.
<p />
When you want to add your own custom UnrealScripts to be used by the engine for your game, you must create one or more new package folders and subsequent <code><b>Classes= folders in the ==Development\Src</b></code> directory. In these is where you will place your UnrealScripts.
<p />
Please see <a href="CustomUnrealScriptProjects.html" class="twikiLink">Custom UnrealScript Projects</a> for more information on setting up your own custom UnrealScript packages to be used by the engine.
<p />
<h2><a name="Anatomy of an _UnrealScript"></a> Anatomy of an UnrealScript </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
<div class="codetitlebar">
MyActor.uc
</div>
<div class="codesnippet">
<pre>
<span style="color:#008800;">
/*********************
 * <a href="#ClassDeclaration">Class Declaration</a> *
 *********************/
</span>

class MyActor extends Actor;

<span style="color:#008800;">
/************************************
 * <a href="#InstanceVariables">Instance Variables/Structs/Enums</a> *
 ************************************/
</span>

enum MyEnum
{
	ME_None.
	ME_Some,
	ME_All
}

struct MyStruct
{
	var int IntVal;
	var float FloatVal;
}

var int IntVar;

var float FloatVar;

var bool BoolVar;

var Actor ActorVar;

var MyEnum EnumVar;

var MyStruct StructVar;

<span style="color:#008800;">
/**********************
 * <a href="#FunctionsStates">Functions & States</a> *
 **********************/
</span>

function MyFunction()
{
	local int TempInt;

	if(ActorVar != none && BoolVar)
	{
		TempInt = IntVar;
	}
}

state NewState
{
	function MyFunction()
	{
		local float TempFloat;

		if(ActorVar != none && BoolVar)
		{
			TempFloat = FloatVar;
		}
	}
}

<span style="color:#008800;">
/**********************
 * <a href="#DefaultProperties">Default Properties</a> *
 **********************/
</span>

defaultproperties
{
	IntVar=5
	FloatVar=10.0
	BoolVar=true
}
</pre>
</div>
<p />
<a name="ClassDeclaration"></a> <dl>
<dt> <strong><a href="UnrealScriptClasses.html" class="twikiLink">Class Declaration</a></strong>  </dt><dd> Every UnrealScript begins with a class declaration. This says what the class associated with this script is named, what other class it inherits from, and allows several other aspects to be controlled through class specifiers, which are options added onto the end of the declaration. This must be the first thing in the script other than any comments you might wish to add at the beginning describing the class, specifying copyrights, etc.
</dd></dl>
<a name="InstanceVariables"></a> <dl>
<dt> <strong><a href="UnrealScriptVariables.html" class="twikiLink">Instance Variables/Structs/Enums</a></strong>  </dt><dd> Instance variable declarations follow the class declaration. This tells the class what properties it contains.
</dd></dl>
<a name="FunctionsStates"></a> <dl>
<dt> <strong><a href="UnrealScriptFunctions.html" class="twikiLink">Functions</a> &amp; <a href="UnrealScriptStates.html" class="twikiLink">States</a></strong>  </dt><dd> Function and state declarations make up the majority of the class. These specify what actions the class can perform.
</dd></dl>
<a name="DefaultProperties"></a> <dl>
<dt> <strong><a href="UnrealScriptDefaultProperties.html" class="twikiLink">Default Properties</a></strong>  </dt><dd> The <code><b>defaultproperties</b></code> block always is the last thing in the script. It provides a place to specify default values for any of the instance variables declared in the class.
</dd></dl>
<p />
<!--
<p />
The key elements to look at in this script are:
<p /> <ul>
<li> The class declaration. Each class "extends" (derives from) one parent class, and each class belongs to a "package," a collection of objects that are distributed together. All functions and variables belong to a class, and are only accessible through an actor that belongs to that class. There are no system-wide global functions or variables. <a href="UnrealScriptFoundations.html#ClassDeclaration" class="twikiAnchorLink">More Details</a>
</li></ul>
<p /> <ul>
<li> The variable declarations. UnrealScript supports a very diverse set of variable types including most base C/Java types, object references, structs, and arrays. In addition, variables can be made into editable properties, which designers can access in UnrealEd without any programming. These properties are designated using the <code>var()</code> syntax, instead of <code>var</code>.  <a href="UnrealScriptFoundations.html#VariableDeclaration" class="twikiAnchorLink">More Details</a>
</li></ul>
<p /> <ul>
<li> The functions. Functions can take a list of parameters, and they optionally return a value. Functions can have local variables. Some functions are called by the Unreal engine itself (such as BeginPlay), and some functions are called from other script code elsewhere (such as Trigger).  <a href="UnrealScriptFoundations.html#FunctionDeclarations" class="twikiAnchorLink">More Details</a>
</li></ul>
<p /> <ul>
<li> The code. All of the standard C and Java keywords are supported, like <code>for</code>, <code>while</code>, <code>break</code>, <code>switch</code>, <code>if</code>, and so on.  Braces and semicolons are used in UnrealScript as in C, C++, and Java.
</li></ul>
<p /> <ul>
<li> Actor and object references. Here you see several cases where a function is called within another object, using an object reference.  <a href="UnrealScriptFoundations.html#ObjectRefs" class="twikiAnchorLink">More Details</a>
</li></ul>
<p /> <ul>
<li> The "state" keyword. This script defines several "states", which are groupings of functions, variables, and code that are executed only when the actor is in that state.  <a href="UnrealScriptFoundations.html#StateDeclaration" class="twikiAnchorLink">More Details</a>
</li></ul>
<p /> <ul>
<li> Note that all keywords, variable names, functions, and object names in UnrealScript are case-insensitive. To UnrealScript, <code>Demon</code>, <code>demON</code>, and <code>demon</code> are the same thing.
</li></ul>
<p />
-->
<p />
<h2><a name="Scripts and Classes vs Objects and Actors"></a> Scripts and Classes vs Objects and Actors </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
A class is essentially a blueprint for an item to be used by the engine in the game. It defines the properties and behaviors the item can have, via <a href="UnrealScriptVariables.html" class="twikiLink">variables</a> and <a href="UnrealScriptFunctions.html" class="twikiLink">functions</a>. These blueprints are used to create individual, unique instances of these items. A unique instance of a class is called an object in general object-oriented programming. This is reinforced in UnrealScript because Object is also the base class in the hierarchy. So every class inherits from <code><b>Object</b></code> at some point and, therefore, any instance of any class is technically an object. An object has its own property values that can be modified or accessed and behaviors or actions that can be executed without affecting any other flak cannon instance in the world.
<p />
Ok, so a class is a blueprint and an object is an instance, but what does this really mean? Take the Flak Cannon, one of the weapons commonly found in Unreal Tournament, as an example. A flak cannon has ammo, fires several small projectiles as its primary fire, and fires a large shell as its alt fire. That is the (overly simplified) blueprint of a flak cannon, or the Flak Cannon class. Now, when a player runs over a pickup for a flak cannon in the world, that player is given an instance of a flak cannon. What does this really mean though? It means the Flak Cannon class is used as a blueprint to create a new flak cannon. This is a particular flak cannon with its own property values that can execute behaviors separate from any other flak cannon. So, when the player fires, the ammo count of that particular flak cannon instance is reduced and a projectile is fired from that particular flak cannon and no other.
<p />
This is the fundamental concept of object-oriented programming and something you must understand before delving into UnrealScript programming. With that said, we won't get into much more detail about it here as there are plenty of resources covering the topic already that go into great detail.
<p />
<a name="ObjectReference"></a>
<h2><a name="Communication Between Scripts"></a> Communication Between Scripts </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
So, if you create classes in UnrealScript, but the world is populated with instances and not the classes themselves, how does one script communicate with another? The classes don't know what instances will exist in the world when you write them. An example of this would be the same player with a flak cannon from above. How does the player tell that particular flak cannon to fire and not some other flak cannon? The answer is <strong>references</strong>. One of the types of variables in UnrealScript is the Object reference data type. This is a fancy name for a variable whose type is an Object (or Actor). The value of an Object reference variable is a reference to an instance of that type of object. For instance, the Controller class has a variable it uses to reference the <code><b>Pawn</b></code> it is currently controlling. This variable's type is <code><b>Pawn</b></code> (and its name is coincidentally <code><b>Pawn</b></code> too). The declaration for this variable looks like:
<p />
<div class="codesnippet">
<pre>
var Pawn Pawn;
</pre>
</div>
<p />
In the flak cannon example above, the class for the player (actually the Pawn in this case) would have a variable that can hold a reference to the weapon the player is currently using. This variable points to the instance of the flak cannon that was given to the player when they ran over the pickup for that weapon. This allows a means of communicating directly to that instance.
<p />
This is a very important concept that is central to practically everything you will do in UnrealScript. Whenever one object needs to access a value of a property of another object or tell another object to perform an action, that object needs a reference to the other. Of course, now you should be wondering how you get a reference to the instance in the world that you want to communicate with. It's not enough to simply declare an Object reference variable for the reference. An Object reference variable is more or less just a container to hold a reference. It's value is <code><b>none</b></code> until you assign something to it. You actually have to populate that variable with a value - the instance you want to reference. Unfortunately, there isn't a steadfast rule to follow here. There are many ways to obtain a reference to an instance of an object in the world and how you do so depends entirely on the particular situation and relationship between the two objects. Some examples are:
<p /> <ul>
<li> Helper functions - In some cases, helper functions are provided in certain classes that return a reference to a commonly used object. For example, the <code><b>GFxMoviePlayer</b></code> class has a <code><b>GetPC()</b></code> function that returns a reference to the <code><b>PlayerController</b></code> that owns the movie.
</li> <li> Events - One actor causes an event to be fired in another, such as a <code><b>Touch</b></code> event. In many cases, the actor that triggers an event has a reference passed to that event automatically by the engine. This allows you to use that reference inside the event or saved it to a variable to be used later.
</li> <li> Spawning - The <code><b>Spawn()</b></code> function returns a reference to the actor it creates. When one actor spawns another and needs to be able to communicate with the spawned actor immediately or later on, you can use the reference returned by the <code><b>Spawn()</b></code> function or save the reference to a variable.
</li> <li> 3rd Party - Quite often the object you need a reference to is already being referenced in another class to which you do have a reference to. This means you can borrow that reference to use for your own purposes. An example of this that is commonly needed and used is the current gametype, or instance of the <code><b>GameInfo</b></code> class. The only class that has a direct reference to the gametype is <code><b>WorldInfo</b></code> by way of its <code><b>Game</b></code> variable, but you often need to access it in other locations. Fortunately, every Actor has a reference to the current <code><b>WorldInfo</b></code> instance via the <code><b>WorldInfo</b></code> variable. This means you can use your <code><b>WorldInfo</b></code> reference to get access to the reference to the <code><b>GameInfo</b></code> instance. This method is often overlooked by those just starting out. Always check the objects you do have references to as they may have references to what you are looking for.
</li> <li> Iteration - Using iterator functions is kind of like performing a search. They allow you to specify some criteria and return a list of results in the form of references to objects. You can act on these directly in the iterator or save them to a variable for use later.
</li> <li> Editor - In some cases, you may leave it up to the level designer to set a reference to an actor in the editor. All this requires is creating an editable variable to hold the reference.
</li></ul>
<p />
Once you have an object reference, you have access to the variables and functions belonging to that object (unless they are specified as protected/private) through the use of a special syntax often called <strong>dot notation</strong>. This just means that the object reference is followed by a dot - or period - and then the name of the variable or function you wish to access or execute.
<p />
Take the Pawn reference in the Controller as mentioned above. If you want to access the <code><b>Health</b></code> variable in the Controller's Pawn, you can do so like this:
<p />
<div class="codesnippet">
<pre>
Pawn.Health
</pre>
</div>
<p />
Similarly, if you want to tell the Pawn to start firing its main weapon, you could do so using the <code><b>StartFire()</b></code> function:
<p />
<div class="codesnippet">
<pre>
Pawn.StartFire(0);
</pre>
</div>
<p />
Object reference variables hold references to objects, but you do not always need an Object reference variable in order to reference an object. While you can assign the result of a helper function to a variable and use that as your reference, it is also possible to just use the result of the function directly.
<p />
To demonstrate this, let's use the <code><b>GetPC()</b></code> function in the <code><b>GFxMoviePlayer</b></code> class discussed above. This returns the PlayerController that owns the Scaleform movie. Now let's say we want to access the health of the current player, which is held in the Pawn controlled by the PlayerController. Like above, we can use the <code><b>Pawn</b></code> variable in the controller, but this time we have to reference the controller first since we are in the <code><b>GFxMoviePlayer</b></code> class. We don't need to save this reference to a variable though. We can simply use the dot notation directly with the <code><b>GetPC()</b></code> function call.
<p />
<div class="codesnippet">
<pre>
GetPC().Pawn.Health
</pre>
</div>
<p />
Now, let's assume there is a button on the UI that is used to fire the player's weapon. We can do this just like we did previously.
<p />
<div class="codesnippet">
<pre>
GetPC().Pawn.StartFire(0);
</pre>
</div>
<p />
This works because <code><b>GetPC()</b></code> can essentially be thought of as a reference to a <code><b>PlayerController</b></code> instance since that is what its return value is as you can see from the declaration of the function in the <code><b>GFxMoviePlayer</b></code> class:
<p />
<div class="codesnippet">
<pre>
<span style="color:#008800;">/**
 * Helper function to get the owning player controller for this movie
 *
 * @return The PlayerController corresponding to the LocalPlayerOwnerIndex that owns this movie
 */</span>
event PlayerController GetPC()
{
	local LocalPlayer LocalPlayerOwner;

	LocalPlayerOwner = GetLP();
	if (LocalPlayerOwner == none)
	{
		return none;
	}
	return LocalPlayerOwner.Actor;
}
</pre>
</div>
<p />
<h2><a name="How Do You Use Existing Scripts?"></a> How Do You Use Existing Scripts? </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
The Unreal Engine contains a large amount of UnrealScript classes already implemented in several different packages located in the <code><b>Development\Src</b></code> directory. It is important to understand what these classes are and how they can be used in your own game. The existing classes mainly provide basic and generic functionality. They are essentially part of the engine itself and not part of "the game", though this can be a fuzzy distinction at times. Many of the main systems and the classes that comprise them are explained in various "technical guides" here on the UDN. To gain a more complete understanding of all of the classes available, you may need to do some research by digging through the actual scripts themselves and analyzing the code, reading the comments, etc. An extremely useful tool in this regard is <a href="UnCodeX.html" class="twikiLink">UnCodeX</a>. It creates Javadocs-style documentation from the scripts that is easily navigable.
<p />
The first thing to understand is that you should not modify the existing scripts under normal circumstances. Modifying a native class or a class in a native package without recompiling the engine can have serious consequences, generally resulting in the engine crashing when the game is run.
<p />
UnrealScript is object-oriented which means that each class inherits - or <strong>extends</strong> in UnrealScript parlance - from another class creating a parent-child relationship. The child class inherits all of the variables, functions, states, etc. that exist in the parent class. So instead of modifying existing scripts, you should extend from them using them as starting points for your own custom classes. The beauty of this is that you are not limited to what the parent class passes down to the child class as you can add any new variables and functions you want; nor are you limited by how the parent class implemented the functions it passed down since UnrealScript allows you to override any inherited function to make it perform the exact actions you desire.
<p />
In some cases, only extending from classes and never modifying them may seem limiting as it is a common thought to add a variable to an existing base class so that it is available to all the children of that class. There is usually an alternative way to go about designing your systems that does not require modifying an existing class.
<p />
<strong>Bottom line:</strong> extend from existing classes and override functionality; never modify them.
<p />
<h2><a name="What Class To Extend From"></a> What Class To Extend From </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
The typical approach to class design in UnrealScript is to make a new class (for example a Minotaur monster) which extends an existing class that has most of the functionality you need (for example the Pawn class, the base class of all monsters). With this approach, you never need to reinvent the wheel -- you can simply add the new functionality you want to customize, while keeping all of the existing functionality you don't need to customize. This approach is especially powerful for implementing AI in Unreal, where the built-in AI system provides a tremendous amount of base functionality which you can use as building blocks for your custom creatures.
<p />
Knowing how far up the hierarchy to extend from is extremely dependent on the situation. Many times it comes down to a choice between reimplementing some functionality to avoid overriding a ton of unnecessary stuff. Which path is better is completely up to you. The best guidance is, again, to choose the class that is most similar or shares the most commonalities with the class you want to implement, and then go from there.
<p />
<h2><a name="Object Hierarchy"></a> Object Hierarchy </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
Before beginning work with UnrealScript, it's important to understand the high-level relationships of objects within Unreal. The architecture of Unreal is a major departure from that of most other games: Unreal is purely object-oriented (much like COM/ActiveX), in that it has a well-defined object model with support for high-level object oriented concepts such as the object graph, serialization, object lifetime, and polymorphism. Historically, most games have been designed monolithically, with their major functionality hard-coded and unexpandable at the object level, though many games, such as Doom and Quake, have proven to be very expandable at the content level. There is a major benefit to Unreal's form of object-orientation: major new functionality and object types can be added to Unreal at runtime, and this extension can take the form of subclassing, rather than (for example) by modifying a bunch of existing code. This form of extensibility is extremely powerful, as it encourages the Unreal community to create Unreal enhancements that all interoperate.
<p /> <dl>
<dt> <strong>Object</strong>  </dt><dd> The parent class of all objects in Unreal. All of the functions in the <code><b>Object</b></code> class are accessible everywhere, because everything derives from <code><b>Object</b></code>. <code><b>Object</b></code> is an abstract base class, in that it doesn't do anything useful. All functionality is provided by subclasses, such as <code><b>Texture</b></code> (a texture map), <code><b>TextBuffer</b></code> (a chunk of text), and <code><b>Class</b></code> (which describes the class of other objects).
</dd> <dt> <strong>Actor (extends Object)</strong>  </dt><dd> The parent class of all standalone game objects in Unreal. The Actor class contains all of the functionality needed for an actor to move around, interact with other actors, affect the environment, and do other useful game-related things.
</dd> <dt> <strong>Pawn (extends Actor)</strong>  </dt><dd> The parent class of all creatures and players in Unreal which are capable of high-level AI and player controls.
</dd> <dt> <strong>Class (extends Object)</strong>  </dt><dd> A special kind of object which describes a class of object. This may seem confusing at first: a class is an object, and a class describes certain objects. But, the concept is sound, and there are many cases where you will deal with Class objects. For example, when you spawn a new actor in UnrealScript, you can specify the new actor's class with a Class object.
</dd></dl>
<p />
With UnrealScript, you can write code for any Object class, but 99% of the time, you will be writing code for a class derived from Actor. Most of the useful UnrealScript functionality is game-related and deals with actors.
<p />
<h2><a name="UnrealScript Programming Strategy"></a> UnrealScript Programming Strategy </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
Here are some tips on how to write UnrealScript code effectively, and take advantage of UnrealScript's strengths while avoiding the pitfalls.
<p /> <ul>
<li> <strong>UnrealScript is a slow language compared to C/C++</strong>. A typical C++ program runs about 20X faster than UnrealScript. The programming philosophy behind all of our own script writing is this: Write scripts that are almost always idle. In other words, use UnrealScript only to handle the "interesting" events that you want to customize, not the rote tasks, like basic movement, which Unreal's physics code can handle for you. For example, when writing a projectile script, you typically write a <code><b>HitWall()</b></code>, <code><b>Bounce()</b></code>, and <code><b>Touch()</b></code> function describing what to do when key events happen. Thus 95% of the time, your projectile script isn't executing any code, and is just waiting for the physics code to notify it of an event. This is inherently very efficient. In our typical level, even though UnrealScript is comparably much slower than C++, UnrealScript execution time averages 5-10% of CPU time.
</li> <li> <strong>Exploit latent functions (like FinishAnim and Sleep) as much as possible</strong>. By basing the flow of your script execution on them, you are creating animation-driven or time-driven code, which is fairly efficient in UnrealScript.
</li> <li> <strong>Keep an eye on the Unreal log while you're testing your scripts</strong>. The UnrealScript runtime often generates useful warnings in the log that notify you of nonfatal problems that are occurring.
</li> <li> <strong>Be wary of code that can cause infinite recursion</strong>. For example, the "Move" command moves the actor and calls your Bump() function if you hit something. Therefore, if you use a Move command within a Bump function, you run the risk of recursing forever. Be careful. Infinite recursion and infinite looping are the two error conditions which UnrealScript doesn't handle gracefully.
</li> <li> <strong>Spawning and destroying actors are fairly expensive operations on the server side, and are even more expensive in network games, because spawns and destroys take up network bandwidth</strong>. Use them reasonably, and regard actors as "heavy weight" objects. For example, do not try to create a particle system by spawning 100 unique actors and sending them off on different trajectories using the physics code. That will be sloooow.
</li> <li> <strong>Exploit UnrealScript's object-oriented capabilities as much as possible</strong>. Creating new functionality by overriding existing functions and states leads to clean code that is easy to modify and easy to integrate with other peoples' work. Avoid using traditional C techniques, like doing a switch() statement based on the class of an actor or the state, because code like this tends to break as you add new classes and modify things.
</li> <li> <strong>UnrealScript .u packages are compiled strictly in the order specified by the .ini file's EditPackages list</strong>, so each package can only reference other objects in itself and in previously-compiled packages, and never in subsequently-compiled packages.   If you find that a need for circular references between packages arises, the two solutions are: <ol>
<li> Factor the classes into a set of base classes compiled in the first .u package, and a set of child classes compiled in the second .u package, making sure that the base classes never reference the child classes.  This is a good programming practice anyway, and it usually works.      <br/><b>Note:</b> If a given class <code><b>C</b></code> needs to reference a class or object <code><b>O</b></code> in a later-compiled package, you can often factor that class into two parts: an abstract base class definition <code><b>C</b></code> that defines a variable <code><b>MyO</b></code> in the first package (but doesn't contain a default value for <code><b>MyO</b></code> in its default properties), and a subclass <code><b>D</b></code> in the second package that specifies the proper default value for <code><b>MyO</b></code> which can only be done from within that second package.
</li> <li> If the two .u packages are inextricably intertwined by references, then merge them into a single package.  This is reasonable because packages are intended as a unit of code modularity, and there's not a real benefit (such as memory savings) to separating these inseparable sets of classes into multiple packages.
</li></ol>
</li></ul>
<p />
</noautolink>
<p />
<p />
<p />
<p />
<p />
<p />


<!-- BEGIN UE4 NOTICE -->



<div id="version_message" style="display:none;">

    <div style="position:fixed;top:0px;left:0px;width:100%;height:100%;background:#000;opacity:0.5;">

    </div>

    <div style="position:fixed;top:50%;left:50%;margin:-70px 0px 0px -240px;background:#FFF;border-radius:6px;width:480px;box-shadow:0px 5px 30px -5px rgba(0,0,0,0.9);">

        <div style="font-size:16px;font-weight:bold;background: url(rsrc/Three/warning.png) no-repeat scroll 5px 5px;padding:4px 10px 5px 25px;height:21px;width:440px;">

            Important!

        </div>

        <div style="font-size:11px;padding:5px 10px 10px;width:460px;">

            <p>You are viewing documentation for the <strong>Unreal Development Kit (UDK)</strong>.</p>



            <p>If you are looking for the Unreal Engine 4 documentation, please visit the <a style="color:#000;" href="https://docs.unrealengine.com">Unreal Engine 4 Documentation</a> site.</p>

        </div>

        <div style="height:20px;padding:4px;margin:6px;border-top:1px solid #a0a0a0;">

            <form onsubmit="return closeVersionMessage();">

                <input type="checkbox" id="dismiss" value="dismiss" />

                <label for="dsimiss">Don't show me this again</label>

                <input type="submit" value="Close" style="cursor:pointer;float:right;width:60px;color:#f0f0f0;font-weight:bold;background:#882222;height:24px;padding:2px 3px 3px;text-align:center;border:1px outset #000;" />

            </form>

        </div>

    </div>

</div>



<script type="text/javascript">

    window.onload = function () {

        LoadVersionMessage();

    }



    function LoadVersionMessage()

    {

        var showMessage = "false";
        if(showMessage != "false")

        {

            showVersionMessage();

        }

    }



    function showVersionMessage()

    {

        var message = document.getElementById("version_message");

        if(message)

        {

            message.style.display = "block";

        }

    }



    function closeVersionMessage() {

        var dismiss = document.getElementById("dismiss");

        var message = document.getElementById("version_message");

        if (message) {

            message.style.display = "none";

        }

        if (dismiss.checked) {

            eraseCookie("doc_version_message");

            createCookie("doc_version_message", "false", 365);

            dismiss.checked = false;

        }

        return false;

    }



    function createCookie(name, value, days) {

        if (days) {

            var date = new Date();

            date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));

            var expires = "; expires=" + date.toGMTString();

        }

        else var expires = "";

        document.cookie = name + "=" + value + expires + "; path=/";

    }



    function readCookie(name) {

        var nameEQ = name + "=";

        var ca = document.cookie.split(';');

        for (var i = 0; i < ca.length; i++) {

            var c = ca[i];

            while (c.charAt(0) == ' ') c = c.substring(1, c.length);

            if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);

        }

        return null;

    }



    function eraseCookie(name) {

        createCookie(name, "", -1);

    }

</script>



<!-- END UE4 NOTICE -->



</div></div><div id="footer"><div style="BACKGROUND-COLOR: transparent; margin: 0; padding: 0; width: 100%;"><div>&nbsp;</div><div style="float: left; text-align: left; vertical-align: bottom; width: 50%;"><a href="http://www.videogamevoters.org"><img src="rsrc/vgvn.jpg" border="0" width="234" height="60" alt="Video Game Voters Network" /></a></div><div style="float: right; text-align: right; vertical-align: bottom; width: 50%;">Copyright &copy; 2001-2012 <a href="http://www.epicgames.com" target="_top">Epic Games, Inc.</a><br /><a href="../Main/TermsAndConditions.html" class="twikiLink">Terms and Conditions</a><br /><a href="http://epicgames.com/privacynotice" target="_top">Privacy Notice</a></div></div></div></div>
<p />
</html></body>
