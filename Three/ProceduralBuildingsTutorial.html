<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
	"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title> UDK | ProceduralBuildingsTutorial    </title>

<style type="text/css" media="all">@import "rsrc/twiki_webs.css";</style>
<style type="text/css" media="all">@import "rsrc/udn_new.css";</style>
<link rel="icon" href="rsrc/Three/WebPreferences/favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="rsrc/Three/WebPreferences/favicon.ico" type="image/x-icon" />


<!-- view.static_udn3.tmpl  -->
<script language="JavaScript" type="text/javascript" src="rsrc/udn.js"></script>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

</head>
<p />
<body id="webbgThree">
<p />

<p />
<div id="webThree"><div id="head">
<!--
<div class="header">
 -->
<div style="background: url(/pub/webbg_udn.jpg); background-repeat: no-repeat; height:140px; width: 100%;" >
<!--
<div style="background: transparent url(/pub/udn_header_bg.jpg); background-repeat: repeat-x; height:140px; width: 100%; margin-left: 991px;">
 -->
<p />
<div id="nav">
<ul class="nav">
<font color=black>|</font>&nbsp;&nbsp;<li class=nav_Three><a href="../Main/WebHome.html" class="twikiLink">Main</a></li><font color=black>|</font><li class=nav_Three><a href="../Two/WebHome.html" class="twikiLink">UnrealEngine2</a></li><font color=black>|</font><li class=nav_Three><a href="WebHome.html" class="twikiLink">UnrealEngine3</a></li><font color=black>|</font><li class=nav_Three><a href="https://docs.unrealengine.com" class="twikiLink">UnrealEngine4</a></li><font color=black>|</font><li class=nav_Three><a href="../Main/BusinessAndLegal.html" class="twikiLink">Business &amp; Legal</a></li><font color=black>|</font>
</ul><br><br><br>
</div>
</div>
</div> <!-- end head -->
<div id="pagedefault">
<div id="maincol">
<div id="tool">
<div id="tooltop">UDN</div>
<div id="tooltext" style="padding: 10px 10px 10px 10px;">
Search public documentation: <br>
<form ACTION="/search/index.php" METHOD="GET" NAME="main" ID="main">
<input TYPE="TEXT" NAME="q" SIZE="15" STYLE="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: xx-small;">
<input TYPE="SUBMIT" VALUE="Search" STYLE="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: xx-small;"><br>
</form>
</div>
<div id="toolband">ProceduralBuildingsTutorial  </b></div>
<div id="tooltext">
<a href="ProceduralBuildingsTutorialJP.html" class="twikiLink">日本語訳</a><br><a href="ProceduralBuildingsTutorialCH.html" class="twikiLink">中国翻译</a><br><a href="ProceduralBuildingsTutorialKR.html" class="twikiLink">한국어</a><br>

<!-- Three/ProceduralBuildingsTutorial -->
<hr size="1" noshade="noshade" />
Interested in the Unreal Engine? <br>
Visit the <a href="http://www.unrealtechnology.com" target="_top">Unreal Technology</a> site.<br>
<br>
Looking for jobs and company info? <br>
Check out the <a href="http://www.epicgames.com" target="_top">Epic games</a> site.<br>
<br>
Questions about support via UDN? <br>
Contact the <a href="../Main/ContactUDNStaff.html" class="twikiLink">UDN Staff</a> <br>
<br>
</div> <!-- end toolbox content -->
<div id="toolbottom"></div>
</div> <!-- end tool -->
<p />
<noautolink>
<p />
<div style="padding:0px 0px 0px 4px;font:10px Verdana;">
<b><a href="WebHome.html" class="twikiLink">UE3 Home</a></b> &gt; <b><a href="StaticMeshHome.html" class="twikiLink">Static Meshes</a></b> &gt; Procedural Buildings Tutorial
</div>
<hr size="1" noshade="noshade">
<h1><a name="Procedural Buildings Tutorial"></a> Procedural Buildings Tutorial </h1>
<hr size="1" noshade="noshade">
<p />
<div class="twikiToc"> <ul>
<li> <a href="ProceduralBuildingsTutorial.html#Procedural Buildings Tutorial"> Procedural Buildings Tutorial</a> <ul>
<li> <a href="ProceduralBuildingsTutorial.html#Overview"> Overview</a>
</li> <li> <a href="ProceduralBuildingsTutorial.html#Getting Set Up"> Getting Set Up</a> <ul>
<li> <a href="ProceduralBuildingsTutorial.html#Gather Meshes"> Gather Meshes</a>
</li> <li> <a href="ProceduralBuildingsTutorial.html#Create A New Ruleset"> Create A New Ruleset</a>
</li> <li> <a href="ProceduralBuildingsTutorial.html#Create A _ProcBuilding Volume"> Create A ProcBuilding Volume</a>
</li></ul>
</li> <li> <a href="ProceduralBuildingsTutorial.html#Setting Up The Floors Of The Building"> Setting Up The Floors Of The Building</a>
</li> <li> <a href="ProceduralBuildingsTutorial.html#Setting Up The Top Trim"> Setting Up The Top Trim</a>
</li> <li> <a href="ProceduralBuildingsTutorial.html#Setting Up The Ground Floor"> Setting Up The Ground Floor</a>
</li></ul>
</li></ul>
</div>
<p />
<h2><a name="Overview"></a> Overview </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
This tutorial will show, by example, the process of creating a basic Procedural Building.
<p />
<p />
<h2><a name="Getting Set Up"></a> Getting Set Up </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
<h3><a name="Gather Meshes"></a> Gather Meshes </h3>
<p />
You will need a set of Static Meshes to be used as building blocks for the building. Each mesh should be created so that the pivot point is in the lower left corner of the mesh when facing it. Create a new package and import these meshes into it.
<p />
You will need: <ul>
<li> A window or wall mesh that can be repeated
</li> <li> A corner mesh that matches the height of the window or wall mesh
</li> <li> A few storefront meshes
</li> <li> A top trim mesh that can be repeated
</li> <li> A corner mesh that matches the height of the trim mesh
</li></ul>
<p />
<img alt="15.jpg" src="rsrc/Three/ProceduralBuildingsTutorial/15.jpg" />
<p />
<h3><a name="Create A New Ruleset"></a> Create A New Ruleset </h3>
<p />
Create a new ProcBuilding Ruleset in your package by right-clicking and selecting it from the list.
<p />
<img alt="01.jpg" src="rsrc/Three/ProceduralBuildingsTutorial/01.jpg" />
<p />
<h3><a name="Create A _ProcBuilding Volume"></a> Create A ProcBuilding Volume </h3>
<p />
Edit the Brush Builder - Cube by right-clicking on the cube in the toolbar. Change the values so that x=1024,  y=2048, and z=512. Right-click on the volume icon and select ProcBuilding.
<p />
<img alt="01a.jpg" src="rsrc/Three/ProceduralBuildingsTutorial/01a.jpg" />
<p />
Apply your new ProcBuilding Ruleset by dragging it from the Content Browser and onto the ProcBuilding Volume.
<p />
<p />
<h2><a name="Setting Up The Floors Of The Building"></a> Setting Up The Floors Of The Building </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
ProcBuilding Ruleset are edited in Facade. When you open the Ruleset you created it will look like this:
<p />
<img alt="02.jpg" src="rsrc/Three/ProceduralBuildingsTutorial/02.jpg" />
<p />
First off, we will need to create a Top/Bottom node. Right-click in Facade and select it from the list. This node allows us to define the top, bottom, and middle sections of the building.
<p />
<img alt="03.jpg" src="rsrc/Three/ProceduralBuildingsTutorial/03.jpg" />
<p />
Next we will need to add a Corner node. Right-click and select it from the list. Hook it up to the Mid attachment of the Top/Bottom node. This will allow us to define an outside corner mesh, inside corner mesh, and main meshes.
<p />
<img alt="04.jpg" src="rsrc/Three/ProceduralBuildingsTutorial/04.jpg" />
<p />
We can now add our window or wall mesh. Create a Mesh node by selecting the Static Mesh you want in the Content Browser and select Mesh from the right-click menu in Facade. Alternately you can hold the 'M' key and left-click in Facade to create the node. In the Mesh node Properties, you will need to define the X Z dimensions (DimX and DimZ). For this example we are using a window mesh that is 512 x 512.
<p />
<img alt="04a.jpg" src="rsrc/Three/ProceduralBuildingsTutorial/04a.jpg" />
<p />
This is what our building looks like so far:
<p />
<img alt="05.jpg" src="rsrc/Three/ProceduralBuildingsTutorial/05.jpg" />
<p />
You will notice that the mesh gets stretched along the longer side of our ProcBuilding Volume. To fix this, we need to have the mesh repeat along the x axis. Add a Reapeat node from the right-click menu and hook it up between the Corner node and the Mesh node. Change the repeat axis to EPBAxis_X in the node properties. Make sure to set the repeat size to the DimX of your mesh.
<p />
<img alt="06.jpg" src="rsrc/Three/ProceduralBuildingsTutorial/06.jpg" />
<p />
The result:
<p />
<img alt="07.jpg" src="rsrc/Three/ProceduralBuildingsTutorial/07.jpg" />
<p />
Now we need to define the corner meshes. Currently there is an empty placeholder space at each corner of the ProcBuilding Volume.
<p />
Create a new Mesh node using your corner Static Mesh and hook it up to the 90 degree attachment slot. Make sure to set the dimensions of the mesh in the properties of the Mesh node and also the size of the corner. For this example we used '1' for the corner size and for the DimX on the Mesh node. You might need to play with these values in order to get your mesh to fit correctly. It mostly depends on where the pivot of the corner mesh is located.
<p />
<img alt="08.jpg" src="rsrc/Three/ProceduralBuildingsTutorial/08.jpg" />
<p />
The result:
<p />
<img alt="09.jpg" src="rsrc/Three/ProceduralBuildingsTutorial/09.jpg" />
<p />
At this point we have one complete floor of the building. We can edit the width of the ProcBuilding Volume and the meshes will adjust correctly to fit the size of the volume. If you try and edit the height of the volume you will notice that the meshes begin to stretch.
<p />
<img alt="10.jpg" src="rsrc/Three/ProceduralBuildingsTutorial/10.jpg" />
<p />
To fix this, we need to repeat each floor along the Z axis. To do this, add a Repeat node before the Corner node and set repeat axis to EPBAxis_Z. Set the repeat size to 512.
<p />
<img alt="11.jpg" src="rsrc/Three/ProceduralBuildingsTutorial/11.jpg" />
<p />
The result:
<p />
<img alt="12.jpg" src="rsrc/Three/ProceduralBuildingsTutorial/12.jpg" />
<p />
<p />
<h2><a name="Setting Up The Top Trim"></a> Setting Up The Top Trim </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
The top trim is created using the same rule setup that we did for the row of windows, just hooking it up to the Top attachment on the Top/Bottom node. Also the Top hieght needs to be defined in the properties of the Top/Bottom node. In this example, our top trim is 129 units tall. We set the ExtractTopZ to 129.
<p />
<img alt="13.jpg" src="rsrc/Three/ProceduralBuildingsTutorial/13.jpg" />
<p />
The result:
<p />
<img alt="14.jpg" src="rsrc/Three/ProceduralBuildingsTutorial/14.jpg" />
<p />
<p />
<h2><a name="Setting Up The Ground Floor"></a> Setting Up The Ground Floor </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
The ground floor is setup the same way as the top trim. Except you use the height of you storefront meshes for your ExtractBottomZ on the Top/Bottom node.
<p />
<img alt="16.jpg" src="rsrc/Three/ProceduralBuildingsTutorial/16.jpg" />
<p />
The result:
<p />
<img alt="17.jpg" src="rsrc/Three/ProceduralBuildingsTutorial/17.jpg" />
<p />
The way this is currently setup, the ground floor consists of one repeating storefront Static Mesh. To add variety, add another mesh slot on the Mesh node for the storefront. Add a different Static Mesh in the new slot. Now set the chance that each mesh has of filling the slot. In this example we used .5 for each mesh.
<p />
<img alt="18.jpg" src="rsrc/Three/ProceduralBuildingsTutorial/18.jpg" />
<p />
The result:
<p />
<img alt="19.jpg" src="rsrc/Three/ProceduralBuildingsTutorial/19.jpg" />
<p />
This should provide a good basis to get you started creating Procedural Buildings in UnrealEngine3. Refer to the <a href="ProceduralBuildings.html" class="twikiLink">Procedural Buildings</a> page for further documentation.
<p />
</noautolink>
<p />
<p />
<p />
<p />
<p />
<p />


<!-- BEGIN UE4 NOTICE -->



<div id="version_message" style="display:none;">

    <div style="position:fixed;top:0px;left:0px;width:100%;height:100%;background:#000;opacity:0.5;">

    </div>

    <div style="position:fixed;top:50%;left:50%;margin:-70px 0px 0px -240px;background:#FFF;border-radius:6px;width:480px;box-shadow:0px 5px 30px -5px rgba(0,0,0,0.9);">

        <div style="font-size:16px;font-weight:bold;background: url(rsrc/Three/warning.png) no-repeat scroll 5px 5px;padding:4px 10px 5px 25px;height:21px;width:440px;">

            Important!

        </div>

        <div style="font-size:11px;padding:5px 10px 10px;width:460px;">

            <p>You are viewing documentation for the <strong>Unreal Development Kit (UDK)</strong>.</p>



            <p>If you are looking for the Unreal Engine 4 documentation, please visit the <a style="color:#000;" href="https://docs.unrealengine.com">Unreal Engine 4 Documentation</a> site.</p>

        </div>

        <div style="height:20px;padding:4px;margin:6px;border-top:1px solid #a0a0a0;">

            <form onsubmit="return closeVersionMessage();">

                <input type="checkbox" id="dismiss" value="dismiss" />

                <label for="dsimiss">Don't show me this again</label>

                <input type="submit" value="Close" style="cursor:pointer;float:right;width:60px;color:#f0f0f0;font-weight:bold;background:#882222;height:24px;padding:2px 3px 3px;text-align:center;border:1px outset #000;" />

            </form>

        </div>

    </div>

</div>



<script type="text/javascript">

    window.onload = function () {

        LoadVersionMessage();

    }



    function LoadVersionMessage()

    {

        var showMessage = "false";
        if(showMessage != "false")

        {

            showVersionMessage();

        }

    }



    function showVersionMessage()

    {

        var message = document.getElementById("version_message");

        if(message)

        {

            message.style.display = "block";

        }

    }



    function closeVersionMessage() {

        var dismiss = document.getElementById("dismiss");

        var message = document.getElementById("version_message");

        if (message) {

            message.style.display = "none";

        }

        if (dismiss.checked) {

            eraseCookie("doc_version_message");

            createCookie("doc_version_message", "false", 365);

            dismiss.checked = false;

        }

        return false;

    }



    function createCookie(name, value, days) {

        if (days) {

            var date = new Date();

            date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));

            var expires = "; expires=" + date.toGMTString();

        }

        else var expires = "";

        document.cookie = name + "=" + value + expires + "; path=/";

    }



    function readCookie(name) {

        var nameEQ = name + "=";

        var ca = document.cookie.split(';');

        for (var i = 0; i < ca.length; i++) {

            var c = ca[i];

            while (c.charAt(0) == ' ') c = c.substring(1, c.length);

            if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);

        }

        return null;

    }



    function eraseCookie(name) {

        createCookie(name, "", -1);

    }

</script>



<!-- END UE4 NOTICE -->



</div></div><div id="footer"><div style="BACKGROUND-COLOR: transparent; margin: 0; padding: 0; width: 100%;"><div>&nbsp;</div><div style="float: left; text-align: left; vertical-align: bottom; width: 50%;"><a href="http://www.videogamevoters.org"><img src="rsrc/vgvn.jpg" border="0" width="234" height="60" alt="Video Game Voters Network" /></a></div><div style="float: right; text-align: right; vertical-align: bottom; width: 50%;">Copyright &copy; 2001-2012 <a href="http://www.epicgames.com" target="_top">Epic Games, Inc.</a><br /><a href="../Main/TermsAndConditions.html" class="twikiLink">Terms and Conditions</a><br /><a href="http://epicgames.com/privacynotice" target="_top">Privacy Notice</a></div></div></div></div>
<p />
</html></body>
