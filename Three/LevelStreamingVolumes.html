<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
	"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title> UDK | LevelStreamingVolumes    </title>

<style type="text/css" media="all">@import "rsrc/twiki_webs.css";</style>
<style type="text/css" media="all">@import "rsrc/udn_new.css";</style>
<link rel="icon" href="rsrc/Three/WebPreferences/favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="rsrc/Three/WebPreferences/favicon.ico" type="image/x-icon" />


<!-- view.static_udn3.tmpl  -->
<script language="JavaScript" type="text/javascript" src="rsrc/udn.js"></script>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

</head>
<p />
<body id="webbgThree">
<p />

<p />
<div id="webThree"><div id="head">
<!--
<div class="header">
 -->
<div style="background: url(/pub/webbg_udn.jpg); background-repeat: no-repeat; height:140px; width: 100%;" >
<!--
<div style="background: transparent url(/pub/udn_header_bg.jpg); background-repeat: repeat-x; height:140px; width: 100%; margin-left: 991px;">
 -->
<p />
<div id="nav">
<ul class="nav">
<font color=black>|</font>&nbsp;&nbsp;<li class=nav_Three><a href="../Main/WebHome.html" class="twikiLink">Main</a></li><font color=black>|</font><li class=nav_Three><a href="../Two/WebHome.html" class="twikiLink">UnrealEngine2</a></li><font color=black>|</font><li class=nav_Three><a href="WebHome.html" class="twikiLink">UnrealEngine3</a></li><font color=black>|</font><li class=nav_Three><a href="https://docs.unrealengine.com" class="twikiLink">UnrealEngine4</a></li><font color=black>|</font><li class=nav_Three><a href="../Main/BusinessAndLegal.html" class="twikiLink">Business &amp; Legal</a></li><font color=black>|</font>
</ul><br><br><br>
</div>
</div>
</div> <!-- end head -->
<div id="pagedefault">
<div id="maincol">
<div id="tool">
<div id="tooltop">UDN</div>
<div id="tooltext" style="padding: 10px 10px 10px 10px;">
Search public documentation: <br>
<form ACTION="/search/index.php" METHOD="GET" NAME="main" ID="main">
<input TYPE="TEXT" NAME="q" SIZE="15" STYLE="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: xx-small;">
<input TYPE="SUBMIT" VALUE="Search" STYLE="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: xx-small;"><br>
</form>
</div>
<div id="toolband">LevelStreamingVolumes  </b></div>
<div id="tooltext">
<a href="LevelStreamingVolumesJP.html" class="twikiLink">日本語訳</a><br><a href="LevelStreamingVolumesCH.html" class="twikiLink">中国翻译</a><br><a href="LevelStreamingVolumesKR.html" class="twikiLink">한국어</a><br>

<!-- Three/LevelStreamingVolumes -->
<hr size="1" noshade="noshade" />
Interested in the Unreal Engine? <br>
Visit the <a href="http://www.unrealtechnology.com" target="_top">Unreal Technology</a> site.<br>
<br>
Looking for jobs and company info? <br>
Check out the <a href="http://www.epicgames.com" target="_top">Epic games</a> site.<br>
<br>
Questions about support via UDN? <br>
Contact the <a href="../Main/ContactUDNStaff.html" class="twikiLink">UDN Staff</a> <br>
<br>
</div> <!-- end toolbox content -->
<div id="toolbottom"></div>
</div> <!-- end tool -->
<p />
<noautolink>
<p />
<div style="padding:0px 0px 0px 4px;font:10px Verdana;">
<b><a href="WebHome.html" class="twikiLink">UE3 Home</a></b> &gt; <b><a href="LevelStreamingHome.html" class="twikiLink">Level Streaming</a></b> &gt; Level Streaming Volumes
</div>
<hr size="1" noshade="noshade">
<h1><a name="Level Streaming Volumes"></a> Level Streaming Volumes </h1>
<hr size="1" noshade="noshade">
<p />
<div class="twikiToc"> <ul>
<li> <a href="LevelStreamingVolumes.html#Level Streaming Volumes"> Level Streaming Volumes</a> <ul>
<li> <a href="LevelStreamingVolumes.html#Overview"> Overview</a>
</li> <li> <a href="LevelStreamingVolumes.html#Associating Streaming Volumes With Levels"> Associating Streaming Volumes With Levels</a>
</li> <li> <a href="LevelStreamingVolumes.html#Important Details"> Important Details</a>
</li> <li> <a href="LevelStreamingVolumes.html#Testing Your Streaming Volume Setup"> Testing Your Streaming Volume Setup</a>
</li> <li> <a href="LevelStreamingVolumes.html#Level Streaming Volumes for Previs"> Level Streaming Volumes for Previs</a>
</li> <li> <a href="LevelStreamingVolumes.html#Cost of Level Streaming Volumes"> Cost of Level Streaming Volumes</a>
</li> <li> <a href="LevelStreamingVolumes.html#Adding Hysteresis to Unloading Requests"> Adding Hysteresis to Unloading Requests</a>
</li> <li> <a href="LevelStreamingVolumes.html#Disabling Level Streaming Volumes"> Disabling Level Streaming Volumes</a>
</li></ul>
</li></ul>
</div>
<p />
<h2><a name="Overview"></a> Overview </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
This document contains an overview of how to use volume-based level streaming.  It assumes the reader is already familiar with the basics of level streaming described in the <a href="LevelStreamingHowTo.html" class="twikiLink">Level Streaming How-To</a>.
<p />
Level streaming volumes make controlling level streaming very easy.  The idea is simple: load/unload requests for a streaming level are issued based on whether the viewpoint is inside any of the LevelStreamingVolume volumes associated with a level.
<p />
Specifically, level streaming volumes can be used in two ways:
<p /> <ul>
<li> In the <strong>game</strong>, level streaming volumes cause levels to load when the player is inside the volume and unload when the player is outside the volume.
</li></ul>
<p /> <ul>
<li> In the <strong>editor</strong>, level streaming volumes can be used to preview level streaming by automatically hiding/unhiding levels based on the location of the perspective viewport's camera.
</li></ul>
<p />
Volume-based level streaming is simple to use and does not require any Kismet scripting, making it an ideal way to control level streaming.  Furthermore, volume-based level streaming is much easier to maintain than scripted streaming: when demands on the loading system change, level loading/unloading behaviour can be modified by simply resizing the streaming volumes.
<p />
<h2><a name="Associating Streaming Volumes With Levels"></a> Associating Streaming Volumes With Levels </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
Volume-based level streaming works as follows: each streaming level can have associated with it a set of volumes of type LevelStreamingVolume.  Each frame, the engine iterates over each level and checks to see if the player viewpoint is inside any of the LevelStreamingVolumes associated with that level.  If the viewpoint is inside at least one LevelStreamingVolume, a request is issued to begin loading that level.  If the viewpoint is outside all LevelStreamingVolumes, the level is marked for unloading.
<p />
To associate streaming volumes with a level:
<p /> <ol>
<li> Drop a LevelStreamingVolume in the Persistent Level (as you would any other volume by using the "Add Volume" button on the main editor toolbar);
</li> <li> Select the level(s) to associate with this volume in the Level Browser, right-click to bring up the Level Browser context menu, and select "Add Streaming Volumes".
</li></ol>
<p />
That's it!
<p />
The full list of LevelStreamingVolume operations appearing in the Level Browser context menu is as follows:
<p />
<img alt="LevelBrowserMenu.jpg" src="rsrc/Three/LevelStreamingVolumes/LevelBrowserMenu.jpg" />
<p /> <ul>
<li> <strong>Add Streaming Volumes</strong>: Adds to the level(s)'s volumes, retaining any existing associations.
</li></ul>
<p /> <ul>
<li> <strong>Set Streaming Volumes</strong>: Sets the level(s)'s volumes to be exactly the selected volumes, destroying any existing associations.
</li></ul>
<p /> <ul>
<li> <strong>Clear Streaming Volumes</strong>: Clears all streaming volume associations from the selected level(s).
</li></ul>
<p /> <ul>
<li> <strong>Select Associated Streaming Volumes</strong>: Selects all volumes associated with the selected level(s).
</li></ul>
<p />
Since it's easy for streaming volumes to clutter the view, LevelStreamingVolumes are only visible for levels that are <strong>1) visible</strong>; and <strong>2) selected</strong> in the level browser.  So, if you deselect the level you've just associated that volume with, you'll see the volume disappear in the editor viewports.  Selecting the level again in the Level Browser will cause the associated volumes to reappear.
<p />
<h2><a name="Important Details"></a> Important Details </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p /> <ul>
<li> All LevelStreamingVolumes must exist in the persistent level.  LevelStreamingVolumes that live in other levels cannot be used for level streaming, and will generate warnings when the map is checked for errors.
</li></ul>
<p /> <ul>
<li> Only levels that were added to the world using the "Kismet" streaming method can use volume-based level streaming.
</li></ul>
<p /> <ul>
<li> If a level has any streaming volumes associated with it, other methods of streaming the level (ie distance streaming or kismet streaming) will not behave correctly.
</li></ul>
<p /> <ul>
<li> A single LevelStreamingVolume can affect multiple levels.  Similarly, a single level can be affected by multiple LevelStreamingVolumes.
</li></ul>
<p /> <ul>
<li> Volume-based streaming works for split screen.  The viewpoints of all local players are considered before any loading/unloading requests are issued.
</li></ul>
<p />
<h2><a name="Testing Your Streaming Volume Setup"></a> Testing Your Streaming Volume Setup </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
It is critical that volume-based level streaming be tested in game on the target platform.  Streaming in "Play in Editor" (PIE) will show <i>where</i> the loads/unloads will happen, but <strong>streaming in PIE is not representative of real, in-game loading-unloading</strong>.  This is because in PIE, the levels are already in memory, and so "loading" a level is simply a matter of unhiding it and is thus instantaneous.
<p />
Running the level in the standalone game on the target platform is critical in making sure your streaming setups work.  Note that on some platforms, it can take several seconds to stream in a level.  Size your LevelStreamingVolumes appropriately, so that the level is loaded by the time the player can reach it.  Level loading behaviour can be modified by resizing the LevelStreamingVolumes associated with a level.  Growing a volume causes associated levels to load sooner and unload later, while shrinking a volume causes later loads and earlier unloads.
<p />
<h2><a name="Level Streaming Volumes for Previs"></a> Level Streaming Volumes for Previs </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
<img alt="PrevisButton.jpg" src="rsrc/Three/LevelStreamingVolumes/PrevisButton.jpg" />
<p />
Volume-based level streaming can be easily previewed by enabling the "Level Streaming Volume Previs" button on the perspective viewport toolbar.  When this mode is enabled, levels will be hide/unhide based on the location of the perspective viewport camera.  Note that this hiding/unhiding will affect the set of visible levels in the Level Browser.
<p />
A LevelStreamingVolume can be marked for editor previs only by setting the bEditorPreVisOnly flag on the LevelStreamingVolume.  In this manner, volume-based level streaming can still be used for editor previs while at the same time using another streaming method for in-game streaming.
<p />
<h2><a name="Cost of Level Streaming Volumes"></a> Cost of Level Streaming Volumes </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
Each frame, UWorld::ProcessLevelStreamingVolumes iterates over each streaming level and for each level, that level will begin loading if any local player is within any of the volumes associated with that level.  Likewise, the level will be begin unloading if all local players are outside all volumes.
<p />
UWorld::ProcessLevelStreamingVolumes exploits coherency in the following manner: for each level, the volume that most recently contained a player is cached.  This cached volume is checked first, so that levels a player is in or returns to are quickly accepted.
<p />
Volumes of any shape are fine, although obivously the fewer the better.  An upper bound on the cost of level streaming volumes can be approximated by the sum of the number of level streaming volumes associated with unloaded levels.
<p />
Two stats exist under the "Streaming" stats group for monitoring level streaming performance.  The "Streaming Volumes" stat tracks the number of LevelStreamingVolumes tested against player viewpoints per frame, while the "Volume Streaming Tick" stat tracks the amount of time spent in UWorld::ProcessLevelStreamingVolumes per frame.
<p />
<h2><a name="Adding Hysteresis to Unloading Requests"></a> Adding Hysteresis to Unloading Requests </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
A player moving back and forth across a LevelStreamingVolume boundary causes spurious load/unload requests to be issued.  To address this, hysteresis has been added to unloading requests.   No hysteresis exists for loading requests, because if a level needs to be loaded, we always want it loaded ASAP.
<p />
The amount of unloading hystersis can be adjusted by modifying the MinTimeBetweenVolumeUnloadRequests property of the LevelStreaming object (LevelStreaming properties can be accessed from the Level Browser context menu).  The default unloading hysteresis is 2.0 seconds.
<p />
<h2><a name="Disabling Level Streaming Volumes"></a> Disabling Level Streaming Volumes </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
There is a property on LevelStreamingVolumes called bDisabled.  When set to TRUE, the volume will be ignored by the streaming volume code, both in-game and in the editor.  bDisabled can be used to disable a LevelStreamingVolume without disassociating it from the level.  Also, bDisabled can be toggled in-game via the Toggle Kismet action to toggle the control of a level's streaming between Kismet and volume streaming.  Note that <strong>toggling between Kismet and volume-based streaming is dangerous and error-prone</strong>, and should be used only when necessary.
<p />
As an example of where the bDisabled flag is useful, imagine a door leading to a level whose streaming is controlled with streaming volumes.
<p />
<img alt="bDisabledUsage.jpg" src="rsrc/Three/LevelStreamingVolumes/bDisabledUsage.jpg" />
<p />
In the image above, the player approaches from the left, and the level to stream in is on the right side of the door.  The streaming volume extends leftwards out past the door, so that the level will be streamed in by the time the player can reach the door and open it.  Initially, however the door is locked, and will become unlocked when the player achieves an objective in another part of the map.  So, even though the streaming volume extends past the door, we don't want the level on the other side of the door to stream in unless the door is actually unlocked ("openable").
<p />
The way to achieve this is to mark the level streaming volume as bDisabled in the editor, and then in the Kismet use the Toggle action to set bDisabled to FALSE on this object when the objective is reached.  In this way, the LevelStreamingVolume will "turn on" and the level will stream in when the player approaches the door.
<p />
</noautolink>
<p />
<p />
<p />
<p />
<p />
<p />


<!-- BEGIN UE4 NOTICE -->



<div id="version_message" style="display:none;">

    <div style="position:fixed;top:0px;left:0px;width:100%;height:100%;background:#000;opacity:0.5;">

    </div>

    <div style="position:fixed;top:50%;left:50%;margin:-70px 0px 0px -240px;background:#FFF;border-radius:6px;width:480px;box-shadow:0px 5px 30px -5px rgba(0,0,0,0.9);">

        <div style="font-size:16px;font-weight:bold;background: url(rsrc/Three/warning.png) no-repeat scroll 5px 5px;padding:4px 10px 5px 25px;height:21px;width:440px;">

            Important!

        </div>

        <div style="font-size:11px;padding:5px 10px 10px;width:460px;">

            <p>You are viewing documentation for the <strong>Unreal Development Kit (UDK)</strong>.</p>



            <p>If you are looking for the Unreal Engine 4 documentation, please visit the <a style="color:#000;" href="https://docs.unrealengine.com">Unreal Engine 4 Documentation</a> site.</p>

        </div>

        <div style="height:20px;padding:4px;margin:6px;border-top:1px solid #a0a0a0;">

            <form onsubmit="return closeVersionMessage();">

                <input type="checkbox" id="dismiss" value="dismiss" />

                <label for="dsimiss">Don't show me this again</label>

                <input type="submit" value="Close" style="cursor:pointer;float:right;width:60px;color:#f0f0f0;font-weight:bold;background:#882222;height:24px;padding:2px 3px 3px;text-align:center;border:1px outset #000;" />

            </form>

        </div>

    </div>

</div>



<script type="text/javascript">

    window.onload = function () {

        LoadVersionMessage();

    }



    function LoadVersionMessage()

    {

        var showMessage = "false";
        if(showMessage != "false")

        {

            showVersionMessage();

        }

    }



    function showVersionMessage()

    {

        var message = document.getElementById("version_message");

        if(message)

        {

            message.style.display = "block";

        }

    }



    function closeVersionMessage() {

        var dismiss = document.getElementById("dismiss");

        var message = document.getElementById("version_message");

        if (message) {

            message.style.display = "none";

        }

        if (dismiss.checked) {

            eraseCookie("doc_version_message");

            createCookie("doc_version_message", "false", 365);

            dismiss.checked = false;

        }

        return false;

    }



    function createCookie(name, value, days) {

        if (days) {

            var date = new Date();

            date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));

            var expires = "; expires=" + date.toGMTString();

        }

        else var expires = "";

        document.cookie = name + "=" + value + expires + "; path=/";

    }



    function readCookie(name) {

        var nameEQ = name + "=";

        var ca = document.cookie.split(';');

        for (var i = 0; i < ca.length; i++) {

            var c = ca[i];

            while (c.charAt(0) == ' ') c = c.substring(1, c.length);

            if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);

        }

        return null;

    }



    function eraseCookie(name) {

        createCookie(name, "", -1);

    }

</script>



<!-- END UE4 NOTICE -->



</div></div><div id="footer"><div style="BACKGROUND-COLOR: transparent; margin: 0; padding: 0; width: 100%;"><div>&nbsp;</div><div style="float: left; text-align: left; vertical-align: bottom; width: 50%;"><a href="http://www.videogamevoters.org"><img src="rsrc/vgvn.jpg" border="0" width="234" height="60" alt="Video Game Voters Network" /></a></div><div style="float: right; text-align: right; vertical-align: bottom; width: 50%;">Copyright &copy; 2001-2012 <a href="http://www.epicgames.com" target="_top">Epic Games, Inc.</a><br /><a href="../Main/TermsAndConditions.html" class="twikiLink">Terms and Conditions</a><br /><a href="http://epicgames.com/privacynotice" target="_top">Privacy Notice</a></div></div></div></div>
<p />
</html></body>
