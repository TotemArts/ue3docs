<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
	"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title> UDK | AllegorithmicSubstance    </title>

<style type="text/css" media="all">@import "rsrc/twiki_webs.css";</style>
<style type="text/css" media="all">@import "rsrc/udn_new.css";</style>
<link rel="icon" href="rsrc/Three/WebPreferences/favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="rsrc/Three/WebPreferences/favicon.ico" type="image/x-icon" />


<!-- view.static_udn3.tmpl  -->
<script language="JavaScript" type="text/javascript" src="rsrc/udn.js"></script>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

</head>
<p />
<body id="webbgThree">
<p />

<p />
<div id="webThree"><div id="head">
<!--
<div class="header">
 -->
<div style="background: url(/pub/webbg_udn.jpg); background-repeat: no-repeat; height:140px; width: 100%;" >
<!--
<div style="background: transparent url(/pub/udn_header_bg.jpg); background-repeat: repeat-x; height:140px; width: 100%; margin-left: 991px;">
 -->
<p />
<div id="nav">
<ul class="nav">
<font color=black>|</font>&nbsp;&nbsp;<li class=nav_Three><a href="../Main/WebHome.html" class="twikiLink">Main</a></li><font color=black>|</font><li class=nav_Three><a href="../Two/WebHome.html" class="twikiLink">UnrealEngine2</a></li><font color=black>|</font><li class=nav_Three><a href="WebHome.html" class="twikiLink">UnrealEngine3</a></li><font color=black>|</font><li class=nav_Three><a href="https://docs.unrealengine.com" class="twikiLink">UnrealEngine4</a></li><font color=black>|</font><li class=nav_Three><a href="../Main/BusinessAndLegal.html" class="twikiLink">Business &amp; Legal</a></li><font color=black>|</font>
</ul><br><br><br>
</div>
</div>
</div> <!-- end head -->
<div id="pagedefault">
<div id="maincol">
<div id="tool">
<div id="tooltop">UDN</div>
<div id="tooltext" style="padding: 10px 10px 10px 10px;">
Search public documentation: <br>
<form ACTION="/search/index.php" METHOD="GET" NAME="main" ID="main">
<input TYPE="TEXT" NAME="q" SIZE="15" STYLE="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: xx-small;">
<input TYPE="SUBMIT" VALUE="Search" STYLE="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: xx-small;"><br>
</form>
</div>
<div id="toolband">AllegorithmicSubstance  </b></div>
<div id="tooltext">
<a href="AllegorithmicSubstanceCH.html" class="twikiLink">中国翻译</a><br><a href="AllegorithmicSubstanceKR.html" class="twikiLink">한국어</a><br>

<!-- Three/AllegorithmicSubstance -->
<hr size="1" noshade="noshade" />
Interested in the Unreal Engine? <br>
Visit the <a href="http://www.unrealtechnology.com" target="_top">Unreal Technology</a> site.<br>
<br>
Looking for jobs and company info? <br>
Check out the <a href="http://www.epicgames.com" target="_top">Epic games</a> site.<br>
<br>
Questions about support via UDN? <br>
Contact the <a href="../Main/ContactUDNStaff.html" class="twikiLink">UDN Staff</a> <br>
<br>
</div> <!-- end toolbox content -->
<div id="toolbottom"></div>
</div> <!-- end tool -->
<p />
<noautolink>
<p />
<p />
<div style="padding:0px 0px 0px 4px;font:10px Verdana;">
<b><a href="WebHome.html" class="twikiLink">UE3 Home</a></b> &gt; <b><a href="MaterialsAndTexturesHome.html" class="twikiLink">Materials &amp; Textures</a></b> &gt; Allegorithmic Substance Integration
</div>
<hr size="1" noshade="noshade">
<p />
<h1><a name="Allegorithmic Substance Integration"></a> Allegorithmic Substance Integration </h1>
<hr size="1" noshade="noshade">
<p />
<img src="rsrc/Three/AllegorithmicSubstance/header.jpg" alt="header.jpg width="876" height="240" />
<p />
<div class="twikiToc"> <ul>
<li> <a href="AllegorithmicSubstance.html#Allegorithmic Substance Integration"> Allegorithmic Substance Integration</a> <ul>
<li> <a href="AllegorithmicSubstance.html#Substances in UDK"> Substances in UDK</a>
</li> <li> <a href="AllegorithmicSubstance.html#The Substance Ecosystem"> The Substance Ecosystem</a> <ul>
<li> <a href="AllegorithmicSubstance.html#References"> References</a>
</li> <li> <a href="AllegorithmicSubstance.html#File formats"> File formats</a>
</li></ul>
</li> <li> <a href="AllegorithmicSubstance.html#Workflow"> Workflow</a> <ul>
<li> <a href="AllegorithmicSubstance.html#SBSAR Import"> SBSAR Import</a>
</li> <li> <a href="AllegorithmicSubstance.html#Substance Graph Instances"> Substance Graph Instances</a>
</li> <li> <a href="AllegorithmicSubstance.html#Modifying parameters"> Modifying parameters</a> <ul>
<li> <a href="AllegorithmicSubstance.html#Graph Instance Editor"> Graph Instance Editor</a>
</li> <li> <a href="AllegorithmicSubstance.html#During the game">During the game</a>
</li></ul>
</li></ul>
</li> <li> <a href="AllegorithmicSubstance.html#Technical Information"> Technical Information</a> <ul>
<li> <a href="AllegorithmicSubstance.html#Modifying Instances from Unreal Script"> Modifying Instances from Unreal Script</a>
</li> <li> <a href="AllegorithmicSubstance.html#Specific INI values"> Specific INI values</a>
</li></ul>
</li> <li> <a href="AllegorithmicSubstance.html#Free substance resources"> Free substance resources</a>
</li></ul>
</li></ul>
</div>
<p />
<h2><a name="Substances in UDK"></a> Substances in UDK </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
Substances are a new texture format offering multiple advantages over standard bitmaps:
<p /> <ul>
<li> Multi-output - One file can contain all the maps needed for one or more materials
</li> <li> Resolution independent - scales dynamically up to 2048x2048
</li> <li> Parametric and dynamic - modify the textures in the UDK editor or even in-game
</li> <li> Can be used as multi-purpose filters using dynamic bitmap inputs
</li> <li> Non-linear and non-destructive creation process
</li></ul>
<p />
<h2><a name="The Substance Ecosystem"></a> The Substance Ecosystem </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
<h3><a name="References"></a> References </h3>
<p /> <ul>
<li> Don’t know what a substance is? Check out <a href="http://www.allegorithmic.com/getstarted" target="_top">this page</a> for a quick overview of the technology.
</li> <li> Want to know more about Substance Designer? <a href="http://www.allegorithmic.com/products/substance-designer-3" target="_top">This</a> is the place you are looking for.
</li> <li> Want to learn fast? Video Tutorials are available  <a href="http://www.allegorithmic.com/tutorials/" target="_top">over here</a>.
</li> <li> Don’t want to buy stuff? <a href="http://www.allegorithmic.com/products/substance_utilities" target="_top">Substance Utilities</a> is free.
</li></ul>
<p />
Substance Utilities allows you to convert your textures to substances, allowing faster import times, automatic material creation and dynamic texture tweaking in the editor.
<p />
<h3><a name="File formats"></a> File formats </h3>
<p />
There are two main file formats in the Substance ecosystem. The editable one, text based and easily put under source control, is the sbs file format. This format is used to save packages made in Substance Designer, it can contain multiple graph, each one with several output. External resources like SVGs and bitmaps can be embedded in the sbs file, it can be compared to a .PSD file.
<p />
Before using substance files in the UDK, you have to publish it. The result of this process is a Substance archive, or sbsar file. This is the format supported in the UDK and other software where Substance is integrated. It is a compressed, binary file format and it is no longer editable.
<p />
Note: It is possible to save the values of the inputs of a Substance as presets. Those files have the extension sbsprs, and can be used to save multiple variations of a single Substance. They are text based and very light. Presets can be imported or exported from Substance Graph Instances (see "Substance Graph Instances").
<p />
<h2><a name="Workflow"></a> Workflow </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
<img src="rsrc/Three/AllegorithmicSubstance/schemaUDK.png" alt="schemaUDK.png" width="870" height="454" />
<p />
<h3><a name="SBSAR Import"></a> SBSAR Import </h3>
<p />
When importing a sbsar, two objects are created: a Substance Instance Factory and one Graph Instance for each Graph contained in the sbsar file. The Instance Factory can be used to create other Graph Instances. An Unreal Material can also be created for each Substance Graph Instance.
<p />
<img src="rsrc/Three/AllegorithmicSubstance/ImportDialog.png" alt="ImportDialog.png" width="475" height="350" />
<p /> <ul>
<li> Create Material will create a material in a subgroup of the package where the Graph Instance is created. The substance's outputs will automatically be plugged in the right material slots.
</li></ul>
<p /> <ul>
<li> You can specify a destination for the Graph Instances of the Substance you are importing. In this case, both the Graph Instances and their outputs will be stored in the specified package.
</li></ul>
<p />
<img src="rsrc/Three/AllegorithmicSubstance/contentbrowser.jpg" alt="contentbrowser.jpg" width="498" height="538" />
<p />
<h3><a name="Substance Graph Instances"></a> Substance Graph Instances </h3>
<p />
Each graph contained in a sbsar can be instanced as many times as necessary, allowing to have different variations of a single substance. Those Graph Instances can be saved in different packages.
<p />
<h3><a name="Modifying parameters"></a> Modifying parameters </h3>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
<h4><a name="Graph Instance Editor"></a> Graph Instance Editor </h4>
<p />
To edit input values in the Graph Instance Editor, double click on the Graph Instance of your choice and you will have access to the dynamic parameters (including image inputs).
<p />
<img src="rsrc/Three/AllegorithmicSubstance/instanceEditor.png" alt="instanceEditor.png" width="420" height="684" /> <ul>
<li> Outputs
</li></ul>
You can disable some of the outputs of the Substance depending on your needs. <ul>
<li> Image inputs
</li></ul>
Dynamic image inputs are supported through a new type of object, Substance Image Inputs. They are created by importing jpeg or tga images or by converting standard existing textures. Substance outputs can also be used directly as image inputs. Any resolution can be used, image inputs will be resized when the substance ouputs are rendered. <ul>
<li> Inputs
</li></ul>
Numeric and color inputs allow you to modify the look of the substances in real time in the UDK viewport. <ul>
<li> Bake Outputs
</li></ul>
When the Bake Outputs option if off, the substance’s outputs will be generated when their package is loaded. When it is switched on, the bitmap will be kept during the unreal cooking process (ie it will not need to be rendered at load time). The trade-off offered with this option is CPU usage (load time generation) versus size of the package (bake outputs option on). In both cases, the inputs can be still be modified and the outputs recomputed at runtime.
<p />
<h4><a name="During the game"></a> During the game </h4>
<p /> <ul>
<li> Kismet
</li></ul>
To modify inputs using Kismet, create the appropriate sequence action from the Substance category: Set Input Float, Int or Image.
<p />
<img src="rsrc/Three/AllegorithmicSubstance/kismet.png" alt="kismet.png" width="361" height="434" />
<p />
Be careful to use the identifier, which is displayed as a tool-tip of the label.
Once you have modified your inputs, you have to trigger the rendering using the "Substance Render" sequence action.
<p />
<img src="rsrc/Three/AllegorithmicSubstance/tooltip.jpg" alt="tooltip.jpg" width="351" height="185" /> <ul>
<li> Matinee
</li></ul>
Create a Graph Instance Actor in your scene which will be plugged in the matinee’s data. To modify inputs, you need to create Substance Input tracks in which in you specify the input’s identifier. This works like the Material Instance Actor when modifying Material Instances.
<p />
<h2><a name="Technical Information"></a> Technical Information </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
<h3><a name="Modifying Instances from Unreal Script"></a> Modifying Instances from Unreal Script </h3>
<p />
To modify inputs, use the Graph Instance objects (SubstanceAirGraphInstance class). The interface is the following:
<p />
<pre>
// retrieve the input list
native final function array&#60;string&#62; GetInputNames();

// retrieve an input&#39;s type
native final function SubstanceAirInputType GetInputType(const string InputName);

// modify the input value of the specified input (by name)
native final function bool SetInputInt(const string InputName, const array&#60;int&#62; Value);
native final function bool SetInputFloat(const string InputName, const array&#60;float&#62; Value);

// modify an image input, object must be a SubstanceAirImageInput or a SubstanceAirTexture2D
native final function bool SetInputImg(const string InputName, Object Value);

// get the input value of the specified input (by name)
native final function array&#60;int&#62; GetInputInt(const string InputName);
native final function array&#60;float&#62; GetInputFloat(const string InputName);
native final function Object GetInputImg(const string InputName);
</pre>
<p />
<h3><a name="Specific INI values"></a> Specific INI values </h3>
<p /> <ul>
<li> During the cooking step, it is possible to limit the number of mip-maps kept in the packages, allowing to save significant amount of space. It is possible to setup how many mips are kept in the BaseEngine.ini config file, under the Substance section, with the MipCountAfterCooking parameter:
</li></ul>
<p />
<pre>
&#91;SubstanceAir]
; number of mipmaps to keep during cooking
MipCountAfterCooking&#61;7
</pre>
<p /> <ul>
<li> The CPU and memory budget attributed to the Substance Engine is setup in the BaseEngine.ini file, in the following section:
</li></ul>
<p />
<pre>
&#91;SubstanceAir]
(...)
; memory budget
MemBudgetMb&#61;256
; allow use of every CPU core available for generation (will leave one free for the main thread)
FreeCore&#61;0
</pre>
<p />
<h2><a name="Free substance resources"></a> Free substance resources </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p /> <ul>
<li> <a href="http://www.allegorithmic.com/products/substance_utilities" target="_top">Substance Utilities</a> allows you to transform your textures into simple dynamic substances.
</li></ul>
<p /> <ul>
<li> <a href="http://www.allegorithmic.com/gallery/beneath-showcasing-killer-semi-auto-texturing/" target="_top">The Beneath Demo</a> is a downloadable UDK project textured entirely using substances. Source are available <a href="http://www.allegorithmic.com/static/downloads/Allegorithmic_Beneath_Sources.zip" target="_top">over here</a> (DISCLAIMER: a last minute bug slipped through QA, <a href="http://forums.epicgames.com/threads/939999-Substance-Integration-Help" target="_top">see this thread for more information !</a>
</li></ul>
<p /> <ul>
<li> More than 60 substances are bundled with Autodesk Maya and 3dsMax (2012 and up).
</li></ul>
<p /> <ul>
<li> A free pack of <a href="rsrc/Three/AllegorithmicSubstance/FreeSubstances.zip" target="_top">25 substances</a> for UDK users.
</li></ul>
<p /> <ul>
<li> Free substance filters and generators for <a href="rsrc/Three/AllegorithmicSubstance/Make_It_A_Parquet.sbsar" target="_top">Wood floors</a>, <a href="rsrc/Three/AllegorithmicSubstance/Make_It_A_Brick_Wall.sbsar" target="_top">Brick Walls</a>, <a href="rsrc/Three/AllegorithmicSubstance/StoneFilter.sbsar" target="_top">Stone objects textures</a>, or <a href="rsrc/Three/AllegorithmicSubstance/MetalFilter.sbsar" target="_top">Metallic objects textures</a> can be downloaded for free on Allegorithmic's website.
</li></ul>
<p />
<p />
<p />
.
</noautolink>
<p />
<p />
<p />
<p />
<p />
<p />
<p />
<p />
<p />
<p />


<!-- BEGIN UE4 NOTICE -->



<div id="version_message" style="display:none;">

    <div style="position:fixed;top:0px;left:0px;width:100%;height:100%;background:#000;opacity:0.5;">

    </div>

    <div style="position:fixed;top:50%;left:50%;margin:-70px 0px 0px -240px;background:#FFF;border-radius:6px;width:480px;box-shadow:0px 5px 30px -5px rgba(0,0,0,0.9);">

        <div style="font-size:16px;font-weight:bold;background: url(rsrc/Three/warning.png) no-repeat scroll 5px 5px;padding:4px 10px 5px 25px;height:21px;width:440px;">

            Important!

        </div>

        <div style="font-size:11px;padding:5px 10px 10px;width:460px;">

            <p>You are viewing documentation for the <strong>Unreal Development Kit (UDK)</strong>.</p>



            <p>If you are looking for the Unreal Engine 4 documentation, please visit the <a style="color:#000;" href="https://docs.unrealengine.com">Unreal Engine 4 Documentation</a> site.</p>

        </div>

        <div style="height:20px;padding:4px;margin:6px;border-top:1px solid #a0a0a0;">

            <form onsubmit="return closeVersionMessage();">

                <input type="checkbox" id="dismiss" value="dismiss" />

                <label for="dsimiss">Don't show me this again</label>

                <input type="submit" value="Close" style="cursor:pointer;float:right;width:60px;color:#f0f0f0;font-weight:bold;background:#882222;height:24px;padding:2px 3px 3px;text-align:center;border:1px outset #000;" />

            </form>

        </div>

    </div>

</div>



<script type="text/javascript">

    window.onload = function () {

        LoadVersionMessage();

    }



    function LoadVersionMessage()

    {

        var showMessage = "false";
        if(showMessage != "false")

        {

            showVersionMessage();

        }

    }



    function showVersionMessage()

    {

        var message = document.getElementById("version_message");

        if(message)

        {

            message.style.display = "block";

        }

    }



    function closeVersionMessage() {

        var dismiss = document.getElementById("dismiss");

        var message = document.getElementById("version_message");

        if (message) {

            message.style.display = "none";

        }

        if (dismiss.checked) {

            eraseCookie("doc_version_message");

            createCookie("doc_version_message", "false", 365);

            dismiss.checked = false;

        }

        return false;

    }



    function createCookie(name, value, days) {

        if (days) {

            var date = new Date();

            date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));

            var expires = "; expires=" + date.toGMTString();

        }

        else var expires = "";

        document.cookie = name + "=" + value + expires + "; path=/";

    }



    function readCookie(name) {

        var nameEQ = name + "=";

        var ca = document.cookie.split(';');

        for (var i = 0; i < ca.length; i++) {

            var c = ca[i];

            while (c.charAt(0) == ' ') c = c.substring(1, c.length);

            if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);

        }

        return null;

    }



    function eraseCookie(name) {

        createCookie(name, "", -1);

    }

</script>



<!-- END UE4 NOTICE -->



</div></div><div id="footer"><div style="BACKGROUND-COLOR: transparent; margin: 0; padding: 0; width: 100%;"><div>&nbsp;</div><div style="float: left; text-align: left; vertical-align: bottom; width: 50%;"><a href="http://www.videogamevoters.org"><img src="rsrc/vgvn.jpg" border="0" width="234" height="60" alt="Video Game Voters Network" /></a></div><div style="float: right; text-align: right; vertical-align: bottom; width: 50%;">Copyright &copy; 2001-2012 <a href="http://www.epicgames.com" target="_top">Epic Games, Inc.</a><br /><a href="../Main/TermsAndConditions.html" class="twikiLink">Terms and Conditions</a><br /><a href="http://epicgames.com/privacynotice" target="_top">Privacy Notice</a></div></div></div></div>
<p />
</html></body>
