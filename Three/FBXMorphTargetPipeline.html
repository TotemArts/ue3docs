<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
	"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title> UDK | FBXMorphTargetPipeline    </title>

<style type="text/css" media="all">@import "rsrc/twiki_webs.css";</style>
<style type="text/css" media="all">@import "rsrc/udn_new.css";</style>
<link rel="icon" href="rsrc/Three/WebPreferences/favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="rsrc/Three/WebPreferences/favicon.ico" type="image/x-icon" />


<!-- view.static_udn3.tmpl  -->
<script language="JavaScript" type="text/javascript" src="rsrc/udn.js"></script>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

</head>
<p />
<body id="webbgThree">
<p />

<p />
<div id="webThree"><div id="head">
<!--
<div class="header">
 -->
<div style="background: url(/pub/webbg_udn.jpg); background-repeat: no-repeat; height:140px; width: 100%;" >
<!--
<div style="background: transparent url(/pub/udn_header_bg.jpg); background-repeat: repeat-x; height:140px; width: 100%; margin-left: 991px;">
 -->
<p />
<div id="nav">
<ul class="nav">
<font color=black>|</font>&nbsp;&nbsp;<li class=nav_Three><a href="../Main/WebHome.html" class="twikiLink">Main</a></li><font color=black>|</font><li class=nav_Three><a href="../Two/WebHome.html" class="twikiLink">UnrealEngine2</a></li><font color=black>|</font><li class=nav_Three><a href="WebHome.html" class="twikiLink">UnrealEngine3</a></li><font color=black>|</font><li class=nav_Three><a href="https://docs.unrealengine.com" class="twikiLink">UnrealEngine4</a></li><font color=black>|</font><li class=nav_Three><a href="../Main/BusinessAndLegal.html" class="twikiLink">Business &amp; Legal</a></li><font color=black>|</font>
</ul><br><br><br>
</div>
</div>
</div> <!-- end head -->
<div id="pagedefault">
<div id="maincol">
<div id="tool">
<div id="tooltop">UDN</div>
<div id="tooltext" style="padding: 10px 10px 10px 10px;">
Search public documentation: <br>
<form ACTION="/search/index.php" METHOD="GET" NAME="main" ID="main">
<input TYPE="TEXT" NAME="q" SIZE="15" STYLE="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: xx-small;">
<input TYPE="SUBMIT" VALUE="Search" STYLE="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: xx-small;"><br>
</form>
</div>
<div id="toolband">FBXMorphTargetPipeline  </b></div>
<div id="tooltext">
<a href="FBXMorphTargetPipelineJP.html" class="twikiLink">日本語訳</a><br><a href="FBXMorphTargetPipelineCH.html" class="twikiLink">中国翻译</a><br><a href="FBXMorphTargetPipelineKR.html" class="twikiLink">한국어</a><br>

<!-- Three/FBXMorphTargetPipeline -->
<hr size="1" noshade="noshade" />
Interested in the Unreal Engine? <br>
Visit the <a href="http://www.unrealtechnology.com" target="_top">Unreal Technology</a> site.<br>
<br>
Looking for jobs and company info? <br>
Check out the <a href="http://www.epicgames.com" target="_top">Epic games</a> site.<br>
<br>
Questions about support via UDN? <br>
Contact the <a href="../Main/ContactUDNStaff.html" class="twikiLink">UDN Staff</a> <br>
<br>
</div> <!-- end toolbox content -->
<div id="toolbottom"></div>
</div> <!-- end tool -->
<p />
<noautolink>
<p />
<div style="padding:0px 0px 0px 4px;font:10px Verdana;">
<b><a href="WebHome.html" class="twikiLink">UE3 Home</a></b> &gt; <b><a href="FBXPipeline.html" class="twikiLink">FBX Content Pipeline</a></b> &gt; FBX Morph Target Pipeline <br/>
<b><a href="WebHome.html" class="twikiLink">UE3 Home</a></b> &gt; <b><a href="AnimationHome.html" class="twikiLink">Animation</a></b> &gt; FBX Morph Target Pipeline <br/>
<b><a href="WebHome.html" class="twikiLink">UE3 Home</a></b> &gt; <b><a href="CharacterArtistHome.html" class="twikiLink">Character Artist</a></b> &gt; FBX Morph Target Pipeline <br/>
<b><a href="WebHome.html" class="twikiLink">UE3 Home</a></b> &gt; <b><a href="AnimatorHome.html" class="twikiLink">Animator</a></b> &gt; FBX Morph Target Pipeline
</div>
<hr size="1" noshade="noshade">
<h1><a name="FBX Morph Target Pipeline"></a> FBX Morph Target Pipeline </h1>
<hr size="1" noshade="noshade">
<p />
<div class="twikiToc"> <ul>
<li> <a href="FBXMorphTargetPipeline.html#FBX Morph Target Pipeline"> FBX Morph Target Pipeline</a> <ul>
<li> <a href="FBXMorphTargetPipeline.html#Overview"> Overview</a>
</li> <li> <a href="FBXMorphTargetPipeline.html#Naming"> Naming</a>
</li> <li> <a href="FBXMorphTargetPipeline.html#Setting Up Morph Targets"> Setting Up Morph Targets</a>
</li> <li> <a href="FBXMorphTargetPipeline.html#Exporting Morph Targets"> Exporting Morph Targets</a>
</li> <li> <a href="FBXMorphTargetPipeline.html#Importing Morph Targets"> Importing Morph Targets</a>
</li></ul>
</li></ul>
</div>
<p />
<h2><a name="Overview"></a> Overview </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
Morph Target support in the FBX import pipeline provides an easy method for getting morph targets for skeletal meshes from 3D applications into Unreal for use in games. The pipeline allows for any number of morph targets for any number of skeletal meshes to be imported within a single file.
<p />
This page is a technical overview of using the FBX content pipeline to import morph targets into UnrealEd. See the <a href="FBXBestPractices.html" class="twikiLink">FBX Best Practices</a> page for more information, tips, and tricks on working with the FBX content pipeline in a development environment.
<p />
<img src="rsrc/TWiki/TWikiDocGraphics/warning.gif" alt="ALERT!" title="ALERT!" width="16" height="16" border="0" /> <strong><font color="#ff0000">IMPORTANT:</font></strong> As of September 2011 the UE3 FBX import pipeline uses <strong>FBX 2012</strong>. Using a different version during export may result in incompatibilities.
<p />
<h2><a name="Naming"></a> Naming </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
When importing morph targets into UnrealEd using the FBX format, the individual morph targets will be named according to the names of the blend shapes or morphs in the 3D application.
<p /> <ul>
<li> 3dsMax: The name will be the name of the channel in the Morpher modifier.
</li> <li> Maya: The name will be the name of the blendshape added to the name of the blendshape node, i.e. [BlendShapeNode]_[BlendShape]
</li></ul>
<p />
<h2><a name="Setting Up Morph Targets"></a> Setting Up Morph Targets </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
<strong>3dsMax</strong>
<p />
Setting up morph targets in 3dsMax to be exported to FBX requires the use of the Morpher modifier. The steps below provide a brief explanation of the steps necessary to set up a morph target for export. Refer to the help files of the application for more detailed information.
<p /> <ol>
<li> Start with the base mesh. <br/>   <img src="rsrc/Three/FBXMorphTargetPipeline/max_setup_1.jpg" alt="max_setup_1.jpg" width="744" height="354" />
</li> <li> Duplicate the mesh that will be modified to create the target pose. In this case, it is the head. Create the target pose. For this example, the target pose is the character winking. <br/>   <img src="rsrc/Three/FBXMorphTargetPipeline/max_setup_2.jpg" alt="max_setup_2.jpg" width="744" height="354" />
</li> <li> Add a <strong>Morpher</strong> modifier to the base mesh. It needs to be before the <strong>Skin</strong> modifier in the stack. <br/>   <img src="rsrc/Three/FBXMorphTargetPipeline/max_setup_3.jpg" alt="max_setup_3.jpg" width="161" height="123" />
</li> <li> With the morph channel you want to populate selected, press the <img alt="max_pick_button.jpg" src="rsrc/Three/FBXMorphTargetPipeline/max_pick_button.jpg" /> in the <strong>Morpher</strong> modifier's properties rollout or right-click on the channel and choose <em>Pick Object From Scene</em>. <br/>   <img src="rsrc/Three/FBXMorphTargetPipeline/max_setup_4.jpg" alt="max_setup_4.jpg" width="168" height="667" />
</li> <li> In the viewport, click on the target mesh. <br/>   <img src="rsrc/Three/FBXMorphTargetPipeline/max_setup_5.jpg" alt="max_setup_5.jpg" width="744" height="354" />
</li> <li> The morph channel is now populated and displays the name of the target mesh. This is the name that will be given to the morph target in UnrealEd. You can change it in the <strong>Channel Parameters</strong> section of the <strong>Morpher</strong> modifier's rollout. <br/>   <img src="rsrc/Three/FBXMorphTargetPipeline/max_setup_6.jpg" alt="max_setup_6.jpg" width="162" height="414" />
</li> <li> Adjusting the channel's weight up to 100.0 causes the base mesh to interpolate toward the target pose. <br/>   <img src="rsrc/Three/FBXMorphTargetPipeline/max_setup_7.jpg" alt="max_setup_7.jpg" width="744" height="354" />
</li></ol>
<p />
<strong>Maya</strong>
<p />
Setting up morph targets in Maya to be exported to FBX requires the use of blend shapes. The steps below provide a brief explanation of the steps necessary to set up a morph target for export. Refer to the help files of the application for more detailed information.
<p /> <ol>
<li> Start with the base mesh. <br/>   <img src="rsrc/Three/FBXMorphTargetPipeline/maya_setup_1.jpg" alt="maya_setup_1.jpg" width="769" height="376" />
</li> <li> Duplicate the mesh that will be modified to create the target pose. In this case, it is the head. Create the target pose. For this example, the target pose is the character winking. <br/>   <img src="rsrc/Three/FBXMorphTargetPipeline/maya_setup_2.jpg" alt="maya_setup_2.jpg" width="769" height="376" />
</li> <li> Select the target mesh and then the base mesh in that order. <br/>   <img src="rsrc/Three/FBXMorphTargetPipeline/maya_setup_3.jpg" alt="maya_setup_3.jpg" width="769" height="376" />
</li> <li> In the <strong>Create Deformers</strong> menu of the <strong>Animation</strong> menu set, select <strong>Blend Shape</strong>. The target mesh can be deleted after this step if desired. <br/>   <img src="rsrc/Three/FBXMorphTargetPipeline/maya_setup_4.jpg" alt="maya_setup_4.jpg" width="182" height="310" />
</li> <li> The blend shape node is now visible in the base mesh's properties. These are the names that will be used in UnrealEd. You can change the names of the blendshape node and the blendshape here. <br/>   <img src="rsrc/Three/FBXMorphTargetPipeline/maya_setup_5.jpg" alt="maya_setup_5.jpg" width="414" height="47" />
</li> <li> Adjusting the blendshape's weight up to 1.0 causes the base mesh to interpolate toward the target pose. <br/>   <img src="rsrc/Three/FBXMorphTargetPipeline/maya_setup_6.jpg" alt="maya_setup_6.jpg" width="769" height="376" />
</li></ol>
<p />
<a name="ExportingMorphs"></a>
<h2><a name="Exporting Morph Targets"></a> Exporting Morph Targets </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
<strong>3dsMax</strong>
<p /> <ol>
<li> Select the base mesh(es) and bones to be exported in the viewport. <br/>   <img src="rsrc/Three/FBXMorphTargetPipeline/max_export_1.jpg" alt="max_export_1.jpg" width="744" height="354" />
</li> <li> In the <em>File</em> menu choose <em>Export Selected</em> (or <em>Export All</em> if you want to export everything in the scene regardless of selection). <br/>   <img src="rsrc/Three/FBXMorphTargetPipeline/max_export_2.jpg" alt="max_export_2.jpg" width="424" height="577" />
</li> <li> Choose the location and name for the FBX file to export the morph target to and click the <img alt="max_save_button.jpg" src="rsrc/Three/FBXMorphTargetPipeline/max_save_button.jpg" /> button. <br/>   <img src="rsrc/Three/FBXMorphTargetPipeline/max_export_3.jpg" alt="max_export_3.jpg" width="616" height="452" />
</li> <li> Set the appropriate options in the <strong>FBX Export</strong> dialog. For the purposes of exporting morph targets, you must enable the <strong>Animations</strong> checkbox and all of the <strong>Deformations</strong> options. <br/>   <img src="rsrc/Three/FBXMorphTargetPipeline/max_export_4.jpg" alt="max_export_4.jpg" width="584" height="562" />
</li> <li> Click the <img alt="max_ok_button.jpg" src="rsrc/Three/FBXMorphTargetPipeline/max_ok_button.jpg" /> button to create the FBX file containing the morph target(s).
</li></ol>
<p />
<strong>Maya</strong>
<p /> <ol>
<li> Select the base mesh(es) and joints to be exported in the viewport. <br/>   <img src="rsrc/Three/FBXMorphTargetPipeline/maya_export_1.jpg" alt="maya_export_1.jpg" width="769" height="376" />
</li> <li> In the <em>File</em> menu choose <em>Export Selection</em> (or <em>Export All</em> if you want to export everything in the scene regardless of selection). <br/>   <img src="rsrc/Three/FBXMorphTargetPipeline/maya_export_2.jpg" alt="maya_export_2.jpg" width="184" height="446" />
</li> <li> Choose the location and name for the FBX file to export the morph target to and set the appropriate options in the <strong>FBX Export</strong> dialog. For the purposes of exporting morph targets, you must enable the <strong>Animations</strong> checkbox and all of the <strong>Deformed Models</strong> options. <br/>   <img src="rsrc/Three/FBXMorphTargetPipeline/maya_export_3.jpg" alt="maya_export_3.jpg" width="734" height="556" />
</li> <li> Click the <img alt="maya_export_button.jpg" src="rsrc/Three/FBXMorphTargetPipeline/maya_export_button.jpg" /> button to create the FBX file containing the morph target(s).
</li></ol>
<p />
<a name="ImportingMorphs"></a>
<h2><a name="Importing Morph Targets"></a> Importing Morph Targets </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
The FBX morph target import pipeline allows for importing both a skeletal mesh and morph target all at once, or importing one or the other individually.
<p />
<strong>Skeletal Mesh with Morph Targets</strong>
<p /> <ol>
<li> Click the <img alt="import_button.jpg" src="" /> button in the Content Browser. Navigate to and select the FBX file you want to import in the file browser that opens. <strong>Note:</strong> you may want to select <img alt="import_fbxformat.jpg" src="rsrc/Three/FBXMorphTargetPipeline/import_fbxformat.jpg" /> in the dropdown to filter out unwanted files. <br/>   <img src="rsrc/Three/FBXMorphTargetPipeline/import_file.jpg" alt="import_file.jpg" width="611" height="363" />
</li> <li> Choose the appropriate settings in the <strong>Import</strong> dialog. Make sure that <em>Import Morph Targets</em> is enabled. <strong>Note:</strong> The name of the imported mesh will follow the default <a href="FBXPipeline.html#NamingConventions" class="twikiAnchorLink">Naming Rules</a>. See the <a href="FBXPipeline.html#ImportProperties" class="twikiAnchorLink">FBX Import Dialog</a> section for complete details of all of the settings. <br/>   <img src="rsrc/Three/FBXMorphTargetPipeline/morph_import_settings.jpg" alt="morph_import_settings.jpg" width="484" height="462" />
</li> <li> Click the <img alt="import_ok_button.jpg" src="" /> button to import the mesh and LODs. The resulting mesh, morph target (MorphTargetSet), material(s), and texture(s) will be displayed in the Content Browser if the process was successful. You can see the MorphTargetSet that was created to hold the morph target was named after the root bone of the skeleton by default. <br/>   <img src="rsrc/Three/FBXMorphTargetPipeline/morph_import_result.jpg" alt="morph_import_result.jpg" width="621" height="566" />   <p>By viewing the imported mesh in the AnimSet Editor and selecting the newly created MorphTargetSet in the <strong>Morph</strong> tab, you can adjust the strength of the imported morph target and see that it is working as expected.</p>   <img src="rsrc/Three/FBXMorphTargetPipeline/morph_viewer.jpg" alt="morph_viewer.jpg" width="816" height="458" />
</li></ol>
<p />
<strong>Individual Morph Targets</strong>
<p />
To import a morph target, you first need an MorphTargetSet to import the morph target into. This can be created through the AnimSet Editor's <strong>File</strong> menu if one does not already exist.
<p /> <ol>
<li> Open the MorphTargetSet you wish to import the morph target into by double-clicking it in the Content Browser or by double-clicking the skeletal mesh the MorphTargetSet is associated with and then selecting the MorphTargetSet in the <strong>Morph</strong> tab of the AnimSet Editor. <br/>   <img src="rsrc/Three/FBXMorphTargetPipeline/morph_select.jpg" alt="morph_select.jpg" width="374" height="210" />
</li> <li> In the <em>File</em> menu of the AnimSet Editor, select <em>Import MorphTarget</em> (or one of the other morph targe import options). <br/>   <img src="rsrc/Three/FBXMorphTargetPipeline/morph_menu.jpg" alt="morph_menu.jpg" width="352" height="262" />
</li> <li> Navigate to and select the FBX file containing the morph target in the file browser. <strong>Note:</strong> You may need to set the file format to <img alt="morph_fbx_button.jpg" src="rsrc/Three/FBXMorphTargetPipeline/morph_fbx_button.jpg" /> to see your file. <br/>   <img src="rsrc/Three/FBXMorphTargetPipeline/morph_file.jpg" alt="morph_file.jpg" width="611" height="363" />
</li> <li> A progress dialog displays while the morph target is being imported. Once complete, the new morph target will be dislayed in the <strong>Morph Targets</strong> list of the <strong>Morph</strong> tab. <br/>   <img src="rsrc/Three/FBXMorphTargetPipeline/morph_success.jpg" alt="morph_success.jpg" width="300" height="208" /> <br/>   <p>You can now adjust the strength of the imported morph target sequence and see that it is working as expected.</p>   <img src="rsrc/Three/FBXMorphTargetPipeline/morph_viewer.jpg" alt="morph_viewer.jpg" width="816" height="458" />
</li></ol>
<p />
</noautolink>
<p />
<p />
<p />
<p />
<p />
<p />


<!-- BEGIN UE4 NOTICE -->



<div id="version_message" style="display:none;">

    <div style="position:fixed;top:0px;left:0px;width:100%;height:100%;background:#000;opacity:0.5;">

    </div>

    <div style="position:fixed;top:50%;left:50%;margin:-70px 0px 0px -240px;background:#FFF;border-radius:6px;width:480px;box-shadow:0px 5px 30px -5px rgba(0,0,0,0.9);">

        <div style="font-size:16px;font-weight:bold;background: url(rsrc/Three/warning.png) no-repeat scroll 5px 5px;padding:4px 10px 5px 25px;height:21px;width:440px;">

            Important!

        </div>

        <div style="font-size:11px;padding:5px 10px 10px;width:460px;">

            <p>You are viewing documentation for the <strong>Unreal Development Kit (UDK)</strong>.</p>



            <p>If you are looking for the Unreal Engine 4 documentation, please visit the <a style="color:#000;" href="https://docs.unrealengine.com">Unreal Engine 4 Documentation</a> site.</p>

        </div>

        <div style="height:20px;padding:4px;margin:6px;border-top:1px solid #a0a0a0;">

            <form onsubmit="return closeVersionMessage();">

                <input type="checkbox" id="dismiss" value="dismiss" />

                <label for="dsimiss">Don't show me this again</label>

                <input type="submit" value="Close" style="cursor:pointer;float:right;width:60px;color:#f0f0f0;font-weight:bold;background:#882222;height:24px;padding:2px 3px 3px;text-align:center;border:1px outset #000;" />

            </form>

        </div>

    </div>

</div>



<script type="text/javascript">

    window.onload = function () {

        LoadVersionMessage();

    }



    function LoadVersionMessage()

    {

        var showMessage = "false";
        if(showMessage != "false")

        {

            showVersionMessage();

        }

    }



    function showVersionMessage()

    {

        var message = document.getElementById("version_message");

        if(message)

        {

            message.style.display = "block";

        }

    }



    function closeVersionMessage() {

        var dismiss = document.getElementById("dismiss");

        var message = document.getElementById("version_message");

        if (message) {

            message.style.display = "none";

        }

        if (dismiss.checked) {

            eraseCookie("doc_version_message");

            createCookie("doc_version_message", "false", 365);

            dismiss.checked = false;

        }

        return false;

    }



    function createCookie(name, value, days) {

        if (days) {

            var date = new Date();

            date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));

            var expires = "; expires=" + date.toGMTString();

        }

        else var expires = "";

        document.cookie = name + "=" + value + expires + "; path=/";

    }



    function readCookie(name) {

        var nameEQ = name + "=";

        var ca = document.cookie.split(';');

        for (var i = 0; i < ca.length; i++) {

            var c = ca[i];

            while (c.charAt(0) == ' ') c = c.substring(1, c.length);

            if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);

        }

        return null;

    }



    function eraseCookie(name) {

        createCookie(name, "", -1);

    }

</script>



<!-- END UE4 NOTICE -->



</div></div><div id="footer"><div style="BACKGROUND-COLOR: transparent; margin: 0; padding: 0; width: 100%;"><div>&nbsp;</div><div style="float: left; text-align: left; vertical-align: bottom; width: 50%;"><a href="http://www.videogamevoters.org"><img src="rsrc/vgvn.jpg" border="0" width="234" height="60" alt="Video Game Voters Network" /></a></div><div style="float: right; text-align: right; vertical-align: bottom; width: 50%;">Copyright &copy; 2001-2012 <a href="http://www.epicgames.com" target="_top">Epic Games, Inc.</a><br /><a href="../Main/TermsAndConditions.html" class="twikiLink">Terms and Conditions</a><br /><a href="http://epicgames.com/privacynotice" target="_top">Privacy Notice</a></div></div></div></div>
<p />
</html></body>
