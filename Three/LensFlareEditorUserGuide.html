<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
	"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title> UDK | LensFlareEditorUserGuide    </title>

<style type="text/css" media="all">@import "rsrc/twiki_webs.css";</style>
<style type="text/css" media="all">@import "rsrc/udn_new.css";</style>
<link rel="icon" href="rsrc/Three/WebPreferences/favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="rsrc/Three/WebPreferences/favicon.ico" type="image/x-icon" />


<!-- view.static_udn3.tmpl  -->
<script language="JavaScript" type="text/javascript" src="rsrc/udn.js"></script>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

</head>
<p />
<body id="webbgThree">
<p />

<p />
<div id="webThree"><div id="head">
<!--
<div class="header">
 -->
<div style="background: url(/pub/webbg_udn.jpg); background-repeat: no-repeat; height:140px; width: 100%;" >
<!--
<div style="background: transparent url(/pub/udn_header_bg.jpg); background-repeat: repeat-x; height:140px; width: 100%; margin-left: 991px;">
 -->
<p />
<div id="nav">
<ul class="nav">
<font color=black>|</font>&nbsp;&nbsp;<li class=nav_Three><a href="../Main/WebHome.html" class="twikiLink">Main</a></li><font color=black>|</font><li class=nav_Three><a href="../Two/WebHome.html" class="twikiLink">UnrealEngine2</a></li><font color=black>|</font><li class=nav_Three><a href="WebHome.html" class="twikiLink">UnrealEngine3</a></li><font color=black>|</font><li class=nav_Three><a href="https://docs.unrealengine.com" class="twikiLink">UnrealEngine4</a></li><font color=black>|</font><li class=nav_Three><a href="../Main/BusinessAndLegal.html" class="twikiLink">Business &amp; Legal</a></li><font color=black>|</font>
</ul><br><br><br>
</div>
</div>
</div> <!-- end head -->
<div id="pagedefault">
<div id="maincol">
<div id="tool">
<div id="tooltop">UDN</div>
<div id="tooltext" style="padding: 10px 10px 10px 10px;">
Search public documentation: <br>
<form ACTION="/search/index.php" METHOD="GET" NAME="main" ID="main">
<input TYPE="TEXT" NAME="q" SIZE="15" STYLE="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: xx-small;">
<input TYPE="SUBMIT" VALUE="Search" STYLE="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: xx-small;"><br>
</form>
</div>
<div id="toolband">LensFlareEditorUserGuide  </b></div>
<div id="tooltext">
<a href="LensFlareEditorUserGuideJP.html" class="twikiLink">日本語訳</a><br><a href="LensFlareEditorUserGuideCH.html" class="twikiLink">中国翻译</a><br><a href="LensFlareEditorUserGuideKR.html" class="twikiLink">한국어</a><br>

<!-- Three/LensFlareEditorUserGuide -->
<hr size="1" noshade="noshade" />
Interested in the Unreal Engine? <br>
Visit the <a href="http://www.unrealtechnology.com" target="_top">Unreal Technology</a> site.<br>
<br>
Looking for jobs and company info? <br>
Check out the <a href="http://www.epicgames.com" target="_top">Epic games</a> site.<br>
<br>
Questions about support via UDN? <br>
Contact the <a href="../Main/ContactUDNStaff.html" class="twikiLink">UDN Staff</a> <br>
<br>
</div> <!-- end toolbox content -->
<div id="toolbottom"></div>
</div> <!-- end tool -->
<p />
<noautolink>
<p />
<div style="padding:0px 0px 0px 4px;font:10px Verdana;">
<b><a href="WebHome.html" class="twikiLink">UE3 Home</a></b> &gt; <b><a href="ParticlesAndEffectsHome.html" class="twikiLink">Particle &amp; Effects</a></b> &gt; <b><a href="LensFlaresHome.html" class="twikiLink">Lens Flares</a></b> &gt; Lens Flare Editor User Guide <br/>
<b><a href="WebHome.html" class="twikiLink">UE3 Home</a></b> &gt; <b><a href="FXArtistHome.html" class="twikiLink">FX Artist</a></b> &gt; Lens Flare Editor User Guide
</div>
<hr size="1" noshade="noshade">
<h1><a name="Lens Flare Editor User Guide"></a> Lens Flare Editor User Guide </h1>
<hr size="1" noshade="noshade"> Lens Flare Editor User Guide
<p />
<div class="twikiToc"> <ul>
<li> <a href="LensFlareEditorUserGuide.html#Lens Flare Editor User Guide"> Lens Flare Editor User Guide</a> <ul>
<li> <a href="LensFlareEditorUserGuide.html#Overview"> Overview</a>
</li> <li> <a href="LensFlareEditorUserGuide.html#Creating a Lens Flare"> Creating a Lens Flare</a>
</li> <li> <a href="LensFlareEditorUserGuide.html#Lens Flare Editor Layout"> Lens Flare Editor Layout</a> <ul>
<li> <a href="LensFlareEditorUserGuide.html#Context Menu"> Context Menu</a>
</li></ul>
</li> <li> <a href="LensFlareEditorUserGuide.html#Working with Lens Flares"> Working with Lens Flares</a> <ul>
<li> <a href="LensFlareEditorUserGuide.html#Standard Lens Flares"> Standard Lens Flares</a>
</li> <li> <a href="LensFlareEditorUserGuide.html#Directional Lens Flares"> Directional Lens Flares</a>
</li></ul>
</li></ul>
</li></ul>
</div>
<p />
<h2><a name="Overview"></a> Overview </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
The Lens Flare system has been recently introduced. The lens flare editor is a tweaked version of <a href="CascadeUserGuide.html" class="twikiLink">Cascade</a>, where you add sprites as elements that each reference a material.
<p />
<h2><a name="Creating a Lens Flare"></a> Creating a Lens Flare </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
At a basic level, lens flares are made of two elements: A source and a reflection. The source element is the <em>parent</em> and the reflections are
<em>children</em>.
<p />
The source should already be created by default. All that needs to be done is assign it a lens flare material by adding that material to the
<code>LFMaterials</code> array under the SourceElement dropdown menu. Note that the source will always draw in the world depth priority group.
<p />
For something as simple as the sun by itself, you could stop here; but if you want additional elements, right-click in the upper right view of the lens flare editor and select 'Add Element &lt;Before/After&gt;' to add reflection elements.
<p />
When you add reflections, they will all be stacked in the same space by default, which will give you no parallax as your view of the lens flare changes. To separate the reflections to give the effect depth, you want to increase the <code>RayDistance</code> value of the reflection. This value is in the property rollout of the reflection element, along with all the other values.
<p />
Just like the <code>Source</code> element, there is a <code>LFMaterials</code> slot to plug a material for the reflection into. Here you can scale, rotate, and recolor the material of the reflections or the source right within the editor. These would be the <code>AxisScaling</code>, <code>Rotation</code>, and <code>Color</code> properties respectively.
<p />
It's best to test the lens flare in the actual location where it will be used in-game so that you can get a better feel for what values should be used when tweaking properties such as the reflection <code>raydistance</code>.
<p />
<img alt="SimpleLensFlare.jpg" src="rsrc/Three/LensFlareEditorUserGuide/SimpleLensFlare.jpg" />
<p />
<h2><a name="Lens Flare Editor Layout"></a> Lens Flare Editor Layout </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
<img alt="lensflareeditor.jpg" src="rsrc/Three/LensFlareEditorUserGuide/lensflareeditor.jpg" />
<p />
<h3><a name="Context Menu"></a> Context Menu </h3>
<p />
Right-clicking in the editor opens up a context menu:
<p />
<p />
<h2><a name="Working with Lens Flares"></a> Working with Lens Flares </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
Lens flares are placed in the level as Actors and show up as sprites like emitters, until you hit the <em>realtime</em> button. Simply locate and select the lens flare that you created in a given package, and then right-click in the level and you can add it like any other Actor.
<p />
If you make changes to a lens flare, make sure you hit the orange "update in editor" button in the upper left corner so that you see your changes in the viewport.
<p />
The most important thing to know is that the <strong>Reflections</strong> array lists the various elements, and the <strong>RayDistance</strong> field determines the amount of parallax that each element receives as the camera pans past the source. With this you can make anything from subtle flares to the all-too-common student-graphics-artists-photoshop-style-35mm-lens-flares.
<p />
Almost all properties of Lens Flares utilize distributions to map values based on the position of the element from the source. A 0.0 indicates the element is right on top of the source, 1.0 is on the opposite edge of the screen from the source horizontally or vertically, and 1.4 is on the opposite edge of the screen diagonally. If bNormalizeRadialDistance is enabled, 1.0 will be the max value around the edge of the screen.
<p />
(Information on distributions can be found here: <a href="Distributions.html" target="_top">Distributions</a>)
<p />
At the bottom of the Properties for a given LF element you will see parameters which are prepended with "Distmap_"
<p />
The following three parameters:
<p />
<table cellspacing="1" cellpadding="1" class="twikiTable" border="0"><tr><td bgcolor="#eaeaea" class="twikiFirstCol"> <em>DistMap_Scale</em> </td></tr>
<tr><td bgcolor="#ffffff" class="twikiFirstCol"> <em>DistMap_Color</em> </td></tr>
<tr><td bgcolor="#eaeaea" class="twikiFirstCol"> <em>DistMap_Alpha</em> </td></tr>
</table>
<p />
All map to values which change depending on their distance from the Lens Flare source. The distance is calculated based on the camera to source view distance and is used as the lookup into their distributions.
<p />
This can be used to change the color, shape, or alpha of a Lens Flare element as it varies in distance from the Lens Flare source. Keep in mind that the Color and Alpha parameters are just Vertex Color parameters being passed back into the Material that's assigned to your lens flare, so anything you can do with Vertex Color in a material can be used here to create some interesting effects.
<p />
<h3><a name="Standard Lens Flares"></a> Standard Lens Flares </h3>
<p />
Lens Flares use special parameters passed back in from the material editor in order to performm custom functions related directly to Lens Flares. Here is a breakdown of the material nodes and their uses:
<p />
<strong>LensFlareRadialDist</strong>
<p />
This node is similar to a dot product, it gets brighter as the camera directly faces the lens flare and darker as the lens flare approaches the edge of the screen (0-1). Modify output as needed. This allows your lens flare elements to fall off or change value as the reach the edges of the screen.
<p />
<strong>LensFlareOcclusion</strong>
<p />
Returns a value that approximates how occluded the lens flare is. This calculation is based off of the bounding box of the Lens Flare (right click in the main window of the Lens Flare editor and choose 'Select Lens Flare' to select the base properties of the flare to access the bounding box size settings) and scales properly based on distance, so that your values make sense from all distances. A larger bounding box means that more of the flare must be occluded. This result interacts with the Lens Flare parameter called ScreenPercentageMap. The ScreenPercentageMap is a curve which maps the falloff as it related to the occlusion amount. This allows you to make a light source that stays bright when only a small portion is occluded or one that dims greatly if even a small portion is occluded. Generally you want this to be a fairly linear ramp so the flare gets dim gradually based on occlusion.
<p />
<strong>Vertex Color</strong>
<p />
Similar to our other particles, Vertex Color is passed into each lens flare element from the material editor. This allows you to change your color and alpha values directly in the LF editor using the Color and Alpha parameters set in each source and element in the lens flare actor.
<p />
<strong>Radius</strong>
The Radius field applies to any lens flare and sets a radius around it, outside of which the flare is not visible. (This is similar to point and spot lights.)
<p />
<h3><a name="Directional Lens Flares"></a> Directional Lens Flares </h3>
<p />
If you have a lens flare that uses a cone (like a flashlight corona or car headlight), then  the flare is considered to be <em>directional</em>.
<p />
To set a cone, right click in the main LF editor window and choose "Select Lens Flare". This selects the base properties of the Lens Flare actor and allows you to set a Min and Max falloff cone (like the light settings in UE3) as well as a radius which controls distance. You will then see the radius indicated in the editor if you have your LF placed in the world and it is selected.
<p />
<strong>LensFlareIntensity</strong>
<p />
For Directional Lens Flares, multiplying this parameter in allows the flare to fall off based on the view angle from the cone. This causes a nice smooth dropoff in intensity as the flare starts to point away from the camera.
<p />
These two function identically to the way a spot light works w.r.t. settings: <dl>
<dt> <strong>OuterCone</strong> </dt><dd> the outer cone of a directional lens flare.
</dd> <dt> <strong>InnerCone</strong> </dt><dd> the inner cone of a direction lens flare.
</dd></dl>
<p />
<strong>ConeFudgeFactor</strong>
<p />
This is used to 'cheat' the cone size by shrinking the calculated angle w.r.t. the cone to prevent it popping out when you are still within the cone.
<p />
</noautolink>
<p />
<p />
<p />
<p />
<p />
<p />


<!-- BEGIN UE4 NOTICE -->



<div id="version_message" style="display:none;">

    <div style="position:fixed;top:0px;left:0px;width:100%;height:100%;background:#000;opacity:0.5;">

    </div>

    <div style="position:fixed;top:50%;left:50%;margin:-70px 0px 0px -240px;background:#FFF;border-radius:6px;width:480px;box-shadow:0px 5px 30px -5px rgba(0,0,0,0.9);">

        <div style="font-size:16px;font-weight:bold;background: url(rsrc/Three/warning.png) no-repeat scroll 5px 5px;padding:4px 10px 5px 25px;height:21px;width:440px;">

            Important!

        </div>

        <div style="font-size:11px;padding:5px 10px 10px;width:460px;">

            <p>You are viewing documentation for the <strong>Unreal Development Kit (UDK)</strong>.</p>



            <p>If you are looking for the Unreal Engine 4 documentation, please visit the <a style="color:#000;" href="https://docs.unrealengine.com">Unreal Engine 4 Documentation</a> site.</p>

        </div>

        <div style="height:20px;padding:4px;margin:6px;border-top:1px solid #a0a0a0;">

            <form onsubmit="return closeVersionMessage();">

                <input type="checkbox" id="dismiss" value="dismiss" />

                <label for="dsimiss">Don't show me this again</label>

                <input type="submit" value="Close" style="cursor:pointer;float:right;width:60px;color:#f0f0f0;font-weight:bold;background:#882222;height:24px;padding:2px 3px 3px;text-align:center;border:1px outset #000;" />

            </form>

        </div>

    </div>

</div>



<script type="text/javascript">

    window.onload = function () {

        LoadVersionMessage();

    }



    function LoadVersionMessage()

    {

        var showMessage = "false";
        if(showMessage != "false")

        {

            showVersionMessage();

        }

    }



    function showVersionMessage()

    {

        var message = document.getElementById("version_message");

        if(message)

        {

            message.style.display = "block";

        }

    }



    function closeVersionMessage() {

        var dismiss = document.getElementById("dismiss");

        var message = document.getElementById("version_message");

        if (message) {

            message.style.display = "none";

        }

        if (dismiss.checked) {

            eraseCookie("doc_version_message");

            createCookie("doc_version_message", "false", 365);

            dismiss.checked = false;

        }

        return false;

    }



    function createCookie(name, value, days) {

        if (days) {

            var date = new Date();

            date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));

            var expires = "; expires=" + date.toGMTString();

        }

        else var expires = "";

        document.cookie = name + "=" + value + expires + "; path=/";

    }



    function readCookie(name) {

        var nameEQ = name + "=";

        var ca = document.cookie.split(';');

        for (var i = 0; i < ca.length; i++) {

            var c = ca[i];

            while (c.charAt(0) == ' ') c = c.substring(1, c.length);

            if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);

        }

        return null;

    }



    function eraseCookie(name) {

        createCookie(name, "", -1);

    }

</script>



<!-- END UE4 NOTICE -->



</div></div><div id="footer"><div style="BACKGROUND-COLOR: transparent; margin: 0; padding: 0; width: 100%;"><div>&nbsp;</div><div style="float: left; text-align: left; vertical-align: bottom; width: 50%;"><a href="http://www.videogamevoters.org"><img src="rsrc/vgvn.jpg" border="0" width="234" height="60" alt="Video Game Voters Network" /></a></div><div style="float: right; text-align: right; vertical-align: bottom; width: 50%;">Copyright &copy; 2001-2012 <a href="http://www.epicgames.com" target="_top">Epic Games, Inc.</a><br /><a href="../Main/TermsAndConditions.html" class="twikiLink">Terms and Conditions</a><br /><a href="http://epicgames.com/privacynotice" target="_top">Privacy Notice</a></div></div></div></div>
<p />
</html></body>
