<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
	"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title> UDK | MineCookedPackages    </title>

<style type="text/css" media="all">@import "rsrc/twiki_webs.css";</style>
<style type="text/css" media="all">@import "rsrc/udn_new.css";</style>
<link rel="icon" href="rsrc/Three/WebPreferences/favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="rsrc/Three/WebPreferences/favicon.ico" type="image/x-icon" />


<!-- view.static_udn3.tmpl  -->
<script language="JavaScript" type="text/javascript" src="rsrc/udn.js"></script>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

</head>
<p />
<body id="webbgThree">
<p />

<p />
<div id="webThree"><div id="head">
<!--
<div class="header">
 -->
<div style="background: url(/pub/webbg_udn.jpg); background-repeat: no-repeat; height:140px; width: 100%;" >
<!--
<div style="background: transparent url(/pub/udn_header_bg.jpg); background-repeat: repeat-x; height:140px; width: 100%; margin-left: 991px;">
 -->
<p />
<div id="nav">
<ul class="nav">
<font color=black>|</font>&nbsp;&nbsp;<li class=nav_Three><a href="../Main/WebHome.html" class="twikiLink">Main</a></li><font color=black>|</font><li class=nav_Three><a href="../Two/WebHome.html" class="twikiLink">UnrealEngine2</a></li><font color=black>|</font><li class=nav_Three><a href="WebHome.html" class="twikiLink">UnrealEngine3</a></li><font color=black>|</font><li class=nav_Three><a href="https://docs.unrealengine.com" class="twikiLink">UnrealEngine4</a></li><font color=black>|</font><li class=nav_Three><a href="../Main/BusinessAndLegal.html" class="twikiLink">Business &amp; Legal</a></li><font color=black>|</font>
</ul><br><br><br>
</div>
</div>
</div> <!-- end head -->
<div id="pagedefault">
<div id="maincol">
<div id="tool">
<div id="tooltop">UDN</div>
<div id="tooltext" style="padding: 10px 10px 10px 10px;">
Search public documentation: <br>
<form ACTION="/search/index.php" METHOD="GET" NAME="main" ID="main">
<input TYPE="TEXT" NAME="q" SIZE="15" STYLE="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: xx-small;">
<input TYPE="SUBMIT" VALUE="Search" STYLE="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: xx-small;"><br>
</form>
</div>
<div id="toolband">MineCookedPackages  </b></div>
<div id="tooltext">
<a href="MineCookedPackagesJP.html" class="twikiLink">日本語訳</a><br><a href="MineCookedPackagesCH.html" class="twikiLink">中国翻译</a><br><a href="MineCookedPackagesKR.html" class="twikiLink">한국어</a><br>

<!-- Three/MineCookedPackages -->
<hr size="1" noshade="noshade" />
Interested in the Unreal Engine? <br>
Visit the <a href="http://www.unrealtechnology.com" target="_top">Unreal Technology</a> site.<br>
<br>
Looking for jobs and company info? <br>
Check out the <a href="http://www.epicgames.com" target="_top">Epic games</a> site.<br>
<br>
Questions about support via UDN? <br>
Contact the <a href="../Main/ContactUDNStaff.html" class="twikiLink">UDN Staff</a> <br>
<br>
</div> <!-- end toolbox content -->
<div id="toolbottom"></div>
</div> <!-- end tool -->
<p />
<noautolink>
<p />
<div style="padding:0px 0px 0px 4px;font:10px Verdana;">
<b><a href="WebHome.html" class="twikiLink">UE3 Home</a></b> &gt; <b><a href="CommandletHome.html" class="twikiLink">Commandlets</a></b> &gt; MineCookedPackages commandlet
</div>
<hr size="1" noshade="noshade">
<h1><a name="MineCookedPackages commandlet"></a> MineCookedPackages commandlet </h1>
<hr size="1" noshade="noshade">
<p />
<div class="twikiToc"> <ul>
<li> <a href="MineCookedPackages.html#MineCookedPackages commandlet"> MineCookedPackages commandlet</a> <ul>
<li> <a href="MineCookedPackages.html#Overview"> Overview</a>
</li> <li> <a href="MineCookedPackages.html#Getting it to work"> Getting it to work</a> <ul>
<li> <a href="MineCookedPackages.html#Setup"> Setup</a>
</li></ul>
</li> <li> <a href="MineCookedPackages.html#Operation"> Operation</a> <ul>
<li> <a href="MineCookedPackages.html#Syntax"> Syntax</a>
</li> <li> <a href="MineCookedPackages.html#Queries"> Queries</a>
</li></ul>
</li></ul>
</li></ul>
</div>
<p />
<style type="text/css" media="all">@import "rsrc/UDNCSS_test.css";</style>
<p />
<h2><a name="Overview"></a> Overview </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
The purpose of the minecookedpackages commandlet is to populate a database with information for cooked packages and their exports. This in turn allows a wide range of queries to be executed without modifying code or keeping old data around.
<p />
<h2><a name="Getting it to work"></a> Getting it to work </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
<h3><a name="Setup"></a> Setup </h3>
<p /> <ul>
<li> Install Microsoft SQL Server or Microsoft SQL Server Express <ul>
<li> SQL Server Express comes with VS.NET 2005/ 2008
</li></ul>
</li> <li> Install Microsoft SQL Server Management Studio Express (SMS) <ul>
<li> I believe you can do most what is needed from within Visual Studio though the Express version of SQL Server Management Studio is free so you might as well install it and use it.
</li></ul>
</li> <li> Create the database <ul>
<li> Connect to your database via SMS
</li> <li> Right click on Databases and click new
</li> <li> Enter a name like CookedContent-1
</li></ul>
</li> <li> Create the tables <ul>
<li> Right click on CookedContent-1 and select "new query" <ul>
<li> The plan going forward is to have data from each unique run be tagged with a unique ID to allow trending and sharing the DB across runs, but for now a new database needs to be created for each run.
</li></ul>
</li> <li> Paste the contents of <a href="rsrc/Three/MineCookedPackages/MineCookedPackages.sql" target="_top">MineCookedPackages.sql</a> into the just opened text window and press the execute button. This will create all the relevant tables in your database
</li></ul>
</li></ul>
<p />
<h2><a name="Operation"></a> Operation </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
To run this commandlet, from a command prompt window, navigate to the <em>UnrealEngine3\Binaries</em> directory.
<p />
<h3><a name="Syntax"></a> Syntax </h3>
<p />
The syntax is as follows:
<p />
<div class="codesnippet">
<pre>
&#91;Gamename].exe minecookedpackages ..\MyGame\CookedXenon\&#42;.xxx -DATABASE&#61;machinename\sqlexpress -CATALOG&#61;CookedContent-1
</pre>
</div>
<p />
At the moment it will skip fully compressed packages. In our usage case those are only startup packages.
<p />
<h3><a name="Queries"></a> Queries </h3>
<p />
The below query will group exports by class and list their accumulative and average size in combination with the number of instances found, sorted by accumulative size.
<p />
<pre>
SELECT ClassName, SUM(Size) / 1024 / 1024 AS SumSize, AVG(Size) / 1024 AS AvgSize, COUNT(ClassName) AS Count
FROM Exports
JOIN Objects ON Exports.ObjectID &#61; Objects.ObjectID
JOIN Classes ON Objects.ClassID &#61; Classes.ClassID
GROUP BY ClassName
ORDER BY SUM(SIZE) DESC
</pre>
<p />
The below query will group exports by unique object and list the accumulative size and count sorted by accumulative size.
<p />
<pre>
SELECT ClassName, ObjectName, SUM(Size) / 1024 AS Size, COUNT(ObjectName) AS Count
FROM Exports
JOIN Objects ON Exports.ObjectID &#61; Objects.ObjectID
JOIN Classes ON Objects.ClassID &#61; Classes.ClassID
GROUP BY ObjectName, ClassName
ORDER BY SUM(Size) DESC
</pre>
<p />
</noautolink>
<p />
<p />
<p />
<p />
<p />
<p />


<!-- BEGIN UE4 NOTICE -->



<div id="version_message" style="display:none;">

    <div style="position:fixed;top:0px;left:0px;width:100%;height:100%;background:#000;opacity:0.5;">

    </div>

    <div style="position:fixed;top:50%;left:50%;margin:-70px 0px 0px -240px;background:#FFF;border-radius:6px;width:480px;box-shadow:0px 5px 30px -5px rgba(0,0,0,0.9);">

        <div style="font-size:16px;font-weight:bold;background: url(rsrc/Three/warning.png) no-repeat scroll 5px 5px;padding:4px 10px 5px 25px;height:21px;width:440px;">

            Important!

        </div>

        <div style="font-size:11px;padding:5px 10px 10px;width:460px;">

            <p>You are viewing documentation for the <strong>Unreal Development Kit (UDK)</strong>.</p>



            <p>If you are looking for the Unreal Engine 4 documentation, please visit the <a style="color:#000;" href="https://docs.unrealengine.com">Unreal Engine 4 Documentation</a> site.</p>

        </div>

        <div style="height:20px;padding:4px;margin:6px;border-top:1px solid #a0a0a0;">

            <form onsubmit="return closeVersionMessage();">

                <input type="checkbox" id="dismiss" value="dismiss" />

                <label for="dsimiss">Don't show me this again</label>

                <input type="submit" value="Close" style="cursor:pointer;float:right;width:60px;color:#f0f0f0;font-weight:bold;background:#882222;height:24px;padding:2px 3px 3px;text-align:center;border:1px outset #000;" />

            </form>

        </div>

    </div>

</div>



<script type="text/javascript">

    window.onload = function () {

        LoadVersionMessage();

    }



    function LoadVersionMessage()

    {

        var showMessage = "false";
        if(showMessage != "false")

        {

            showVersionMessage();

        }

    }



    function showVersionMessage()

    {

        var message = document.getElementById("version_message");

        if(message)

        {

            message.style.display = "block";

        }

    }



    function closeVersionMessage() {

        var dismiss = document.getElementById("dismiss");

        var message = document.getElementById("version_message");

        if (message) {

            message.style.display = "none";

        }

        if (dismiss.checked) {

            eraseCookie("doc_version_message");

            createCookie("doc_version_message", "false", 365);

            dismiss.checked = false;

        }

        return false;

    }



    function createCookie(name, value, days) {

        if (days) {

            var date = new Date();

            date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));

            var expires = "; expires=" + date.toGMTString();

        }

        else var expires = "";

        document.cookie = name + "=" + value + expires + "; path=/";

    }



    function readCookie(name) {

        var nameEQ = name + "=";

        var ca = document.cookie.split(';');

        for (var i = 0; i < ca.length; i++) {

            var c = ca[i];

            while (c.charAt(0) == ' ') c = c.substring(1, c.length);

            if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);

        }

        return null;

    }



    function eraseCookie(name) {

        createCookie(name, "", -1);

    }

</script>



<!-- END UE4 NOTICE -->



</div></div><div id="footer"><div style="BACKGROUND-COLOR: transparent; margin: 0; padding: 0; width: 100%;"><div>&nbsp;</div><div style="float: left; text-align: left; vertical-align: bottom; width: 50%;"><a href="http://www.videogamevoters.org"><img src="rsrc/vgvn.jpg" border="0" width="234" height="60" alt="Video Game Voters Network" /></a></div><div style="float: right; text-align: right; vertical-align: bottom; width: 50%;">Copyright &copy; 2001-2012 <a href="http://www.epicgames.com" target="_top">Epic Games, Inc.</a><br /><a href="../Main/TermsAndConditions.html" class="twikiLink">Terms and Conditions</a><br /><a href="http://epicgames.com/privacynotice" target="_top">Privacy Notice</a></div></div></div></div>
<p />
</html></body>
