<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
	"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title> UDK | InGameAds    </title>

<style type="text/css" media="all">@import "rsrc/twiki_webs.css";</style>
<style type="text/css" media="all">@import "rsrc/udn_new.css";</style>
<link rel="icon" href="rsrc/Three/WebPreferences/favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="rsrc/Three/WebPreferences/favicon.ico" type="image/x-icon" />


<!-- view.static_udn3.tmpl  -->
<script language="JavaScript" type="text/javascript" src="rsrc/udn.js"></script>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

</head>
<p />
<body id="webbgThree">
<p />

<p />
<div id="webThree"><div id="head">
<!--
<div class="header">
 -->
<div style="background: url(/pub/webbg_udn.jpg); background-repeat: no-repeat; height:140px; width: 100%;" >
<!--
<div style="background: transparent url(/pub/udn_header_bg.jpg); background-repeat: repeat-x; height:140px; width: 100%; margin-left: 991px;">
 -->
<p />
<div id="nav">
<ul class="nav">
<font color=black>|</font>&nbsp;&nbsp;<li class=nav_Three><a href="../Main/WebHome.html" class="twikiLink">Main</a></li><font color=black>|</font><li class=nav_Three><a href="../Two/WebHome.html" class="twikiLink">UnrealEngine2</a></li><font color=black>|</font><li class=nav_Three><a href="WebHome.html" class="twikiLink">UnrealEngine3</a></li><font color=black>|</font><li class=nav_Three><a href="https://docs.unrealengine.com" class="twikiLink">UnrealEngine4</a></li><font color=black>|</font><li class=nav_Three><a href="../Main/BusinessAndLegal.html" class="twikiLink">Business &amp; Legal</a></li><font color=black>|</font>
</ul><br><br><br>
</div>
</div>
</div> <!-- end head -->
<div id="pagedefault">
<div id="maincol">
<div id="tool">
<div id="tooltop">UDN</div>
<div id="tooltext" style="padding: 10px 10px 10px 10px;">
Search public documentation: <br>
<form ACTION="/search/index.php" METHOD="GET" NAME="main" ID="main">
<input TYPE="TEXT" NAME="q" SIZE="15" STYLE="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: xx-small;">
<input TYPE="SUBMIT" VALUE="Search" STYLE="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: xx-small;"><br>
</form>
</div>
<div id="toolband">InGameAds  </b></div>
<div id="tooltext">
<a href="InGameAdsJP.html" class="twikiLink">日本語訳</a><br><a href="InGameAdsCH.html" class="twikiLink">中国翻译</a><br><a href="InGameAdsKR.html" class="twikiLink">한국어</a><br>

<!-- Three/InGameAds -->
<hr size="1" noshade="noshade" />
Interested in the Unreal Engine? <br>
Visit the <a href="http://www.unrealtechnology.com" target="_top">Unreal Technology</a> site.<br>
<br>
Looking for jobs and company info? <br>
Check out the <a href="http://www.epicgames.com" target="_top">Epic games</a> site.<br>
<br>
Questions about support via UDN? <br>
Contact the <a href="../Main/ContactUDNStaff.html" class="twikiLink">UDN Staff</a> <br>
<br>
</div> <!-- end toolbox content -->
<div id="toolbottom"></div>
</div> <!-- end tool -->
<p />
<noautolink>
<p />
<div style="padding:0px 0px 0px 4px;font:10px Verdana;">
<b><a href="WebHome.html" class="twikiLink">UE3 Home</a></b> &gt; <b><a href="PlatformInterfaceFramework.html" class="twikiLink">PlatformInterface Framework</a></b> &gt; In-Game Ads <br/>
<b><a href="WebHome.html" class="twikiLink">UE3 Home</a></b> &gt; <b><a href="MobileHome.html" class="twikiLink">Mobile Home</a></b> &gt; In-Game Ads
</div>
<hr size="1" noshade="noshade">
<h1><a name="In-Game Ads"></a> In-Game Ads </h1>
<p />
<div class="twikiToc"> <ul>
<li> <a href="InGameAds.html#In-Game Ads"> In-Game Ads</a> <ul>
<li> <a href="InGameAds.html#Overview"> Overview</a>
</li> <li> <a href="InGameAds.html#Ad Manager"> Ad Manager</a>
</li> <li> <a href="InGameAds.html#Implementation"> Implementation</a>
</li></ul>
</li></ul>
</div>
<p />
<style type="text/css" media="all">@import "rsrc/UDNCSS_test.css";</style>
<p />
<h2><a name="Overview"></a> Overview </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
In-game ads make it possible to release games for free or much cheaper than would otherwise be possible while still maintaining the potential to earn revenue. This makes it much easier to entice people to download your game and increase your user base. In-game ads using Apple's iAd advertising network can be added to games made for the iOS platform. The process of adding in-game ads is incredibly simple and only requires a few lines of code.
<p />
<img src="rsrc/TWiki/TWikiDocGraphics/warning.gif" alt="ALERT!" title="ALERT!" width="16" height="16" border="0" /> <strong><font color="#ff0000">Important:</font></strong> Revenue earned from in-game ads counts as revenue earned from using UDK even if your game is free. If you use in-game ads, you must purchase a license for UDK before distributing your game.
<p />
<strong>Note:</strong> Ads will only be displayed when the game is run on an iOS device. The <a href="MobilePreviewer.html" class="twikiLink">Mobile Previewer</a> will not display ads.
<p />
<h2><a name="Ad Manager"></a> Ad Manager </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
A special class, <code>InGameAdManager</code>, is responsible for managing and displaying the in-game advertisements via the iAd network. This class handles all functionality associated with obtaining, dsiplaying, and interacting with in-game ads.
<p />
<strong>Properties</strong>
<p /> <ul>
<li> <strong>bShouldPauseWhileAdOpen</strong> - If TRUE, the game will pause when the user clicks on the ad, which could take over the screen.
</li></ul>
<p />
<strong>Functions</strong>
<p /> <ul>
<li> <strong>Init</strong> - Event called by the engine to handle initialization of the ad system.
</li> <li> <strong>ShowBanner [bShowBottomOfScreen]</strong> - Makes in-game advertisements visible in a banner. <ul>
<li> <strong>bShowBottomOfScreen</strong> - If TRUE, the banner will be displayed across the bottom of the screen. Otherwise, the banner is displayed across the top of the screen.
</li></ul>
</li> <li> <strong>HideBanner</strong> - Hides any visible in-game ad banners. If the ad is currently open (i.e., the user is interacting with the ad), the ad will be forcibly closed (see ForceCloseAd)
</li> <li> <strong>ForceCloseAd</strong> - Forces an opened (clicked on) advertisement to close and return to the banner state. This may lead to loss of revenue, so don't do it unnecessarily.
</li> <li> <strong>SetPauseWhileAdOpen [bShouldPause]</strong> - Sets whether the game should pause when an ad is clicked. <ul>
<li> <strong>bShouldPause</strong> - If TRUE, the game will pause when the ad is clicked. Otherwise, the game will continue to run.
</li></ul>
</li></ul>
<p />
<strong>Delegates</strong>
<p />
The <code><b>EAdManagerDelegate</b></code> enum defines the IDs for the types of delegates that can receive callbacks. Delegates can be assigned to each of these using the <a href="PlatformInterfaceFramework.html#DelegateSystem" class="twikiAnchorLink">Platform Interface Delegates</a> system.
<p /> <ul>
<li> <strong>AMD_ClickedBanner</strong> - Delegates assigned to this ID are executed when the user clicks on an banner ad. <ul>
<li> <strong>bSuccessful</strong> - TRUE.
</li> <li> <strong>Data</strong> - Contains no data.
</li></ul>
</li> <li> <strong>AMD_UserClosedAd</strong> - Delegates assigned to this ID are executed when the user closes an ad (after clicking on banner). Base class already handles un-pausing, so a delegate is only needed if you need extra handling. <ul>
<li> <strong>bSuccessful</strong> - TRUE.
</li> <li> <strong>Data</strong> - Contains no data.
</li></ul>
</li></ul>
<p />
<h2><a name="Implementation"></a> Implementation </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
Making use of in-game ads on iOS platforms is extremely simple. The engine is already set up to handle them. It is just a matter of setting any delegates you wish to have executed and then telling the manager to show the banner. There is also some cleanup that should be performed when switching levels or the player ends the game.
<p />
In the <code>PostBeginPlay()</code> function of your <code>PlayerController</code>, the relevant delegates can be assigned and the banner can be shown. Of course, this is only if you want the banner displayed from the beginning of the game or level. You can choose to show or hide the ads anytime you desire by calling the relevant function on the <code>InGameAdManager</code>.
<p />
The <code>PlatformInterfaceBase</code> has a static function that will return a reference to the current <code>InGameAdManager</code>. You can use this in your <code>PlayerController</code> to get a reference to it and call its functions. Keep in mind this function will return <code>None</code> unless the game is being run on a platform that supports in-game ads.
<p />
<strong>Setup</strong>
<p />
Here, we get the reference to the <code>InGameAdManager</code> from the <code>PlatformInterfaceBase</code> and then add our delegates and show the ad banner. The delegates we have added are just examples to show that they are indeed being executed at the approproate times.
<p />
<div class="codetitlebar">
UDNPlayerController.uc
</div>
<div class="codesnippet">
<pre>
var InGameAdManager AdManager;

...

simulated function PostBeginPlay()
{
   Super.PostBeginPlay();

   AdManager &#61; class&#39;PlatformInterfaceBase&#39;.static.GetInGameAdManager();
   if (AdManager !&#61; none)
   {
      AdManager.AddDelegate(AMD&#95;ClickedBanner, OnUserClickedAdvertisement);
      AdManager.AddDelegate(AMD&#95;UserClosedAd, OnUserClosedAdvertisement);
      AdManager.ShowBanner(true);
   }
}

/&#42;&#42;
 &#42; Called on all player controllers when an in-game advertisement has been clicked
 &#42; on by the user. Game will probably want to pause, etc, at this point
 &#42;/
function OnUserClickedAdvertisement(const out PlatformInterfaceDelegateResult Result)
{
   `log(&#34;MobilePC::OnUserClickedBanner&#34;);
}

/&#42;&#42;
 &#42; Called on all player controllers when an in-game advertisement has been closed
 &#42; down (usually when user clicks Done or similar). Game will want to unpause, etc here.
 &#42;/
event OnUserClosedAdvertisement(const out PlatformInterfaceDelegateResult Result)
{
   `log(&#34;MobilePC::OnUserClosedAd&#34;);
}
</pre>
</div>
<p />
<strong>Cleanup</strong>
<p />
Using the <code>Destroyed()</code> event of the <code>PlayerController</code> allows us to do a little cleanup, such as removing any delegates we have previously assigned.
<p />
<div class="codetitlebar">
UDNPlayerController.uc
</div>
<div class="codesnippet">
<pre>
event Destroyed()
{
   super.Destroyed();

   if (AdManager !&#61; none)
   {
      AdManager.ClearDelegate(AMD&#95;ClickedBanner, OnUserClickedAdvertisement);
      AdManager.ClearDelegate(AMD&#95;UserClosedAd, OnUserClosedAdvertisement);
   }
}
</pre>
</div>
<p />
<strong>Result</strong>
<p />
Running the game on an iOS device with the code above in your custom <code>PlayerController</code> should now result in the ad banner being shown along the bottom of the screen.
<p />
<img src="rsrc/Three/InGameAds/test_ad.jpg" alt="test_ad.jpg" width="480" height="320" />
<p />
Tapping on the banner opens the full ad:
<p />
<img src="rsrc/Three/InGameAds/test_ad_full.jpg" alt="test_ad_full.jpg" width="320" height="480" />
<p />
Obviously, you will only get test advertisements at this stage as you can see in the image above. You will need to join the iAd Network to receive real ads. This can be done through Apple's developer site.
<p />
</noautolink>
<p />
<p />
<p />
<p />
<p />
<p />


<!-- BEGIN UE4 NOTICE -->



<div id="version_message" style="display:none;">

    <div style="position:fixed;top:0px;left:0px;width:100%;height:100%;background:#000;opacity:0.5;">

    </div>

    <div style="position:fixed;top:50%;left:50%;margin:-70px 0px 0px -240px;background:#FFF;border-radius:6px;width:480px;box-shadow:0px 5px 30px -5px rgba(0,0,0,0.9);">

        <div style="font-size:16px;font-weight:bold;background: url(rsrc/Three/warning.png) no-repeat scroll 5px 5px;padding:4px 10px 5px 25px;height:21px;width:440px;">

            Important!

        </div>

        <div style="font-size:11px;padding:5px 10px 10px;width:460px;">

            <p>You are viewing documentation for the <strong>Unreal Development Kit (UDK)</strong>.</p>



            <p>If you are looking for the Unreal Engine 4 documentation, please visit the <a style="color:#000;" href="https://docs.unrealengine.com">Unreal Engine 4 Documentation</a> site.</p>

        </div>

        <div style="height:20px;padding:4px;margin:6px;border-top:1px solid #a0a0a0;">

            <form onsubmit="return closeVersionMessage();">

                <input type="checkbox" id="dismiss" value="dismiss" />

                <label for="dsimiss">Don't show me this again</label>

                <input type="submit" value="Close" style="cursor:pointer;float:right;width:60px;color:#f0f0f0;font-weight:bold;background:#882222;height:24px;padding:2px 3px 3px;text-align:center;border:1px outset #000;" />

            </form>

        </div>

    </div>

</div>



<script type="text/javascript">

    window.onload = function () {

        LoadVersionMessage();

    }



    function LoadVersionMessage()

    {

        var showMessage = "false";
        if(showMessage != "false")

        {

            showVersionMessage();

        }

    }



    function showVersionMessage()

    {

        var message = document.getElementById("version_message");

        if(message)

        {

            message.style.display = "block";

        }

    }



    function closeVersionMessage() {

        var dismiss = document.getElementById("dismiss");

        var message = document.getElementById("version_message");

        if (message) {

            message.style.display = "none";

        }

        if (dismiss.checked) {

            eraseCookie("doc_version_message");

            createCookie("doc_version_message", "false", 365);

            dismiss.checked = false;

        }

        return false;

    }



    function createCookie(name, value, days) {

        if (days) {

            var date = new Date();

            date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));

            var expires = "; expires=" + date.toGMTString();

        }

        else var expires = "";

        document.cookie = name + "=" + value + expires + "; path=/";

    }



    function readCookie(name) {

        var nameEQ = name + "=";

        var ca = document.cookie.split(';');

        for (var i = 0; i < ca.length; i++) {

            var c = ca[i];

            while (c.charAt(0) == ' ') c = c.substring(1, c.length);

            if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);

        }

        return null;

    }



    function eraseCookie(name) {

        createCookie(name, "", -1);

    }

</script>



<!-- END UE4 NOTICE -->



</div></div><div id="footer"><div style="BACKGROUND-COLOR: transparent; margin: 0; padding: 0; width: 100%;"><div>&nbsp;</div><div style="float: left; text-align: left; vertical-align: bottom; width: 50%;"><a href="http://www.videogamevoters.org"><img src="rsrc/vgvn.jpg" border="0" width="234" height="60" alt="Video Game Voters Network" /></a></div><div style="float: right; text-align: right; vertical-align: bottom; width: 50%;">Copyright &copy; 2001-2012 <a href="http://www.epicgames.com" target="_top">Epic Games, Inc.</a><br /><a href="../Main/TermsAndConditions.html" class="twikiLink">Terms and Conditions</a><br /><a href="http://epicgames.com/privacynotice" target="_top">Privacy Notice</a></div></div></div></div>
<p />
</html></body>
