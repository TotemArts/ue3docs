<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
	"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title> UDK | TerrainAdvancedTextures    </title>

<style type="text/css" media="all">@import "rsrc/twiki_webs.css";</style>
<style type="text/css" media="all">@import "rsrc/udn_new.css";</style>
<link rel="icon" href="rsrc/Three/WebPreferences/favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="rsrc/Three/WebPreferences/favicon.ico" type="image/x-icon" />


<!-- view.static_udn3.tmpl  -->
<script language="JavaScript" type="text/javascript" src="rsrc/udn.js"></script>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

</head>
<p />
<body id="webbgThree">
<p />

<p />
<div id="webThree"><div id="head">
<!--
<div class="header">
 -->
<div style="background: url(/pub/webbg_udn.jpg); background-repeat: no-repeat; height:140px; width: 100%;" >
<!--
<div style="background: transparent url(/pub/udn_header_bg.jpg); background-repeat: repeat-x; height:140px; width: 100%; margin-left: 991px;">
 -->
<p />
<div id="nav">
<ul class="nav">
<font color=black>|</font>&nbsp;&nbsp;<li class=nav_Three><a href="../Main/WebHome.html" class="twikiLink">Main</a></li><font color=black>|</font><li class=nav_Three><a href="../Two/WebHome.html" class="twikiLink">UnrealEngine2</a></li><font color=black>|</font><li class=nav_Three><a href="WebHome.html" class="twikiLink">UnrealEngine3</a></li><font color=black>|</font><li class=nav_Three><a href="https://docs.unrealengine.com" class="twikiLink">UnrealEngine4</a></li><font color=black>|</font><li class=nav_Three><a href="../Main/BusinessAndLegal.html" class="twikiLink">Business &amp; Legal</a></li><font color=black>|</font>
</ul><br><br><br>
</div>
</div>
</div> <!-- end head -->
<div id="pagedefault">
<div id="maincol">
<div id="tool">
<div id="tooltop">UDN</div>
<div id="tooltext" style="padding: 10px 10px 10px 10px;">
Search public documentation: <br>
<form ACTION="/search/index.php" METHOD="GET" NAME="main" ID="main">
<input TYPE="TEXT" NAME="q" SIZE="15" STYLE="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: xx-small;">
<input TYPE="SUBMIT" VALUE="Search" STYLE="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: xx-small;"><br>
</form>
</div>
<div id="toolband">TerrainAdvancedTextures  </b></div>
<div id="tooltext">
<a href="TerrainAdvancedTexturesJP.html" class="twikiLink">日本語訳</a><br><a href="TerrainAdvancedTexturesCH.html" class="twikiLink">中国翻译</a><br><a href="TerrainAdvancedTexturesKR.html" class="twikiLink">한국어</a><br>

<!-- Three/TerrainAdvancedTextures -->
<hr size="1" noshade="noshade" />
Interested in the Unreal Engine? <br>
Visit the <a href="http://www.unrealtechnology.com" target="_top">Unreal Technology</a> site.<br>
<br>
Looking for jobs and company info? <br>
Check out the <a href="http://www.epicgames.com" target="_top">Epic games</a> site.<br>
<br>
Questions about support via UDN? <br>
Contact the <a href="../Main/ContactUDNStaff.html" class="twikiLink">UDN Staff</a> <br>
<br>
</div> <!-- end toolbox content -->
<div id="toolbottom"></div>
</div> <!-- end tool -->
<p />
<noautolink>
<p />
<div style="padding:0px 0px 0px 4px;font:10px Verdana;">
<b><a href="WebHome.html" class="twikiLink">UE3 Home</a></b> &gt; <b><a href="TerrainHome.html" class="twikiLink">Terrain System</a></b> &gt; Terrain Advanced Textures
</div>
<hr size="1" noshade="noshade">
<h1><a name="Terrain Advanced Textures"></a> Terrain Advanced Textures </h1>
<hr size="1" noshade="noshade">
<p />
<div class="twikiToc"> <ul>
<li> <a href="TerrainAdvancedTextures.html#Terrain Advanced Textures"> Terrain Advanced Textures</a> <ul>
<li> <a href="TerrainAdvancedTextures.html#Overview"> Overview</a>
</li> <li> <a href="TerrainAdvancedTextures.html#Terrain Texturing Caveats"> Terrain Texturing Caveats</a>
</li> <li> <a href="TerrainAdvancedTextures.html#Designing Materials for Instancing"> Designing Materials for Instancing</a>
</li> <li> <a href="TerrainAdvancedTextures.html#Material Expression Building-Blocks"> Material Expression Building-Blocks</a>
</li> <li> <a href="TerrainAdvancedTextures.html#Complex Material Design Notes"> Complex Material Design Notes</a>
</li> <li> <a href="TerrainAdvancedTextures.html#Detail Textures: Adding near-distance detail"> Detail Textures: Adding near-distance detail</a>
</li> <li> <a href="TerrainAdvancedTextures.html#NormalMap Textures: Adding bump detail"> NormalMap Textures: Adding bump detail</a>
</li> <li> <a href="TerrainAdvancedTextures.html#Multi-UV Mixing: Reducing tiling through scalar mixing"> Multi-UV Mixing: Reducing tiling through scalar mixing</a>
</li> <li> <a href="TerrainAdvancedTextures.html#Random Tiling Masks: Randomize the texture mapping to reduce tiling"> Random Tiling Masks: Randomize the texture mapping to reduce tiling</a>
</li> <li> <a href="TerrainAdvancedTextures.html#Macro Textures: Blending textures for variety"> Macro Textures: Blending textures for variety</a>
</li> <li> <a href="TerrainAdvancedTextures.html#Super Masks: Increasing terrain detail beyond the vertex level"> Super Masks: Increasing terrain detail beyond the vertex level</a>
</li> <li> <a href="TerrainAdvancedTextures.html#Texture Packing: Implementing large texture tile sets"> Texture Packing: Implementing large texture tile sets</a>
</li> <li> <a href="TerrainAdvancedTextures.html#1:1 Overlays: Tiling multiple high-resolution textures across the terrain"> 1:1 Overlays: Tiling multiple high-resolution textures across the terrain</a>
</li></ul>
</li></ul>
</div>
<p />
<h2><a name="Overview"></a> Overview </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
Terrain texturing is an enormous subject with a wide variety of methods and solutions.  This tutorial will cover a few methods available in Unreal Engine 3 for managing common video game terrain texturing issues, along with methods of improving the quality of terrain texturing and increasing detail.  This tutorial is divided into sections of increasing complexity that show solutions for various texturing issues.
<p />
<strong>NOTE</strong>: This is an advanced tutorial and assumes that you are familiar with the following:
<p /> <ul>
<li> creating and editing digital images using software such as Adobe PhotoShop
</li> <li> creating and editing image color channels (RGB) and alpha channel
</li> <li> what color and grayscale images are and their differences and uses
</li> <li> <a href="ImportingTextureTutorial.html" class="twikiLink">importing Textures</a> and setting <a href="TextureProperties.html" class="twikiLink">Texture properties</a>
</li> <li> <a href="MaterialBasics.html" class="twikiLink">material basics</a>
</li> <li> creating and using <a href="MaterialsTutorial.html" class="twikiLink">Materials</a> and the <a href="MaterialEditorUserGuide.html" class="twikiLink">Material Editor</a>
</li> <li> <a href="TerrainDesign.html" class="twikiLink">terrain design</a> - TerrainMaterials and TerrainLayerSetups
</li> <li> <a href="UsingTerrain.html" class="twikiLink">using terrain</a> and <a href="SettingUpTerrain.html" class="twikiLink">setting up terrain</a>
</li> <li> using the <a href="TerrainEditorUserGuide.html" class="twikiLink">Terrain Edit</a> dialog
</li></ul>
<p />
Please review the appropriate UDN pages if you require further information or if you need to <em>brush up</em> on any of these subjects.
<p />
There are two major considerations when designing the texturing system for terrain: performance and realistic detail.  In most cases there is a tradeoff between these two with current rendering hardware and software, where performance results in low realism, or high visual quality results in a significant performance penalty.
<p />
<img alt="DGTerrainExamples.jpg" src="rsrc/Three/TerrainAdvancedTextures/DGTerrainExamples.jpg" />
<p />
<p />
<h2><a name="Terrain Texturing Caveats"></a> Terrain Texturing Caveats </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
There are a number of technical and artistic issues that plague level designers when attempting to create a realistic visual representation of a geological terrain style.
<p />
<h3><a name="Texture Scale"></a> Texture Scale </h3>
<p />
In most cases, the UV scale for textures applied to terrain are adjusted so that the texture style looks relatively accurate for near-field viewing.  Blades of grass or small rocks should usually be scaled to a similar size of their real-world counterparts.  The issues with this are that tiling can become more apparent as you look further into the distance, and that a specific size texture can only contain a specific amount of detail and variety, usually the smaller the texture resolution, the more noticeable the tiling and also much less detail.
<p />
If the texture UV scale is set small, tiling is often very noticeable.
<p />
If the texture UV scale is set large, tiling is often less noticeable and there appears to be more variety in far detail, but the terrain near to the camera usually looks blurry and the detail scale of objects in the texture such as grass or rocks appear larger than real-world.
<p />
<h3><a name="Texture Tiling"></a> Texture Tiling </h3>
<p />
Since textures created for use on terrain are usually of 512x512, 1024x1024 or 2048x2048 resolution, it is difficult to obtain texture mapping across the surface that contains both a wide variety of detail and is free of visual tiling artifacts.  In most cases the visual differences in the texture, such as changes in hue or brightness across the texture, or the presence of specific detail such as a large rock in the center of the texture, can cause the tiling to become more noticeable as you look further out along the camera view.
<p />
<h3><a name="Fillrate"></a> Fillrate </h3>
<p />
Since terrain is often used for creating large outdoor scenes, it usually covers a substantial amount of the screen area, commonly 50% to 75%.  As the terrain material complexity increases, it can require more processing power to create the texturing used for the texels rendered to the screen.  Video adapters with slower GPUs and lower fillrates will result in slower rendering times and lower performance.
<p />
<h3><a name="The Unreal Engine"></a> The Unreal Engine </h3>
<p />
The terrain system in the Unreal Engine has specific limits on the number of materials that can be applied and the number of shader instructions that can be executed.  The exact numbers varies depending on the layering design and the limitations of the specific video adapter hardware.  Shader Model 2 and 3 video adapters support 16 Texture Samplers.  Each unique texture used in each terrain material will require one of these samplers.  Note however that in most cases Shader Model 2 video adapters will be unable to render a terrain material layer setup as complex as Shader Model 3 video adapters.  The Texture Samplers will be covered in greater detail later in this tutorial.
<p />
Due to these limitations in hardware and rendering, it is prudent to design the entire terrain material setup to use as few individual Textures, Materials and the lowest possible Instruction count to achieve the desired texturing results.
<p />
<p />
<h2><a name="Designing Materials for Instancing"></a> Designing Materials for Instancing </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
The Unreal Engine Material system supports a feature called <a href="InstancedMaterials.html" class="twikiLink">Material Instancing</a>.  This essentially allows for new Materials that are based on a variation of a Parent Material.  The Parent Material includes one or more of the <em>Parameter</em> style Expressions, which are exposed on the Material Instance allowing a subset modification of the Parent Material properties without the overhead of another separate Material.  Instanced Materials do not require an expensive recompile of the Material.
<p />
A simple example would be a Parent Material and a <a href="InstancedMaterials.html" class="twikiLink">Material Instance</a> that provided a second material of a different color.  There would be no reason to create two individual Materials when you could simply expose a parameter on the Parent that allowed for changing the RGB hue on any Instanced copy of it.
<p />
Using <a href="InstancedMaterials.html" class="twikiLink">Material Instancing</a> and the <em>Parameter</em> Expressions, one Parent Material can have multiple Instances with various colors, opacities, blends, etc.
<p />
The most common Parameter style Expressions that are used in Materials includes the <em>ScalarParameter</em> and <em>VectorParameter</em> Expressions.  The ScalarParameter Expression is similar to the <em>Constant</em> Expression as it has a single floating point value, and the VectorParameter Expression is similar to the <em>Constant4Vector</em> Expression as it has four floating point values, ARGB.
<p />
Each Parameter style Expression has a "ParameterName" property that allows specifying a name for the parameter that is seen in any Instance of the Material.  You would commonly use a descriptive name such as "DiffuseColor" or "BlendAmount".
<p />
Note that each Material name and Parameter name must be unique when using <a href="InstancedMaterials.html" class="twikiLink">Material Instances</a>, otherwise when the final material for a terrain component is compiled, the resulting rendered material may be incorrect.  Using the same name for more than one Parameter will for example cause the compiled material to use the first occurence of that specific name for all identical named instances.
<p />
<img alt="UE3MatInstExample.gif" src="rsrc/Three/TerrainAdvancedTextures/UE3MatInstExample.gif" />
<p />
<p />
<h2><a name="Material Expression Building-Blocks"></a> Material Expression Building-Blocks </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
Many of the complex material systems we will be designing for the terrain are using a series of common "building blocks" for each terrain layer texture.  So first we will examine and describe the functionality of these material sections.
<p />
<h3><a name="Diffuse Texture Brightness and Tint"></a> Diffuse Texture Brightness and Tint </h3>
<p />
To reduce the number of texture samples on a terrain, and the total texture count for a game title, it is a simple task to create a brightness and tint modifier.  Instead of creating multiple versions of a texture file with varying brightness or tint, such as a light brown and dark brown sand, simply modify the texture within the material using a Multiply Expression that modifies the RGB channels with the values from a VectorParameter Expression.
<p />
Change the VectorParameter RGB properties to modify the texture brightness and tint.  Values of 1.0,1.0,1.0 are default.  The A (alpha) property value of the VectorParameter Expression can be left at its default of 1.0.
<p />
<img alt="UE3MatBrightTint.gif" src="rsrc/Three/TerrainAdvancedTextures/UE3MatBrightTint.gif" />
<p />
<h3><a name="Diffuse Detail Texture Brightness"></a> Diffuse Detail Texture Brightness </h3>
<p />
When using grayscale Detail textures to supplement the near-field viewing quality of large scaled diffuse textures, it is often required to adjust the brightness level of the Detail texture so that it does not change the overall brightness of the diffuse texture.  It is possible to accomplish this by setting the Detail texture's properties for UnpackMax, but then the brightness is fixed at that value.  By using a Multiply Expression  that modifies the RGBA channels with the value from a ScalerParameter Expression, we can modify the brightness as required for every instance of the Detail texture.
<p />
Change the ScalerParameter property to modify the texture brightness.  A value of 1.0 is default.
<p />
<img alt="UE3MatDetailBright.gif" src="rsrc/Three/TerrainAdvancedTextures/UE3MatDetailBright.gif" />
<p />
<h3><a name="NormalMap Detail Texture Blend and Strength"></a> NormalMap Detail Texture Blend and Strength </h3>
<p />
NormalMaps can often greatly improve the realism of the larger rock textures used on terrain, such as craggy cliff faces and bare rock mountains.  Due to texture size limitations and the common texture resolutions of 1024x1024 or 2048x2048, the diffuse rock textures are often scaled to a large size in the TerrainMaterial to simulate real-world visual appearance.  If the player can approach these rock textures, the large texture scale usually results in a blurry and large pixelated look to the rock.  In addition to using a detail texture on the diffuse rock texture, a detail texture can also be used on the NormalMap.
<p />
When mixing two NormalMap textures, the Blue channel of one of the textures must be removed or it essentially diminishes the bump rendering.  The VectorParameter and Multiply Expression strip out the Blue channel from the Detail NormalMap texture prior to mixing it with the main NormalMap texture.  The R and G channels of the VectorParameter Expression can also be adjusted above 1.0 to increase the bump strength of the Detail texture.
<p />
<img alt="UE3MatNormalDetailStrength.gif" src="rsrc/Three/TerrainAdvancedTextures/UE3MatNormalDetailStrength.gif" />
<p />
<h3><a name="Mask Blend Level"></a> Mask Blend Level </h3>
<p />
Some of the custom materials presented below utilize a grayscale Mask to perform a number of functions such as texture blending.  By utilizing a ScalerParameter Expression controlling a Multiply Expression, the blend weight Mask can be modified directly in the Material for simplified value adjustment and to allow for Instancing.  The Clamp Expression and Constant of 1 connected to its Max node ensures that the Mask range is always between 0.0 and 1.0.
<p />
<img alt="UE3MatMaskBlendLevel.gif" src="rsrc/Three/TerrainAdvancedTextures/UE3MatMaskBlendLevel.gif" />
<p />
<h3><a name="Desaturation Expression"></a> Desaturation Expression </h3>
<p />
The Desaturation Expression is used for modifying an existing texture to reduce the color saturation.  This can be used to modify a terrain texture to provide a more natural blend of shades on a terrain geological system, such as neutral rock colors or dead grass.  It can also reduce the total number of textures required for a shipped video game title or map through the reuse of similar textures that are modified in Materials to alter their color, saturation, brightness, etc.
<p />
<img alt="UE3MatDesaturate.gif" src="rsrc/Three/TerrainAdvancedTextures/UE3MatDesaturate.gif" />
<p />
<p />
<h2><a name="Complex Material Design Notes"></a> Complex Material Design Notes </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
<h3><a name="Naming Conventions"></a> Naming Conventions </h3>
<p />
To improve package organization and easier re-use of engine objects, a simple but strict naming convention should be utilized for all assets that are created.  A recommended convention system would be as follows:
<p />
<table cellspacing="1" cellpadding="1" class="twikiTable" border="0"><tr><td bgcolor="#eaeaea" class="twikiFirstCol"> TX_TextureName_D </td><td bgcolor="#eaeaea"> diffuse texture </td></tr>
<tr><td bgcolor="#ffffff" class="twikiFirstCol"> TX_TextureName_DO </td><td bgcolor="#ffffff"> diffuse texture with opacity in alpha channel </td></tr>
<tr><td bgcolor="#eaeaea" class="twikiFirstCol"> TX_TextureName_DS </td><td bgcolor="#eaeaea"> diffuse texture with specular in alpha channel </td></tr>
<tr><td bgcolor="#ffffff" class="twikiFirstCol"> TX_TextureName_N </td><td bgcolor="#ffffff"> normalmap texture </td></tr>
<tr><td bgcolor="#eaeaea" class="twikiFirstCol"> TX_TextureName_O </td><td bgcolor="#eaeaea"> opacity texture </td></tr>
<tr><td bgcolor="#ffffff" class="twikiFirstCol"> TX_TextureName_S </td><td bgcolor="#ffffff"> specular texture </td></tr>
<tr><td bgcolor="#eaeaea" class="twikiFirstCol"> MAT_MaterialName </td><td bgcolor="#eaeaea"> material </td></tr>
<tr><td bgcolor="#ffffff" class="twikiFirstCol"> TM_MaterialName </td><td bgcolor="#ffffff"> terrain material </td></tr>
<tr><td bgcolor="#eaeaea" class="twikiFirstCol"> TLS_SetupName </td><td bgcolor="#eaeaea"> terrain layer setup </td></tr>
</table>
<p />
For specific custom textures the following naming conventions are used:
<p />
<table cellspacing="1" cellpadding="1" class="twikiTable" border="0"><tr><td bgcolor="#eaeaea" class="twikiFirstCol"> TX_Detail[name] </td><td bgcolor="#eaeaea"> detail texture 8-bit grayscale or packed bitplanes </td><td bgcolor="#eaeaea"> eg. TX_DetailRock1 </td></tr>
<tr><td bgcolor="#ffffff" class="twikiFirstCol"> TX_Macro[name] </td><td bgcolor="#ffffff"> macro texture 8-bit grayscale or packed bitplanes </td><td bgcolor="#ffffff"> eg. TX_MacroDirt </td></tr>
<tr><td bgcolor="#eaeaea" class="twikiFirstCol"> TX_Mask[name] </td><td bgcolor="#eaeaea"> mask texture 8-bit grayscale or packed bitplanes </td><td bgcolor="#eaeaea"> eg. TX_MaskRandom </td></tr>
</table>
<p />
When using packed bitplane versions of detail, macro and mask textures, it is usually prudent to name the texture according to each bitplane content for easier self-documenting use.  For example, a detail texture TX_DetailRockGrassDirt would contain three 8-bit packed textures into the RGB bitplanes for R=Rock, G=Grass, B=Dirt.  The Alpha channel is unused in this example and could in fact provide a fourth detail texture.
<p />
<h3><a name="Comment groups and Expression Descriptions"></a> Comment groups and Expression Descriptions </h3>
<p />
When constructing complex material systems, it is a prudent choice to use the material expression Description feature and the Comment object.  This will greatly improve the organization and readability of complex material layouts.  Each expression includes a description property called "Desc" that can be set to a text string for commenting on the function or values of that particular expression.
<p />
The comment object is added by right-clicking on the Material Editor workspace and choosing <em>Comment</em> from the pop-up menu, or by pressing "c".  The comment object can be wrapped around multiple existing expressions to provide a graphical <em>group box</em> of a material functional section.  When adding a new comment object it will also auto-size itself to wrap around a set of currently selected expressions.
<p />
Expression Description:
<p />
<img alt="UE3ExpressionDesc.gif" src="rsrc/Three/TerrainAdvancedTextures/UE3ExpressionDesc.gif" />
<p />
Comment box:
<p />
<img alt="UE3CommentBox.gif" src="rsrc/Three/TerrainAdvancedTextures/UE3CommentBox.gif" />
<p />
<h3><a name="Modifying Assigned Setups"></a> Modifying Assigned Setups </h3>
<p />
When performing substantial modifications to a TerrainLayerSetup that is assigned to a Terrain object, such as inserting or deleting Material items in the array, changing the order of items in the array, or modifying the Noise, Height or Slope properties of one or more Material items, a significant performance boost can be realized by unassigning the TerrainLayerSetup from the Terrain object first.  This is usually only benefitial if you are inserting or deleting items or if you already know the correct property value changes for Noise, Height or Slope, as you forfeit the on-screen visual feedback of the rendered terrain view.  However, for significant changes, such as deleting multiple Material items it is often faster to unassign the TerrainLayerSetup from the terrain object, make the changes, then re-assign the TerrainLayerSetup.
<p />
If you are storing assets directly in the map file, be sure to re-assign the TerrainLayerSetups to the terrain object prior to saving the map, or the <em>automatic unused asset culling</em> will delete the unused assets from the map file.
<p />
<h3><a name="Recaching Terrain Materials"></a> Recaching Terrain Materials </h3>
<p />
As changes are made to the terrain material system, such as modifying Materials, TerrainMaterials, TerrainLayerSetups, and the layout order of these objects, the terrain currently rendered in the editor viewport may not update to show these changes.  Click on the <em>Terrain Editing Mode</em> button on the left toolbox icons to display the <a href="TerrainEditorUserGuide.html" class="twikiLink">Terrain Edit</a> dialog, then click on the <em>Recache Terrain Materials</em> "RM" button to force a recache.  As soon as the <em>Recache terrain shaders</em> prompt message box disappears, the terrain system will use the updated material setup.
<p />
<img alt="UE3RecacheMaterials.gif" src="rsrc/Three/TerrainAdvancedTextures/UE3RecacheMaterials.gif" />
<p />
<h3><a name="GPU Shader Support"></a> GPU Shader Support </h3>
<p />
When support for the older install-base of end-user hardware is desired, the degree of level design and terrain complexity must be scaled back to maintain a workable render system with a reasonable visual quality.  Many of the techniques in this tutorial may be too complex and performance-intensive for video hardware that is Shader Model 2.0 with 8 or fewer Texture Mapping Units (TMU's).
<p />
On the ATI series this would be adapters from the Rage though 9600 through X800 series.  The X1000 series and higher support Shader Model 2.0b or higher, however, the lower models in the X1000 and HD2000 series may be limited to 4 or 8 TMU's.
<p />
On the NVidia series this would be adapters from the Riva through GeForce 4 through GeForce 5000 series.  The 6000 series and higher support Shader Model 3.0 or higher, however, the lower models in the 6000, 7000 and 8000 series may be limited to 2, 4, or 8 TMU's.
<p />
The DirectX D3DCAPS returns the level of support for operations involving Pixel Shaders.
<p />
<table cellspacing="1" cellpadding="1" class="twikiTable" border="0"><tr><td bgcolor="#eaeaea" class="twikiFirstCol"> Device capability </td><td bgcolor="#eaeaea"> Description </td></tr>
<tr><td bgcolor="#ffffff" class="twikiFirstCol"> PixelShader1xMaxValue </td><td bgcolor="#ffffff"> Range of values that can be stored in registers is [-PixelShader1xMaxValue, PixelShader1xMaxValue]. This affects versions ps_1_1 to ps_1_4 only. </td></tr>
<tr><td bgcolor="#eaeaea" class="twikiFirstCol"> MaxSimultaneousTextures </td><td bgcolor="#eaeaea"> For the fixed function pipeline, the number of texture samplers is MaxTextureBlendStages divided by MaxSimultaneousTextures. The number of texture samplers for a pixel shader is shown in the next table. </td></tr>
<tr><td bgcolor="#ffffff" class="twikiFirstCol"> PixelShaderVersion </td><td bgcolor="#ffffff"> Version of pixel shader supported by the hardware. Pixel shaders with version numbers equal to or less than this value are supported. </td></tr>
</table>
<p />
<table cellspacing="1" cellpadding="1" class="twikiTable" border="0"><tr><td bgcolor="#eaeaea" class="twikiFirstCol"> Pixel Shader Version </td><td bgcolor="#eaeaea"> Number of Texture Samplers </td></tr>
<tr><td bgcolor="#ffffff" class="twikiFirstCol"> ps_1_1 to ps_1_3 </td><td bgcolor="#ffffff"> 4 texture samplers </td></tr>
<tr><td bgcolor="#eaeaea" class="twikiFirstCol"> ps_1_4 </td><td bgcolor="#eaeaea"> 6 texture samplers </td></tr>
<tr><td bgcolor="#ffffff" class="twikiFirstCol"> ps_2_0 to ps_3_0 </td><td bgcolor="#ffffff"> 16 texture samplers </td></tr>
<tr><td bgcolor="#eaeaea" class="twikiFirstCol"> Fixed function pixel shader </td><td bgcolor="#eaeaea"> MaxTextureBlendStages/MaxSimultaneousTextures texture samplers </td></tr>
</table>
<p />
<p />
<h3><a name="Material Complexity: Exceeding the Texture Samplers or Too Many Instructions"></a> Material Complexity: Exceeding the Texture Samplers or Too Many Instructions </h3>
<p />
The terrain system in Unreal Engine 3 uses the GPU to perform the mesh rendering and texturing, therefore, the capabilities of the rendering is limited to the feature list and performance of the GPU unit, such as Fill Rate, the Pixel Shader version and number of Pixel Shader Engines, the number of Texture Samplers, and Texture Mapping Units (TMU's).
<p />
The terrain mesh is divided into rectangular blocks of patches based on the Terrain.MaxComponentSize property.  For example, a MaxComponentSize of 16 results in each block of 16x16 patches of terrain managed as a discrete mesh rendering call (a DrawMesh call).  Each discrete mesh rendering call is also limited to the number of textures that can be managed by the GPU's total number of Texture Samplers.  So the total number of Texture Samplers for the Pixel Shader version determines the total number of textures that can be rendered within each terrain component.  If this number of Texture Samplers available is exceeded on a terrain component, the terrain will render a multicolor error texture.
<p />
For each terrain layer setup there will always be three Texture Samplers reserved for the standard lightmaps (for the three light directions to support normal maps), or one Texture Sampler for a "simple" lightmap for low detail fallback on PCs only.  Consoles do not support the simple lightmap so they always require three Texture Samplers for lightmaps.  In addition to this, each terrain TextureMaterial item in the TerrainLayerSetup(s) requires a <em>weight map</em> that determines where on the terrain patches that specific texture layer is to be rendered.  Each weight map is an 8-bit grayscale mask, so it requires one bitplane of an ARGB 32-bit texture, and these are packed four bitplanes to a texture as ARGB channels.  So a single composite weight map texture can manage the weight maps for up to four texture layers.
<p />
An example terrain setup such as six different texture layers would require the following number of Texture Samplers: <ul>
<li> three  lightmap Texture Samplers
</li> <li> six texture layer Texture Samplers
</li> <li> two weight map Texture Samplers, one using all four bitplanes, one using only two bitplanes
</li></ul>
<p />
Note that on low-end video systems, the terrain layering will fall back to a simple low detail version that uses one lightmap and simplified fallback textures.
<p />
When designing the terrain layer setup, if the terrain displays the error texture, the method to alleviate this is to reduce the number of discrete textures per component.  This can be done by one or more of the following: <ul>
<li> remove unnecessary detail textures
</li> <li> combine multiple grayscale detail textures into the bitplanes of a single ARGB texture
</li> <li> remove unnecessary normalmap textures
</li> <li> remove one or more diffuse texture layers
</li> <li> reduce the total number of discrete diffuse textures by re-using one or more diffuse textures for multiple layers, such as using only one sand texture but use Material Expressions to provide any additional coloring or brightness instead of using two discrete texture variations
</li> <li> combine custom grayscale masks used for macros and alphamaps into bitplanes of a single texture
</li> <li> combine multiple textures into single texture quadrants as outlined in one of the techniques below
</li> <li> simplify material expression design to reduce the total instruction count
</li> <li> replace some terrain detailing with staticmeshes if appropriate such as cliffs so that the overall texture count can be decreased
</li></ul>
<p />
<h3><a name="Packing Detail Textures and Masks into _BitPlanes"></a> Packing Detail Textures and Masks into BitPlanes </h3>
<p />
To conserve on Texture Samplers, if the terrain material setup includes multiple grayscale detail textures or custom texture macro masks or super masks, these can possibly be packed into the bitplanes of a texture, with one 32-bit ARGB texture providing four packed textures.
<p />
In Corel PhotoPaint, three 8-bit images can be packed into one 24-bit image by choosing the <em>Combine Channels</em> function on the <em>Image</em> menu.  Select each one of the three images and assign them to the R, G and B channels.  A fourth 8-bit image can be packed resulting in one 32-bit image by loading the fourth into the Mask by choosing <em>Load from disk</em> on the <em>Mask</em> menu.  When saved as a 32-bit file such as .tga format, the Mask becomes the Alpha Channel.
<p />
<img alt="CPPCombine.gif" src="rsrc/Three/TerrainAdvancedTextures/CPPCombine.gif" />
<p />
In Adobe PhotoShop, three 8-bit images can be packed into one 24-bit image by choosing the <em>Merge Channels</em> function on the <em>Channels Palette</em> flyout.  Select the mode and number of color channels, then specify which image to assign to the R, G and B channels.
<p />
<img alt="APSMerge.gif" src="rsrc/Three/TerrainAdvancedTextures/APSMerge.gif" />
<p />
8-bit grayscale Detail textures can be packed up to four at once into bitplanes of a single texture only if the UV tiling value of all of the packed detail textures is identical.  Since Detail textures are often scaled similarly for all of the terrain materials, such as 8x or 16x, packing usually reduces the required texture samplers by up to 4-to-1.
<p />
<img alt="DGPackBitplanes.gif" src="rsrc/Three/TerrainAdvancedTextures/DGPackBitplanes.gif" />
<img alt="DGPackBitplanesMat.gif" src="rsrc/Three/TerrainAdvancedTextures/DGPackBitplanesMat.gif" />
<p />
In a similar fashion, multiple <em>Macro</em> textures and <em>Super Masks</em> can also be packed into bitplanes of a single texture to reduce the number of discrete textures and the required number of texture samplers.  This is an example set of four Super Masks packed into bitplanes.  A screenshot of the terrain can be seen in the Super Masks section of this tutorial.
<p />
<img alt="DGSuperMasks.gif" src="rsrc/Three/TerrainAdvancedTextures/DGSuperMasks.gif" />
<p />
<p />
<h2><a name="Detail Textures: Adding near-distance detail"></a> Detail Textures: Adding near-distance detail </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
When applying terrain textures with larger tile scale sizes, such as TerrainMaterial.Material.MappingScale values greater than 2, the visual results may look blurry when the player can get close to the terrain area where these materials are painted.
<p />
Adding a Detail texture to the Material will improve the look of the texture by introducing a tiled fine resolution detail.  Detail textures are usually a seamlessly tilable 8-bit grayscale image often at a resolution of 128x128.
<p />
Here are a few example Detail textures from Epic's Unreal Engine content:
<p />
<img alt="UE3DetailExamples.gif" src="rsrc/Three/TerrainAdvancedTextures/UE3DetailExamples.gif" />
<p />
For this terrain example we will be adding a Detail texture to the following Rock diffuse texture that has a TerrainMaterial.Material.MappingScale value of 16, so when viewed from a near distance it is quite blurry.
<p />
<img alt="UE3DetailRock.gif" src="rsrc/Three/TerrainAdvancedTextures/UE3DetailRock.gif" />
<p />
The selected expressions provide the Detail texture set in this Material: <ul>
<li> Texture Sample = the Detail texture.
</li> <li> TexCoord = the tiling amount of the Detail texture with respect to the main diffuse rock texture, adjust as desired.
</li> <li> ScalarParameter "Detail Brightness" = the brightness mix value for the Detail, this supports Material Instancing.  This expression can be replaced with a Constant if no Instancing is going to be used.
</li> <li> Multiply = the Detail Adjust multiplier used to adjust the overall brightness of the Detail in the material mix.
</li></ul>
<p />
The ScalarParameter and Multiply expressions are adjusted so that the Material is the same brightness with the Detail as it is without.  The second Multiply expression (Diffuse * Detail) mixes the Rock diffuse texture with the Detail texture.
<p />
As mentioned previously, the Detail texture's properties for UnpackMax can also be adjusted to 2 or 3 instead of using the ScalarParameter and Multiply expressions in the Material.  This will reduce the Material instruction count a small amount with a tradeoff of loss of Material Instancing for this parameter.
<p />
<img alt="UE3DetailMaterial.gif" src="rsrc/Three/TerrainAdvancedTextures/UE3DetailMaterial.gif" />
<p />
As seen in these before and after screenshots, the Detail texture addition to the Material adds a significant amount of visual quality to the terrain texture.
<p />
<img alt="DGDetailOff.jpg" src="rsrc/Three/TerrainAdvancedTextures/DGDetailOff.jpg" />
<p />
<img alt="DGDetailOn.jpg" src="rsrc/Three/TerrainAdvancedTextures/DGDetailOn.jpg" />
<p />
<p />
<h2><a name="NormalMap Textures: Adding bump detail"></a> NormalMap Textures: Adding bump detail </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
One of the most useful features of the Unreal Engine for adding realism to any material in a scene is NormalMaps.  NormalMaps add a three-dimensionality to textures.  When used on terrain textures such as rock, gravel and grass, the results are a significant increase in visual detail.
<p />
NormalMap textures can be created from a number of sources.  It is possible to have NormalMaps created from the diffuse texture itself by using utilities such as the NVidia Texture Tools or the ATI NormalMapGenerator.  NormalMaps can also be created from 8-bit grayscale heightmap images created in most paint software using these same NVidia and ATI tools.
<p />
<img alt="DGNormalFromDiffuse.gif" src="rsrc/Three/TerrainAdvancedTextures/DGNormalFromDiffuse.gif" />
<p />
For this terrain example we will be showing both a NormalMap and a Detail NormalMap addition to the following Sand diffuse texture and material.  The standard NormalMap adds three-dimensionality at the same resolution as the diffuse texture, whereas the Detail NormalMap also adds a tiled fine resolution detail to the NormalMap.
<p />
<img alt="UE3NormalSand.gif" src="rsrc/Three/TerrainAdvancedTextures/UE3NormalSand.gif" />
<p />
In the standard NormalMap version of the Material, a NormalMap texture is simply connected to the Normal node as a Texture Sample expression.
<p />
<img alt="UE3NormalMaterial.gif" src="rsrc/Three/TerrainAdvancedTextures/UE3NormalMaterial.gif" />
<p />
In the Detail NormalMap version of the Material, we construct a common NormalMap mixer that is comprised of the standard NormalMap Texture Sample that has a Detail NormalMap setup added to it, as shown in the selected expressions: <ul>
<li> Texture Sample = the Detail NormalMap texture.
</li> <li> TexCoord = the tiling amount of the Detail NormalMap texture with respect to the standard NormalMap texture, adjust as desired.
</li> <li> VectorParameter "Detail NM Strength" = the strength mix value for the Detail NormalMap, this supports Material Instancing.  This expression can be replaced with a Constant3Vector if no Instancing is going to be used.
</li> <li> Multiply = the Detail Adjust multiplier used to adjust the overall mix of the Detail NormalMap in the material mix.
</li></ul>
<p />
The VectorParameter and Multiply expressions allow for adjusting the relative NormalMap 3D depth between the two NormalMap textures, plus it also performs a very important function in removing the B component of the Detail NormalMap Texture Sample which would otherwise actually decrease the total NormalMap depth of the Material.  Therefore the B component of the VectorParameter expression must always be set to 0.0.
<p />
The Add expression mixes the standard NormalMap texture with the Detail NormalMap texture.
<p />
<img alt="UE3NormalMaterialDetailed.gif" src="rsrc/Three/TerrainAdvancedTextures/UE3NormalMaterialDetailed.gif" />
<p />
As seen in these before and after screenshots, the NormalMap texture addition to the Material adds a significant amount of three-dimensional visual quality to the terrain texture.  The Detail NormalMap version takes this one step further by also adding fine detailing.
<p />
<img alt="DGNormalOff.jpg" src="rsrc/Three/TerrainAdvancedTextures/DGNormalOff.jpg" />
<p />
<img alt="DGNormalOn.jpg" src="rsrc/Three/TerrainAdvancedTextures/DGNormalOn.jpg" />
<p />
<img alt="DGNormalOnDetailed.jpg" src="rsrc/Three/TerrainAdvancedTextures/DGNormalOnDetailed.jpg" />
<p />
In the case of exceeding Texture Samplers in a terrain material setup, NormalMaps and Detail NormalMaps can be one of the first items to be removed.  Diffuse Detail textures usually add a more benefitial visual effect than NormalMaps and Detail NormalMaps.
<p />
If the engine version being used has Specular enabled on the terrain system, be sure to set the Specular off in all terrain materials.  In this specific case, NormalMaps will have a tendancy to make the terrain look glossy or plastic.  Specular on terrain is disabled in the engine by default for performance reasons.
<p />
<p />
<h2><a name="Multi-UV Mixing: Reducing tiling through scalar mixing"></a> Multi-UV Mixing: Reducing tiling through scalar mixing </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
One of the low-cost methods for improving terrain textures and decreasing apparent tiling is to mix one texture at two different UV sizes.  The advantage of using the same texture twice is that when compiled it requires only one Texture Sampler.  So while this technique does increase the shader instructions a small amount, it does not require additional Texture Samplers which are often the resource that you may run out of first.
<p />
This method works best with textures that contain mostly smaller detailing, such as dirt, grass and sand.  Textures with strong detail such as cliff rock and textures that contain deep markings may not look natural using this technique.
<p />
<img alt="UE3MultiuvGrass.gif" src="rsrc/Three/TerrainAdvancedTextures/UE3MultiuvGrass.gif" />
<p />
The Material is comprised of the standard diffuse texture and a second copy of that same Texture Sample with a TexCoord expression connected to its UV node that is set to increase the UV scale by a value such as two times to four times the scale.  For the TexCoord expression, a value of 0.5 results in a 2x increase in scale, a value of 0.25 results in a 4x increase in scale.
<p />
Note that you can also provide negative values for the TexCoord tiling in order to flip the texture and possibly reduce the overall apparent tiling of the texture even further.  In this example, values of -0.25 would be used to also add a 4x size with flip to the scaled texture.
<p />
A third option would be to use a 90 or 270 degree rotation of the scaled texture to help reduce visual tiling, which can be accomplished with a Rotator expression as outlined below.
<p />
Brightening multipliers are added to both the standard diffuse and the scaled copy of the texture.  This is to adjust the overall material brightness back to what the diffuse texture is by itself, since for example multiplying a 0.5 grey by itself results in a darker grey of 0.25 (0.5 * 0.5 = 0.25).
<p />
The "Brighten Amount" Constant expressions specify the amount to brighten each Texture Sample by, with the value 4 being common.  These Constant expressions could be replaced with ScalarParameter expressions if you wished to have these values exposed for any Material Instance versions.
<p />
The scaled copy of the texture in this example also uses a Desaturation expression set to desaturate the texture by 25%, since in this specific example, the green grass texture becomes excessively green in color when the two green textures are multiplied together.
<p />
<img alt="UE3MultiuvMaterial.gif" src="rsrc/Three/TerrainAdvancedTextures/UE3MultiuvMaterial.gif" />
<p />
To use a Rotator version of the scaled texture instead of simply flipping the texture, add a Rotator, a TexCoord and a Constant expression in place of the single TexCoord expression that is connected to the Texture Sample's UVs input node.
<p />
Set the Rotator.CenterX and .CenterY properties to 0.5 which is the center of the texture (50%), and set the Rotator.Speed to 1.0.
<p />
Set the TexCoord.UTiling and .VTiling to the desired scale size, 0.5 for 2x and 0.25 for 4x, etc.
<p />
The value of the Constant expression now determines the amount of fixed rotation of the texture.  With a Rotator.Speed value of 1.0, the Constant value for a complete 360 degree rotation is 2*pi or approximately 6.28318.  So a 90 degree rotation is 1.570795, a 180 degree rotation is 3.14159, and a 270 degree rotation is 4.712385.
<p />
Note: the Rotator.Speed determines the range of the Constant for texture rotation.  A Speed of 2.0 results in a 0 to 360 degree rotation with Constant values of 0.0 to pi (3.14159).  A Speed of 0.5 results in a 0 to 360 degree rotation with Constant values of 0.0 to 4*pi (12.56636).
<p />
<img alt="UE3MultiuvMatRotate.gif" src="rsrc/Three/TerrainAdvancedTextures/UE3MultiuvMatRotate.gif" />
<p />
As you can see in the example screenshots, the tiling of the grass texture is very apparent in the first image.  Mixing the texture back onto itself at a 4x scale reduces the tiling and also makes the material more visually pleasing at both far and near camera distances.
<p />
<img alt="DGMultiuvOff.jpg" src="rsrc/Three/TerrainAdvancedTextures/DGMultiuvOff.jpg" />
<p />
<img alt="DGMultiuvOn.jpg" src="rsrc/Three/TerrainAdvancedTextures/DGMultiuvOn.jpg" />
<p />
<img alt="DGMultiuvOnNear.jpg" src="rsrc/Three/TerrainAdvancedTextures/DGMultiuvOnNear.jpg" />
<p />
<p />
<h2><a name="Random Tiling Masks: Randomize the texture mapping to reduce tiling"></a> Random Tiling Masks: Randomize the texture mapping to reduce tiling </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
This method reduces the unwanted repetitive visual tiling on styles of textures where using multiple overlayed UV scales is not an option.  This works best on textures that are more consistent in color such as sand and dirt, and especially those textures that are man-made tile textures such as concrete slabs or metal plating.  The one limitation to this technique is that the texture must be properly seamless on all sides.
<p />
The Material uses the source texture twice, reducing the number of Texture Samplers required.  The first source TextureSample is used normally, the second source TextureSample uses a Rotator setup to rotate that TextureSample by 90, 180 or 270 degrees.
<p />
The next requirement for this Material setup is a Mask texture that contains a random spray of white pixels on a black background.  The white and black pixel values will be used in the Material to determine whether the normal or rotated version of the source texture is used as the texture is rendered across the surface of the terrain.
<p />
The Mask texture should be a 64x64 8-bit grayscale or 24-bit color image, and when importing, its properties should be set to CompressionNoAlpha = true and Compression Settings = TC_Default or TC_Grayscale.  After the Mask texture is imported, edit the texture's properties in the Texture Viewer and set the property for Filter = TF_Nearest.  If the filter is not set to this value, the texture will be blurred and the Material will not work as required.
<p />
<img alt="UE3RandomTileMask.gif" src="rsrc/Three/TerrainAdvancedTextures/UE3RandomTileMask.gif" />
<p />
The first source TextureSample is used normally.
<p />
For the second source TextureSample, set the Rotator.CenterX and .CenterY properties to 0.5 which is the center of the texture (50%), and set the Rotator.Speed to 1.0.  Set the TexCoord.UTiling and .VTiling both to 1.0.
<p />
The value of the Constant expression now determines the amount of fixed rotation of the texture.  With a Rotator.Speed value of 1.0, the Constant value for a complete 360 degree rotation is 2*pi or approximately 6.28318.  So a 90 degree rotation is 1.570795, a 180 degree rotation is 3.14159, and a 270 degree rotation is 4.712385.
<p />
The TexCoord expression connected to the UVs input on the Mask TextureSample should be set to 1/texture_size, which in this case is 1/64 or 0.015625.  You could also use a 16x16 (1/16 = 0.0625) or 32x32 (1/32 = 0.03125) Mask texture if you preferred.  The reason why we don't use a 128x128 texture is because 1/128 = 0.0078125 and the Unreal Engine expressions only support six decimal places, so the TexCoord for a 1/128 value would be rounded up to 0.007813 which may cause visual displacement anomalies.
<p />
The LinearInterpolate (Lerp) expression in the Material switches its A:B input dependant on the value of the Alpha input.  By using a random pixel Mask on the Alpha input, we cause the Lerp to choose the normal or rotated source texture version depending on whether the pixel is white or black.
<p />
You can also use this functionality to create a Material overlay that has a specific pattern of normal and rotated depending on the design of white versus black pixels drawn in the Mask texture.
<p />
<img alt="UE3RandomTileMaterial.gif" src="rsrc/Three/TerrainAdvancedTextures/UE3RandomTileMaterial.gif" />
<p />
As shown in the before and after screenshots, the dirt texture contains a visible tiling line which is randomly rotated to make the line less apparent.
<p />
<img alt="DGRandomTileOff.jpg" src="rsrc/Three/TerrainAdvancedTextures/DGRandomTileOff.jpg" />
<p />
<img alt="DGRandomTileOn.jpg" src="rsrc/Three/TerrainAdvancedTextures/DGRandomTileOn.jpg" />
<p />
<h2><a name="Macro Textures: Blending textures for variety"></a> Macro Textures: Blending textures for variety </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
The Macro Texture system reduces visual tiling of materials and also increases the texture variety across the terrain by blending between two textures according to a Macro mask.  The main requirements of the macro setup are two source textures that blend well together, such as grass and dirt or dirt and rock, and a seamlessly tilable grayscale texture used as the macro blend mask.
<p />
The macro blend mask can be any texture size from 128x128 to 1024x1024, depending on the allocated resource size available for the project, and the amount of desired variety across the terrain area that is being blended.  The macro blend mask texture is an 8-bit grayscale image that is created in any paint software, where the full 8-bits of depth are preferably used.  It may be imported into UnrealEd as either a DXT1 or a G8 8-bit grayscale.  Keep in mind that up to four macro masks can be combined into a single texture using the bitplane packing technique described previously in this tutorial, saving on precious texture samplers, but with the limitation of only a single TexCoord <em>Macro Size</em>.
<p />
This example material will be using the macro texture shown here, but any seamless pattern can be used.  Keep in mind that the pattern that you use may become visible from great heights above the terrain, so the more random the mask pattern is, the better.
<p />
<img alt="UE3MacroTexture.gif" src="rsrc/Three/TerrainAdvancedTextures/UE3MacroTexture.gif" />
<p />
The macro material is relatively simple, consisting of the two source TextureSamples and the Macro setup expressions, currently selected in the material screenshot below.  The Macro setup is connected to the Alpha input node of a LinearInterpolate expression, so that the grayscale value of 0 to 255 in the macro texture determines the blend amount to render between the two source textures.
<p />
In the Macro setup itself, the following expressions are used: <ul>
<li> TextureSample = contains the macro texture.
</li> <li> TexCoord = determines the size of the macro as it relates to the terrain.  The blend tiling can range from a small area to a large area across the terrain.  This is usually set to a value such as 0.25 (4x) or 0.125 (8x) or a smaller value.
</li> <li> Multiply and its Constant = the "Macro Mix Level" allows for fine-tuning of the blend level of the grayscale macro texture by adjusting its gray values higher or lower.  The Constant expression can be replaced by a ScalarParameter expression if you wish to use this Material with Instancing.
</li> <li> Clamp and its Constant = clamps the macro output level to be values between 0.0 and 1.0 only.  Allowing values greater than 1.0 tend to wash out the material on the terrain.
</li></ul>
<p />
<img alt="UE3MacroMaterial.gif" src="rsrc/Three/TerrainAdvancedTextures/UE3MacroMaterial.gif" />
<p />
As shown in the before and after screenshots, the grass texture looks less tiled and more varied when the dirt texture is blended around with it.  The third screenshot shows a top-down view over the terrain where the blending of the two textures can be more easily seen.
<p />
<img alt="DGMacroOff.jpg" src="rsrc/Three/TerrainAdvancedTextures/DGMacroOff.jpg" />
<p />
<img alt="DGMacroOn.jpg" src="rsrc/Three/TerrainAdvancedTextures/DGMacroOn.jpg" />
<p />
<img alt="DGMacroOnTop.jpg" src="rsrc/Three/TerrainAdvancedTextures/DGMacroOnTop.jpg" />
<p />
<p />
<h2><a name="Super Masks: Increasing terrain detail beyond the vertex level"></a> Super Masks: Increasing terrain detail beyond the vertex level </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
The current terrain layer painting system is limited to the resolution of the terrain mesh vertices.  The number of terrain mesh vertices is the same as the underlying terrain heightmap, so each layer <em>weightmap</em> is therefore the same resolution as the heightmap.  In other words, a 256x256 patch terrain which contains an underlying 257x257 heightmap allows for a layer painting resolution of 257x257 discreet blending pixels.  While this is fine for the majority of terrain layer painting detail, there are instances where a finer degree of texturing may be desired.  Note that a <em>weightmap</em> is often also referred to as an <em>alphamap</em>.  It provides a similar functionality within the terrain layer blending system as an alpha channel in a 32-bit image or a paint application such as PhotoShop.
<p />
If we examine the details and implications of the current terrain system further, a single full intensity blend on a vertex will result in a diamond-weighted rectangular pattern at the painted vertex as shown in the image below.  This is the image of a terrain layer setup which is a white texture layer painted onto a gray texture layer with the terrain vertices super-imposed over it.  The painted vertex has a weightmap value of 255 while all of the surrounding vertices have weightmap values of 0.
<p />
Where this starts to have limitations is in the actual resolution of the layer textures that are painted.  The minimum painted width of the layer texture is 2 x DrawScale3D.X,.Y, since as seen in the image below, the texture blends out from the vertex over a 2x2 patch area.  So in the case of a terrain with a DrawScale3D.X,.Y of 256 [Unreal Units], this results in the minimum painted width of the layer texture as 10.24 meters (2 x 5.12m) or 33.6 feet (2 x 16.8ft) at the default engine scale of 1 Unreal Unit = 2 centimeters.
<p />
To put this into perspective and scale, many common two lane highways are constructed of two 3.5 meter lanes plus additional shoulder width.  So in comparison, a single painted vertex on a 256 DrawScale terrain is approximately the same width as a two lane highway.  This is often too wide for terrain layer detailing such as foot-paths, ditches, creeks, etc.  Choosing to solve this layer weightmap size issue by decreasing the terrain DrawScale3D may result in a terrain that is too dense and impacts the framerate due to the greater number of patches being rendered in the frustum.
<p />
<img alt="UE3SuperMaskDefault.gif" src="rsrc/Three/TerrainAdvancedTextures/UE3SuperMaskDefault.gif" />
<p />
If we examine the weightmap texture file for a complete painted terrain, we would see something similar to this example of a 256x256 terrain and its 256x256 weightmap for the cliffs (those patches that have a slope between approximately 30 and 90 degrees).  Compare the resolution of this with the resolution of the example Super Mask texture just below it on the page.  Note that this single high resolution Super Mask has been reduced from 1024x1024 to 880x880 to fit on this page
<p />
<img alt="DGSuperMaskUE3.gif" src="rsrc/Three/TerrainAdvancedTextures/DGSuperMaskUE3.gif" />
<p />
<img alt="DGSuperMask.gif" src="rsrc/Three/TerrainAdvancedTextures/DGSuperMask.gif" />
<p />
Modern 3D video adapters support texture resolutions of up to 8192x8192, which is a total of 1024 (32x32) times the possible detail of a 256x256 weightmap in the current terrain system.  As an example, an 8192 Super Mask compared to a standard 256x256 terrain would result in an increase in layer texturing detail from 10.24 meters down to 0.32 meters (from 33.6 feet down to 1.05 feet).
<p />
It is often too expensive for resource use and more difficult to work with files of this high resolution, so often it is easier to work with 1024x1024 or 2048x2048 Super Masks.  This still provides a higher level of detail than most terrain setups, with a 1024x1024 Super Mask resulting in 64 times greater detail than a 128x128 terrain as an example.
<p />
Super Masks are simply high resolution 8-bit grayscale textures that define where a specific texture layer is to be rendered.  This is very similar to alpha channel and opacity masks.  The Super Mask files can be hand-painted by an artist with good PhotoShop skills, or created algorithmically through a number of methods using various software applications.
<p />
For this example terrain, three high resolution 1024x1024 masks were created algorithmically for three distinct geological sections of the terrain, these being the rocky ridges, the erosion indentations, and the beach surrounding the water area.  When packed into the bitplanes of a single RGB 24-bit texture, these three masks look like the image below.  This texture was then imported into UnrealEd as a standard CompressionNoAlpha DXT1.  Note that the image below is a reduced 512x512 version of the actual texture so that it will easily fit onto this web page.
<p />
<img alt="DGSuperMasks.gif" src="rsrc/Three/TerrainAdvancedTextures/DGSuperMasks.gif" />
<p />
Once the Super Mask texture has been created and imported into UnrealEd, the Material setup required to use this is relatively simple, since each <em>block</em> of expressions for each Super Mask bitplane is essentially identical.
As seen in the Material image below: <ul>
<li> A LinearInterpolate expression blends the Base and Ridge textures based on the R bitplane of the Super Mask.
</li> <li> A LinearInterpolate expression blends in the Erosion texture based on the G bitplane of the Super Mask.
</li> <li> A LinearInterpolate expression blends in the Beach texture based on the B bitplane of the Super Mask.
</li> <li> The TexCoord expressions connected to the UVs input nodes of the TextureSamples specifies the tiling amount similar to the UTiling,VTiling properties of a TerrainMaterial object.
</li></ul>
<p />
Each <em>block</em> of expressions for each Super Mask layer can also be enhanced to utilize many of the other texturing techniques shown in this tutorial.  Detail textures can be blended in with each TextureSample if desired.  NormalMaps can be implemented for all of the layers by using a similar LinearInterpolate setup for each layer NormalMap along with the same Super Mask Texture Sample RGB node outputs.
<p />
<img alt="UE3SuperMaskMaterial.gif" src="rsrc/Three/TerrainAdvancedTextures/UE3SuperMaskMaterial.gif" />
<p />
The final material will look something like this in the generic browser, essentially an overhead 1:1 layout of the terrain layer texturing.
<p />
<img alt="UE3SuperMaskMat.gif" src="rsrc/Three/TerrainAdvancedTextures/UE3SuperMaskMat.gif" />
<p />
Create a new TerrainMaterial and assign the Super Mask Material to the Material property. Set the TerrainMaterial MappingScale property to the same resolution as the terrain, ie. the number of terrain patches.  In this example, we are using a 256x256 patch terrain.  This renders the Super Mask material at a 1:1 scaling onto the terrain.
<p />
<img alt="UE3SuperMaskTMat.gif" src="rsrc/Three/TerrainAdvancedTextures/UE3SuperMaskTMat.gif" />
<p />
This is a screenshot of the final 256x256 terrain with a 1024x1024 Super Mask system for material layering, providing sixteen times the normal painting detail.
<p />
<img alt="DGSuperMask.jpg" src="rsrc/Three/TerrainAdvancedTextures/DGSuperMask.jpg" />
<p />
<h3><a name="Increasing the Terrain &quot;Resolution&quot; with a 1:1 _NormalMap"></a> Increasing the Terrain "Resolution" with a 1:1 NormalMap </h3>
<p />
Using the same method of increasing detail on regular meshes with NormalMaps, the terrain resolution detail can also be increased by adding a 1024x1024 or larger fine detailed NormalMap.  This NormalMap texture was created algorithmically at a 4x4 resolution increase over the 256x256 terrain heightmap.  The NormalMap texture is imported and applied like a standard NormalMap to the Material Normal node.
<p />
<img alt="UE3SuperMaskNmap.gif" src="rsrc/Three/TerrainAdvancedTextures/UE3SuperMaskNmap.gif" />
<p />
These before and after screenshots show the difference with the NormalMap applied.  Note that the NormalMap depth has been increased for effect.
<p />
<img alt="DGSuperMaskNoNorm.jpg" src="rsrc/Three/TerrainAdvancedTextures/DGSuperMaskNoNorm.jpg" />
<p />
<img alt="DGSuperMaskNorm.jpg" src="rsrc/Three/TerrainAdvancedTextures/DGSuperMaskNorm.jpg" />
<p />
<p />
<h2><a name="Texture Packing: Implementing large texture tile sets"></a> Texture Packing: Implementing large texture tile sets </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
When more textures are required than the number of available texture samplers, it is possible to pack multiple sub-textures into a larger tiled texture.  Using creative material expressions it is then possible to "extract" each individual texture from the tile for individual layer use.
<p />
The tradeoff when implementing texture tiles is the performance hit and material complexity.  In comparison, four discrete textures have their overhead for <em>texture selection</em>, whereas the texture tile has required <em>sub-texture selection</em> in the pixel shader which has overhead for texture coordinate transformations into the large tiled texture.  There is also the extra art time required to modify the source textures in the tile so that they include possible <em>edge padding</em>.  The main advantage is four (or more) textures can be packed into one texture, decreasing the texture sampler usage and allowing for more terrain texture layers.
<p />
Note that due to this technique usually resulting in small texture seams appearing at various locations across the terrain, it should be used only if the game design allows.  For terrains where the player or camera are close to the surface this issue may be too visible for use, unless meshes or foliage are used to cover the seams.
<p />
Each discrete texture in the tile should be well matched, or it should have edge padding to prevent any issues with coordinate error bleeding.  If this is not accounted for and corrected, there may be visible thin tiling lines along the edges of each sub-texture when rendered on the terrain.  The best methods to counter this issue are to either use similar textures in each tile, such as four tarmac variations (eg. basic pavement, pavement with two solid lines, pavement with one solid and one dashed line, and pavement with two dashed line), or to edit the textures so that they have at least one pixel of edge padding.  For example, a 1024x1024 texture would be edge-padded by duplicating the single pixel edge back outward after resizing it to 1022x1022.  When edge-padding is being used, it is necessary to tweak the Constant2Vector values so that a slightly smaller-than-1024 sub-texture area is extracted.  This usually means that the StartX,Y will be slightly larger in value and the EndX,Y will be slightly less in value.  The amount of adjustment will also vary by the TexCoord tiling amount, so no "magic number" tweak values are provided here.  It is by far easier to simply use better matching sub-textures than to spend the time trying to remove strong bleeding lines that are occuring between vastly different sub-textures.
<p />
In this example texture tile there are four 1024x1024 textures packed into a single 2048x2048 2x2 tile image.  This allows for layering rock, dirt, grass and moss onto the terrain using only one texture.
<p />
The imported quadrant texture looks like this.  Be sure to specify the appropriate LODGroup that allows support for the larger 2048x2048 texture size to prevent lower mip levels being used by default.
<p />
<img alt="UE3QuadTex.gif" src="rsrc/Three/TerrainAdvancedTextures/UE3QuadTex.gif" />
<p />
In this example terrain setup, the quadrant texture will be utilized in four discrete Materials, one for each tile.  It is also possible to use the texture tile setup along with other terrain layering methods such as Super Masks to combine the entire terrain layer setup into a single Material system.
<p />
These are the four Materials:
<p />
<img alt="UE3QuadMats.gif" src="rsrc/Three/TerrainAdvancedTextures/UE3QuadMats.gif" />
<p />
If we examine the expressions used in each Material, we find that they are all essentially the same setup with only a few expression value differences to set the sub-texture U/VTiling amount and to specify which sub-texture tile to extract.
<p />
Note that the layer material tiling for the terrain is set by the TextureCoordinate in these Materials and not by the TerrainMaterial.MappingScale property.
<p /> <ul>
<li> TexCoord: specifies the UTiling and VTiling amount of the texture.  Common values may be 4, 8, or 16.
</li> <li> Frac: repeats the fractional part as specified by the TexCoord so that the coordinates are tiled by the sub-texture only.
</li> <li> Constant2Vector: specifies the EndX,Y coordinate of the extracted tile, for a 2x2 tile this should be 1/2 or 0.5.
</li> <li> Constant2Vector: specifies the StartX,Y coordinate of the extracted tile, for a 2x2 tile this will be 0.0 or 0.5 depending on the tile to extract.
</li> <li> TextureSample: specifies the texture tile.
</li></ul>
<p />
Note the only differences are the TexCoord UTiling,VTiling values and the Constant2Vector values that specify the Start X,Y and End X,Y coordinates of the tile to extract.  The materials shown here are for the top-left (0.0,0.0), top-right (0.5,0.0), bottom-left (0.0,0.5), and bottom-right (0.5,0.5) tiles.
<p />
<img alt="UE3QuadMat0.gif" src="rsrc/Three/TerrainAdvancedTextures/UE3QuadMat0.gif" />
<p />
<img alt="UE3QuadMat1.gif" src="rsrc/Three/TerrainAdvancedTextures/UE3QuadMat1.gif" />
<p />
<img alt="UE3QuadMat2.gif" src="rsrc/Three/TerrainAdvancedTextures/UE3QuadMat2.gif" />
<p />
<img alt="UE3QuadMat3.gif" src="rsrc/Three/TerrainAdvancedTextures/UE3QuadMat3.gif" />
<p />
The next step would be to create the necessary TerrainMaterial objects, one for each Material, and the TerrainLayerSetup. <br>
The TerrainMaterial.MappingScale must be set to the size of the terrain in patches, eg. 256 for a 256x256 terrain.  This results in a 1:1 mapping for the TerrainMaterial.
<p />
In this example, the TerrainLayerSetup is using four procedural entries for the four TerrainMaterials, and the Height and Slope properties are set so that the results are various cliff and flatland layer varieties.
<p />
<img alt="UE3QuadTObjs.gif" src="rsrc/Three/TerrainAdvancedTextures/UE3QuadTObjs.gif" />
<p />
The final terrain looks like this:
<p />
<img alt="DGQuadTex.jpg" src="rsrc/Three/TerrainAdvancedTextures/DGQuadTex.jpg" />
<p />
<p />
<h2><a name="1:1 Overlays: Tiling multiple high-resolution textures across the terrain"></a> 1:1 Overlays: Tiling multiple high-resolution textures across the terrain </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
Current video hardware and next-gen game engines support larger texture resolutions such as 2048, 4096 and 8192.  This feature support can be utilized along with the increase in availability and quality of satellite <a href="TerrainsFromDEMs.html" class="twikiLink">DEMs</a> (Digital Elevation Models) and hi-resolution aerial color photos.
<p />
By combining a DEM heightmap with one or more aerial color photos, a realistic terrain system can be created with detailing that can exceed that of the built-in TerrainLayerSetup procedural Height and Slope system.  Using one or more high-resolution aerial color photos can also provide a wider texture variety than simply using four or five discrete textures such as rocks, dirts and grasses.  If the available DEM heightmap and aerial photo is only at 10 or 15 meter or lower spatial resolution, this will still work well for the surrounding terrain such as mountains around the play area.  A two-terrain setup with a lower resolution terrain around the perimeter and a higher resolution terrain in the play area can be constructed to utilize this overlay texturing feature.
<p />
Since each individual terrain actor is only using one 1:1 overlay texture, there is no chance of running out of Texture Samplers, and the resulting terrain rendering is usually faster than a multi-texture weightmap-driven layer setup.
<p />
A medium-resolution DEM heightmap data set for a portion of San Francisco was constructed using in-house software, resampled down to 513x513, and then converted to Unreal G16 format.  The 513x513 heightmap results in a terrain that is 512x512 patches.
<p />
<img alt="DGOverlayDem.gif" src="rsrc/Three/TerrainAdvancedTextures/DGOverlayDem.gif" />
<p />
A high-resolution 17254x15490 aerial color photo was sourced from an online service.  This was then loaded into a standard paint application and cropped to the same location as the DEM heightmap area.  The cropped texture was then resampled to a proper valid power-of-two size for use in UnrealEd, 2048x2048 in this case.  When importing high-resolution textures, be sure to choose the appropriate LODGroup so that the maximum texture mip size is supported.
<p />
<img alt="UE3OverlayTex.jpg" src="rsrc/Three/TerrainAdvancedTextures/UE3OverlayTex.jpg" />
<p />
<small>
<strong>Original photo copyright Geosage.com</strong>
</small>
<p />
A basic Material was created for the texture.  The TextureSample is connected to the Diffuse node.
<p />
A basic TerrainMaterial was created, and the Material assigned to it.  The TerrainMaterial.MappingScale must be set to the size of the terrain in patches, eg. 512 for a 512x512 terrain in our example.  This results in a 1:1 mapping for the TerrainMaterial.
<p />
A basic TerrainLayerSetup was created, and the TerrainMaterial assigned to it.  The TerrainLayerSetup is then assigned to the Terrain actor.
<p />
<img alt="UE3OverlayMat.gif" src="rsrc/Three/TerrainAdvancedTextures/UE3OverlayMat.gif" />
<p />
This example terrain is located at the San Francisco harbor looking inland towards the mountains.
<p />
<img alt="DGOverlay.jpg" src="rsrc/Three/TerrainAdvancedTextures/DGOverlay.jpg" />
<p />
<h3><a name="Expanded Overlay Multi-Tiling"></a> Expanded Overlay Multi-Tiling </h3>
<p />
An expanded version of the overlay technique involves using multiple tiled high-resolution textures, such as a 2x2 layout of 8192x8192 textures for a massive 16384x16384 terrain texturing system.  Using this method allows for very complex and high-resolution terrain texturing that is similar to GIS (Geographic Information Systems) and other real-world terrain visualization.
<p />
A terrain heightmap is sourced from hi-resolution DEM data for the area that we wish to render.  In this example it is resized down to 513x513 for a 512x512 patch terrain.  This heightmap is then converted to G16 format and imported into the terrain through the <a href="TerrainEditorUserGuide.html" class="twikiLink">Terrain Edit</a> dialog.
<p />
One trick to keep in mind is that you can use a high-resolution DEM heightmap as the source for a 1:1 Normal Map to improve the visual detail of the terrain.  For example, if the source DEM data was 2048x2048 with a final in-game terrain of 256x256, the source DEM can be converted to a 2048x2048 Normal Map texture and used in a 1:1 overlay on the terrain resulting in a visual increase in terrain resolution detail.
<p />
<img alt="DGOverlayTileDem.gif" src="rsrc/Three/TerrainAdvancedTextures/DGOverlayTileDem.gif" />
<p />
A high-resolution satellite image of the same area as the heightmap data is then used for an overlay texture.  In this example, a 15 meter image set is used to provide a 13,000x13,000 texture, which is resampled to 8192x8192 and then split into quadrant textures of 4096x4096 each.  Each quadrant texture should have a one-or-more-pixel strip copied from the two inside edges to the two outside edges to remove any seam lines across the terrain.  The 8192x8192 texture could be used as a single Texture Sample in the Material, but that would restrict the terrain to only the newer generation of video adapters.  By using 4096 textures we increase the video hardware support.
<p />
In a similar fashion to creating a Normal Map texture from a high resolution DEM, it is also possible to derive a Normal Map from the high resolution version of the satellite image itself assuming that the image is clear with a light source that is relatively perpendicular to the terrain.
<p />
<img alt="DGOverlayTileTex.jpg" src="rsrc/Three/TerrainAdvancedTextures/DGOverlayTileTex.jpg" />
<p />
The four 4096x4096 textures are then imported into UnrealEd.  They are set to CompressionNoAlpha and a LODGroup that supports 4096 size textures.
<p />
<img alt="UE3OverlayTileTex.gif" src="rsrc/Three/TerrainAdvancedTextures/UE3OverlayTileTex.gif" />
<p />
A <em>quadrant mask</em> texture is then created in paint software that is a 2x2 texture with three black pixels and one white pixel.  This is used for masking to determine where each of the source quadrant textures will be rendered on the terrain.  A white pixel determines that the texture is rendered at that location.  If a larger tiling system was to be implemented, such as a 3x3 or 4x4 tiling, then this mask would be created as required.
<p />
The texture will import as uncompressed since it is only 2x2 and no compression is required.
<p />
In this screenshot the texture is zoomed to a larger size for clarity. <br>
<p />
<img alt="UE3OverlayTileMask.gif" src="rsrc/Three/TerrainAdvancedTextures/UE3OverlayTileMask.gif" />
<p />
The actual Material is a simple set of TextureSamples that have a TexCoord connected to the UVs node to supply the required 2x2 tiling.
<p />
The quadrant mask is then used as the Alpha input to set which quadrant each TextureSample is rendered onto through the LinearInterpolate expressions.  The TexCoords connected to the UVs nodes on the quadrant masks are used to flip the texture appropriately so that the white pixel is in the desired quadrant location.
<p />
<img alt="UE3OverlayTileMat.gif" src="rsrc/Three/TerrainAdvancedTextures/UE3OverlayTileMat.gif" />
<p />
A TerrainMaterial is then created.  Its property for Material.MappingScale is set to the size of the terrain in patches, 512 in this example.  The Material is assigned to the Material.Material property.
<p />
A TerrainLayerSetup is created.  One entry is added to its array, and the TerrainMaterial is assigned to the Materials[0].Material property.
<p />
The TerrainLayerSetup is then assigned to the Layers array in the Terrain actor.
<p />
<img alt="UE3OverlayTileTobj.gif" src="rsrc/Three/TerrainAdvancedTextures/UE3OverlayTileTobj.gif" />
<p />
This example terrain is of the Hawaiian island Kauai.  The heightmap is 513x513, the tile overlay material is four 4096x4096 textures, the normal map is 4096x4096 derived from the 8192x8192 source overlay texture.
<p />
<img alt="DGOverlayTile.jpg" src="rsrc/Three/TerrainAdvancedTextures/DGOverlayTile.jpg" />
<p />
</noautolink>
<p />
<p />
<p />
<p />
<p />
<p />


<!-- BEGIN UE4 NOTICE -->



<div id="version_message" style="display:none;">

    <div style="position:fixed;top:0px;left:0px;width:100%;height:100%;background:#000;opacity:0.5;">

    </div>

    <div style="position:fixed;top:50%;left:50%;margin:-70px 0px 0px -240px;background:#FFF;border-radius:6px;width:480px;box-shadow:0px 5px 30px -5px rgba(0,0,0,0.9);">

        <div style="font-size:16px;font-weight:bold;background: url(rsrc/Three/warning.png) no-repeat scroll 5px 5px;padding:4px 10px 5px 25px;height:21px;width:440px;">

            Important!

        </div>

        <div style="font-size:11px;padding:5px 10px 10px;width:460px;">

            <p>You are viewing documentation for the <strong>Unreal Development Kit (UDK)</strong>.</p>



            <p>If you are looking for the Unreal Engine 4 documentation, please visit the <a style="color:#000;" href="https://docs.unrealengine.com">Unreal Engine 4 Documentation</a> site.</p>

        </div>

        <div style="height:20px;padding:4px;margin:6px;border-top:1px solid #a0a0a0;">

            <form onsubmit="return closeVersionMessage();">

                <input type="checkbox" id="dismiss" value="dismiss" />

                <label for="dsimiss">Don't show me this again</label>

                <input type="submit" value="Close" style="cursor:pointer;float:right;width:60px;color:#f0f0f0;font-weight:bold;background:#882222;height:24px;padding:2px 3px 3px;text-align:center;border:1px outset #000;" />

            </form>

        </div>

    </div>

</div>



<script type="text/javascript">

    window.onload = function () {

        LoadVersionMessage();

    }



    function LoadVersionMessage()

    {

        var showMessage = "false";
        if(showMessage != "false")

        {

            showVersionMessage();

        }

    }



    function showVersionMessage()

    {

        var message = document.getElementById("version_message");

        if(message)

        {

            message.style.display = "block";

        }

    }



    function closeVersionMessage() {

        var dismiss = document.getElementById("dismiss");

        var message = document.getElementById("version_message");

        if (message) {

            message.style.display = "none";

        }

        if (dismiss.checked) {

            eraseCookie("doc_version_message");

            createCookie("doc_version_message", "false", 365);

            dismiss.checked = false;

        }

        return false;

    }



    function createCookie(name, value, days) {

        if (days) {

            var date = new Date();

            date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));

            var expires = "; expires=" + date.toGMTString();

        }

        else var expires = "";

        document.cookie = name + "=" + value + expires + "; path=/";

    }



    function readCookie(name) {

        var nameEQ = name + "=";

        var ca = document.cookie.split(';');

        for (var i = 0; i < ca.length; i++) {

            var c = ca[i];

            while (c.charAt(0) == ' ') c = c.substring(1, c.length);

            if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);

        }

        return null;

    }



    function eraseCookie(name) {

        createCookie(name, "", -1);

    }

</script>



<!-- END UE4 NOTICE -->



</div></div><div id="footer"><div style="BACKGROUND-COLOR: transparent; margin: 0; padding: 0; width: 100%;"><div>&nbsp;</div><div style="float: left; text-align: left; vertical-align: bottom; width: 50%;"><a href="http://www.videogamevoters.org"><img src="rsrc/vgvn.jpg" border="0" width="234" height="60" alt="Video Game Voters Network" /></a></div><div style="float: right; text-align: right; vertical-align: bottom; width: 50%;">Copyright &copy; 2001-2012 <a href="http://www.epicgames.com" target="_top">Epic Games, Inc.</a><br /><a href="../Main/TermsAndConditions.html" class="twikiLink">Terms and Conditions</a><br /><a href="http://epicgames.com/privacynotice" target="_top">Privacy Notice</a></div></div></div></div>
<p />
</html></body>
