<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
	"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title> UDK | CreatingShadeMaps    </title>

<style type="text/css" media="all">@import "rsrc/twiki_webs.css";</style>
<style type="text/css" media="all">@import "rsrc/udn_new.css";</style>
<link rel="icon" href="rsrc/Three/WebPreferences/favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="rsrc/Three/WebPreferences/favicon.ico" type="image/x-icon" />


<!-- view.static_udn3.tmpl  -->
<script language="JavaScript" type="text/javascript" src="rsrc/udn.js"></script>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

</head>
<p />
<body id="webbgThree">
<p />

<p />
<div id="webThree"><div id="head">
<!--
<div class="header">
 -->
<div style="background: url(/pub/webbg_udn.jpg); background-repeat: no-repeat; height:140px; width: 100%;" >
<!--
<div style="background: transparent url(/pub/udn_header_bg.jpg); background-repeat: repeat-x; height:140px; width: 100%; margin-left: 991px;">
 -->
<p />
<div id="nav">
<ul class="nav">
<font color=black>|</font>&nbsp;&nbsp;<li class=nav_Three><a href="../Main/WebHome.html" class="twikiLink">Main</a></li><font color=black>|</font><li class=nav_Three><a href="../Two/WebHome.html" class="twikiLink">UnrealEngine2</a></li><font color=black>|</font><li class=nav_Three><a href="WebHome.html" class="twikiLink">UnrealEngine3</a></li><font color=black>|</font><li class=nav_Three><a href="https://docs.unrealengine.com" class="twikiLink">UnrealEngine4</a></li><font color=black>|</font><li class=nav_Three><a href="../Main/BusinessAndLegal.html" class="twikiLink">Business &amp; Legal</a></li><font color=black>|</font>
</ul><br><br><br>
</div>
</div>
</div> <!-- end head -->
<div id="pagedefault">
<div id="maincol">
<div id="tool">
<div id="tooltop">UDN</div>
<div id="tooltext" style="padding: 10px 10px 10px 10px;">
Search public documentation: <br>
<form ACTION="/search/index.php" METHOD="GET" NAME="main" ID="main">
<input TYPE="TEXT" NAME="q" SIZE="15" STYLE="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: xx-small;">
<input TYPE="SUBMIT" VALUE="Search" STYLE="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: xx-small;"><br>
</form>
</div>
<div id="toolband">CreatingShadeMaps  </b></div>
<div id="tooltext">
<a href="CreatingShadeMapsJP.html" class="twikiLink">日本語訳</a><br><a href="CreatingShadeMapsCH.html" class="twikiLink">中国翻译</a><br><a href="CreatingShadeMapsKR.html" class="twikiLink">한국어</a><br>

<!-- Three/CreatingShadeMaps -->
<hr size="1" noshade="noshade" />
Interested in the Unreal Engine? <br>
Visit the <a href="http://www.unrealtechnology.com" target="_top">Unreal Technology</a> site.<br>
<br>
Looking for jobs and company info? <br>
Check out the <a href="http://www.epicgames.com" target="_top">Epic games</a> site.<br>
<br>
Questions about support via UDN? <br>
Contact the <a href="../Main/ContactUDNStaff.html" class="twikiLink">UDN Staff</a> <br>
<br>
</div> <!-- end toolbox content -->
<div id="toolbottom"></div>
</div> <!-- end tool -->
<p />
<noautolink>
<p />
<div style="padding:0px 0px 0px 4px;font:10px Verdana;">
<b><a href="WebHome.html" class="twikiLink">UE3 Home</a></b> &gt; <b><a href="MaterialsAndTexturesHome.html" class="twikiLink">Materials &amp; Textures</a></b> &gt; Techniques for Creating Shade Maps <br/>
<b><a href="WebHome.html" class="twikiLink">UE3 Home</a></b> &gt; <b><a href="TextureArtistHome.html" class="twikiLink">Texture Artist</a></b> / <b><a href="CharacterArtistHome.html" class="twikiLink">Character Artist</a></b> / <b><a href="EnvironmentArtistHome.html" class="twikiLink">Environment Artist</a></b> &gt; Techniques for Creating Shade Maps
</div>
<hr size="1" noshade="noshade">
<h1><a name="Techniques for Creating Shade Maps"></a> Techniques for Creating Shade Maps </h1>
<hr size="1" noshade="noshade">
<p />
<div class="twikiToc"> <ul>
<li> <a href="CreatingShadeMaps.html#Techniques for Creating Shade Maps"> Techniques for Creating Shade Maps</a> <ul>
<li> <a href="CreatingShadeMaps.html#Overview"> Overview</a>
</li> <li> <a href="CreatingShadeMaps.html#Process"> Process</a> <ul>
<li> <a href="CreatingShadeMaps.html#Step 1"> Step 1</a>
</li> <li> <a href="CreatingShadeMaps.html#Step 2"> Step 2</a>
</li> <li> <a href="CreatingShadeMaps.html#Step 3"> Step 3</a>
</li> <li> <a href="CreatingShadeMaps.html#Step 4"> Step 4</a>
</li> <li> <a href="CreatingShadeMaps.html#Step 5"> Step 5</a>
</li> <li> <a href="CreatingShadeMaps.html#Step 6"> Step 6</a>
</li> <li> <a href="CreatingShadeMaps.html#Step 7"> Step 7</a>
</li> <li> <a href="CreatingShadeMaps.html#Step 8"> Step 8</a>
</li> <li> <a href="CreatingShadeMaps.html#Step 9"> Step 9</a>
</li> <li> <a href="CreatingShadeMaps.html#Step 10"> Step 10</a>
</li> <li> <a href="CreatingShadeMaps.html#Step 11"> Step 11</a>
</li> <li> <a href="CreatingShadeMaps.html#Step 12"> Step 12</a>
</li> <li> <a href="CreatingShadeMaps.html#Step 13"> Step 13</a>
</li> <li> <a href="CreatingShadeMaps.html#Step 14"> Step 14</a>
</li></ul>
</li></ul>
</li></ul>
</div>
<p />
<h2><a name="Overview"></a> Overview </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
Here is a neat little trick you can use to make good shade maps; its done using Ambient Occlusion shader as an unlit diffuse texure in Autodesk's <a href="http://www.autodesk.com/mentalray" target="_top">MentalRay</a>, and grabbing it with Max's Render to Texture tools. It works quite well, and is pretty quick to make.
<p />
<p />
<h2><a name="Process"></a> Process </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
<h3><a name="Step 1"></a> Step 1 </h3>
<p />
First, you need to assign MentalRay as your Renderer.
<p />
Open your renderer settings, and go to the Common tab, and open the Assign Renderer tab. Click the ... button, and pick Mental Ray.
<p />
<img alt="IMAG000.JPG" src="rsrc/Three/CreatingShadeMaps/IMAG000.JPG" />
<p />
<h3><a name="Step 2"></a> Step 2 </h3>
<p />
Now, click the Processing tab, and enable the Material Overide. Click, and drag the Material into the Material Editor, and make it an Instance.
<p />
<img alt="IMAG001.JPG" src="rsrc/Three/CreatingShadeMaps/IMAG001.JPG" />
<p />
<h3><a name="Step 3"></a> Step 3 </h3>
<p />
Now, click the Diffuse tab, and pick Ambient/Reflective Occlusion
<p />
<img alt="IMAG002.JPG" src="rsrc/Three/CreatingShadeMaps/IMAG002.JPG" />
<p />
<h3><a name="Step 4"></a> Step 4 </h3>
<p />
This will pop up the Ambient Occlusion shader settings.
You can change the samples from 16 to 25 to 50 depending on how smooth of a shade map that you want. Higher numbers take longer.
<p />
Now, we need to tell it to exclude the lowpoly model from the calculation, otherwise it will cat a shadow on the highpoly object wherever it protrudes through it. ( You can try setting the low poly to not cast shadows, but that does not seem to work). We need to set the Incl./Excl. Object ID to the ID of the low Poly. Negative values make it exclude, so set it to -30.
<p />
<img alt="IMAG003.JPG" src="rsrc/Three/CreatingShadeMaps/IMAG003.JPG" />
<p />
<h3><a name="Step 5"></a> Step 5 </h3>
<p />
Click the up arrow to go to the top of the material tree.  Then set the Self-Illumination value to 100.
<p />
<img alt="IMAG004.JPG" src="rsrc/Three/CreatingShadeMaps/IMAG004.JPG" />
<p />
<p />
<h3><a name="Step 6"></a> Step 6 </h3>
<p />
Now we need to set the LowPoly models Object ID to the one we set to be Excluded in the Ambient Occlusion shader, which was 30.
<p />
You do this by right clicking on the LowPoly model and going to its properties. Under G-Buffer, set the Object Channel to 30.
<p />
<img alt="IMAG005.JPG" src="rsrc/Three/CreatingShadeMaps/IMAG005.JPG" />
<p />
<h3><a name="Step 7"></a> Step 7 </h3>
<p />
Now we need set up the scene for the Render to Texture Process.
<p />
Select the LowPoly model, and apply a projection modifier.
<p />
Under Geometry Selection, hit Pick List to select your HighPoly model.
<p />
<img alt="IMAG006.JPG" src="rsrc/Three/CreatingShadeMaps/IMAG006.JPG" />
<p />
<h3><a name="Step 8"></a> Step 8 </h3>
<p />
You can make a selection set of my HighPoly model, because it makes adding them to the Projection Modifier much easier. So, under Selection Set, pick your HighPoly set, which in this case is Chest_High.
<p />
<img alt="IMAG007.JPG" src="rsrc/Three/CreatingShadeMaps/IMAG007.JPG" />
<p />
<h3><a name="Step 9"></a> Step 9 </h3>
<p />
After adding the HighPoly Models, the cage goes crazy.
<p />
You can fix this by hitting the rest button under the Cage settings.
<p />
Now you can use the Push value to see what trace distance you need. You don't have to use the cage, rather just manually set the trace distance inside the render texture options, this gives you the closest results to SHTools or newer versions of 3D Studio Max.
<p />
<img alt="IMAG008.JPG" src="rsrc/Three/CreatingShadeMaps/IMAG008.JPG" />
<p />
<h3><a name="Step 10"></a> Step 10 </h3>
<p />
Hit the 0 (zero) key to bring up the Render To Texture tool.
<p />
Click Enable under Projection Mapping.
<p />
Set Padding to 4 or so.
<p />
Make sure Use Existion Mapping is checked.
<p />
Click Add under Output, and Choose DiffuseMap.
<p />
<img alt="IMAG009.JPG" src="rsrc/Three/CreatingShadeMaps/IMAG009.JPG" />
<p />
<h3><a name="Step 11"></a> Step 11 </h3>
<p />
Hit the Options button, and uncheck Use Cage, if you want it to work like SHTools or newer versions of 3D Studio Max, otherwise it will use your Projection Cage's Push distance. Offset is the trace distance you want.
<p />
<img alt="IMAG013.JPG" src="rsrc/Three/CreatingShadeMaps/IMAG013.JPG" />
<p />
<h3><a name="Step 12"></a> Step 12 </h3>
<p />
Change the output path and filename if you would like.
<p />
Set the Resolution.
<p />
Make Sure you check Shadows, or you will get a white image.
<p />
<img alt="IMAG010.JPG" src="rsrc/Three/CreatingShadeMaps/IMAG010.JPG" />
<p />
<h3><a name="Step 13"></a> Step 13 </h3>
<p />
Press the magic Render button.
<p />
<img alt="IMAG012.JPG" src="rsrc/Three/CreatingShadeMaps/IMAG012.JPG" />
<p />
<h3><a name="Step 14"></a> Step 14 </h3>
<p />
The final shade map, great for texturing. ;)
<p />
Enjoy!
<p />
<img alt="IMAG011.JPG" src="rsrc/Three/CreatingShadeMaps/IMAG011.JPG" />
<p />
</noautolink>
<p />
<p />
<p />
<p />
<p />
<p />


<!-- BEGIN UE4 NOTICE -->



<div id="version_message" style="display:none;">

    <div style="position:fixed;top:0px;left:0px;width:100%;height:100%;background:#000;opacity:0.5;">

    </div>

    <div style="position:fixed;top:50%;left:50%;margin:-70px 0px 0px -240px;background:#FFF;border-radius:6px;width:480px;box-shadow:0px 5px 30px -5px rgba(0,0,0,0.9);">

        <div style="font-size:16px;font-weight:bold;background: url(rsrc/Three/warning.png) no-repeat scroll 5px 5px;padding:4px 10px 5px 25px;height:21px;width:440px;">

            Important!

        </div>

        <div style="font-size:11px;padding:5px 10px 10px;width:460px;">

            <p>You are viewing documentation for the <strong>Unreal Development Kit (UDK)</strong>.</p>



            <p>If you are looking for the Unreal Engine 4 documentation, please visit the <a style="color:#000;" href="https://docs.unrealengine.com">Unreal Engine 4 Documentation</a> site.</p>

        </div>

        <div style="height:20px;padding:4px;margin:6px;border-top:1px solid #a0a0a0;">

            <form onsubmit="return closeVersionMessage();">

                <input type="checkbox" id="dismiss" value="dismiss" />

                <label for="dsimiss">Don't show me this again</label>

                <input type="submit" value="Close" style="cursor:pointer;float:right;width:60px;color:#f0f0f0;font-weight:bold;background:#882222;height:24px;padding:2px 3px 3px;text-align:center;border:1px outset #000;" />

            </form>

        </div>

    </div>

</div>



<script type="text/javascript">

    window.onload = function () {

        LoadVersionMessage();

    }



    function LoadVersionMessage()

    {

        var showMessage = "false";
        if(showMessage != "false")

        {

            showVersionMessage();

        }

    }



    function showVersionMessage()

    {

        var message = document.getElementById("version_message");

        if(message)

        {

            message.style.display = "block";

        }

    }



    function closeVersionMessage() {

        var dismiss = document.getElementById("dismiss");

        var message = document.getElementById("version_message");

        if (message) {

            message.style.display = "none";

        }

        if (dismiss.checked) {

            eraseCookie("doc_version_message");

            createCookie("doc_version_message", "false", 365);

            dismiss.checked = false;

        }

        return false;

    }



    function createCookie(name, value, days) {

        if (days) {

            var date = new Date();

            date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));

            var expires = "; expires=" + date.toGMTString();

        }

        else var expires = "";

        document.cookie = name + "=" + value + expires + "; path=/";

    }



    function readCookie(name) {

        var nameEQ = name + "=";

        var ca = document.cookie.split(';');

        for (var i = 0; i < ca.length; i++) {

            var c = ca[i];

            while (c.charAt(0) == ' ') c = c.substring(1, c.length);

            if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);

        }

        return null;

    }



    function eraseCookie(name) {

        createCookie(name, "", -1);

    }

</script>



<!-- END UE4 NOTICE -->



</div></div><div id="footer"><div style="BACKGROUND-COLOR: transparent; margin: 0; padding: 0; width: 100%;"><div>&nbsp;</div><div style="float: left; text-align: left; vertical-align: bottom; width: 50%;"><a href="http://www.videogamevoters.org"><img src="rsrc/vgvn.jpg" border="0" width="234" height="60" alt="Video Game Voters Network" /></a></div><div style="float: right; text-align: right; vertical-align: bottom; width: 50%;">Copyright &copy; 2001-2012 <a href="http://www.epicgames.com" target="_top">Epic Games, Inc.</a><br /><a href="../Main/TermsAndConditions.html" class="twikiLink">Terms and Conditions</a><br /><a href="http://epicgames.com/privacynotice" target="_top">Privacy Notice</a></div></div></div></div>
<p />
</html></body>
