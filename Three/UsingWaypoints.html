<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
	"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title> UDK | UsingWaypoints    </title>

<style type="text/css" media="all">@import "rsrc/twiki_webs.css";</style>
<style type="text/css" media="all">@import "rsrc/udn_new.css";</style>
<link rel="icon" href="rsrc/Three/WebPreferences/favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="rsrc/Three/WebPreferences/favicon.ico" type="image/x-icon" />


<!-- view.static_udn3.tmpl  -->
<script language="JavaScript" type="text/javascript" src="rsrc/udn.js"></script>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

</head>
<p />
<body id="webbgThree">
<p />

<p />
<div id="webThree"><div id="head">
<!--
<div class="header">
 -->
<div style="background: url(/pub/webbg_udn.jpg); background-repeat: no-repeat; height:140px; width: 100%;" >
<!--
<div style="background: transparent url(/pub/udn_header_bg.jpg); background-repeat: repeat-x; height:140px; width: 100%; margin-left: 991px;">
 -->
<p />
<div id="nav">
<ul class="nav">
<font color=black>|</font>&nbsp;&nbsp;<li class=nav_Three><a href="../Main/WebHome.html" class="twikiLink">Main</a></li><font color=black>|</font><li class=nav_Three><a href="../Two/WebHome.html" class="twikiLink">UnrealEngine2</a></li><font color=black>|</font><li class=nav_Three><a href="WebHome.html" class="twikiLink">UnrealEngine3</a></li><font color=black>|</font><li class=nav_Three><a href="https://docs.unrealengine.com" class="twikiLink">UnrealEngine4</a></li><font color=black>|</font><li class=nav_Three><a href="../Main/BusinessAndLegal.html" class="twikiLink">Business &amp; Legal</a></li><font color=black>|</font>
</ul><br><br><br>
</div>
</div>
</div> <!-- end head -->
<div id="pagedefault">
<div id="maincol">
<div id="tool">
<div id="tooltop">UDN</div>
<div id="tooltext" style="padding: 10px 10px 10px 10px;">
Search public documentation: <br>
<form ACTION="/search/index.php" METHOD="GET" NAME="main" ID="main">
<input TYPE="TEXT" NAME="q" SIZE="15" STYLE="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: xx-small;">
<input TYPE="SUBMIT" VALUE="Search" STYLE="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: xx-small;"><br>
</form>
</div>
<div id="toolband">UsingWaypoints  </b></div>
<div id="tooltext">
<a href="UsingWaypointsJP.html" class="twikiLink">日本語訳</a><br><a href="UsingWaypointsCH.html" class="twikiLink">中国翻译</a><br><a href="UsingWaypointsKR.html" class="twikiLink">한국어</a><br>

<!-- Three/UsingWaypoints -->
<hr size="1" noshade="noshade" />
Interested in the Unreal Engine? <br>
Visit the <a href="http://www.unrealtechnology.com" target="_top">Unreal Technology</a> site.<br>
<br>
Looking for jobs and company info? <br>
Check out the <a href="http://www.epicgames.com" target="_top">Epic games</a> site.<br>
<br>
Questions about support via UDN? <br>
Contact the <a href="../Main/ContactUDNStaff.html" class="twikiLink">UDN Staff</a> <br>
<br>
</div> <!-- end toolbox content -->
<div id="toolbottom"></div>
</div> <!-- end tool -->
<p />
<noautolink>
<p />
<div style="padding:0px 0px 0px 4px;font:10px Verdana;">
<b><a href="WebHome.html" class="twikiLink">UE3 Home</a></b> &gt; <b><a href="AIAndNavigationHome.html" class="twikiLink">AI &amp; Navigation</a></b> &gt; Using Waypoints
</div>
<hr size="1" noshade="noshade">
<h1><a name="Using Waypoints"></a> Using Waypoints </h1>
<hr size="1" noshade="noshade">
<p />
<div class="twikiToc"> <ul>
<li> <a href="UsingWaypoints.html#Using Waypoints"> Using Waypoints</a> <ul>
<li> <a href="UsingWaypoints.html#Overview"> Overview</a>
</li> <li> <a href="UsingWaypoints.html#Basic Pathing"> Basic Pathing</a>
</li> <li> <a href="UsingWaypoints.html#Building Paths"> Building Paths</a> <ul>
<li> <a href="UsingWaypoints.html#Viewing Built Paths"> Viewing Built Paths</a>
</li> <li> <a href="UsingWaypoints.html#Path Coloring"> Path Coloring</a>
</li></ul>
</li> <li> <a href="UsingWaypoints.html#Debugging Paths"> Debugging Paths</a>
</li> <li> <a href="UsingWaypoints.html#Advanced Pathing"> Advanced Pathing</a> <ul>
<li> <a href="UsingWaypoints.html#Doors"> Doors</a>
</li> <li> <a href="UsingWaypoints.html#JumpPads"> JumpPads</a>
</li> <li> <a href="UsingWaypoints.html#JumpDests"> JumpDests</a>
</li> <li> <a href="UsingWaypoints.html#Lifts"> Lifts</a>
</li> <li> <a href="UsingWaypoints.html#Ladders"> Ladders</a>
</li> <li> <a href="UsingWaypoints.html#VolumePathNode"> VolumePathNode</a>
</li> <li> <a href="UsingWaypoints.html#Cover Links"> Cover Links</a>
</li></ul>
</li> <li> <a href="UsingWaypoints.html#Modifying Path Sizes (for Programmers)"> Modifying Path Sizes (for Programmers)</a>
</li></ul>
</li></ul>
</div>
<p />
<h2><a name="Overview"></a> Overview </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
This document describes how to set up navigation networks in a level so that NPCs can efficiently navigate to any point in the level. The intended audience is level designers. For a more technical discussion, refer to <a href="WaypointsTechnicalGuide.html" class="twikiLink">WaypointsTechnicalGuide</a>.
<p />
<p />
<h2><a name="Basic Pathing"></a> Basic Pathing </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
Level designers place <code><b>PathNodes</b></code> (a subclass of <code><b>NavigationPoint</b></code>) in their levels on surfaces which NPCs can walk on, or in volumes which NPCs can swim in. <code><b>PlayerStarts</b></code> are also <code><b>NavigationPoints</b></code>, and they perform the same navigation function. In addition, <code><b>InventorySpots</b></code> are automatically placed at the location of every pickup in the level when building paths (they are invisible, but you will be able to see path connections to them).
<p />
For <code><b>PathNodes</b></code> to connect, they should be less than <strong>1200</strong> Unreal units apart (programmers can modify <strong>MAXPATHDIST</strong> in <code>nPath.h</code> to change this value). Having two <code><b>NavigationPoints</b></code> too close together (overlapping) can cause AI navigation problems and should be avoided. When placing <code><b>PathNodes</b></code>, the goal is to make sure that every area of the level is covered by a <code><b>PathNode</b></code> or some other <code><b>NavigationPoint</b></code>. An area is covered if an NPC could walk to some <code><b>PathNode</b></code> less than 1200 units away completely unobstructed (i.e. without having to step around anything).
<p />
<img alt="NavigationAI.gif" src="rsrc/Three/UsingWaypoints/NavigationAI.gif" />
<p />
<p />
<h2><a name="Building Paths"></a> Building Paths </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
After placing <code><b>PathNodes</b></code>, the level designer can build the connections between <code><b>NavigationPoints</b></code> by selecting <em>AI Paths</em> from the <em>Build</em> menu (or by doing a full rebuild by selecting <em>Rebuild All</em> from the <em>Build</em> menu).  The range of character sizes for which paths are built are determined by the PathSizes array of the Scout class being used to build paths (defined by the ScoutClassName ini entry in the [Engine.Engine] section of your Engine.ini file).
<p />
Once a level has a large number of paths, it can take a while to rebuild all the paths. To tweak path placement, use the <em>Build Changed Paths</em> button in the <em>Build Options</em> menu. This will only rebuild paths between <code><b>NavigationPoints</b></code> which have been added, removed, or moved. Before saving and playing the level, however, a full path rebuild is required.
<p />
<h3><a name="Viewing Built Paths"></a> Viewing Built Paths </h3>
<p />
Once paths have been built, they can be seen in the various level view windows by using the <em>Show Paths</em> option flag, which can be found on the <em>Toggle Show Flags</em> menu in any viewport.
<p />
Paths will be displayed as lines from one <code><b>NavigationPoint</b></code> to another. If NPCs can traverse the path in either direction, there will be two lines, with an arrowhead pointing in each direction. Otherwise, the line will show with an arrowhead in which direction the path can be traversed.
<p />
Even if the NPCs using the paths are small, it is always better to tweak the <code><b>PathNode</b></code> positions to make the connecting paths as wide as possible. NPCs will smoothly round corners, or strafe back and forth within a path, so larger paths will result in more natural looking movement.
<p />
<h3><a name="Path Coloring"></a> Path Coloring </h3>
<p />
Once built, paths will be displayed in various colors, indicating important information about the path. The default path coloring of the navigation graph edges is defined as follows:
<p /> <ul>
<li> <strong>Orange</strong> - Flying path, narrow
</li> <li> <strong>Light Orange</strong> - Flying path, wide
</li> <li> <strong>Light Purple</strong> - requires high jump (higher than normal jump capability)
</li> <li> <strong>Blue</strong> - narrow path
</li> <li> <strong>Green</strong> - normal width
</li> <li> <strong>White</strong> - wide path
</li> <li> <strong>Pink</strong> - very wide path
</li> <li> <strong>Yellow</strong> - forced path
</li> <li> <strong>Purple</strong> - "advanced" path (requires "intelligence" to be used)
</li> <li> <strong>Red</strong> - "one-way" path (i.e. there is a reachspec going from node A-&gt;B but not B-&gt;A) (NOTE: in recent builds it was changed to red-dashed to make one way situations easier to spot.)
</li></ul>
<p />
<p />
<h2><a name="Debugging Paths"></a> Debugging Paths </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
After building paths, a window may pop up in the editor with a list of pathing errors and warnings. Click on an error to take you to the offending NavigationPoint. The window can also be accessed by selecting <em>Check map for errors...</em> on the <em>Tools</em> menu.
<p />
If an AI NPC seems confused or is doing something funky, the following console commands are available:
<p /> <ul>
<li> <code>Viewclass Pawn</code> - to view the AI NPC in question.
</li> <li> <code>ShowDebug</code> - to see what the AI NPC is thinking and the path it is following.
</li> <li> <code>RememberSpot</code> - to mark a location when check navigation paths while in the level. Then, using <code>ShowDebug</code> (without viewing something else) will show you a continually updated path to the marked location.
</li></ul>
<p />
See the <a href="MapErrors.html" class="twikiLink">Map Errors</a> page for more descriptions of possible map check errors.
<p />
<p />
<h2><a name="Advanced Pathing"></a> Advanced Pathing </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
<h3><a name="Doors"></a> Doors </h3>
<p />
<code><b>Door</b></code> <code><b>NavigationPoints</b></code> should be placed in conjunction with any <code><b>Mover</b></code> that acts as a door (based on its position, it allows or blocks movement between two areas). The <code><b>Door</b></code> should be placed in the center of the affected area (typically, in the middle of the actual static mesh used for the door - but low enough to touch the ground). There are also several important properties of a <code><b>Door</b></code> <code><b>NavigationPoint</b></code> that should be updated as needed:
<p /> <ul>
<li> <strong>DoorTag</strong> - the tag of the <code><b>Mover</b></code> with which this <code><b>Door</b></code> is associated.
</li> <li> <strong>DoorTrigger</strong> - if the <code><b>Door</b></code> is triggered, this is the tag of the trigger actor which will open the <code><b>Door</b></code>.
</li> <li> <strong>bInitiallyClosed</strong> - whether the default state of the <code><b>Mover</b></code> allows movement (if <em>false</em>), or prevents it (if <em>true</em>, the default value).
</li> <li> <strong>bBlockedWhenClosed</strong> - if the <code><b>Mover</b></code> is closed, there is no way for the NPC to open it (<em>false</em> by default).
</li></ul>
<p />
<code><b>Movers</b></code> now have the <strong>bAutoDoor</strong> property. If set to true, a <code><b>Door</b></code> <code><b>PathNode</b></code> is automatically generated for that <code><b>Mover</b></code>. This should work for most <code><b>Doors</b></code>.
<p />
<h3><a name="JumpPads"></a> JumpPads </h3>
<p />
<code><b>JumpPads</b></code> will throw any <code><b>Pawn</b></code> touching them in a specified direction. <code><b>JumpPads</b></code> are set up by specifying a destination <code><b>PathNode</b></code> in the first entry of the <strong>ForcedPaths[]</strong> array property of the <code><b>JumpPad</b></code>. The appropriate jump velocity is automatically calculated when paths are rebuilt. The <strong>JumpModifier</strong> vector property of the <code><b>JumpPad</b></code> can be set if for any reason the automatically generated velocity is problematic.
<p />
<h3><a name="JumpDests"></a> JumpDests </h3>
<p />
<code><b>JumpDests</b></code> should be used instead of <code><b>PathNodes</b></code> at any spot that is too high to jump up to, but is linked to paths below it. <code><b>JumpSpots</b></code> will be used by NPCs in low gravity, or if they have some kind of jump boost. The path from which the bot should jump to the <code><b>JumpSpot</b></code> should have the <code><b>JumpSpot</b></code> in one of its <strong>ForcedPath[]</strong> array property entries.
<p />
<h3><a name="Lifts"></a> Lifts </h3>
<p />
A <code><b>Mover</b></code> used as a lift should never use the <strong>BumpOpenTimed</strong> state (use <strong>StandOpenTimed</strong> instead). <code><b>Movers</b></code> used as <code><b>Lifts</b></code> have two types of <code><b>NavigationPoints</b></code> associated with them. A <code><b>LiftCenter</b></code> should be placed on the lift at its center. A <code><b>LiftExit</b></code> should be placed at each exit from the <code><b>Lift</b></code> (but far enough away so that an NPC standing there will not interfere with the <code><b>Lift</b></code>). Both the <code><b>LiftCenter</b></code> and <code><b>LiftExits</b></code> have a <strong>LiftTag</strong> property which must be set to the tag of the <code><b>Mover</b></code>. In addition, if the lift is triggered, put the tag of the triggering actor in the <strong>LiftTrigger</strong> property of the <code><b>LiftCenter</b></code>. <code><b>LiftExits</b></code> also have an optional property, <strong>SuggestedKeyFrame</strong>, which can be set to the keyframe number of the mover when the <code><b>LiftExit</b></code> can be used. This may improve navigation by NPCs in some situations.
<p />
<h3><a name="Ladders"></a> Ladders </h3>
<p />
<code><b>LadderVolumes</b></code> must be oriented to face the wall being climbed (by adjusting their <strong>WallDir</strong> property, which is displayed as a directional arrow when the <code><b>LadderVolume</b></code> is selected). In most cases, level designers can allow Ladder <code><b>NavigationPoints</b></code> to be automatically added when paths are built, at the top and bottom of the <code><b>LadderVolume</b></code>. However, if there are any problems with the automatically placed Ladders, level designers can manually place the Ladders after setting the <code><b>LadderVolume</b></code> <strong>bAutoPath</strong> property to <em>false</em>. The Ladder centers must be within the <code><b>LadderVolume</b></code>. The <code><b>LadderVolume</b></code> should touch the floor at its bottom, and poke over the edge at the top by at least the height of the largest NPC using the Ladder.
<p />
<p />
<h3><a name="VolumePathNode"></a> VolumePathNode </h3>
<p />
VolumePathNodes are useful for supporting navigation through a volume, for example when swimming or flying.  A VolumePathNode's collision cylinder describes a navigable volume.  During path building, the collision cylinder size is adjusted from the initial radius and height specified by the level designer (using the StartingRadius and StartingHeight properties) until an obstruction is reached.  It's worthwhile to adjust the position (starting from about at the mid point of the navigable region) and the starting cylinder size of the VolumePathNode to achieve best results.  VolumePathNodes will connect to other overlapping VolumePathNodes, as well as NavigationPoints within their volume.  In addition, NavigationPoints directly below the VolumePathNode cylinder will also be tested for connectivity during path building.  UTGame vehicle levels, such as VCTF-Sandstorm, demonstrate the use of VolumePathNodes.
<p />
<h3><a name="Cover Links"></a> Cover Links </h3>
<p />
<code><b>CoverLinks</b></code> were developed for <a href="https://udn.epicgames.com/Three/GearsOfWar" class="restricted" class="restricted" class="twikiLink">Gears of War</a>. The following settings are used: <ul>
<li> <strong>bCircular</strong> = check this to make circular cover, ie cover around a cylinder. Usually done with two cover nodes located on either side of the cylinder, turned to point at each other.
</li> <li> <strong>bClaimAllSlots</strong> = if an AI gets in cover here, no other AI will attempt to take cover at this spot.
</li> <li> <strong>MaxFireLinkDist</strong> = the max distance at which the cover slots will query other cover slots in order to create AI fire links between them (tells the Gears AI where they can shoot while in cover there).
</li> <li> <strong>bCanPopUp</strong> = shows the designer if the slot thinks an actor should be able to stand up and shoot from here.
</li> <li> <strong>bAllowPopUp</strong> = set this flag if you want actors to be able to stand up and shoot from here.
</li> <li> <strong>bAllowMantle</strong> = set this flag if you want actors to be able to climb over this cover.
</li> <li> <strong>bAllowCoverslip</strong> = set this flag if you want actors to be able to slip around this cover (only works on edges).
</li> <li> <strong>bAllowSwatTurn</strong> = set this flag if you want actors to be able to perform a swat turn to or from this piece of cover (again only works on edges).
</li></ul>
<p />
Regarding slip vs. swat, in <a href="https://udn.epicgames.com/Three/GearsOfWar" class="restricted" class="restricted" class="twikiLink">Gears of War</a> a cover slip means quickly running forward around the edge of a piece of cover. A swat turn is quickly flipping right or left across an open space, such as a doorway.
<p />
Please understand that the cover system was created with <a href="https://udn.epicgames.com/Three/GearsOfWar" class="restricted" class="restricted" class="twikiLink">Gears of War</a> assets and gameplay in mind, and thus may not be 100%
applicable to your particular project.
<p />
<p />
<h2><a name="Modifying Path Sizes (for Programmers)"></a> Modifying Path Sizes (for Programmers) </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
Path types are defined both via code (for the case of jumps and flying nodes, etc) and in the default properties of the Scout (for different sizes of entities).
<p />
To define different sizes modify the <code>PathSizes</code> array in your Scout class.  Here is the default value:
<p />
<pre>
        PathSizes(0)&#61;(Desc&#61;Human,Radius&#61;48,Height&#61;80)
        PathSizes(1)&#61;(Desc&#61;Common,Radius&#61;72,Height&#61;100)
        PathSizes(2)&#61;(Desc&#61;Max,Radius&#61;120,Height&#61;120)
        PathSizes(3)&#61;(Desc&#61;Vehicle,Radius&#61;260,Height&#61;120)
</pre>
<p />
</noautolink>
<p />
<p />
<p />
<p />
<p />
<p />


<!-- BEGIN UE4 NOTICE -->



<div id="version_message" style="display:none;">

    <div style="position:fixed;top:0px;left:0px;width:100%;height:100%;background:#000;opacity:0.5;">

    </div>

    <div style="position:fixed;top:50%;left:50%;margin:-70px 0px 0px -240px;background:#FFF;border-radius:6px;width:480px;box-shadow:0px 5px 30px -5px rgba(0,0,0,0.9);">

        <div style="font-size:16px;font-weight:bold;background: url(rsrc/Three/warning.png) no-repeat scroll 5px 5px;padding:4px 10px 5px 25px;height:21px;width:440px;">

            Important!

        </div>

        <div style="font-size:11px;padding:5px 10px 10px;width:460px;">

            <p>You are viewing documentation for the <strong>Unreal Development Kit (UDK)</strong>.</p>



            <p>If you are looking for the Unreal Engine 4 documentation, please visit the <a style="color:#000;" href="https://docs.unrealengine.com">Unreal Engine 4 Documentation</a> site.</p>

        </div>

        <div style="height:20px;padding:4px;margin:6px;border-top:1px solid #a0a0a0;">

            <form onsubmit="return closeVersionMessage();">

                <input type="checkbox" id="dismiss" value="dismiss" />

                <label for="dsimiss">Don't show me this again</label>

                <input type="submit" value="Close" style="cursor:pointer;float:right;width:60px;color:#f0f0f0;font-weight:bold;background:#882222;height:24px;padding:2px 3px 3px;text-align:center;border:1px outset #000;" />

            </form>

        </div>

    </div>

</div>



<script type="text/javascript">

    window.onload = function () {

        LoadVersionMessage();

    }



    function LoadVersionMessage()

    {

        var showMessage = "false";
        if(showMessage != "false")

        {

            showVersionMessage();

        }

    }



    function showVersionMessage()

    {

        var message = document.getElementById("version_message");

        if(message)

        {

            message.style.display = "block";

        }

    }



    function closeVersionMessage() {

        var dismiss = document.getElementById("dismiss");

        var message = document.getElementById("version_message");

        if (message) {

            message.style.display = "none";

        }

        if (dismiss.checked) {

            eraseCookie("doc_version_message");

            createCookie("doc_version_message", "false", 365);

            dismiss.checked = false;

        }

        return false;

    }



    function createCookie(name, value, days) {

        if (days) {

            var date = new Date();

            date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));

            var expires = "; expires=" + date.toGMTString();

        }

        else var expires = "";

        document.cookie = name + "=" + value + expires + "; path=/";

    }



    function readCookie(name) {

        var nameEQ = name + "=";

        var ca = document.cookie.split(';');

        for (var i = 0; i < ca.length; i++) {

            var c = ca[i];

            while (c.charAt(0) == ' ') c = c.substring(1, c.length);

            if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);

        }

        return null;

    }



    function eraseCookie(name) {

        createCookie(name, "", -1);

    }

</script>



<!-- END UE4 NOTICE -->



</div></div><div id="footer"><div style="BACKGROUND-COLOR: transparent; margin: 0; padding: 0; width: 100%;"><div>&nbsp;</div><div style="float: left; text-align: left; vertical-align: bottom; width: 50%;"><a href="http://www.videogamevoters.org"><img src="rsrc/vgvn.jpg" border="0" width="234" height="60" alt="Video Game Voters Network" /></a></div><div style="float: right; text-align: right; vertical-align: bottom; width: 50%;">Copyright &copy; 2001-2012 <a href="http://www.epicgames.com" target="_top">Epic Games, Inc.</a><br /><a href="../Main/TermsAndConditions.html" class="twikiLink">Terms and Conditions</a><br /><a href="http://epicgames.com/privacynotice" target="_top">Privacy Notice</a></div></div></div></div>
<p />
</html></body>
