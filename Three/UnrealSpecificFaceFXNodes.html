<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
	"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title> UDK | UnrealSpecificFaceFXNodes    </title>

<style type="text/css" media="all">@import "rsrc/twiki_webs.css";</style>
<style type="text/css" media="all">@import "rsrc/udn_new.css";</style>
<link rel="icon" href="rsrc/Three/WebPreferences/favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="rsrc/Three/WebPreferences/favicon.ico" type="image/x-icon" />


<!-- view.static_udn3.tmpl  -->
<script language="JavaScript" type="text/javascript" src="rsrc/udn.js"></script>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

</head>
<p />
<body id="webbgThree">
<p />

<p />
<div id="webThree"><div id="head">
<!--
<div class="header">
 -->
<div style="background: url(/pub/webbg_udn.jpg); background-repeat: no-repeat; height:140px; width: 100%;" >
<!--
<div style="background: transparent url(/pub/udn_header_bg.jpg); background-repeat: repeat-x; height:140px; width: 100%; margin-left: 991px;">
 -->
<p />
<div id="nav">
<ul class="nav">
<font color=black>|</font>&nbsp;&nbsp;<li class=nav_Three><a href="../Main/WebHome.html" class="twikiLink">Main</a></li><font color=black>|</font><li class=nav_Three><a href="../Two/WebHome.html" class="twikiLink">UnrealEngine2</a></li><font color=black>|</font><li class=nav_Three><a href="WebHome.html" class="twikiLink">UnrealEngine3</a></li><font color=black>|</font><li class=nav_Three><a href="https://docs.unrealengine.com" class="twikiLink">UnrealEngine4</a></li><font color=black>|</font><li class=nav_Three><a href="../Main/BusinessAndLegal.html" class="twikiLink">Business &amp; Legal</a></li><font color=black>|</font>
</ul><br><br><br>
</div>
</div>
</div> <!-- end head -->
<div id="pagedefault">
<div id="maincol">
<div id="tool">
<div id="tooltop">UDN</div>
<div id="tooltext" style="padding: 10px 10px 10px 10px;">
Search public documentation: <br>
<form ACTION="/search/index.php" METHOD="GET" NAME="main" ID="main">
<input TYPE="TEXT" NAME="q" SIZE="15" STYLE="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: xx-small;">
<input TYPE="SUBMIT" VALUE="Search" STYLE="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: xx-small;"><br>
</form>
</div>
<div id="toolband">UnrealSpecificFaceFXNodes  </b></div>
<div id="tooltext">
<a href="UnrealSpecificFaceFXNodesJP.html" class="twikiLink">日本語訳</a><br><a href="UnrealSpecificFaceFXNodesCH.html" class="twikiLink">中国翻译</a><br><a href="UnrealSpecificFaceFXNodesKR.html" class="twikiLink">한국어</a><br>

<!-- Three/UnrealSpecificFaceFXNodes -->
<hr size="1" noshade="noshade" />
Interested in the Unreal Engine? <br>
Visit the <a href="http://www.unrealtechnology.com" target="_top">Unreal Technology</a> site.<br>
<br>
Looking for jobs and company info? <br>
Check out the <a href="http://www.epicgames.com" target="_top">Epic games</a> site.<br>
<br>
Questions about support via UDN? <br>
Contact the <a href="../Main/ContactUDNStaff.html" class="twikiLink">UDN Staff</a> <br>
<br>
</div> <!-- end toolbox content -->
<div id="toolbottom"></div>
</div> <!-- end tool -->
<p />
<noautolink>
<p />
<div style="padding:0px 0px 0px 4px;font:10px Verdana;">
<b><a href="WebHome.html" class="twikiLink">UE3 Home</a></b> &gt; <b><a href="FaceFX.html" class="twikiLink">FaceFX Facial Animation</a></b> &gt; Unreal Specific FaceFX Nodes
</div>
<hr size="1" noshade="noshade">
<h1><a name="Unreal Specific _FaceFX Nodes"></a> Unreal Specific FaceFX Nodes </h1>
<hr size="1" noshade="noshade">
<p />
<div class="twikiToc"> <ul>
<li> <a href="UnrealSpecificFaceFXNodes.html#Unreal Specific _FaceFX Nodes"> Unreal Specific FaceFX Nodes</a> <ul>
<li> <a href="UnrealSpecificFaceFXNodes.html#Overview"> Overview</a>
</li> <li> <a href="UnrealSpecificFaceFXNodes.html#Creating the _FUnrealFaceFXMaterialParameterNode"> Creating the FUnrealFaceFXMaterialParameterNode</a> <ul>
<li> <a href="UnrealSpecificFaceFXNodes.html#Modify the Material_Slot_Id"> Modify the Material_Slot_Id</a>
</li> <li> <a href="UnrealSpecificFaceFXNodes.html#Modify the Parameter_Name"> Modify the Parameter_Name</a>
</li></ul>
</li> <li> <a href="UnrealSpecificFaceFXNodes.html#Creating the _FUnrealFaceFXMorphNode"> Creating the FUnrealFaceFXMorphNode</a> <ul>
<li> <a href="UnrealSpecificFaceFXNodes.html#Modify the Target_Name"> Modify the Target_Name</a>
</li></ul>
</li> <li> <a href="UnrealSpecificFaceFXNodes.html#Animating the Unreal-specific Nodes"> Animating the Unreal-specific Nodes</a>
</li></ul>
</li></ul>
</div>
<p />
<h2><a name="Overview"></a> Overview </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
There are two FaceFX node types specific to the Unreal integration.  Other FaceFX documentation does not reference how to use these nodes, so this document demonstrates their features.  The node types are: FUnrealFaceFXMaterialParameterNode and FUnrealFaceFXMorphNode.
<p />
<h2><a name="Creating the _FUnrealFaceFXMaterialParameterNode"></a> Creating the FUnrealFaceFXMaterialParameterNode </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
Material Parameter nodes can be used to create normal map animations for very realistic facial animations.  In this example, we will simply make Slade's texture turn red.  Go to the Face Graph tab, right click in the Face Graph, and select Add Node -&gt; FUnrealFaceFXMaterialParameterNode.  Call the node Face_Red_MaterialScalarParameter.
<p />
<img alt="MaterialParameter.JPG" src="rsrc/Three/UnrealSpecificFaceFXNodes/MaterialParameter.JPG" />
<p />
You will notice that the node has all of the same funtionality as a combiner node, but it also has a few extra properties: Material_Slot_Id and Parameter_Name.  You can modify these properties by selecting the node in the Face Graph and editing the Face Graph node properties.
<p />
<img alt="MaterialProperties.JPG" src="rsrc/Three/UnrealSpecificFaceFXNodes/MaterialProperties.JPG" />
<p />
<h3><a name="Modify the Material_Slot_Id"></a> Modify the Material_Slot_Id </h3>
<p />
The Material_Slot_Id references the material slot we want to animate.  In this case we are modifying Slade's main texture which resides in Material slot 1.  To view your skeletal mesh's material slots, open the AnimSet Viewer by double clicking on the skeletal mesh and go to the Mesh tab on the right.  We want our new Face Graph node to reference Material slot 1, so type "1" into the Material_Slot_Id property in the Face Graph with the newly created FUnrealFaceFXMaterialParameterNode selected.  Hit enter.
<p />
<img alt="MaterialSlotID1731.JPG" src="rsrc/Three/UnrealSpecificFaceFXNodes/MaterialSlotID1731.JPG" />
<p />
<h3><a name="Modify the Parameter_Name"></a> Modify the Parameter_Name </h3>
<p />
To make the face turn red, start by making a Scalar parameter called Face_Red that changes the Emissive channel of the texture.  To drive this Scalar parameter from FaceFX, Type "Face_Red" into the Parameter_Name property in the Face Graph with the newly created FUnrealFaceFXMaterialParameterNode selected.  Hit enter.
<p />
<img alt="ParameterName1731.jpg" src="rsrc/Three/UnrealSpecificFaceFXNodes/ParameterName1731.jpg" />
<p />
<h2><a name="Creating the _FUnrealFaceFXMorphNode"></a> Creating the FUnrealFaceFXMorphNode </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
Before you will be able to preview morph targets in FaceFX Studio, you will need to set up the PreviewMorphSets in the FaceFXAsset.  Right click the FaceFXAsset in the Generic Browser and select "Properties..."  Select the morph target sets you would like to use for previewing just as you do in the AnimTree Editor.
<p />
<img alt="SelectMorphSet.JPG" src="rsrc/Three/UnrealSpecificFaceFXNodes/SelectMorphSet.JPG" />
<p />
To create the morph node, right-click in the Face Graph and select Add Node -&gt; FUnrealFaceFXMorphNode.  Call the node Slade_Egghead_MorphTarget.  Morph target nodes only have one additional parameter: Target_Name.
<p />
<img alt="MorphTarget.JPG" src="rsrc/Three/UnrealSpecificFaceFXNodes/MorphTarget.JPG" />
<p />
<h3><a name="Modify the Target_Name"></a> Modify the Target_Name </h3>
<p />
For morph target nodes, you only need to specify the name of the morph target you want to drive.  In this case, type Slade_Egghead into the Target_Name property in the Face Graph with the newly created FUnrealFaceFXMorphNode selected.
<p />
<img alt="MorphProperties.JPG" src="rsrc/Three/UnrealSpecificFaceFXNodes/MorphProperties.JPG" />
<p />
<h2><a name="Animating the Unreal-specific Nodes"></a> Animating the Unreal-specific Nodes </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
To see our newly created nodes in action, we are going to create a combiner node that drives both Unreal-specific nodes simultaneously.  To do this, first put the application into "Create Combiner" mode.  Go to the Workspace Tab, and select "Create Combiner" from the list.
<p />
<img alt="CreateCombiner.JPG" src="rsrc/Three/UnrealSpecificFaceFXNodes/CreateCombiner.JPG" />
<p />
Now go to the Preview tab in FaceFX and open the "Face Graph" section of the Actor Panel on the left.  Make sure the "Node Group" selected at the top of the "Face Graph" section is <em>All Nodes</em>.  You should be able to scroll down to the bottom of the list and see the newly created Unreal-specific nodes.  Or you can sort the list of nodes and find them by name.  You can use the quick preview slider below the list of nodes to drive the targets.  First drive the face_Red_MaterialScalerParameter.
<p />
<img alt="Red.JPG" src="rsrc/Three/UnrealSpecificFaceFXNodes/Red.JPG" />
<p />
Next select the Slade_Egghead_MorphTarget from the "Face Graph" section of the Actor Panel.  Drive it's node value up.  Now both nodes have values.
<p />
<img alt="EggheadRed.JPG" src="rsrc/Three/UnrealSpecificFaceFXNodes/EggheadRed.JPG" />
<p />
Finally, go back to the Workspace tab, and click on the "Create Combiner Node From Sliders" button. This will bring up the "Create Face Graph Node" dialog. Change the name of the new node to "Unreal_Red_Egghead", then hit the Create button. This will create a new combiner node in the face graph that drives both Unreal nodes simultaneously. You can also modify the Face Graph directly from the Face Graph Tab, but using the quick preview slider allows for a more visual creation process.
<p />
<img alt="CreateNode.JPG" src="rsrc/Three/UnrealSpecificFaceFXNodes/CreateNode.JPG" />
<p />
</noautolink>
<p />
<p />
<p />
<p />
<p />
<p />


<!-- BEGIN UE4 NOTICE -->



<div id="version_message" style="display:none;">

    <div style="position:fixed;top:0px;left:0px;width:100%;height:100%;background:#000;opacity:0.5;">

    </div>

    <div style="position:fixed;top:50%;left:50%;margin:-70px 0px 0px -240px;background:#FFF;border-radius:6px;width:480px;box-shadow:0px 5px 30px -5px rgba(0,0,0,0.9);">

        <div style="font-size:16px;font-weight:bold;background: url(rsrc/Three/warning.png) no-repeat scroll 5px 5px;padding:4px 10px 5px 25px;height:21px;width:440px;">

            Important!

        </div>

        <div style="font-size:11px;padding:5px 10px 10px;width:460px;">

            <p>You are viewing documentation for the <strong>Unreal Development Kit (UDK)</strong>.</p>



            <p>If you are looking for the Unreal Engine 4 documentation, please visit the <a style="color:#000;" href="https://docs.unrealengine.com">Unreal Engine 4 Documentation</a> site.</p>

        </div>

        <div style="height:20px;padding:4px;margin:6px;border-top:1px solid #a0a0a0;">

            <form onsubmit="return closeVersionMessage();">

                <input type="checkbox" id="dismiss" value="dismiss" />

                <label for="dsimiss">Don't show me this again</label>

                <input type="submit" value="Close" style="cursor:pointer;float:right;width:60px;color:#f0f0f0;font-weight:bold;background:#882222;height:24px;padding:2px 3px 3px;text-align:center;border:1px outset #000;" />

            </form>

        </div>

    </div>

</div>



<script type="text/javascript">

    window.onload = function () {

        LoadVersionMessage();

    }



    function LoadVersionMessage()

    {

        var showMessage = "false";
        if(showMessage != "false")

        {

            showVersionMessage();

        }

    }



    function showVersionMessage()

    {

        var message = document.getElementById("version_message");

        if(message)

        {

            message.style.display = "block";

        }

    }



    function closeVersionMessage() {

        var dismiss = document.getElementById("dismiss");

        var message = document.getElementById("version_message");

        if (message) {

            message.style.display = "none";

        }

        if (dismiss.checked) {

            eraseCookie("doc_version_message");

            createCookie("doc_version_message", "false", 365);

            dismiss.checked = false;

        }

        return false;

    }



    function createCookie(name, value, days) {

        if (days) {

            var date = new Date();

            date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));

            var expires = "; expires=" + date.toGMTString();

        }

        else var expires = "";

        document.cookie = name + "=" + value + expires + "; path=/";

    }



    function readCookie(name) {

        var nameEQ = name + "=";

        var ca = document.cookie.split(';');

        for (var i = 0; i < ca.length; i++) {

            var c = ca[i];

            while (c.charAt(0) == ' ') c = c.substring(1, c.length);

            if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);

        }

        return null;

    }



    function eraseCookie(name) {

        createCookie(name, "", -1);

    }

</script>



<!-- END UE4 NOTICE -->



</div></div><div id="footer"><div style="BACKGROUND-COLOR: transparent; margin: 0; padding: 0; width: 100%;"><div>&nbsp;</div><div style="float: left; text-align: left; vertical-align: bottom; width: 50%;"><a href="http://www.videogamevoters.org"><img src="rsrc/vgvn.jpg" border="0" width="234" height="60" alt="Video Game Voters Network" /></a></div><div style="float: right; text-align: right; vertical-align: bottom; width: 50%;">Copyright &copy; 2001-2012 <a href="http://www.epicgames.com" target="_top">Epic Games, Inc.</a><br /><a href="../Main/TermsAndConditions.html" class="twikiLink">Terms and Conditions</a><br /><a href="http://epicgames.com/privacynotice" target="_top">Privacy Notice</a></div></div></div></div>
<p />
</html></body>
