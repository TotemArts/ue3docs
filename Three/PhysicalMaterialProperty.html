<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
	"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title> UDK | PhysicalMaterialProperty    </title>

<style type="text/css" media="all">@import "rsrc/twiki_webs.css";</style>
<style type="text/css" media="all">@import "rsrc/udn_new.css";</style>
<link rel="icon" href="rsrc/Three/WebPreferences/favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="rsrc/Three/WebPreferences/favicon.ico" type="image/x-icon" />


<!-- view.static_udn3.tmpl  -->
<script language="JavaScript" type="text/javascript" src="rsrc/udn.js"></script>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

</head>
<p />
<body id="webbgThree">
<p />

<p />
<div id="webThree"><div id="head">
<!--
<div class="header">
 -->
<div style="background: url(/pub/webbg_udn.jpg); background-repeat: no-repeat; height:140px; width: 100%;" >
<!--
<div style="background: transparent url(/pub/udn_header_bg.jpg); background-repeat: repeat-x; height:140px; width: 100%; margin-left: 991px;">
 -->
<p />
<div id="nav">
<ul class="nav">
<font color=black>|</font>&nbsp;&nbsp;<li class=nav_Three><a href="../Main/WebHome.html" class="twikiLink">Main</a></li><font color=black>|</font><li class=nav_Three><a href="../Two/WebHome.html" class="twikiLink">UnrealEngine2</a></li><font color=black>|</font><li class=nav_Three><a href="WebHome.html" class="twikiLink">UnrealEngine3</a></li><font color=black>|</font><li class=nav_Three><a href="https://docs.unrealengine.com" class="twikiLink">UnrealEngine4</a></li><font color=black>|</font><li class=nav_Three><a href="../Main/BusinessAndLegal.html" class="twikiLink">Business &amp; Legal</a></li><font color=black>|</font>
</ul><br><br><br>
</div>
</div>
</div> <!-- end head -->
<div id="pagedefault">
<div id="maincol">
<div id="tool">
<div id="tooltop">UDN</div>
<div id="tooltext" style="padding: 10px 10px 10px 10px;">
Search public documentation: <br>
<form ACTION="/search/index.php" METHOD="GET" NAME="main" ID="main">
<input TYPE="TEXT" NAME="q" SIZE="15" STYLE="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: xx-small;">
<input TYPE="SUBMIT" VALUE="Search" STYLE="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: xx-small;"><br>
</form>
</div>
<div id="toolband">PhysicalMaterialProperty  </b></div>
<div id="tooltext">
<a href="PhysicalMaterialPropertyJP.html" class="twikiLink">日本語訳</a><br><a href="PhysicalMaterialPropertyCH.html" class="twikiLink">中国翻译</a><br><a href="PhysicalMaterialPropertyKR.html" class="twikiLink">한국어</a><br>

<!-- Three/PhysicalMaterialProperty -->
<hr size="1" noshade="noshade" />
Interested in the Unreal Engine? <br>
Visit the <a href="http://www.unrealtechnology.com" target="_top">Unreal Technology</a> site.<br>
<br>
Looking for jobs and company info? <br>
Check out the <a href="http://www.epicgames.com" target="_top">Epic games</a> site.<br>
<br>
Questions about support via UDN? <br>
Contact the <a href="../Main/ContactUDNStaff.html" class="twikiLink">UDN Staff</a> <br>
<br>
</div> <!-- end toolbox content -->
<div id="toolbottom"></div>
</div> <!-- end tool -->
<p />
<noautolink>
<style type="text/css" media="all">@import "rsrc/UDNCSS_test.css";</style>
<div style="padding:0px 0px 0px 4px;font:10px Verdana;">
<b><a href="WebHome.html" class="twikiLink">UE3 Home</a></b> &gt; <b><a href="PhysicsHome.html" class="twikiLink">Physics</a></b> &gt; Physical Material Property
</div>
<hr size="1" noshade="noshade">
<p />
<h1><a name="Physical Material Property"></a> Physical Material Property </h1>
<hr size="1" noshade="noshade">
<p />
<div class="twikiToc"> <ul>
<li> <a href="PhysicalMaterialProperty.html#Physical Material Property"> Physical Material Property</a> <ul>
<li> <a href="PhysicalMaterialProperty.html#Overview"> Overview</a>
</li> <li> <a href="PhysicalMaterialProperty.html#Unrealscript Example"> Unrealscript Example</a>
</li> <li> <a href="PhysicalMaterialProperty.html#Hierarchy of Physical Materials."> Hierarchy of Physical Materials.  </a> <ul>
<li> <a href="PhysicalMaterialProperty.html#Details for Content Creators"> Details for Content Creators</a>
</li> <li> <a href="PhysicalMaterialProperty.html#Using the Hierarchy"> Using the Hierarchy</a>
</li></ul>
</li> <li> <a href="PhysicalMaterialProperty.html#Content Suggestions"> Content Suggestions</a>
</li> <li> <a href="PhysicalMaterialProperty.html#Unreal Tournament 3 example"> Unreal Tournament 3 example</a>
</li></ul>
</li></ul>
</div>
<p />
<h2><a name="Overview"></a> Overview </h2>
<hr size="1" noshade="noshade">
In UE3 you can attach a <a href="PhysicalMaterial.html" class="twikiLink">physical material</a> to a <a href="MaterialsOverview.html" class="twikiLink">Material</a> or <a href="MaterialInstanceConstant.html" class="twikiLink">Material Instance Constant</a>. Attaching, as opposed to just having a material with additional properties, allows for you to reuse your physical material property object on multiple materials.
<p />
A quick example would be the following:
You have a gravel road material which you have applied to all of the gravel roads in the world. That gravel road material has a <a href="PhysicalMaterial.html" class="twikiLink">physical material</a> called <strong>GravelPhysicalMaterial</strong>. In GravelPhysicalMaterial you have created a physical material property object, which stores the footstep sounds that is played when a pawn steps on the material.
<p />
Two physical materials on the same material are now supported on a single material.  When a collision occurs the line check code finds the triangle hit, gets the texture UV at the hit location and looks up into a mask texture to determine if the hit pixel is black or white. The corresponding physical material will be returned. See the <a href="PhysicalMaterialMask.html" class="twikiLink">PhysicalMaterialMask</a> page for more information.
<p />
<p />
<h2><a name="Unrealscript Example"></a> Unrealscript Example </h2>
<hr size="1" noshade="noshade">
Look at PhysicalMaterial.uc
<p />
Specifically:
<div class="codetitlebar">
PhysicalMaterial.uc
</div>
<div class="codesnippet">
<pre>
var(PhysicalProperties) export editinline PhysicalMaterialPropertyBase PhysicalMaterialProperty;
</pre>
</div>
<p />
PhysicalMaterialPropertyBase.uc has comments you will want to read!
<p />
To get contextual footstep sounds and lay the framework for having other neat PhysicalMaterial based effects you would make a subclass of <strong>PhysicalMaterialPropertyBase</strong>:
<div class="codetitlebar">
MyGamePhysicalMaterialProperty.uc
</div>
<div class="codesnippet">
<pre>
class MyGamePhysicalMaterialProperty extends PhysicalMaterialPropertyBase
  collapsecategories
  editinlinenew
  hidecategories(Object);

var(Sounds) const SoundCue FootStepSoundCue;
</pre>
</div>
<p />
So now when a pawn steps (either through <strong>AnimNotify_Footstep</strong> or some other method) you can call <strong>PlayFootStepSound()</strong> which will then send that event to the correct pawn. Now that pawn can determine what sound to play based on the surface the pawn is walking on. e.g. A player is walking along the gravel road. When it steps and <strong>PlayFootStepSound()</strong> is called, trace down, find the physical material, get the stored SoundCue and play it.
<p />
Obviously with PhysicalMaterials and a framework of properties, like the above, you can do all kinds of really awesome contextual functionality (e.g. impact sounds, hit effects, decals, footsteps, etc.)
<p />
<p />
<h2><a name="Hierarchy of Physical Materials."></a> Hierarchy of Physical Materials. </h2>
<hr size="1" noshade="noshade">
<p />
Once your programming staff has created the specific game classes above, your content team can start making hierarchies of physical materials and start populating them with the effects that the game design demands.
<p />
<h3><a name="Details for Content Creators"></a> Details for Content Creators </h3>
The PhysicalMaterial has a PhysicalMaterial Parent variable which allows you to create hierarchies of physical materials and thereby (in our example case) hierarchies of FootStep sounds. So you can have, Default -&gt; Clay -&gt; Wet Clay hierarchy as an example. So now your content team can be really specific in the physical materials they have in the game world. And when you want to have a Wet Clay footstep sound you can. If you don't have a Wet Clay footstep sound then you can look up the hierarchy until you find one or end up at the Default which should have a default footstep sound.
<p />
<h3><a name="Using the Hierarchy"></a> Using the Hierarchy </h3>
So now that you have both code support and a paramaterized physical material hierarchy, you can now assign physical materials to materials. Once you have assigned them you should hear them playing in the game.
<p />
<p />
<h2><a name="Content Suggestions"></a> Content Suggestions </h2>
<hr size="1" noshade="noshade">
When making footsteps (to continue our example) you should have your sound team make <a href="SoundCueEditorUserGuide.html" class="twikiLink">SoundCues</a> with randomized footsteps in both the source sound and then the pitch and attenuation. This leads to a more believable foot step sound. Additionally it provides the correct abstraction to the physical material system.
<p />
<h2><a name="Unreal Tournament 3 example"></a> Unreal Tournament 3 example </h2>
<hr size="1" noshade="noshade">
The way Unreal Tournament 3 implements their foot step sound system is that physical material properties store the type of surface instead of the sound cues associated with that material. From there, the UTPawn looks up the appropriate SoundCue to play that is stored within the SoundGroupClass.
<p />
<div class="codetitlebar">
UTPawn.uc
</div>
<div class="codesnippet">
<pre>
simulated function name GetMaterialBelowFeet()
{
  local vector HitLocation, HitNormal;
  local TraceHitInfo HitInfo;
  local UTPhysicalMaterialProperty PhysicalProperty;
  local actor HitActor;
  local float TraceDist;

  TraceDist &#61; 1.5 &#42; GetCollisionHeight();

  HitActor &#61; Trace(HitLocation, HitNormal, Location - TraceDist&#42;vect(0,0,1), Location, false,, HitInfo, TRACEFLAG&#95;PhysicsVolumes);
  if ( WaterVolume(HitActor) !&#61; None )
  {
    return (Location.Z - HitLocation.Z &#60; 0.33&#42;TraceDist) ? &#39;Water&#39; : &#39;ShallowWater&#39;;
  }
  if (HitInfo.PhysMaterial !&#61; None)
  {
    PhysicalProperty &#61; UTPhysicalMaterialProperty(HitInfo.PhysMaterial.GetPhysicalMaterialProperty(class&#39;UTPhysicalMaterialProperty&#39;));
    if (PhysicalProperty !&#61; None)
    {
      return PhysicalProperty.MaterialType;
    }
  }
  return &#39;&#39;;
}

simulated function ActuallyPlayFootstepSound(int FootDown)
{
  local SoundCue FootSound;

  FootSound &#61; SoundGroupClass.static.GetFootstepSound(FootDown, GetMaterialBelowFeet());
  if (FootSound !&#61; None)
  {
    PlaySound(FootSound, false, true,,, true);
  }
}

simulated event PlayFootStepSound(int FootDown)
{
  local PlayerController PC;

  if ( !IsFirstPerson() )
  {
    ForEach LocalPlayerControllers(class&#39;PlayerController&#39;, PC)
    {
      if ( (PC.ViewTarget !&#61; None) &#38;&#38; (VSizeSq(PC.ViewTarget.Location - Location) &#60; MaxFootstepDistSq) )
      {
        ActuallyPlayFootstepSound(FootDown);
        return;
      }
    }
  }
}
</pre>
</div>
<p />
</noautolink>
<p />
<p />
<p />
<p />
<p />
<p />


<!-- BEGIN UE4 NOTICE -->



<div id="version_message" style="display:none;">

    <div style="position:fixed;top:0px;left:0px;width:100%;height:100%;background:#000;opacity:0.5;">

    </div>

    <div style="position:fixed;top:50%;left:50%;margin:-70px 0px 0px -240px;background:#FFF;border-radius:6px;width:480px;box-shadow:0px 5px 30px -5px rgba(0,0,0,0.9);">

        <div style="font-size:16px;font-weight:bold;background: url(rsrc/Three/warning.png) no-repeat scroll 5px 5px;padding:4px 10px 5px 25px;height:21px;width:440px;">

            Important!

        </div>

        <div style="font-size:11px;padding:5px 10px 10px;width:460px;">

            <p>You are viewing documentation for the <strong>Unreal Development Kit (UDK)</strong>.</p>



            <p>If you are looking for the Unreal Engine 4 documentation, please visit the <a style="color:#000;" href="https://docs.unrealengine.com">Unreal Engine 4 Documentation</a> site.</p>

        </div>

        <div style="height:20px;padding:4px;margin:6px;border-top:1px solid #a0a0a0;">

            <form onsubmit="return closeVersionMessage();">

                <input type="checkbox" id="dismiss" value="dismiss" />

                <label for="dsimiss">Don't show me this again</label>

                <input type="submit" value="Close" style="cursor:pointer;float:right;width:60px;color:#f0f0f0;font-weight:bold;background:#882222;height:24px;padding:2px 3px 3px;text-align:center;border:1px outset #000;" />

            </form>

        </div>

    </div>

</div>



<script type="text/javascript">

    window.onload = function () {

        LoadVersionMessage();

    }



    function LoadVersionMessage()

    {

        var showMessage = "false";
        if(showMessage != "false")

        {

            showVersionMessage();

        }

    }



    function showVersionMessage()

    {

        var message = document.getElementById("version_message");

        if(message)

        {

            message.style.display = "block";

        }

    }



    function closeVersionMessage() {

        var dismiss = document.getElementById("dismiss");

        var message = document.getElementById("version_message");

        if (message) {

            message.style.display = "none";

        }

        if (dismiss.checked) {

            eraseCookie("doc_version_message");

            createCookie("doc_version_message", "false", 365);

            dismiss.checked = false;

        }

        return false;

    }



    function createCookie(name, value, days) {

        if (days) {

            var date = new Date();

            date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));

            var expires = "; expires=" + date.toGMTString();

        }

        else var expires = "";

        document.cookie = name + "=" + value + expires + "; path=/";

    }



    function readCookie(name) {

        var nameEQ = name + "=";

        var ca = document.cookie.split(';');

        for (var i = 0; i < ca.length; i++) {

            var c = ca[i];

            while (c.charAt(0) == ' ') c = c.substring(1, c.length);

            if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);

        }

        return null;

    }



    function eraseCookie(name) {

        createCookie(name, "", -1);

    }

</script>



<!-- END UE4 NOTICE -->



</div></div><div id="footer"><div style="BACKGROUND-COLOR: transparent; margin: 0; padding: 0; width: 100%;"><div>&nbsp;</div><div style="float: left; text-align: left; vertical-align: bottom; width: 50%;"><a href="http://www.videogamevoters.org"><img src="rsrc/vgvn.jpg" border="0" width="234" height="60" alt="Video Game Voters Network" /></a></div><div style="float: right; text-align: right; vertical-align: bottom; width: 50%;">Copyright &copy; 2001-2012 <a href="http://www.epicgames.com" target="_top">Epic Games, Inc.</a><br /><a href="../Main/TermsAndConditions.html" class="twikiLink">Terms and Conditions</a><br /><a href="http://epicgames.com/privacynotice" target="_top">Privacy Notice</a></div></div></div></div>
<p />
</html></body>
