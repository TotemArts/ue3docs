<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
	"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title> UDK | CanvasTechnicalGuide    </title>

<style type="text/css" media="all">@import "rsrc/twiki_webs.css";</style>
<style type="text/css" media="all">@import "rsrc/udn_new.css";</style>
<link rel="icon" href="rsrc/Three/WebPreferences/favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="rsrc/Three/WebPreferences/favicon.ico" type="image/x-icon" />


<!-- view.static_udn3.tmpl  -->
<script language="JavaScript" type="text/javascript" src="rsrc/udn.js"></script>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

</head>
<p />
<body id="webbgThree">
<p />

<p />
<div id="webThree"><div id="head">
<!--
<div class="header">
 -->
<div style="background: url(/pub/webbg_udn.jpg); background-repeat: no-repeat; height:140px; width: 100%;" >
<!--
<div style="background: transparent url(/pub/udn_header_bg.jpg); background-repeat: repeat-x; height:140px; width: 100%; margin-left: 991px;">
 -->
<p />
<div id="nav">
<ul class="nav">
<font color=black>|</font>&nbsp;&nbsp;<li class=nav_Three><a href="../Main/WebHome.html" class="twikiLink">Main</a></li><font color=black>|</font><li class=nav_Three><a href="../Two/WebHome.html" class="twikiLink">UnrealEngine2</a></li><font color=black>|</font><li class=nav_Three><a href="WebHome.html" class="twikiLink">UnrealEngine3</a></li><font color=black>|</font><li class=nav_Three><a href="https://docs.unrealengine.com" class="twikiLink">UnrealEngine4</a></li><font color=black>|</font><li class=nav_Three><a href="../Main/BusinessAndLegal.html" class="twikiLink">Business &amp; Legal</a></li><font color=black>|</font>
</ul><br><br><br>
</div>
</div>
</div> <!-- end head -->
<div id="pagedefault">
<div id="maincol">
<div id="tool">
<div id="tooltop">UDN</div>
<div id="tooltext" style="padding: 10px 10px 10px 10px;">
Search public documentation: <br>
<form ACTION="/search/index.php" METHOD="GET" NAME="main" ID="main">
<input TYPE="TEXT" NAME="q" SIZE="15" STYLE="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: xx-small;">
<input TYPE="SUBMIT" VALUE="Search" STYLE="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: xx-small;"><br>
</form>
</div>
<div id="toolband">CanvasTechnicalGuide  </b></div>
<div id="tooltext">
<a href="CanvasTechnicalGuideJP.html" class="twikiLink">日本語訳</a><br><a href="CanvasTechnicalGuideCH.html" class="twikiLink">中国翻译</a><br><a href="CanvasTechnicalGuideKR.html" class="twikiLink">한국어</a><br>

<!-- Three/CanvasTechnicalGuide -->
<hr size="1" noshade="noshade" />
Interested in the Unreal Engine? <br>
Visit the <a href="http://www.unrealtechnology.com" target="_top">Unreal Technology</a> site.<br>
<br>
Looking for jobs and company info? <br>
Check out the <a href="http://www.epicgames.com" target="_top">Epic games</a> site.<br>
<br>
Questions about support via UDN? <br>
Contact the <a href="../Main/ContactUDNStaff.html" class="twikiLink">UDN Staff</a> <br>
<br>
</div> <!-- end toolbox content -->
<div id="toolbottom"></div>
</div> <!-- end tool -->
<p />
<noautolink>
<p />
<div style="padding:0px 0px 0px 4px;font:10px Verdana;">
<b><a href="WebHome.html" class="twikiLink">UE3 Home</a></b> &gt; <b><a href="UIAndHUDHome.html" class="twikiLink">User Interfaces &amp; HUDs</a></b> &gt; Canvas Technical Guide
</div>
<hr size="1" noshade="noshade">
<h1><a name="Canvas Technical Guide"></a> Canvas Technical Guide </h1>
<hr size="1" noshade="noshade">
<p />
<div class="twikiToc"> <ul>
<li> <a href="CanvasTechnicalGuide.html#Canvas Technical Guide"> Canvas Technical Guide</a> <ul>
<li> <a href="CanvasTechnicalGuide.html#Overview"> Overview</a>
</li> <li> <a href="CanvasTechnicalGuide.html#Canvas Class"> Canvas Class</a> <ul>
<li> <a href="CanvasTechnicalGuide.html#Canvas Properties"> Canvas Properties</a>
</li> <li> <a href="CanvasTechnicalGuide.html#Canvas Functions"> Canvas Functions</a>
</li></ul>
</li> <li> <a href="CanvasTechnicalGuide.html#Canvas Drawing"> Canvas Drawing</a>
</li> <li> <a href="CanvasTechnicalGuide.html#Project and _DeProject"> Project and DeProject</a> <ul>
<li> <a href="CanvasTechnicalGuide.html#Project"> Project</a>
</li> <li> <a href="CanvasTechnicalGuide.html#DeProject"> DeProject</a>
</li></ul>
</li> <li> <a href="CanvasTechnicalGuide.html#Blending Modes"> Blending Modes</a>
</li> <li> <a href="CanvasTechnicalGuide.html#Canvas Icons"> Canvas Icons</a>
</li> <li> <a href="CanvasTechnicalGuide.html#Canvas HUD Example"> Canvas HUD Example</a>
</li></ul>
</li></ul>
</div>
<p />
<h2><a name="Overview"></a> Overview </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
Drawing using the Canvas class is similar to painting a picture except that your medium consists of images and text instead of paint.
<p />
<img src="rsrc/Three/CanvasTechnicalGuide/canvas_painting.jpg" alt="canvas_painting.jpg" width="640" height="400" />
<p />
Special functions exist for drawing elements to the screen, such as images, materials, shapes, and text. By combining these elements, a cohesive, attractive, and informative interface can be created. Of course, drawing interfaces and HUDs are not the only things that the Canvas class is used for. It is used in other places where drawing is needed, such as with ScriptedTextures. In any case, the basic concepts are the same regardless of where the Canvas class is being used to draw.
<p />
<h2><a name="Canvas Class"></a> Canvas Class </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
The Canvas class is appropriately named as it provides an empty canvas on which to draw. It also provides the tools necessary to do the drawing in the form of special drawing functions.
<p />
Each time the viewport is being updated, a new Canvas object is created. This means you cannot keep a reference to the same Canvas object and continue using it to draw to the screen. The HUD classes do keep a reference to the current Canvas, but it is only accessible during the main draw loop and within any functions executed during that loop. Otherwise, there is no guarantee the Canvas will exist or be usable.
<p />
<h3><a name="Canvas Properties"></a> Canvas Properties </h3>
<p />
<strong>Drawing</strong>
<p /> <ul>
<li> <strong>DrawColor</strong> - The color to use for any drawing. Will be used for text
</li> <li> <strong>Font</strong> - The Font to use for drawing text.
</li> <li> <strong>DefaultTexture</strong> - The texture used by default for drawing texture-based elements with no optional texture parameter specified.
</li></ul>
<p />
<strong>General</strong>
<p /> <ul>
<li> <strong>Org[X/Y]</strong> - The horizontal and vertical origin for the current clipping region.
</li> <li> <strong>Clip[X/Y]</strong> - The bottom right corner of the current clipping region.
</li> <li> <strong>Cur[X/Y/Z]</strong> - The current position to draw to.
</li> <li> <strong>CurYL</strong> - The largest vertical size of any element drawn since the last <code>DrawText()</code> call.
</li> <li> <strong>Size[X/Y]</strong> - The actual horizontal and vertical dimensions of the viewport the Canvas is drawing to.
</li> <li> <strong>bCenter</strong> - If TRUE, text drawn will be centered.
</li> <li> <strong>bNoSmooth</strong> - If TRUE, bilinear filtering will be applied to the elements drawn to the Canvas.
</li></ul>
<p />
<h3><a name="Canvas Functions"></a> Canvas Functions </h3>
<p />
<strong>General</strong>
<p /> <ul>
<li> <strong>Reset [bKeepOrigin]</strong> - Event called by the engine with each update to reset the properties of the Canvas. <ul>
<li> <strong>bKeeporigin</strong> - If TRUE, the <code>OrgX</code> and <code>OrgY</code> properties will not be reset.
</li></ul>
</li> <li> <strong>SetPos [PosX] [PosY] [PosZ]</strong> - Sets the current drawing position of the Canvas. <ul>
<li> <strong>Pos[X/Y/Z]</strong> - The horizontal and vertical position at which to draw. Z defaults to 1.0 and is usually omitted when calling this function.
</li></ul>
</li> <li> <strong>SetOrigin [X] [Y]</strong> - Sets the origin for the clipping region of the Canvas. <ul>
<li> <strong>[X/Y]</strong> - The horizontal and vertical position in pixels.
</li></ul>
</li> <li> <strong>SetClip [X] [Y]</strong> - Sets the position of the lower-left corner of the clipping region of the Canvas. <ul>
<li> <strong>[X/Y]</strong> - The horizontal and vertical position in pixels.
</li></ul>
</li> <li> <strong>SetDrawColor [R] [G] [B] [A]</strong> - Creates a Color using the given values and sets the <code>DrawColor</code> of the Canvas. <ul>
<li> <strong>[R/G/B/A]</strong> - The red, green, blue, and alpha values.
</li></ul>
</li> <li> <strong>SetDrawColorStruct [C]</strong> - Sets the <code>DrawColor</code> of the Canvas using the given Color. <ul>
<li> <strong>C</strong> - The Color to use.
</li></ul>
</li></ul>
<p />
<strong>Icon</strong>
<p /> <ul>
<li> <strong>MakeIcon [Texture] [U] [V] [UL] [VL]</strong> - Creates and returns a new CanvasIcon using the given texture. <ul>
<li> <strong>Texture</strong> - The texture to pull the icon from.
</li> <li> <strong>[U/V]</strong> - The horizontal and vertical position of the upper left corner of the portion of the texture to be used. This value is in texels.
</li> <li> <strong>[UL/VL]</strong> - The width and height of the portion of the texture to be used. This value is in texels.
</li></ul>
</li> <li> <strong>DrawIcon [Icon] [X] [Y] [Scale]</strong> - Draws a CanvasIcon at the given position and scale. <ul>
<li> <strong>Icon</strong> - The CanvasIcon to draw.
</li> <li> <strong>[X/Y]</strong> - The horizontal and vertical position in pixels at which to draw the icon on the screen.
</li> <li> <strong>Scale</strong> - The scale to apply to the icon.
</li></ul>
</li></ul>
<p />
<strong>Shapes</strong>
<p /> <ul>
<li> <strong>DrawRect [RectX] [RectY] [Tex]</strong> - Draws a filled rectangle of the given size at the current drawing position using the current <code>DrawColor</code>. <ul>
<li> <strong>Rect[X/Y]</strong> - The width and height of the rectangle to draw.
</li> <li> <strong>Tex</strong> - Optional. The texture to fill the rectangle with. Defaults to the DefaultTexture of the Canvas.
</li></ul>
</li> <li> <strong>DrawBox [width] [height]</strong> - Draws a 2 pixel wide outlined rectangle of the given size at the current drawing position of the Canvas. <ul>
<li> <strong>width</strong> - The width of the box to draw.
</li> <li> <strong>height</strong> - The height of the box to draw.
</li></ul>
</li> <li> <strong>Draw2DLine [X1] [Y1] [X2] [Y2] [LineColor]</strong> - Draws a line on the screen. <ul>
<li> <strong>[X/Y]1</strong> - The horizontal and vertical position in pixels from which to draw the line.
</li> <li> <strong>[X/Y]2</strong> - The horizontal and vertical position to draw the line to.
</li> <li> <strong>LineColor</strong> - The Color to use to draw the line.
</li></ul>
</li> <li> <strong>DrawTextureLine [StartPoint] [EndPoint] [Perc] [Width] [LineColor] [LineTexture] [U] [V] [UL] [VL]</strong> - Draws a 2D line using a rotated, textured tile. <ul>
<li> <strong>StartPoint</strong> - The starting point from which to draw the line. This is a Vector with the X and T components containing screen-space pixel coordinates.
</li> <li> <strong>EndPoint</strong> - The ending point in to draw the line to. This is a Vector with the X and T components containing screen-space pixel coordinates.
</li> <li> <strong>Perc</strong> - The amount of the line to draw. This value is subtracted from the overall distance from the <code>StartPoint</code> to the <code>EndPoint</code> to determine the length of the rendered line. The rendered line will always be centered at the midpoint from the <code>StartPoint</code> to the <code>EndPoint</code>.
</li> <li> <strong>Width</strong> - The width in pixels of each line.
</li> <li> <strong>LineColor</strong> - The Color to tint the first line.
</li> <li> <strong>Tex</strong> - The texture to be used to draw the lines.
</li> <li> <strong>[U/V]</strong> - The horizontal and vertical position of the upper left corner of the portion of the texture to be used. This value is in texels.
</li> <li> <strong>[UL/VL]</strong> - The width and height of the portion of the texture to be used. This value is in texels.
</li></ul>
</li> <li> <strong>DrawTextureDoubleLine [StartPoint] [EndPoint] [Perc] [Spacing] [Width] [LineColor] [AltLineColor] [Tex] [U] [V] [UL] [VL]</strong> - Draws two spaced 2D lines using rotated, textured tiles. <ul>
<li> <strong>StartPoint</strong> - The starting point from which to draw the lines. This is a Vector with the X and T components containing screen-space pixel coordinates.
</li> <li> <strong>EndPoint</strong> - The ending point in to draw the lines to. This is a Vector with the X and T components containing screen-space pixel coordinates.
</li> <li> <strong>Perc</strong> - The amount of the lines to draw. This value is subtracted from the overall distance from the <code>StartPoint</code> to the <code>EndPoint</code> to determine the length of the rendered line. The rendered lines will always be centered at the midpoint from the <code>StartPoint</code> to the <code>EndPoint</code>.
</li> <li> <strong>Spacing</strong> - The number of pixels between the two lines.
</li> <li> <strong>Width</strong> - The width in pixels of each line.
</li> <li> <strong>LineColor</strong> - The Color to tint the first line.
</li> <li> <strong>AltLineColor</strong> - The Color to tint the second line.
</li> <li> <strong>Tex</strong> - The texture to be used to draw the lines.
</li> <li> <strong>[U/V]</strong> - The horizontal and vertical position of the upper left corner of the portion of the texture to be used. This value is in texels.
</li> <li> <strong>[UL/VL]</strong> - The width and height of the portion of the texture to be used. This value is in texels.
</li></ul>
</li> <li> <strong>DrawDebugGraph [Title] [ValueX] [ValueY] [UL_X] [UL_Y] [W] [H] [RangeX] [RangeY]</strong> - Draws a graph comparing 2 variables.  Useful for visual debugging and tweaking. <ul>
<li> <strong>Title</strong> - The label to draw on the graph, or "" for none.
</li> <li> <strong>Value[X/Y]</strong> - Value of the point to plot on the horizontal and vertical axes of the graph.
</li> <li> <strong>UL_[X/Y]</strong> - The horizontal and vertical position in pixels for the upper left corner of the graph on the screen.
</li> <li> <strong>[W/H]</strong> - The width and height of the graph in pixels.
</li> <li> <strong>Range[X/Y]</strong> -The ranges of values shown on the graph for the horizontal and vertical axes.
</li></ul>
</li></ul>
<p />
<strong>Text</strong>
<p /> <ul>
<li> <strong>CreateFontRenderInfo [bClipText] [bEnableShadow] [GlowColor] [GlowOuterRadius] [GlowInnerRadius]</strong> - Creates and returns a new FontRenderInfo with the given properties. <ul>
<li> <strong>bClipText</strong> - If TRUE, text drawn with this FontRenderInfo should be clipped.
</li> <li> <strong>bEnableShadow</strong> - If TRUE, text drawn with this FontRenderInfo should be shadowed.
</li> <li> <strong>GlowColor</strong> - The base color to use for glowing text.
</li> <li> <strong>GlowOuterRadius</strong> - The Vector2D specifying the outline glow outer radius (0 to 1, 0.5 is edge of character silhouette) glow influence will be 0 at GlowOuterRadius.X and 1 at GlowOuterRadius.Y
</li> <li> <strong>GlowInnerRadius</strong> - The Vector2D specifying the outline glow inner radius (0 to 1, 0.5 is edge of character silhouette) glow influence will be 1 at GlowInnerRadius.X and 0 at GlowInnerRadius.Y
</li></ul>
</li> <li> <strong>StrLen [String] [XL] [YL]</strong> - Calculates the horizontal and vertical size of a given string. This takes text wrapping into account. <ul>
<li> <strong>String</strong> - The text to get the size of.
</li> <li> <strong>[X/Y]L</strong> - Out. Outputs the horizontal and vertical size of the text.
</li></ul>
</li> <li> <strong>TextSize [String] [XL] [YL]</strong> - Calculates the horizontal and vertical size of a given string. This is used for clipped text as it does not take wrapping into account. <ul>
<li> <strong>String</strong> - The text to get the size of.
</li> <li> <strong>[X/Y]L</strong> - Out. Outputs the horizontal and vertical size of the text.
</li></ul>
</li> <li> <strong>DrawText [Text] [CR] [XScale] [YScale] [RenderInfo]</strong> - Draws a string of text to the screen. <ul>
<li> <strong>Text</strong> - The string of text to be drawn.
</li> <li> <strong>CR</strong> - Optional. If TRUE, the current drawing position is incremented vertically by the size of the text drawn prior to drawing the text.
</li> <li> <strong>[X/Y]Scale</strong> - Optional. The horizontal and vertical scaling to apply to the text.
</li> <li> <strong>RenderInfo</strong> - Optional. The <code>FontRenderInfo</code> to use when drawing the text.
</li></ul>
</li></ul>
<p />
<strong>Texture/Material Drawing</strong>
<p /> <ul>
<li> <strong>DrawTile [Tex] [XL] [YL] [U] [V] [UL] [VL] [LColor] [ClipTile] [Blend]</strong> - Draws a texture to an axis-aligned quad at the current drawing position (CurX,CurY). <ul>
<li> <strong>Tex</strong> - The Texture to draw.
</li> <li> <strong>[XL/YL]</strong> - The width and height of the tile to be drawn.
</li> <li> <strong>[U/V]</strong> - The horizontal and vertical position of the upper left corner of the portion of the texture to be drawn. This value is in texels.
</li> <li> <strong>[UL/VL]</strong> - The width and height of the portion of the texture to be drawn. This value is in texels.
</li> <li> <strong>LColor</strong> - The color used to tint the tile.
</li> <li> <strong>ClipTile</strong> - If TRUE, the tile should be clipped by the clipping region.
</li> <li> <strong>Blend</strong> - Optional. The <code>EBlendMode</code> blending mode to use when drawing the tile.
</li></ul>
</li> <li> <strong>PreOptimizeDrawTiles [Num] [Tex] [Blend]</strong> - Pre-allocates vertices and triangles for future consecutive DrawTile() calls using the same texture and blending mode. <ul>
<li> <strong>Num</strong> - The number of times <code>DrawTile()</code> will be executed following this functional call. If other draws (Text, different textures, etc) are done before this amount of <code>DrawTile()</code> calls have been executed, the optimization will not work and will only waste memory.
</li> <li> <strong>Tex</strong> - The texture that will be used in the subsequent calls.
</li> <li> <strong>Blend</strong> - The <code>EBlendMode</code> blending mode that will be used in the subsequent calls.
</li></ul>
</li> <li> <strong>DrawMaterialTile [Mat] [XL] [YL] [U] [V] [UL] [VL] [LColor] [ClipTile] [Blend]</strong> - Draws a material to an axis-aligned quad at the current drawing position (CurX,CurY). <ul>
<li> <strong>Mat</strong> - The Material to draw.
</li> <li> <strong>[XL/YL]</strong> - The width and height of the tile to be drawn.
</li> <li> <strong>[U/V]</strong> - The horizontal and vertical coordinates of the upper left corner of the portion of the material to be drawn. This value is a percentage in the range [0,1].
</li> <li> <strong>[UL/VL]</strong> - The width and height of the portion of the texture to be drawn. This value is a percentage in the range [0,1].
</li> <li> <strong>LColor</strong> - The color used to tint the tile.
</li> <li> <strong>ClipTile</strong> - If TRUE, the tile should be clipped by the clipping region.
</li></ul>
</li> <li> <strong>DrawRotatedTile [Tex] [Rotation] [XL] [YL] [U] [V] [UL] [VL] [AnchorX] [AnchorY]</strong> - Draws a texture to a rotated quad at the current drawing position (CurX,CurY). <ul>
<li> <strong>Tex</strong> - The Texture to draw.
</li> <li> <strong>Rotation</strong> - The Rotator specifying the rotation of the tile.
</li> <li> <strong>[XL/YL]</strong> - The width and height of the tile to be drawn.
</li> <li> <strong>[U/V]</strong> - The horizontal and vertical position of the upper left corner of the portion of the texture to be drawn. This value is in texels.
</li> <li> <strong>[UL/VL]</strong> - The width and height of the portion of the texture to be drawn. This value is in texels.
</li> <li> <strong>Anchor[X/Y]</strong> - The horizontal and vertical position in pixels relative to the top-left corner of the tile to use as the pivot point for the rotation.
</li></ul>
</li> <li> <strong>DrawRotatedMaterialTile [Mat] [Rotation] [XL] [YL] [U] [V] [UL] [VL] [AnchorX] [AnchorY]</strong> - Draws a material to a rotated quad at the current drawing position (CurX,CurY). <ul>
<li> <strong>Mat</strong> - The Material to draw.
</li> <li> <strong>Rotation</strong> - The Rotator specifying the rotation of the tile.
</li> <li> <strong>[XL/YL]</strong> - The width and height of the tile to be drawn.
</li> <li> <strong>[U/V]</strong> - The horizontal and vertical coordinates of the upper left corner of the portion of the material to be drawn. This value is a percentage in the range [0,1].
</li> <li> <strong>[UL/VL]</strong> - The width and height of the portion of the texture to be drawn. This value is a percentage in the range [0,1].
</li> <li> <strong>Anchor[X/Y]</strong> - The horizontal and vertical position in pixels relative to the top-left corner of the tile to use as the pivot point for the rotation.
</li></ul>
</li> <li> <strong>DrawTileStretched [Tex] [Rotation] [XL] [YL] [U] [V] [UL] [VL] [LColor] [bStretchHorizontally] [bStretchVertically]</strong> - Draws a texture stretched to an axis-aligned quad at the current drawing position (CurX,CurY). The texture will be stretched to fit the tile, preserving the integrity of the texture. This is useful for drawing boxes of any size as the outline portion of the texture is unchanged, while the inner portion is scaled. <ul>
<li> <strong>Tex</strong> - The Texture to draw.
</li> <li> <strong>[XL/YL]</strong> - The width and height of the tile to be drawn.
</li> <li> <strong>[U/V]</strong> - The horizontal and vertical position of the upper left corner of the portion of the texture to be drawn. This value is in texels.
</li> <li> <strong>[UL/VL]</strong> - The width and height of the portion of the texture to be drawn. This value is in texels.
</li> <li> <strong>LColor</strong> - The color used to tint the tile.
</li> <li> <strong>bStretchHorizontally</strong> - Optional. If TRUE, the tile is stretched horizontally instead of scaled.
</li> <li> <strong>bStretchVertically</strong> - Optional. If TRUE, the tile is stretched vertically instead of scaled.
</li></ul>
</li> <li> <strong>DrawTris [Tex] [Triangles]</strong> - Draws an array of triangles to the screen. <ul>
<li> <strong>Tex</strong> - The texture to apply to the triangles.
</li> <li> <strong>Triangles</strong> - An array of <code>CanvasUVTris</code> to draw.
</li></ul>
</li> <li> <strong>DrawTexture [Tex] [Scale]</strong> - Draws the entirety of the given texture as a tile to the screen at the given scale. <ul>
<li> <strong>Tex</strong> - The texture to draw.
</li> <li> <strong>Scale</strong> - The scale to apply to the tile drawn. The dimensions of the final rendered tile will be: <code>(Scale * Tex.SizeX x Scale * Tex.SizeY)</code>
</li></ul>
</li> <li> <strong>DrawTextureBlended [Tex] [Scale] [Blend]</strong> - Draws the entirety of the given texture as a tile to the screen at the given scale using the given blend mode. <ul>
<li> <strong>Tex</strong> - The texture to draw.
</li> <li> <strong>Scale</strong> - The scale to apply to the tile drawn. The dimensions of the final rendered tile will be: <code>(Scale * Tex.SizeX x Scale * Tex.SizeY)</code>
</li> <li> <strong>Blend</strong> - The <code>EBlendMode</code> blending mode to use.
</li></ul>
</li></ul>
<p />
<strong>Transform</strong>
<p /> <ul>
<li> <strong>Project [location]</strong> - Transforms a 3D world-space vector into 2D screen coordinates. <ul>
<li> <strong>location</strong> - The world-space Vector to transform.
</li></ul>
</li> <li> <strong>DeProject [ScreenPos] [WorldOrigin] [WorldDirection]</strong> - Transforms 2D screen coordinates into a 3D world-space origin and direction. These can then be used in a trace to do ray-picking. <ul>
<li> <strong>ScreenPos</strong> - The Vector2D representing the screen coordinates in pixels to transform.
</li> <li> <strong>WorldOrigin</strong> - Out. Outputs the world-space origin Vector.
</li> <li> <strong>WorldDirection</strong> - Out. Outputs the world-space direction Vector.
</li></ul>
</li> <li> <strong>PushTranslationMatrix [TranslationVector]</strong> - Pushes a translation matrix onto the canvas. <ul>
<li> <strong>TranslationVector</strong> - Translation Vector to use to create the translation matrix.
</li></ul>
</li> <li> <strong>PopTransform</strong> - Pops the topmost matrix from the canvas transform stack.
</li></ul>
<p />
<h2><a name="Canvas Drawing"></a> Canvas Drawing </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
The Canvas is essentially a virtual region which can be drawn to. It has a width and a height, which are usually the dimensions of the viewport with which the Canvas is associated. The Canvas also has a clipping region which either clips, or cuts off, elements drawn outside of it or can be used to wrap text within a specific area.
<p />
<img src="rsrc/Three/CanvasTechnicalGuide/canvas_regions.jpg" alt="canvas_regions.jpg" width="640" height="400" />
<p />
When a drawing function is executed, the elements drawn by that function will be placed at the current drawing position of the Canvas. In general, the current drawing position should be set before drawing each new element; however, in some cases with drawing text, a carriage return can be executed with each call allowing multiple lines of text to quickly be drawn with successive draw calls.
<p />
<h2><a name="Project and _DeProject"></a> Project and DeProject </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
Projection refers to the transformation between world coordinates and screen coordinates. This is a very useful concept in certain situations. It can be used to draw elements on the HUD that appear to be located at specific locations in the world, such as floating above a player, or it can be used to determine what objects in the world the player is aiming at or the mouse cursor is over. An RTS game would make heavy use of these concepts in order to select units in the world. The ability to display pertinent information about an item in the world can be useful in just about any type of game.
<p />
Projection is accomplished through the use of two main functions:
<p /> <ul>
<li> <strong><a href="CanvasTechnicalGuide.html#Project" class="twikiAnchorLink">Project</a></strong> - Transforms a 3D world-space vector into 2D screen coordinates.
</li> <li> <strong><a href="CanvasTechnicalGuide.html#DeProject" class="twikiAnchorLink">DeProject</a></strong> - Transforms 2D screen coordinates into a 3D world-space origin and direction.
</li></ul>
<p />
<h3><a name="Project"></a> Project </h3>
<p />
The <code>Project()</code> function takes a Vector in world-space, such as the location of an Actor, and transforms it into 2D screen coordinates.
<p />
<img src="rsrc/Three/CanvasTechnicalGuide/project_game.jpg" alt="project_game.jpg" width="651" height="400" />
<p />
Imagine your computer screen is a window which you look through into the game world. Then, trace a line from your eye to the Actor in the world on the other side of the "window". The point where that line intersects with the window would be the screen coordinates returned by the <code>Project()</code> function.
<p />
<img src="rsrc/Three/CanvasTechnicalGuide/project_window.jpg" alt="project_window.jpg" width="574" height="325" />
<p />
By calculating the position of an Actor on the screen, it becomes trivial to overlay graphics or text or a combination of the two that appear be located in the world at the location of the associated Actor. A basic use of this might to display the names of the players in the game floating above their heads.
<p />
<img src="rsrc/Three/CanvasTechnicalGuide/player_names.jpg" alt="player_names.jpg" width="631" height="400" />
<p />
<h3><a name="DeProject"></a> DeProject </h3>
<p />
The <code>DeProject()</code> function takes a set of screen coordinates in the form of a Vector2D and transforms those into origin and direction Vectors, which are the components of a ray.
<p />
<img src="rsrc/Three/CanvasTechnicalGuide/deproject_window.jpg" alt="deproject_window.jpg" width="574" height="325" />
<p />
The origin and direction Vectors can be used to create a start and end Vector to use with the <code>Trace()</code> function to do actions such as mouse picking or to project a reticule in the world at the location the mouse is currently hovering over.
<p />
<img src="rsrc/Three/CanvasTechnicalGuide/mouse_reticle.jpg" alt="mouse_reticle.jpg" width="640" height="480" />
<p />
<h2><a name="Blending Modes"></a> Blending Modes </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
Blending modes should be familiar to anyone who has used the Material system in Unreal Engine 3. The blend mode describes how the current element being drawn is combined with that is already in the framebuffer. In terms of Canvas drawing, this could mean how a texture drawn to the HUD combines with the world being rendered behind it, or it could describe how a texture being drawn to a ScriptedTexture combines with the current contents of that ScriptedTexture.
<p />
The enum of possible options for blending modes, <code>EBlendMode</code>, contains the following items:
<p /> <ul>
<li> <em>BLEND_Opaque</em> - Final color = Source color. This blend mode is compatible with lighting.
</li> <li> <em>BLEND_Masked</em> - Final color = Source color if OpacityMask &lt; OpacityMaskClipValue, otherwise the pixel is discarded. This blend mode is compatible with lighting.
</li> <li> <em>BLEND_Translucent</em> - Final color = Source color * Opacity + Dest color * (1 - Opacity). This blend mode is NOT compatible with dynamic lighting.
</li> <li> <em>BLEND_Additive</em> - Final color = Source color + Dest color. This blend mode is NOT compatible with dynamic lighting.
</li> <li> <em>BLEND_Modulate</em> - Final color = Source color * Dest color. This blend mode is NOT compatible with dynamic lighting, or fog, unless this is a decal material.
</li> <li> <em>BLEND_SoftMasked</em> - Similar to BLEND_Masked, but the borders between opaque and transparent are blurred. There are some limitations to using this mode. For more information, see the <a href="SoftMasked.html" class="twikiLink">SoftMasked</a> page.
</li> <li> <em>BLEND_AlphaComposite</em> - Used for materials with textures that have premultiplied alpha. That is, the color channel has already been multiplied by the alpha so when blending with the frame buffer, the GPU can skip the (SrcAlpha * SrcColor) arithmetic that is typically used with alpha blending. The blend mode was added as part of the Scaleform GFx integration which often uses this type of blending for UI textures.
</li></ul>
<p />
In general, the only options that make sense when being used with the Canvas are the BLEND_Opaque, BLEND_Additive, and BLEND_Modulated modes. The other modes are meant for use in Materials and rely on other parameters not readily available outside of the Material system.
<p />
<h2><a name="Canvas Icons"></a> Canvas Icons </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
It may become obvious that the functions for drawing graphics to the screen can be quite tedious with the amount of parameters they require. It should also be apparent that should the coordinates for a texture need to be changed, searching through the drawing loop for any and all uses of that texture in order to change them would be undesirable to say the least. Canvas Icons solve these problems by allowing a texture and coordinates to be specified in the default properties and then the Canvas Icon is passed to the draw function instead of all the individual parameters. This keeps the drawing code much cleaner and makes iteration much more efficient as you know right where the values you need to modify are located.
<p />
By default, the only function provided in the Canvas class for drawing Canvas Icons is the <code>DrawIcon()</code> function. This function does a simple <code>DrawTile()</code> call using the Canvas Icon's properties. Should you need specialized functionality, such as drawing Canvas Icons stretched, custom drawing functions would need to be created in your HUD class to handle these.
<p />
An example might be:
<p />
<div style="margin:0px 10px;background:#e0e0e0;font:12px Courier;padding:5px;">
<pre>
/&#42;&#42;
 &#42; Draw a CanvasIcon stretched at the desired canvas position.
 &#42;/
final function DrawIconStretched(CanvasIcon Icon, float X, float Y, optional float ScaleX, optional float ScaleY)
{
   if (Icon.Texture !&#61; None)
   {
      // verify properties are valid
      if (ScaleX &#60;&#61; 0.f)
      {
         ScaleX &#61; 1.f;
      }

      if (ScaleY &#60;&#61; 0.f)
      {
         ScaleY &#61; 1.f;
      }

      if (Icon.UL &#61;&#61; 0.f)
      {
         Icon.UL &#61; Icon.Texture.GetSurfaceWidth();
      }

      if (Icon.VL &#61;&#61; 0.f)
      {
         Icon.VL &#61; Icon.Texture.GetSurfaceHeight();
      }

      // set the canvas position
      Canvas.SetPos(X, Y);

      // and draw the texture
      Canvas.DrawTileStretched(Icon.Texture, Abs(Icon.UL) &#42; ScaleX, Abs(Icon.VL) &#42; ScaleY,
                           Icon.U, Icon.V, Icon.UL, Icon.VL,, true, true);
   }
}
</pre>
</div>
<p />
<h2><a name="Canvas HUD Example"></a> Canvas HUD Example </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
This example shows the creation of a very simple HUD which displays the player's name and health using various drawing methods found in the Canvas class.
<p />
<span style="font:12px Courier;">
UDNHUD.uc
</span>
<div style="margin:0px 10px;background:#e0e0e0;font:12px Courier;padding:5px;">
<pre>
class UDNHUD extends MobileHUD;

var Texture2D DefaultTexture;
var Font PlayerFont;
var float PlayerNameScale;

var CanvasIcon HealthIcon;
var CanvasIcon HealthBackgroundIcon;

function DrawHUD()
{
   local Vector2D TextSize;

   super.DrawHUD();

   //Draw Player health
   Canvas.DrawIcon(HealthIcon, 8, 8, 0.5);
   Canvas.Font &#61; PlayerFont;
   Canvas.SetDrawColorStruct(WhiteColor);
   DrawIconStretched(HealthBackgroundIcon, 0, 0, 2.167, 0.875);
   Canvas.TextSize(PlayerOwner.Pawn.Health, TextSize.X, TextSize.Y);
   Canvas.SetPos(96 - (TextSize.X &#42; PlayerNameScale / RatioX),0);
   Canvas.DrawText(PlayerOwner.Pawn.Health,,PlayerNameScale / RatioX,PlayerNameScale / RatioY);

   //Draw Player Name
   Canvas.SetPos(0, SizeY - 64);
   Canvas.DrawTileStretched(DefaultTexture,256, 64, 8, 72, 112, 48, ColorToLinearColor(GreenColor), true, true, 1.0);
   Canvas.TextSize(UTPlayerController(PlayerOwner).PlayerReplicationInfo.PlayerName, TextSize.X, TextSize.Y);
   Canvas.SetPos(128 - ((TextSize.X &#42; PlayerNameScale / RatioX) / 2), SizeY - 28 - ((TextSize.Y &#42; PlayerNameScale / RatioY) / 2));
   Canvas.DrawText(UTPlayerController(PlayerOwner).PlayerReplicationInfo.PlayerName,,PlayerNameScale / RatioX,PlayerNameScale / RatioY);
}

/&#42;&#42;
 &#42; Draw a CanvasIcon stretched at the desired canvas position.
 &#42;/
final function DrawIconStretched(CanvasIcon Icon, float X, float Y, optional float ScaleX, optional float ScaleY)
{
   if (Icon.Texture !&#61; None)
   {
      // verify properties are valid
      if (ScaleX &#60;&#61; 0.f)
      {
         ScaleX &#61; 1.f;
      }

      if (ScaleY &#60;&#61; 0.f)
      {
         ScaleY &#61; 1.f;
      }

      if (Icon.UL &#61;&#61; 0.f)
      {
         Icon.UL &#61; Icon.Texture.GetSurfaceWidth();
      }

      if (Icon.VL &#61;&#61; 0.f)
      {
         Icon.VL &#61; Icon.Texture.GetSurfaceHeight();
      }

      // set the canvas position
      Canvas.SetPos(X, Y);

      // and draw the texture
      Canvas.DrawTileStretched(Icon.Texture, Abs(Icon.UL) &#42; ScaleX, Abs(Icon.VL) &#42; ScaleY,
                           Icon.U, Icon.V, Icon.UL, Icon.VL,, true, true);
   }
}

defaultproperties
{
   DefaultTexture&#61;Texture2D&#39;UDNHUDContent.UDN&#95;HUDGraphics&#39;
   PlayerFont&#61;&#34;UI&#95;Fonts.MultiFonts.MF&#95;HudLarge&#34;
   PlayerNameScale&#61;0.25
   HealthIcon&#61;(Texture&#61;Texture2D&#39;UDNHUDContent.UDN&#95;HUDGraphics&#39;,U&#61;72,V&#61;8,UL&#61;48,VL&#61;48)
   HealthBackgroundIcon&#61;(Texture&#61;Texture2D&#39;UDNHUDContent.UDN&#95;HUDGraphics&#39;,U&#61;8,V&#61;8,UL&#61;48,VL&#61;48)
}
</pre>
</div>
<p />
<span style="font:12px Courier;">
UDNGame.uc
</span>
<div style="margin:0px 10px;background:#e0e0e0;font:12px Courier;padding:5px;">
<pre>
class UDNGame extends UTGame;

defaultproperties
{
   bUseClassicHUD&#61;true
   HUDType&#61;class&#39;UDNExamples.UDNHUD&#39;
}
</pre>
</div>
<p />
</noautolink>
<p />
<p />
<p />
<p />
<p />
<p />


<!-- BEGIN UE4 NOTICE -->



<div id="version_message" style="display:none;">

    <div style="position:fixed;top:0px;left:0px;width:100%;height:100%;background:#000;opacity:0.5;">

    </div>

    <div style="position:fixed;top:50%;left:50%;margin:-70px 0px 0px -240px;background:#FFF;border-radius:6px;width:480px;box-shadow:0px 5px 30px -5px rgba(0,0,0,0.9);">

        <div style="font-size:16px;font-weight:bold;background: url(rsrc/Three/warning.png) no-repeat scroll 5px 5px;padding:4px 10px 5px 25px;height:21px;width:440px;">

            Important!

        </div>

        <div style="font-size:11px;padding:5px 10px 10px;width:460px;">

            <p>You are viewing documentation for the <strong>Unreal Development Kit (UDK)</strong>.</p>



            <p>If you are looking for the Unreal Engine 4 documentation, please visit the <a style="color:#000;" href="https://docs.unrealengine.com">Unreal Engine 4 Documentation</a> site.</p>

        </div>

        <div style="height:20px;padding:4px;margin:6px;border-top:1px solid #a0a0a0;">

            <form onsubmit="return closeVersionMessage();">

                <input type="checkbox" id="dismiss" value="dismiss" />

                <label for="dsimiss">Don't show me this again</label>

                <input type="submit" value="Close" style="cursor:pointer;float:right;width:60px;color:#f0f0f0;font-weight:bold;background:#882222;height:24px;padding:2px 3px 3px;text-align:center;border:1px outset #000;" />

            </form>

        </div>

    </div>

</div>



<script type="text/javascript">

    window.onload = function () {

        LoadVersionMessage();

    }



    function LoadVersionMessage()

    {

        var showMessage = "false";
        if(showMessage != "false")

        {

            showVersionMessage();

        }

    }



    function showVersionMessage()

    {

        var message = document.getElementById("version_message");

        if(message)

        {

            message.style.display = "block";

        }

    }



    function closeVersionMessage() {

        var dismiss = document.getElementById("dismiss");

        var message = document.getElementById("version_message");

        if (message) {

            message.style.display = "none";

        }

        if (dismiss.checked) {

            eraseCookie("doc_version_message");

            createCookie("doc_version_message", "false", 365);

            dismiss.checked = false;

        }

        return false;

    }



    function createCookie(name, value, days) {

        if (days) {

            var date = new Date();

            date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));

            var expires = "; expires=" + date.toGMTString();

        }

        else var expires = "";

        document.cookie = name + "=" + value + expires + "; path=/";

    }



    function readCookie(name) {

        var nameEQ = name + "=";

        var ca = document.cookie.split(';');

        for (var i = 0; i < ca.length; i++) {

            var c = ca[i];

            while (c.charAt(0) == ' ') c = c.substring(1, c.length);

            if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);

        }

        return null;

    }



    function eraseCookie(name) {

        createCookie(name, "", -1);

    }

</script>



<!-- END UE4 NOTICE -->



</div></div><div id="footer"><div style="BACKGROUND-COLOR: transparent; margin: 0; padding: 0; width: 100%;"><div>&nbsp;</div><div style="float: left; text-align: left; vertical-align: bottom; width: 50%;"><a href="http://www.videogamevoters.org"><img src="rsrc/vgvn.jpg" border="0" width="234" height="60" alt="Video Game Voters Network" /></a></div><div style="float: right; text-align: right; vertical-align: bottom; width: 50%;">Copyright &copy; 2001-2012 <a href="http://www.epicgames.com" target="_top">Epic Games, Inc.</a><br /><a href="../Main/TermsAndConditions.html" class="twikiLink">Terms and Conditions</a><br /><a href="http://epicgames.com/privacynotice" target="_top">Privacy Notice</a></div></div></div></div>
<p />
</html></body>
