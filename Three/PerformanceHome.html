<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
	"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title> UDK | PerformanceHome    </title>

<style type="text/css" media="all">@import "rsrc/twiki_webs.css";</style>
<style type="text/css" media="all">@import "rsrc/udn_new.css";</style>
<link rel="icon" href="rsrc/Three/WebPreferences/favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="rsrc/Three/WebPreferences/favicon.ico" type="image/x-icon" />


<!-- view.static_udn3.tmpl  -->
<script language="JavaScript" type="text/javascript" src="rsrc/udn.js"></script>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

</head>
<p />
<body id="webbgThree">
<p />

<p />
<div id="webThree"><div id="head">
<!--
<div class="header">
 -->
<div style="background: url(/pub/webbg_udn.jpg); background-repeat: no-repeat; height:140px; width: 100%;" >
<!--
<div style="background: transparent url(/pub/udn_header_bg.jpg); background-repeat: repeat-x; height:140px; width: 100%; margin-left: 991px;">
 -->
<p />
<div id="nav">
<ul class="nav">
<font color=black>|</font>&nbsp;&nbsp;<li class=nav_Three><a href="../Main/WebHome.html" class="twikiLink">Main</a></li><font color=black>|</font><li class=nav_Three><a href="../Two/WebHome.html" class="twikiLink">UnrealEngine2</a></li><font color=black>|</font><li class=nav_Three><a href="WebHome.html" class="twikiLink">UnrealEngine3</a></li><font color=black>|</font><li class=nav_Three><a href="https://docs.unrealengine.com" class="twikiLink">UnrealEngine4</a></li><font color=black>|</font><li class=nav_Three><a href="../Main/BusinessAndLegal.html" class="twikiLink">Business &amp; Legal</a></li><font color=black>|</font>
</ul><br><br><br>
</div>
</div>
</div> <!-- end head -->
<div id="pagedefault">
<div id="maincol">
<div id="tool">
<div id="tooltop">UDN</div>
<div id="tooltext" style="padding: 10px 10px 10px 10px;">
Search public documentation: <br>
<form ACTION="/search/index.php" METHOD="GET" NAME="main" ID="main">
<input TYPE="TEXT" NAME="q" SIZE="15" STYLE="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: xx-small;">
<input TYPE="SUBMIT" VALUE="Search" STYLE="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: xx-small;"><br>
</form>
</div>
<div id="toolband">PerformanceHome  </b></div>
<div id="tooltext">
<a href="PerformanceHomeJP.html" class="twikiLink">日本語訳</a><br><a href="https://udn.epicgames.com/Three/PerformanceHomeCH" class="restricted" class="restricted" class="twikiLink">中国翻译</a><br><a href="PerformanceHomeKR.html" class="twikiLink">한국어</a><br>

<!-- Three/PerformanceHome -->
<hr size="1" noshade="noshade" />
Interested in the Unreal Engine? <br>
Visit the <a href="http://www.unrealtechnology.com" target="_top">Unreal Technology</a> site.<br>
<br>
Looking for jobs and company info? <br>
Check out the <a href="http://www.epicgames.com" target="_top">Epic games</a> site.<br>
<br>
Questions about support via UDN? <br>
Contact the <a href="../Main/ContactUDNStaff.html" class="twikiLink">UDN Staff</a> <br>
<br>
</div> <!-- end toolbox content -->
<div id="toolbottom"></div>
</div> <!-- end tool -->
<p />
<noautolink>
<p />
<div style="padding:0px 0px 0px 4px;font:10px Verdana;">
<b><a href="WebHome.html" class="twikiLink">UE3 Home</a></b> &gt; Performance, Profiling, and Optimization
</div>
<hr size="1" noshade="noshade">
<h1><a name="Performance, Profiling, and Optimization"></a> Performance, Profiling, and Optimization </h1>
<p />
<div class="twikiToc"> <ul>
<li> <a href="PerformanceHome.html#Performance, Profiling, and Optimization"> Performance, Profiling, and Optimization</a> <ul>
<li> <a href="PerformanceHome.html#Overview"> Overview</a>
</li> <li> <a href="PerformanceHome.html#General Upkeep"> General Upkeep</a>
</li> <li> <a href="PerformanceHome.html#Basic Tools and Techniques"> Basic Tools and Techniques</a>
</li> <li> <a href="PerformanceHome.html#Memory Profiling"> Memory Profiling</a>
</li> <li> <a href="PerformanceHome.html#Content Profiling and Optimization"> Content Profiling and Optimization</a>
</li> <li> <a href="PerformanceHome.html#CPU Performance"> CPU Performance</a> <ul>
<li> <a href="PerformanceHome.html#Game Thread Performance"> Game Thread Performance</a>
</li> <li> <a href="PerformanceHome.html#Render Thread Performance"> Render Thread Performance</a>
</li></ul>
</li> <li> <a href="PerformanceHome.html#GPU Performance"> GPU Performance</a>
</li> <li> <a href="PerformanceHome.html#Network Profiling"> Network Profiling</a>
</li> <li> <a href="PerformanceHome.html#Mobile Profiling"> Mobile Profiling</a>
</li></ul>
</li></ul>
</div>
<p />
<h2><a name="Overview"></a> Overview </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
Making a game that both runs well and fits withing memory constraints is an exciting problem that touches upon many systems and many disciplines. This page is your gateway into a large number of tools and techniques in which to help you win the battle. Even with the best tools in the world, you still need to instill the mindset of making certain that people are using the minimal amount of data / cpu cycles to create what they want. The tools and techniques listed here will help you do exactly that.
<p />
To do that we break the large problem into a number of sub problems to allow us to focus on each area in as much of an orthogonal way as possible. This allows multiple people to work/scale independently.
<p />
<h2><a name="General Upkeep"></a> General Upkeep </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
Keeping your game running is a balancing act between constantly adding new features vs fitting within your budgets. Code being handled by multiple developers has to all fit together while constantly being modified. The game has to run within the constraints of the target platforms. Keeping track of all of these aspects and making sure the game continues to be functional and playable requires constant monitoring.
<p />
The <a href="GameMaintenance.html" class="twikiLink">Game Maintenance</a> page outlines several tools and techniques that can be used on a regular basis to maintain a game during production.
<p />
<h2><a name="Basic Tools and Techniques"></a> Basic Tools and Techniques </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
Being able to quickly and easily find which parts of your game are causing issues is extremely important during production. This can save time and money. But what can be an even bigger time saver is identifying potential problem areas early, even before they are shown to cause issues in standard game testing situations. If you know something is going to cause issues, it can be fixed or worked around before too many other elements or systems rely on it, making the solution that much more of a headache.
<p />
The <a href="ProfilingBasics.html" class="twikiLink">Basic Profiling and Optimization Techniques</a> page describes several simple techniques that can be used to identify and fix areas or elements in your game that are currently, or may become, performance issues.
<p />
The <a href="GameplayPerformanceOptimization.html" class="twikiLink">Gameplay Optimization for Gameplay Programmers</a> page describes a sample workflow for optimizing gameplay and rendering being used during the development of <strong>Infinity Blade Dungeons</strong>.
<p />
<h2><a name="Memory Profiling"></a> Memory Profiling </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
Memory usage is always a concern for video games, especially those destined for consoles or mobile devices where memory space is limited. This extends from the amount of space taken up by content assets on disk to memory usage of different systems during runtime to the amount of memory allocations and deallocations. These are all extremely important pieces of information that make it possible to constrain memory usage to acceptable limits.
<p />
The <a href="MemoryProfilingHome.html" class="twikiLink">Memory Usage and Profiling</a> page shows several tools and techniques that can be used to be aware of and control memory usage by your game.
<p />
<h2><a name="Content Profiling and Optimization"></a> Content Profiling and Optimization </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
Given the amount of content used in today's games, it is extremely important to limit the impact of that content on the game's perofrmance whenever possible. Optimizing content has the potential to provide the largest return on investment so it is often the first area that is profiled and optmized.
<p />
Unreal Engine 3 provides several tools to help in this process. These tools along with many tips on how to limit the ipacet of content are detailed on the <a href="ContentProfilingHome.html" class="twikiLink">Content Profiling and Optimization</a> page.
<p />
<h2><a name="CPU Performance"></a> CPU Performance </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
The work performed by the engine on the CPU is broken up into threads. While there can be several worker threads performing various duties at any one time, the two main threads are:
<p /> <ul>
<li> <strong>GameThread</strong> - The GameThread handles updating gameplay. This includes ticking Actors, ticking components, performing garbage collection, etc.
</li> <li> <strong>RenderThread</strong> - The RenderThread handles performing lighting calculations, shadowing calculations, translucenecy setup, updating scene captures, occlusion, etc.
</li></ul>
<p />
Managing engine performance on the CPU means making sure that no one thread is ever sitting around for long waiting for any other thread to complete its work, while also trying to keep overall time spent doing work on the CPU to a minimum.
<p />
After you've isolated your frame bottleneck as a CPU performance issue, one of next steps should be to determine where in your C++ code the time is being spent.  Additionally, you may want to look for hidden performance costs such as Load-Hit-Stores or cache misses.
<p />
Most platforms have robust CPU sampling tools available that can provide detailed code metrics and even call graphs for C++ code using data captured from a live session.  For example, on the Windows platform you might use <em>Intel VTune</em> to capture sampling data over a short period to isolate hot spots.  Console platforms have similar tools available, often included with the development tool chain.
<p />
You'll want to familiarize yourself with these applications and use them extensively throughout development!
<p />
Note that on some consoles, Unreal has a utility function to help perform single frame CPU sampling captures. You can type <code><b>TRACE GAME</b></code> to initiate a CPU trace.
<p />
Most CPU profilers support capturing sampling data and/or call graph data over a short duration.  This is great for debugging performance issues that involve a sustained poor frame rate.  <em>Sampling captures</em> will usually give you function call hot spots in the C++ code.  This can be useful sometimes, but more often than not you'll find that a <em>Call Graph capture</em> is much more useful!
<p />
<em>Call graphs</em> often have more capture-time overhead, but provide detailed information about the <strong>callers</strong> of hot spot functions, which can often lead you straight to the source of a problem!  Even in cases where many objects/actors are calling a single function that shows up as slow, if you're lucky the call graph will lead you back to a particular actor class name or other pattern that hints you to the cause.
<p />
Sometimes call graphs will simply show <em>UnrealScript</em> taking up time (calls to <em>ProcessEvent</em>, <em>CallFunction</em>, etc), in which case you'll want to run a <a href="GameThreadProfilingHome.html#StatsViewer" class="twikiAnchorLink">Stats Viewer</a> or <a href="GameThreadProfilingHome.html#ScriptProfiling" class="twikiAnchorLink">Gameplay Profiler</a> session capture to drill down into those calls.
<p />
When dealing with frame <em>hitches</em>, CPU profilers can sometimes be unwieldy due to relatively low sampling frequency.  If the hitch is easily reproducible in game, a good strategy is to initiate the hitch as frequently as possible (ideally many times per frame) while capturing a short CPU profiling session.  If the hitch is more elusive, you'll want to use capture data for use in <a href="PerformanceHome.html#StatsViewer" class="twikiAnchorLink">Stats Viewer</a> which will provide historical call graph data over many frames.
<p />
<h3><a name="Game Thread Performance"></a> Game Thread Performance </h3>
<p />
Every gameplay object that is added to the scene takes up some resource; and usually the most interesting objects take up the most resources. In order to have enough GameThread CPU time for those objects you need to make certain that other objects are not unfairly utilizing resources and that all objects do the minimal amount of work needed to accomplish their goal.
<p />
Many tools, tips, and techniques for profiling and optimizing GameThread work are detailed on the <a href="GameThreadProfilingHome.html" class="twikiLink">Game Thread Profiling and Optimization</a> page.
<p />
<h3><a name="Render Thread Performance"></a> Render Thread Performance </h3>
<p />
The complexity of the scene in terms of lighting and shadowing, as well as several other processor-intensive visual aspects, can have a huge impact on time spent in the RenderThread. Figuring out which of these areas is slwoing down the RenderThread will help focus efforts on lessening the impact of elements that are not as important, while making more resources available to crucial features and visual showpieces.
<p />
The <a href="RenderThreadProfilingHome.html" class="twikiLink">Render Thread Profiling and Optimization</a> page demonstrates several tools and methods of profiling and optimizing visual elements handled in the RenderThread.
<p />
<h2><a name="GPU Performance"></a> GPU Performance </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
While the CPU handles calculations and updating the game each frame, the GPU is responsible for rendering the game. Obviously, this means drawing polygons, but also involves dealing with shader complexity and overdraw, GPU-skinned skeletal meshes, post processing effects, fluid surfaces, etc. If the GPU is spending a lot of time working, it could mean your game is fill-bound or other rendering elements are causing performance issues.
<p />
The GPU receives commands from the rendering thread and does:
<p /> <ul>
<li> Transforming vertices and skinning of skeletal meshes
</li> <li> Rasterization (figuring out which pixels fall on which triangles)
</li> <li> Shading (executing the pixel shader on all the pixels of a given triangle. The pixel shader is controlled by the material given to that triangle)
</li></ul>
<p />
With GPU profiling there are a lot of complicated characteristics. The rule of thumb with regards to GPU performance is to always experiment. The main time-consuming operation performed by the GPU is pixel shading. The complexity of the shaders used, the amount of screenspace those shaders take up, the amount of overdraw caused by translucent shaders, etc. are all very important factors to consider when profiling the GPU. Another area that the GPU is responsible for is the transforming of skinned meshes. The amount of vertices in the skeletal meshes being used is a large factor as skinned vertices are much more costly than static mesh vertices. Obviously, the amount of polygons being drawn is also a potential problem area for GPU performance, though modern cards have the ability to drawn large amounts of polygons. Even so, you always want to be sure that polygons which do not need to be drawn are not being drawn, and that meshes only have as many polygons as are necessary to achieve the desired visual result.
<p />
To aid in the capturing of information about the GPU, a GPU single-frame sampling capture can be performed on some consoles by using the <code><b>TRACE RENDER</b></code> command.
<p />
There are several tools available to help in profiling the GPU both on the PC and on the various consoles. The <a href="GPUProfilingHome.html" class="twikiLink">GPU Performance and Profiling</a> page explains how to use the tools provided with Unreal Engine 3 as well as other external tools to determine where performance issues may be occurring on the GPU.
<p />
<h2><a name="Network Profiling"></a> Network Profiling </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
Keeping an eye on the amount of data being sent over the network for online games is important. You don't want to be sending a bunch of unnecessary data or have specific objects spamming the network. Keeping the network traffic streamlined will make online games run smoother for all the players, but especially those with limited bandwidth.
<p />
<!-- The Network Profiling and Optimization<sup>?</sup> page provides information over monitoring network traffic and optimizing how and what data is sent to limit the necessary bandwidth. -->
<p />
<h2><a name="Mobile Profiling"></a> Mobile Profiling </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
Profiling games on mobile devices is pretty similar to profiling for PC. There are some special tools for the various platforms and some considerations to take into account, however. For details on profiling on mobile devices, see the <a href="MobileProfilingHome.html" class="twikiLink">Mobile Profiling Home</a> page.
<p />
</noautolink>
<p />
<p />
<p />
<p />
<p />
<p />


<!-- BEGIN UE4 NOTICE -->



<div id="version_message" style="display:none;">

    <div style="position:fixed;top:0px;left:0px;width:100%;height:100%;background:#000;opacity:0.5;">

    </div>

    <div style="position:fixed;top:50%;left:50%;margin:-70px 0px 0px -240px;background:#FFF;border-radius:6px;width:480px;box-shadow:0px 5px 30px -5px rgba(0,0,0,0.9);">

        <div style="font-size:16px;font-weight:bold;background: url(rsrc/Three/warning.png) no-repeat scroll 5px 5px;padding:4px 10px 5px 25px;height:21px;width:440px;">

            Important!

        </div>

        <div style="font-size:11px;padding:5px 10px 10px;width:460px;">

            <p>You are viewing documentation for the <strong>Unreal Development Kit (UDK)</strong>.</p>



            <p>If you are looking for the Unreal Engine 4 documentation, please visit the <a style="color:#000;" href="https://docs.unrealengine.com">Unreal Engine 4 Documentation</a> site.</p>

        </div>

        <div style="height:20px;padding:4px;margin:6px;border-top:1px solid #a0a0a0;">

            <form onsubmit="return closeVersionMessage();">

                <input type="checkbox" id="dismiss" value="dismiss" />

                <label for="dsimiss">Don't show me this again</label>

                <input type="submit" value="Close" style="cursor:pointer;float:right;width:60px;color:#f0f0f0;font-weight:bold;background:#882222;height:24px;padding:2px 3px 3px;text-align:center;border:1px outset #000;" />

            </form>

        </div>

    </div>

</div>



<script type="text/javascript">

    window.onload = function () {

        LoadVersionMessage();

    }



    function LoadVersionMessage()

    {

        var showMessage = "false";
        if(showMessage != "false")

        {

            showVersionMessage();

        }

    }



    function showVersionMessage()

    {

        var message = document.getElementById("version_message");

        if(message)

        {

            message.style.display = "block";

        }

    }



    function closeVersionMessage() {

        var dismiss = document.getElementById("dismiss");

        var message = document.getElementById("version_message");

        if (message) {

            message.style.display = "none";

        }

        if (dismiss.checked) {

            eraseCookie("doc_version_message");

            createCookie("doc_version_message", "false", 365);

            dismiss.checked = false;

        }

        return false;

    }



    function createCookie(name, value, days) {

        if (days) {

            var date = new Date();

            date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));

            var expires = "; expires=" + date.toGMTString();

        }

        else var expires = "";

        document.cookie = name + "=" + value + expires + "; path=/";

    }



    function readCookie(name) {

        var nameEQ = name + "=";

        var ca = document.cookie.split(';');

        for (var i = 0; i < ca.length; i++) {

            var c = ca[i];

            while (c.charAt(0) == ' ') c = c.substring(1, c.length);

            if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);

        }

        return null;

    }



    function eraseCookie(name) {

        createCookie(name, "", -1);

    }

</script>



<!-- END UE4 NOTICE -->



</div></div><div id="footer"><div style="BACKGROUND-COLOR: transparent; margin: 0; padding: 0; width: 100%;"><div>&nbsp;</div><div style="float: left; text-align: left; vertical-align: bottom; width: 50%;"><a href="http://www.videogamevoters.org"><img src="rsrc/vgvn.jpg" border="0" width="234" height="60" alt="Video Game Voters Network" /></a></div><div style="float: right; text-align: right; vertical-align: bottom; width: 50%;">Copyright &copy; 2001-2012 <a href="http://www.epicgames.com" target="_top">Epic Games, Inc.</a><br /><a href="../Main/TermsAndConditions.html" class="twikiLink">Terms and Conditions</a><br /><a href="http://epicgames.com/privacynotice" target="_top">Privacy Notice</a></div></div></div></div>
<p />
</html></body>
