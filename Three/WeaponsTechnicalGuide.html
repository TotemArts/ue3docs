<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
	"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title> UDK | WeaponsTechnicalGuide    </title>

<style type="text/css" media="all">@import "rsrc/twiki_webs.css";</style>
<style type="text/css" media="all">@import "rsrc/udn_new.css";</style>
<link rel="icon" href="rsrc/Three/WebPreferences/favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="rsrc/Three/WebPreferences/favicon.ico" type="image/x-icon" />


<!-- view.static_udn3.tmpl  -->
<script language="JavaScript" type="text/javascript" src="rsrc/udn.js"></script>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

</head>
<p />
<body id="webbgThree">
<p />

<p />
<div id="webThree"><div id="head">
<!--
<div class="header">
 -->
<div style="background: url(/pub/webbg_udn.jpg); background-repeat: no-repeat; height:140px; width: 100%;" >
<!--
<div style="background: transparent url(/pub/udn_header_bg.jpg); background-repeat: repeat-x; height:140px; width: 100%; margin-left: 991px;">
 -->
<p />
<div id="nav">
<ul class="nav">
<font color=black>|</font>&nbsp;&nbsp;<li class=nav_Three><a href="../Main/WebHome.html" class="twikiLink">Main</a></li><font color=black>|</font><li class=nav_Three><a href="../Two/WebHome.html" class="twikiLink">UnrealEngine2</a></li><font color=black>|</font><li class=nav_Three><a href="WebHome.html" class="twikiLink">UnrealEngine3</a></li><font color=black>|</font><li class=nav_Three><a href="https://docs.unrealengine.com" class="twikiLink">UnrealEngine4</a></li><font color=black>|</font><li class=nav_Three><a href="../Main/BusinessAndLegal.html" class="twikiLink">Business &amp; Legal</a></li><font color=black>|</font>
</ul><br><br><br>
</div>
</div>
</div> <!-- end head -->
<div id="pagedefault">
<div id="maincol">
<div id="tool">
<div id="tooltop">UDN</div>
<div id="tooltext" style="padding: 10px 10px 10px 10px;">
Search public documentation: <br>
<form ACTION="/search/index.php" METHOD="GET" NAME="main" ID="main">
<input TYPE="TEXT" NAME="q" SIZE="15" STYLE="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: xx-small;">
<input TYPE="SUBMIT" VALUE="Search" STYLE="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: xx-small;"><br>
</form>
</div>
<div id="toolband">WeaponsTechnicalGuide  </b></div>
<div id="tooltext">
<a href="WeaponsTechnicalGuideJP.html" class="twikiLink">日本語訳</a><br><a href="WeaponsTechnicalGuideCH.html" class="twikiLink">中国翻译</a><br><a href="WeaponsTechnicalGuideKR.html" class="twikiLink">한국어</a><br>

<!-- Three/WeaponsTechnicalGuide -->
<hr size="1" noshade="noshade" />
Interested in the Unreal Engine? <br>
Visit the <a href="http://www.unrealtechnology.com" target="_top">Unreal Technology</a> site.<br>
<br>
Looking for jobs and company info? <br>
Check out the <a href="http://www.epicgames.com" target="_top">Epic games</a> site.<br>
<br>
Questions about support via UDN? <br>
Contact the <a href="../Main/ContactUDNStaff.html" class="twikiLink">UDN Staff</a> <br>
<br>
</div> <!-- end toolbox content -->
<div id="toolbottom"></div>
</div> <!-- end tool -->
<p />
<noautolink>
<p />
<div style="padding:0px 0px 0px 4px;font:10px Verdana;">
<b><a href="WebHome.html" class="twikiLink">UE3 Home</a></b> &gt; <b><a href="GameplayProgrammingHome.html" class="twikiLink">Gameplay Programming</a></b> &gt; Weapon System Technical Guide
</div>
<hr size="1" noshade="noshade">
<h1><a name="Weapon System Technical Guide"></a> Weapon System Technical Guide </h1>
<hr size="1" noshade="noshade">
<p />
<div class="twikiToc"> <ul>
<li> <a href="WeaponsTechnicalGuide.html#Weapon System Technical Guide"> Weapon System Technical Guide</a> <ul>
<li> <a href="WeaponsTechnicalGuide.html#Overview"> Overview</a>
</li> <li> <a href="WeaponsTechnicalGuide.html#Inventory"> Inventory</a> <ul>
<li> <a href="WeaponsTechnicalGuide.html#Inventory Management for Weapons"> Inventory Management for Weapons</a>
</li></ul>
</li> <li> <a href="WeaponsTechnicalGuide.html#Weapons"> Weapons</a> <ul>
<li> <a href="WeaponsTechnicalGuide.html#Weapon Firing Mode"> Weapon Firing Mode</a>
</li> <li> <a href="WeaponsTechnicalGuide.html#Weapon Fire Type"> Weapon Fire Type</a>
</li> <li> <a href="WeaponsTechnicalGuide.html#The Firing Sequence"> The Firing Sequence</a> <ul>
<li> <a href="WeaponsTechnicalGuide.html#Weapon Firing Logic"> Weapon Firing Logic</a>
</li></ul>
</li> <li> <a href="WeaponsTechnicalGuide.html#Weapon Properties"> Weapon Properties</a>
</li> <li> <a href="WeaponsTechnicalGuide.html#Weapon Functions"> Weapon Functions</a>
</li> <li> <a href="WeaponsTechnicalGuide.html#UDKWeapon Properties"> UDKWeapon Properties</a>
</li> <li> <a href="WeaponsTechnicalGuide.html#UDKWeapon Functions"> UDKWeapon Functions</a>
</li> <li> <a href="WeaponsTechnicalGuide.html#UTWeapon Properties"> UTWeapon Properties</a>
</li> <li> <a href="WeaponsTechnicalGuide.html#UTWeapon Functions"> UTWeapon Functions</a>
</li></ul>
</li> <li> <a href="WeaponsTechnicalGuide.html#Attachments"> Attachments</a> <ul>
<li> <a href="WeaponsTechnicalGuide.html#UTWeaponAttachment Properties"> UTWeaponAttachment Properties</a>
</li> <li> <a href="WeaponsTechnicalGuide.html#UTWeaponAttachment Functions"> UTWeaponAttachment Functions</a>
</li></ul>
</li> <li> <a href="WeaponsTechnicalGuide.html#Projectiles"> Projectiles</a> <ul>
<li> <a href="WeaponsTechnicalGuide.html#Projectile Properties"> Projectile Properties</a>
</li> <li> <a href="WeaponsTechnicalGuide.html#Projectile Functions"> Projectile Functions</a>
</li> <li> <a href="WeaponsTechnicalGuide.html#UTProjectile Properties"> UTProjectile Properties</a>
</li> <li> <a href="WeaponsTechnicalGuide.html#UTProjectile Functions"> UTProjectile Functions</a>
</li></ul>
</li> <li> <a href="WeaponsTechnicalGuide.html#Pickups"> Pickups</a> <ul>
<li> <a href="WeaponsTechnicalGuide.html#Weapon Factory"> Weapon Factory</a>
</li> <li> <a href="WeaponsTechnicalGuide.html#Weapon Locker"> Weapon Locker</a>
</li> <li> <a href="WeaponsTechnicalGuide.html#Ammo Factory"> Ammo Factory</a>
</li></ul>
</li></ul>
</li></ul>
</div>
<p />
<h2><a name="Overview"></a> Overview </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
Weapons in Unreal are inventory items that can be used by the player, normally to fire some sort of projectile. The default weapon system as found in Unreal Engine 3 may appear on the surface to be catered to creating different types of guns as is common in many first person shooter games, but in reality it is quite easy to create other types of weapons and usable items that might be found in other types of games such as spells to heal companions, a net to capture creatures, or perhaps a boomerang to stun enemies. It is even conceivable that the weapon system could be modified and used in something as different as a sports game; perhaps for the different clubs a player would have available in his bag in a golf game. With a little creativity and an open mind, the weapon system in Unreal Engine 3 can easily be made to fit the needs and constraints of just about any type of game.
<p />
The purpose of this document is to give you a quick overview of how the weapon system works and how easy it is to create a new weapon.  First, the process of how the weapon interacts with a pawn in terms of inventory control including giving a weapon to a pawn, selecting and discarding weapons, etc. will be broken down. Then the sequence performed by the weapon when firing will be covered showing exactly what functions and states are integral to the process. Finally, many of the important functions and properties belonging to the various weapon classes along with descriptions of each will be listed. With all of this information, you should start to get a good idea of how the weapon system might fit into your game and what areas will need to be tweaked, modified, or ignored.
<p />
For more information on the content side of setting up weapons, see <a href="SettingUpWeapons.html" class="twikiLink">Setting Up Weapons</a>.
<p />
<h2><a name="Inventory"></a> Inventory </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
The Inventory system in Unreal provides a way to keep track of all of the items belong to each player in the game. Each player has their own InventoryManager which handles picking up, throwing away, equipping, using, etc. inventory items. Items which can be placed in the players inventory all inherit from the inventory base class which gives them a specific subset of functions and properties needed for being used in the inventory system and managed by the InventoryManager.
<p />
<h3><a name="Inventory Management for Weapons"></a> Inventory Management for Weapons </h3>
<p />
A Weapon is a child of Inventory, so there are two ways for it to end up in a pawns inventory.  It's either given to the pawn directly using the Pawn.GiveWeapon() function or it's assigned to the pawn via a DroppedPickup or PickupFactory actor.  DroppedPickups are actors that get created when a weapon is placed in the world and represents the Weapon's physical presence.   They are created when a player throws out an item (either intentionally or upon death) in the Inventory.DropFrom().  The PickupFactory actor usually represents the actor placed in a map by a designer.  These actors handle the task of deciding if there is an inventory item to give and are responsible for its state in the world.
<p />
Both the DroppedPickup and the PickupFactory take an existing Inventory item and give it to a pawn.  This is perform through the Item.GiveTo() function.  This function tells the InventoryManager to add this item to a pawn's inventory via the InventoryManager.AddInventory() function.
<p />
The second method for giving a weapon to a pawn is through Pawn.GiveWeapon().  This is a helper function that allows non-physical actors (such as the GameInfo or a Mutator) to easily give a weapon to a pawn without having to spawn one itself.  It does this by calling the InventoryManager.CreateInventory() passing in the class of the weapon to create.
<p />
Once your weapon has been given to a pawn, you will need to activate it before it can be used.  Typically, activation either comes via user input, typically through the PlayerController.NextWeapon() or PlayerController.PrevWeapon() and InventoryManager.SwitchToWeaponClass() exec functions.  These functions perform some logic and when a new weapon is decided upon, call InventoryManager.SetCurrentWeapon().
<p />
SetCurrentWeapon() is the main starting point for activating a weapon.  It takes 1 parameter, DesiredWeapon which should be a reference to the weapon you want to activate and it should always be called from a local client.   Once called, it initiates the chain of code that causes the current weapon to be put down (returned to inventory and deactivated).   Figure 1 gives a visual overview of how the system works.
<p />
<img alt="figure1.jpg" src="rsrc/Three/WeaponsTechnicalGuide/figure1.jpg" />
<p />
The InventoryManager uses the PendingWeapon property to determine which weapon to switch to when the putdown sequence is finished.  SetCurrentWeapon() sets the property and then tells then calls Weapon.TryPutDown().  This function initiates the deactivation of the weapon.
<p />
Weapon.TryPutDown() should attempt to change in to the WeaponPuttingDown state.  If it's not a good time, the weapon sets the bWeaponPutDown flag property.  This property is checked in most transitions to see if a put down has been requested.  If TryPutDown() is successful in either entering the WeaponPuttingDown state or at setting the bWeaponPutDown flag, it should return true.  Other it returns false.
<p />
If the attempt at putting the weapon down is successful, SetCurrentWeapon() calls ServerSetCurrentWeapon() to initiate the process on the server.  This process is nearly an identical to that in SetCurrentWeapon(), however, two things need to be considered.  First, ServerSetCurrentWeapon() assumes that the TryPutDown() succeeded on the client.  Second, it has to take in to account listen servers and restricts the server-side calling of TryPutDown() if this InventoryManager is locally controlled.
<p />
All of the above assumes that there is an existing weapon.  If not, TryPutDown() is skipped and control is passed directly to ChangedWeapon().  Before we look ChangedWeapon(), it's important to look at the WeaponPuttingDown and the other weapon states.
<p />
There are six important states to a weapon.  They are:
<p /> <ol>
<li> Inactive - Typically, a weapon is in the inactive state when it's not in use.  By default, this means the weapon has been hidden and it will no longer get StartFire()/EndFire() events.
</li> <li> Active - When a weapon is in hand, but not firing it is in the active state.  A call to StartFire() from this state initiates the firing sequence.
</li> <li> WeaponEquipping - When you first activate a weapon (by calling it's Activate() function) it will enter the WeaponEquipping state.  Here it should play any "bring up" animations and effects.  The time in which it takes to become active is controlled by TimeWeaponEquipping()
</li> <li> WeaponPuttingDown - This states defines a weapon as it's being put down and deactivated.  It's typically entered from the TryPutDown() function or by a delayed check of bWeaponPuttingDown.  Like WeaponEquipping, it should play any needed animations and effects and time the action using TimeWeaponPutDown().
</li> <li> PendingClientWeaponSet - This is a special state that will only ever be entered in to on the client.  A weapon enters this state when it's been activated, but it's initial and important information has not yet been replicated (such as instigator or owner).  Once in this state, the weapon will set interval check to see that these values have come in.  At that point, it will continue to the WeaponEquipping state.
</li> <li> Firing - This is the state that does the heavy work. Triggered by StartFire, normally specified in the FiringStatesArray as 'Firing'
</li></ol>
<p />
With the exception of PendingClientWeaponSet, the weapon will run the various states in parallel on both a client and the server, branching when needed, however there will be more on this later.
<p />
Once a weapon has been put down, InventoryManager.ChangedWeapon() is called (from the WeaponIsDown() function of the weapons WeaponPuttingDown state). ChangedWeapon is responsible for the actual changing of the weapon property in pawn and making any notifications.  Finally it activates the new weapon.
<p />
This occurs, again in parallel on the client and the server.  This is needed in order to avoid a visual delay as the server catches up.  You will see that the weapon code handles this gracefully using the PendingFire system when we get there.
<p />
Once Weapon.Activate() is called, the weapon will transition in to the WeaponEquipping state.  From the list above, we see that this state is responsible for initializing the weapon for use and playing any bring up animations or effects.  The `equipping' of the weapon is controlled by the TimeWeaponEquipping()  function.  It's from inside this function that the Weapon's Mesh is attached and any animations are played.  Finally, a timer is set for EquipTime and when it expires, the WeaponEquipped() function is called. Once equipped the weapon transitions to the Active state and is ready to use.
<p />
<h2><a name="Weapons"></a> Weapons </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
The Weapon classes are obviously the main focus of the weapon system in unreal. They contain the logic for determining how the weapon should function and behave. For the most part, this revolves the concept of firing shots; however, it may help to think of this "firing" concept in more general terms as the weapon "being used". This abstracts the idea of a weapon in Unreal away from the narrow definition of a gun and pushes it more in the direction of an item the player can use to perform some action in the game. Of course, if your game is a shooter, this shouldn't be a problem as the terminology will fit your concepts very well. In the case of games which may have other ideas of what a weapon is or could be used for, this abstraction can make it easier when making your way around the weapon system.
<p />
<h3><a name="Weapon Firing Mode"></a> Weapon Firing Mode </h3>
<p />
Weapons in Unreal can have multiple modes. By default these are Fire and Alt Fire and are performed by clicking the left and right mouse buttons respectively. Each firing mode can behave completely differently. An example would be the Link Gun. The main firing mode shoots out plasma projectiles while the alt firing mode fires a constant beam. These are completely different and must be handled as such in the code responsible for carrying each one out. A weapon could contain more than just two firing modes, provided there is a mechanism employed for firing each of the different firing modes. This isn't something built-in to the default system. New bindings in the input system would need to be created and it is possible that new methods might need to be added to facilitate the addition of such functionality.
<p />
<h3><a name="Weapon Fire Type"></a> Weapon Fire Type </h3>
<p />
The way in which a weapon determines how it shoots and what it hits (or affects) is controlled by the fire type of the current firing mode. Unreal has two defined firing types by default: Instant Fire and Projectile Fire. Instant fire is just what its name implies. It does a trace upon firing to instantly determine what was hit and deal out damage or any other result desired. Projectile Fire is also aptly named. When a projectile firing mode is fired, a new projectile is spawned and sent off in the direction the weapon was aimed. The projectile then takes over and determines what it hits and deals out the damage or other result.
<p />
In addition to these defined firing modes, both if which can be modified if need be, there is also a Custom Fire type. The behavior of this type is not defined and can be completely customized to suit your needs. This makes the weapon system extremely flexible as it allows you to dream up any effect you wish the weapon to have and implement it.
<p />
<h3><a name="The Firing Sequence"></a> The Firing Sequence </h3>
<p />
Once we have an active weapon, this weapon can begin receiving firing events from the Player controller.  Before you look at the firing code path, you should review the variable declarations in Weapon.uc as well as the inventory functions like HasAmmo().  By default, the UE3 weapon system contains only stub functions for handling ammunition and the actual implementation is left to the game.
<p />
Below is a comment block from Weapon.uc that gives a quick overview of the firing sequence.
<p />
<h4><a name="Weapon Firing Logic"></a> Weapon Firing Logic </h4>
<p />
The weapon system here is designed to be a single code path that follows the same flow on both the Authoritive server and the local client.  Remote clients know nothing about the weapon and utilize the WeaponAttachment system to see the end results.
<p /> <ol>
<li> The InventoryManager (IM) on the Local Client receives a StartFire call.  It calls StartFire().
</li> <li> If Local Client is not Authoritive it notifies the server via ServerStartFire().
</li> <li> Both StartFire() and ServerStartFire() sync up by calling BeginFire().
</li> <li> BeginFire sets the PendingFire flag for the incoming fire Mode
</li> <li> BeginFire looks at the current state and if it's in the Active state, it begins the firing sequence by transitioning to the new fire state as defined by the FiringStatesArray array.  This is done by calling SendToFiringState.
</li> <li> The Firing Logic is handled in the various firing states.  Firing states are responsible for the following: <ol>
<li> Continuing to fire if their associated PendingFire is hot
</li> <li> Transitioning to a new weapon when out of ammo
</li> <li> Transitioning to the "Active" state when no longer firing
</li></ol>
</li></ol>
<p />
The weapon system also receives a StopFire() event from the IM.  When this occurs, the following logic is performed:
<p /> <ol>
<li> The IM on the Local Client calls StopFire().
</li> <li> If Weapon Stop fire is not on the Authoritive process, it notifes the server via the ServerStopFire() event.
</li> <li> Both StopFire() and ServerStopFire() sync up by calling EndFire().
</li> <li> EndFire() clears the PendingFire flag for this outgoing fire mode.
</li></ol>
<p />
Firing states should be identical in their execution, branching outwards as need.  For example, in the default firing state ('WeaponFiring') the function FireAmmunition() occurs in all applicable processes.
<p />
That's a lot to take in, so let's look at the entire sequence in more detail, and we begin at the PlayerController.  When the PlayerController receives a StartFire() exec command, it tells the pawn.  The pawn tells the InventoryManager and the InventoryManager begins the full sequence by calling Owner.Weapon.Start().  The PlayerController is responsible for recognizing which fire mode the end user is looking to use and pass that along.  In time, the property Weapon.CurrentFireMode will be set.
<p />
Once StartFire() is called, the weapon does a quick Ammo check and if it fails, it attempts to switch to a better weapon.  If it doesn't fail, it calls BeginFire().  Additionally, if StartFire() was initiated on a remote client, then the requested is replicated to the server via ServerStartFire(), which in turn calls BeginFire().  Weapon.BeginFire() is where the weapon begins to run in parallel on both the client and server.  From here, you will see that the code path will only diverge as needed to handle effects/etc.  In most states, all BeginFire() does is make sure the PendingFire byte flag for the selected Firing mode is set.
<p />
Only from the Active state will the weapon begin the firing sequence.  This occurs with a call to Weapon.SendToFiringState().  This function will transition the weapon to the state WeaponFiring.  Upon entering the new state, the weapon will immediately attempt to take a shot by calling the FireAmmunition() function.  It then sets up the timing for the firing sequence by calling TimeWeaponFiring().
<p />
By default, the FireAmmunition() function is very simple and is listed below:
<p />
<div class="codesnippet">
<pre>
/&#42;&#42;
 &#42; FireAmmunition: Perform all logic associated with firing a shot
 &#42; - Fires ammunition (instant hit or spawn projectile)
 &#42; - Consumes ammunition
 &#42; - Plays any associated effects (fire sound and whatnot)
 &#42;
 &#42; Network: LocalPlayer and Server
 &#42;/

simulated function FireAmmunition()
{
   // Use ammunition to fire
   ConsumeAmmo( CurrentFireMode );

   // if this is the local player, play the firing effects
   PlayFiringSound();

   // Handle the different fire types
   switch( WeaponFireTypes&#91;CurrentFireMode] )
   {
      case EWFT&#95;InstantHit:
         InstantFire();
         break;

      case EWFT&#95;Projectile:
         ProjectileFire();
         break;

      case EWFT&#95;Custom:
         CustomFire();
         break;
   }
}
</pre>
</div>
<p />
The FireAmmunition() function is responsible to initiate the actual "shot" and refers to the WeaponFireTypes entry for the current fire mode.  If the weapon is an instant hit weapon (EWFT_InstantHit) then TraceFire() is called.  TraceFire() is responsible for tracing a shot and managing any hits.  For weapons that launch projectiles (EWFT_Projectile) the ProjectileFire() function is called.  This function is responsible for spawning and initializing the projectile.  Finally, if it is a custom firing type (EWFT_Custom) then the CustomFire() function is called.
<p />
TimeWeaponFiring() sets a timer that will trigger the RefireCheckTimer() function at the given firing interval for the current fire mode.  RefireCheckTimer() will check to see if a state transition is needed, or fire an additional shot.  State transitions are needed if the weapon is out of ammo or if the PendingFire byte flag for the current firing mode is no longer set.  The function ShouldRefire() handles the logic to decide if the weapon should keep on firing, or abort and go to the Active state.
<p />
Like starting the firing sequence, stopping the sequence begins at the PlayerController and follows an also identical path.  The PlayerController notifies the Pawn who notifies the InventoryManager who notifies the current weapon.  The weapon's StopFire() then splits to the ServerStopFire() if needed and finally we end with EndFire() clearing the PendingFire byte flags.
<p />
<h3><a name="Weapon Properties"></a> Weapon Properties </h3>
<p />
These properties are found in the base Weapon class. They are common to all weapons in Unreal and pertain to basic and general weapon functionality.
<p />
<strong>AI</strong>
<p /> <ul>
<li> <strong>ShouldFireOnRelease</strong> - Tells the AI whether the fire button needs to be released for the weapon to fire for each fire mode. A value of 0 means fire on press. Any other value means fire on release.
</li> <li> <strong>bInstantHit</strong> - If true, tells the AI that this weapon is an instant hit weapon.
</li> <li> <strong>bMeleeWeapon</strong> - If true, tells the AI that this weapon is a melee weapon.
</li> <li> <strong>AIRating</strong> - Specifies how desirable the weapon is when bots are determining which weapon in their inventory to use or whether to pick up this weapon.
</li></ul>
<p />
<strong>Firing and Timing</strong>
<p /> <ul>
<li> <strong>FiringStatesArray</strong> - List of the firing state to use for each <a href="#Weapon Fire Mode">fire mode</a>. The default system uses the <em>WeaponFiring</em> state.
</li> <li> <strong>WeaponFireTypes</strong> - List of the <a href="#Weapon Fire Type">fire type</a> to use for each fire mode.      <em>EWFT_InstantHit</em> - The weapon traces a shot to determine a hit and immediately causes an effect.      <em>EWFT_Projectile</em> - The weapon spawns a new projectile pointed at the crosshair.      <em>EWFT_Custom</em> - Requires implementing a custom firing sequence.      <em>EWFT_None</em> - The weapon does not fire.
</li> <li> <strong>WeaponProjectiles</strong> - List of classes to use for the projectiles of each fire mode, assuming the fire mode uses the EWFT_Projectile fire type.
</li> <li> <strong>FireInterval</strong> - Sets the amount of time a single fire of the weapon takes.
</li> <li> <strong>Spread</strong> - Sets the amount of spread between shots to use for each fire mode.
</li> <li> <strong>InstantHitDamage</strong> - Sets the amount of damage instant hit shots from this weapon should inflict for each fire mode.
</li> <li> <strong>InstantHitMomentum</strong> - Sets the amount of momentum instant hit shots from this weapon should impart for each fire mode.
</li> <li> <strong>InstanthitDamageTypes</strong> - Sets the damage types used for instant hit shots from this weapon for each fire mode.
</li> <li> <strong>FireOffset</strong> - Sets the offset to use when spawning projectiles for this weapon.
</li> <li> <strong>WeaponRange</strong> - Maximum distance this weapon can fire. This is used for traces performed in functions such as InstantFire(), ProjectileFire(), AdjustAim(), etc.
</li></ul>
<p />
<strong>Inventory</strong>
<p /> <ul>
<li> <strong>EquipTime</strong> - Sets the amount of time it takes to equip this weapon.
</li> <li> <strong>PutDownTime</strong> - Sets the amount of time it takes to put away this weapon.
</li> <li> <strong>bWeaponPutDown</strong> - If set to true, the weapon will be put away at the end of the current state.
</li> <li> <strong>bCanThrow</strong> - If true, this weapon can be thrown away by the player. Usually set to false for weapons that are in the default inventory.
</li></ul>
<p />
<strong>Mesh and Animation</strong>
<p /> <ul>
<li> <strong>Mesh</strong> - Sets the mesh (type is not limited here, but Unreal assumes skeletal mesh) to use for the weapon. This is the first person mesh.
</li> <li> <strong>DefaultAnimSpeed</strong> - Sets the speed at which to playback animations on this weapon when no duration is specified.
</li></ul>
<p />
<h3><a name="Weapon Functions"></a> Weapon Functions </h3>
<p />
<strong>Ammo</strong>
<p /> <ul>
<li> <strong>GetProjectileClass</strong> - Returns the projectile class corresponding to the current fire mode.
</li> <li> <strong>FireAmmunition</strong> - Performs all the logic associated with firing a shot for the current fire mode, e.g. calls InstantFire(), ProjectileFire(), or CustomFire().
</li> <li> <strong>ConsumeAmmo [FireModeNum]</strong> - Stub function called when weapon fires to adjust ammo count accordingly. Subclasses should override this. <ul>
<li> <strong>FireModeNum</strong> - Holds the current fire mode to consume ammo for.
</li></ul>
</li> <li> <strong>AddAmmo [Amount]</strong> - Function stub called to add ammo for this weapon. Subclasses should override this. <ul>
<li> <strong>Amount</strong> - Holds the amount of ammo to add.
</li></ul>
</li> <li> <strong>HasAmmo [FireModeNum] [Amount]</strong> - Returns whether the weapon has ammo for the given fire mode. Subclasses should override this as it defaults to always returning true. <ul>
<li> <strong>FireModeNum</strong> - Holds the fire mode to check for ammo.
</li> <li> <strong>Amount</strong> - Optional. Holds the amount of ammo to check for. If not specified, check for any ammo at all.
</li></ul>
</li> <li> <strong>HasAnyAmmo</strong> - Returns whether the weapon has any ammo at all, regardless of fire mode. Subclasses should override this as it defaults to always returning true.
</li> <li> <strong>WeaponEmpty</strong> - Function stub called when the weapon runs out of ammo during firing. Subclasses should override this function.
</li></ul>
<p />
<strong>AI</strong>
<p /> <ul>
<li> <strong>IsFiring</strong> - Returns whether the weapon is currently firing or not.
</li> <li> <strong>GetAIRating</strong> - Returns the AIRating for this weapon.
</li> <li> <strong>GetWeaponRating</strong> - Returns the weighting representing how desirable the weapon is to use.
</li> <li> <strong>CanAttack [Other]</strong> - Returns whether the weapon is within range to attack the given Actor. Subclasses should override this as it defaults to always returning true. <ul>
<li> <strong>Other</strong> - References the Actor to attack.
</li></ul>
</li> <li> <strong>FireOnRelease</strong> - Returns whether the weapon fires on release or not.
</li> <li> <strong>NotifyWeaponFired [FireMode]</strong> - Notifies the AI that the weapon has been fired. <ul>
<li> <strong>FireMode</strong> - Holds the fire mode that was fired.
</li></ul>
</li> <li> <strong>NotifyWeaponFinishedFiring [FireMode]</strong> - Notifies the AI that the weapon has stopped firing. <ul>
<li> <strong>FireMode</strong> - Holds the fire mode of that stopped firing.
</li></ul>
</li> <li> <strong>RecommendLongRangedAttack</strong> - Returns whether the bot should use this weapon for a long range attack.
</li></ul>
<p />
<strong>Aim</strong>
<p /> <ul>
<li> <strong>GetViewAxes [XAxis] [YAxis] [ZAxis]</strong> - Outputs the base view aim rotation axes of the weapon's owner. <ul>
<li> <strong>XAxis</strong> - Out. Outputs the X-axis component.
</li> <li> <strong>YAxis</strong> - Out. Outputs the Y-axis component.
</li> <li> <strong>ZAxis</strong> - Out. Outputs the Z-axis component.
</li></ul>
</li> <li> <strong>GetAdjustedAim [StartFireLoc]</strong> - Allows the weapon, pawn, and controller to make on-the-fly adjustments to where the weapon is pointing. <ul>
<li> <strong>StartFireLoc</strong> - Holds the initial point the shot was fired from.
</li></ul>
</li> <li> <strong>AddSpread [BaseAim]</strong> - Adds any fire spread offset to the base aim rotator and returns the adjusted aim rotation. <ul>
<li> <strong>BaseAim</strong> - Holds the base aim rotation.
</li></ul>
</li> <li> <strong>GetTargetDistance</strong> - Calculates the approximate Screen distance from the camera to whatever is at the center of the viewport. Useful for stereoizing the crosshair to reduce eyestrain.
</li> <li> <strong>AdjustFOVAngle [FOVAngle]</strong> - Function stub that allows the weapon to modify the player's field of view and returns the adjusted FOV angle. Subclasses should override this function. <ul>
<li> <strong>FOVAngle</strong> - Holds the input FOV angle.
</li></ul>
</li> <li> <strong>GetPhysicalFireStartLoc [AimDir]</strong> - Returns the world location for spawning projectiles, pulled into the Pawn's collision along the AimDir direction. <ul>
<li> <strong>AimDir</strong> - Optional. Holds the direction the weapon is aiming.
</li></ul>
</li></ul>
<p />
<strong>Damage</strong>
<p /> <ul>
<li> <strong>GetDamageRadius</strong> - Returns the damage radius of the projectile for the current fire mode, or 0 if instant hit.
</li> <li> <strong>PassThroughDamage [HitActor]</strong> - Returns whether an instant fire shot from this weapon should hit the given actor or ignore it. <ul>
<li> <strong>HitActor</strong> - References the Actor to test.
</li></ul>
</li> <li> <strong>ProcessInstantHit [FiringMode] [Impact] [NumHits]</strong> - Processes a successful hit from an instant fire shot. Causes damage to the hit Actor and can spawn any effects necessary. <ul>
<li> <strong>FirignMode</strong> - Holds the firing mode that fired the shot.
</li> <li> <strong>ImpactInfo</strong> - Holds the info about the hit Actor.
</li> <li> <strong>NumHits</strong> - Optional. Holds the number of hits to apply damage for. Useful for multi-hit weapons such as shotguns.
</li></ul>
</li></ul>
<p />
<strong>Effects</strong>
<p /> <ul>
<li> <strong>PlayFireEffects [FireModeNum] [HitLocation]</strong> - Function stub for playing any fire effects (such as muzzle flashes, etc.) for the weapon when firing. Subclasses should override this function. <ul>
<li> <strong>FireModeNum</strong> - Holds the fire mode to play effects for.
</li> <li> <strong>HitLocation</strong> - Optional. Holds a location to use for playing effects.
</li></ul>
</li> <li> <strong>StopFireEffects [FireModeNum]</strong> - Function stub for stopping any active effects. Subclasses should override this function. <ul>
<li> <strong>FireModeNum</strong> - Holds the fire mode to stop effects for.
</li></ul>
</li> <li> <strong>IncrementFlashCount</strong> - Increments the Pawn's FlashCount variable used for playing weapon fire effects on remote clients.
</li> <li> <strong>ClearFlashCount</strong> - Clears the Pawn's FlashCount variable.
</li> <li> <strong>SetFlashLocation [HitLocation]</strong> - Sets the location of a hit from weapon fire to be replicated to all clients for playing fire effects. <ul>
<li> <strong>HitLocation</strong> - The location of the weapon fire hit.
</li></ul>
</li> <li> <strong>ClearFlashLocation</strong> - Clears the flash location and stops weapon fire effects.
</li> <li> <strong>GetMuzzleLoc</strong> - Returns the world location for spawning visual effects.
</li></ul>
<p />
<strong>Firing and Timing</strong>
<p /> <ul>
<li> <strong>StartFire [FireModeNum]</strong> - Called on local player to start the firing process. Passes call on to server and simulates firing effects locally. <ul>
<li> <strong>FireModeNum</strong> - Holds the fire mode that was fired.
</li></ul>
</li> <li> <strong>ServerStartFire [FireModeNum]</strong> - Called on server to start the firing process and replicate to all clients. <ul>
<li> <strong>FireModeNum</strong> - Holds the fire mode that was fired.
</li></ul>
</li> <li> <strong>BeginFire [FireModeNum]</strong> - Sets the given fire mode as pending. Called by local player and server to sync up firing process. <ul>
<li> <strong>FireModeNum</strong> - Holds the fire mode that was fired.
</li></ul>
</li> <li> <strong>StopFire [FireModeNum]</strong> - Called on local player to stop a weapon that is firing. <ul>
<li> <strong>FireModeNum</strong> - Holds the fire mode to stop firing.
</li></ul>
</li> <li> <strong>ServerStopFire [FireModeNum]</strong> - Called on server to stop a weapon that is firing and replicate to all clients. <ul>
<li> <strong>FireModeNum</strong> - Holds the fire mode to stop firing.
</li></ul>
</li> <li> <strong>EndFire [FireModeNum]</strong> - Sets the given fire mode as no longer pending. Called by server on all clients to sync up shut down process. <ul>
<li> <strong>FireModeNum</strong> - Holds the fire mode to stop firing.
</li></ul>
</li> <li> <strong>ForceEndFire</strong> - Stops all fire modes from firing on local client. Not replicated.
</li> <li> <strong>SendToFiringState [FireModeNum]</strong> - Places the weapon into the firing state for the given fire mode and sets the fire mode as current. <ul>
<li> <strong>FireModeNum</strong> - Holds the fire mode to set as current.
</li></ul>
</li> <li> <strong>SetCurrentFireMode [FiringModeNum]</strong> - Sets the given fire mode as current. <ul>
<li> <strong>FiringModeNum</strong> - Holds the fire mode to set as current.
</li></ul>
</li> <li> <strong>FireModeUpdated [FiringMode] [bViaReplication]</strong> - Called when the weapon owner's FiringMode has changed. <ul>
<li> <strong>FiringMode</strong> - Holds the new firing mode.
</li></ul>
</li> <li> <strong>CalcWeaponFire [StartTrace] [EndTrace] [Impactlist] [Extent]</strong> - Simulates an instant fire shot and returns the the first geometry hit as the return value. No damage is dealt from this function. It only serves to get a list of what was hit by the shot. <ul>
<li> <strong>StarTrace</strong> - Holds the location to start the trace from.
</li> <li> <strong>EndTrace</strong> - Holds the location to end the trace at.
</li> <li> <strong>ImpactList</strong> - Optional. Out. Outputs a list of all impacts that occurred during the firing simulation.
</li> <li> <strong>Extent</strong> - Optional. Holds the extent of the trace to perform.
</li></ul>
</li> <li> <strong>InstantFire</strong> - Performs an instant fire shot. Uses CalcWeaponFire() to get Actors hit and ProcessInstantHit() to process the hits.
</li> <li> <strong>ProjectileFire</strong> - Performs a projectile fire show. Fires a projectile in the direction the weapon is aiming and notifies clients the weapon was fired.
</li> <li> <strong>CustomFire</strong> - Function stub for implementing custom fire modes. Subclasses which do not use projectiles or instant hit fire modes should override this function to add their custom firing functionality.
</li> <li> <strong>GetPendingFireLength</strong> - Returns the length of the array holding the pending fires for all fire modes for this weapon..
</li> <li> <strong>PendingFire [FireMode]</strong> - Returns whether the given fire mode has a pending fire for this weapon. <ul>
<li> <strong>FireMode</strong> - Holds the fire mode to check for a pending fire.
</li></ul>
</li> <li> <strong>SetPendingFire [FireMode]</strong> - Sets the given fire mode as pending. <ul>
<li> <strong>FireMode</strong> - Holds the fire mode to set.
</li></ul>
</li> <li> <strong>ClearPendingFire [FireMode]</strong> - Sets the given fire mode as no longer pending for this weapon. <ul>
<li> <strong>FireMode</strong> - Holds the fire mode to set.
</li></ul>
</li> <li> <strong>MaxRange</strong> - Returns the maximum distance this weapon can reach when firing.
</li> <li> <strong>GetFireInterval [FireModeNum]</strong> - Returns the number of seconds between shots for the given fire mode of the weapon. <ul>
<li> <strong>FireModeNum</strong> - Holds the fire mode to get the interval for.
</li></ul>
</li> <li> <strong>TimeWeaponFiring [FireModeNum]</strong> - Sets a timer for the firing state that executes the RefireCheckTimer() function and loops with an interval equal to the firing interval for the given fire mode. <ul>
<li> <strong>FireModeNum</strong> - Holds the fire mode to set the timer for.
</li></ul>
</li> <li> <strong>RefireCheckTimer</strong> - In the firing state, checks to see if another shot should be fired and fires if so.
</li> <li> <strong>GetTraceRange</strong> - Returns the range of the weapon for use in traces in CalcWeaponFire(), InstantFire(), ProjectileFire(), AdjustAim(), etc. Subclasses should override this in the proper states.
</li> <li> <strong>GetTraceOwner</strong> - Returns the Actor that owns this weapon's traces. Used to force traces to ignore the Actor.
</li> <li> <strong>GetPhsyicalFireStartLoc [AimDir]</strong> -
</li> <li> <strong>HandleFinishedFiring</strong> - Sends the weapon back to the <em>'Active'</em> state when it finishes firing.
</li> <li> <strong>ShouldRefire</strong> - Returns whether the weapon should continue firing. Called from the firing state after each shot is fired. Default behavior is to continue firing while the player has the fire button pressed. Subclasses can override this function in their firing states to change the behavior.
</li> <li> <strong>StillFiring [FireMode]</strong> - Returns whether the weapon is still firing the given fire mode. <ul>
<li> <strong>FireMode</strong> - Holds the fire mode to check.
</li></ul>
</li></ul>
<p />
<strong>Inventory</strong>
<p /> <ul>
<li> <strong>ItemRemovedFromInvManager</strong> - Called from the InventoryManager notifying the weapon it was removed from the player's inventory. By default, forces firing to cease and detaches the weapon.
</li> <li> <strong>IsActiveWeapon</strong> - Returns whether this weapon is currently active.
</li> <li> <strong>HolderDied</strong> - Called from the owning Pawn to notify the weapon the Pawn has died. By default, stops firing the weapon.
</li> <li> <strong>DoOverrideNextWeapon</strong> - Allows the weapon to override the switch to next weapon functionality. Essentially, this allows the weapon to use the mouse wheel (or whatever is bound to switch to the next weapon) while firing, e.g. the physics gun uses it to change the distance of a held object. Should only be used in the weapon's firing state or it will break the actual weapon switching.
</li> <li> <strong>DoOverridePrevWeapon</strong> - Allows the weapon to override the switch to previous weapon functionality. Should only be used in the weapon's firing state or it will break the actual weapon switching.
</li> <li> <strong>DropFrom [StartLocation] [StartVelocity]</strong> - Inherited from Inventory. Drops the weapon out into the world. By default, ceases fire, detaches weapon, and calls parent class's DropFrom() function to drop the weapon and remove it from the player's inventory. <ul>
<li> <strong>StartLocation</strong> - Holds the location to drop the weapon from.
</li> <li> <strong>StartVelocity</strong> - Holds the velocity to give the weapon when dropped.
</li></ul>
</li> <li> <strong>CanThrow</strong> - Returns whether this weapon can be thrown away by the player.
</li> <li> <strong>DenyClientWeaponSet</strong> - Returns whether the weapon should deny being switched to. Defaults to always returning false so the weapon can be switched to.
</li> <li> <strong>TimeWeaponPutDown</strong> - Sets a timer for putting the weapon away that executes the WeaponIsDown() function when completed.
</li> <li> <strong>TimeWeaponEquipping</strong> - Sets a timer for equipping the weapon that executes the WeaponEquipped() function when complete.
</li> <li> <strong>Activate</strong> - Inherited from Inventory. Begins the equipping process by sending the weapon to the <em>'WeaponEquipping'</em> state.
</li> <li> <strong>PutDownWeapon</strong> - Starts the process of putting the weapon away by sending the weapon to the <em>'WeaponPuttingDown'</em> state.
</li> <li> <strong>DenyPickupQuery [ItemClass] [Pickup]</strong> -
</li> <li> <strong>TryPutDown</strong> - Attempts to put away the weapon. Returns true, if the weapon can be put away.
</li> <li> <strong>WeaponIsDown</strong> - Function stub called when the weapon has been put away. Subclasses should override this to perform any desired actions.
</li> <li> <strong>ClientWeaponThrown</strong> - Called on clients to notify the client to throw the weapon. Ceases fire and detaches the weapon.
</li> <li> <strong>ClientGivenTo [NewOwner] [bDoNotActivate]</strong> - Called by the server when the weapon is given to a new Pawn. <ul>
<li> <strong>NewOwner</strong> - References the Pawn the weapon was given to.
</li> <li> <strong>bDoNotActivate</strong> - If true, do not activate this weapon automatically.
</li></ul>
</li> <li> <strong>ClientWeaponSet [bOptionalSet] [bDoNotActivate]</strong> - Called by server to notify a new weapon is in the inventory and determine whether to switch to the new weapon. <ul>
<li> <strong>bOptionalSet</strong> - If true, the Inventorymanager will compare weights of all weapons in the Pawn's inventory to determine whether to switch to the new weapon. Otherwise, the switch is mandatory and is performed regardless of the weapon's weighting.
</li> <li> <strong>bDoNotActivate</strong> - Optional. If true, do not activate this weapon automatically.
</li></ul>
</li></ul>
<p />
<strong>Mesh and Animation</strong>
<p /> <ul>
<li> <strong>GetWeaponAnimNodeSeq</strong> - Returns a reference to the AnimNodeSequence the weapon uses to play animations.
</li> <li> <strong>PlayWeaponAnimation [Sequence] [fDesiredDuration] [bLoop] [SkelMesh]</strong> - Plays the given animation on the weapon's mesh. <ul>
<li> <strong>Sequence</strong> - Holds the name of the animation sequence to play.
</li> <li> <strong>fDesiredDuration</strong> - Holds the amount of time to play the animation for.
</li> <li> <strong>bLoop</strong> - Optional. If true, the animation should loop when playing.
</li> <li> <strong>SkelMesh</strong> - Optional. References the skeletal mesh component to play the animation on. If not set, the weapon's base mesh is used.
</li></ul>
</li> <li> <strong>StopWeaponAnimation</strong> - Stops any animation playing on the weapon.
</li> <li> <strong>AttachWeaponTo [MeshCpnt] [SocketName]</strong> - Attaches the weapon's mesh to a specific location. <ul>
<li> <strong>MeshCpnt</strong> - Function stub that holds the skeletal mesh component to attach to. Subclasses should override this function.
</li> <li> <strong>SocketName</strong> - Holds the name of the socket on the mesh to attach to.
</li></ul>
</li> <li> <strong>DetachWeapon</strong> - Function stub that detaches the weapon's mesh from the instigator. Subclasses should override this function.
</li></ul>
<p />
<strong>Sounds</strong>
<p /> <ul>
<li> <strong>WeaponPlaySound [Sound] [NoiseLoudness]</strong> - Plays the given sound for the weapon. <ul>
<li> <strong>Sound</strong> - Holds the SoundCue to play.
</li> <li> <strong>NoiseLoudness</strong> - Optional. Holds the volume to play the sound at. Not used in this implementation.
</li></ul>
</li></ul>
<p />
<h3><a name="UDKWeapon Properties"></a> UDKWeapon Properties </h3>
<p />
The UDKWeapon class adds only a few properties of its own.
<p />
<strong>AI</strong>
<p /> <ul>
<li> <strong>bLeadTarget</strong> - If true (the default), the weapon will lead the targeted actor. This is ignored for instant hit weapons.
</li> <li> <strong>bConsiderProjectileAcceleration</strong> - If true, the acceleration of the projectile is taken into account when leading the target.
</li></ul>
<p />
<strong>Firing and Timing</strong>
<p /> <ul>
<li> <strong>AmmoCount</strong> - Holds the current amount of ammo the player has for this weapon.
</li></ul>
<p />
<strong>Mesh and Animation</strong>
<p /> <ul>
<li> <strong>OverlayMesh</strong> - Sets the mesh to use for overlay effects.
</li></ul>
<p />
<h3><a name="UDKWeapon Functions"></a> UDKWeapon Functions </h3>
<p />
<strong>AI</strong>
<p /> <ul>
<li> <strong>BestMode</strong> - Function stub to return the best fire mode for the bot to use. Subclasses should override this function.
</li></ul>
<p />
<strong>Mesh and Animation</strong>
<p /> <ul>
<li> <strong>SetPosition [Holder]</strong> - Function stub for aligning the gun model in the world. Subclasses should override this function. <ul>
<li> <strong>Holder</strong> - References the Pawn holding the weapon.
</li></ul>
</li></ul>
<p />
<h3><a name="UTWeapon Properties"></a> UTWeapon Properties </h3>
<p />
The majority of the properties found in the UTWeapon class are directed more towards gun-style weapons. This is where the weapon system starts to get more specific as to the way the individual weapons work.
<p />
<strong>AI</strong>
<p /> <ul>
<li> <strong>bFastRepeater</strong> - If true, the AI will consider this weapon a spray or fast firing weapon.
</li> <li> <strong>AimError</strong> - The maximum amount of error to add to each shot by the AI.
</li> <li> <strong>AimingHelpRadius</strong> - The radius within which to consider a near miss as an actual hit.
</li> <li> <strong>bUseAimingHelp</strong> - If true, use the <em>AimingHelpRadius</em> to determine actually hits.
</li></ul>
<p />
<strong>Display</strong>
<p /> <ul>
<li> <strong>FireCameraAnim</strong> - The camera animation to play on the player's camera when the weapon fires, e.g. for camera shake from the recoil.
</li> <li> <strong>WeaponColor</strong> - The color used to draw the name of this weapon on the HUD in-game.
</li> <li> <strong>WeaponCanvasXPct</strong> - The percentage of the screen in the x-axis taken up by the weapon.
</li> <li> <strong>WeaponCanvasYPct</strong> - The percentage of the screen in the y-axis taken up by the weapon.
</li> <li> <strong>PlayerViewOffset</strong> - The offset from the player used to place the weapon, assuming the right hand is holding the weapon. This is multiplied by -1 for placing a weapon in the left hand and zeroed out for centering the weapon.
</li> <li> <strong>SmallWeaponOffset</strong> - An additional offset to apply when using small weapons.
</li> <li> <strong>WideScreenOffsetScaling</strong> - A multiplier for the ViewOffset when displaying the game in widescreen format.
</li> <li> <strong>WideScreenRotationOffset</strong> - A rotational offset to apply when displaying the game in widescreen format.
</li> <li> <strong>HiddenWeaponOffset</strong> - A special offset only used when using hidden weapons. This is necessary to place the weapon for certain effects such as attaching beams.
</li> <li> <strong>IconCoordinates</strong> - Coordinates in the IconHUDTexture of the HUD used to draw the icon for this weapon on the HUD.
</li> <li> <strong>CrossHairCoordinates</strong> - Coordinates in the CrosshairImage of this weapon used to draw the normal crosshair on the HUD.
</li> <li> <strong>SimpleCrossHairCoordinates</strong> - Coordinates in the CrosshairImage of this weapon used to draw the simple crosshair on the HUD.
</li> <li> <strong>LockedCrossHairCoordinates</strong> - Coordinates in the CrosshairImage of this weapon used to draw the locked on crosshair on the HUD.
</li> <li> <strong>CustomCrosshairCoordinates</strong> - Coordinates in the CrosshairImage of this weapon used to draw the custom crosshair on the HUD.
</li> <li> <strong>CrosshairImage</strong> - The texture containing the crosshairs for this weapon.
</li> <li> <strong>StartLockedScale</strong> - The minimum scale of the locked crosshair.
</li> <li> <strong>FinalLocakedScale</strong> - The maximum scale of the locked corsshair.
</li> <li> <strong>CrosshairColor</strong> - The color to use when drawing this weapon's crosshair.
</li> <li> <strong>CrosshairScaling</strong> - A multiplier used to scale the crosshair for this weapon.
</li> <li> <strong>bUseCustomCoordinates</strong> - If true, the CustomCrosshairCoordinates will be used in place of the SimpleCrossHairCoordinates.
</li> <li> <strong>AmmoDisplayType</strong> - Determines how the ammo count is displayed on the HUD. <ul>
<li> <em>EAWDS_Numeric</em> - Displays the ammo count as a text value.
</li> <li> <em>EAWDS_BarGraph</em> - Displays the ammo count as a bar.
</li> <li> <em>EAWDS_Both</em> - Displays the ammo count with both a bar and text value.
</li> <li> <em>EAWDS_None</em> - Disables display of the ammo count on the HUD.
</li></ul>
</li></ul>
<p />
<strong>Effects</strong>
<p /> <ul>
<li> <strong>MuzzleFlashSocket</strong> - The name of the socket to use when attaching muzzle flash effects to this weapon.
</li> <li> <strong>MuzzleFlashPSC</strong> - The particle system component for the muzzle flash effect.
</li> <li> <strong>MuzzleFlashPSCTemplate</strong> - The ParticleSystem to use as the muzzle flash effect for the main fire mode.
</li> <li> <strong>MuzzleFlashAltPSCTemplate</strong> - The ParticleSystem to use as the muzzle flash effect for the alt fire mode.
</li> <li> <strong>MuzzleFlashColor</strong> - The color to pass to the 'MuzzleFlashColor' parameter in the muzzle flash ParticleSystem, if it exists.
</li> <li> <strong>bMuzzleFlashPSCLoops</strong> - If true, the muzzle flash effect will be allowed to loop instead of being deactivated. This is useful for rapid fire weapons like a minigun.
</li> <li> <strong>MuzzleFlashLight</strong> - The light that flashes when the weapon fires.
</li> <li> <strong>MuzzleFlashLightClass</strong> - The class used for the muzzle flash light.
</li> <li> <strong>MuzzleFlashDuration</strong> - The amount of time the muzzle flash stays on.
</li></ul>
<p />
<strong>Firing and Timing</strong>
<p /> <ul>
<li> <strong>AmmoPickupClass</strong> - The ammo pickup class that gives ammo to this weapon.
</li> <li> <strong>LockerAmmoCount</strong> - The initial ammo count for this weapon if picked up from a weapon locker.
</li> <li> <strong>MaxAmmoCount</strong> - The maximum amount of ammo this weapon can hold.
</li> <li> <strong>ShotCost</strong> - The amount of ammo each shot from this weapon uses up.
</li> <li> <strong>MinReloadPct</strong> - The minimum amount of time that must pass after firing each fire mode of the weapon before a weapon switch can occur.
</li> <li> <strong>bZoomedFireMode</strong> - Determines whether the fire mode causes the view to zoom. A value of 0 means no zoom. Any other value means zoom.
</li> <li> <strong>ZoomedTargetFOV</strong> - The field of view (FOV) angle to use when zoomed in.
</li> <li> <strong>ZoomedRate</strong> - The number of degrees per second to zoom when transitioning from not zoomed to zoomed, or vice-versa.
</li> <li> <strong>ProjectileSpawnOffset</strong> - The distance, in unreal units, to offset the spawning of a projectile from the firing start location.
</li> <li> <strong>ZoomedTurnSpeedScalePct</strong> - A multiplier used to adjust the turning rate of the player when using a zoomed in weapon.
</li></ul>
<p />
<strong>Inventory</strong>
<p /> <ul>
<li> <strong>InventoryGroup</strong> - The inventory group this weapon belongs to. This is a value from 0 to 9 that corresponds to the number key that would cause this weapon to be equipped when pressed.
</li> <li> <strong>GroupWeight</strong> - The position of this weapon in the inventory group. Weapons in the same group with higher values are given priority.
</li> <li> <strong>InventoryWeight</strong> - The overall priority of this weapon in the inventory. This is used for weapon switching.
</li> <li> <strong>bNeverForwardPendingFire</strong> - If true, this weapon will never accept a forwarded pending fire.
</li></ul>
<p />
<strong>Mesh and Animation</strong>
<p /> <ul>
<li> <strong>AttachmentClass</strong> - The attachment class for this weapon.
</li> <li> <strong>WeaponFireAnim</strong> - The animation to play on the weapon when the weapon is fired for each fire mode.
</li> <li> <strong>ArmFireAnim</strong> - The animation to play on the arms mesh of the player's character (if there is one in your game) when the weapon is fired for each fire mode.
</li> <li> <strong>ArmsAnimSet</strong> - The set of animations to use for playing animations on the arms mesh of the player's character.
</li> <li> <strong>WeaponPutDownAnim</strong> - The animation to play on the weapon when putting the weapon away.
</li> <li> <strong>ArmsPutDownAnim</strong> - The animation to play on the arms mesh of the player's character when putting the weapon away.
</li> <li> <strong>WeaponEquipAnim</strong> - The animation to play on the weapon when equipping the weapon.
</li> <li> <strong>ArmEquipAnim</strong> - The animation to play on the arms mesh when equipping the weapon.
</li> <li> <strong>WeaponIdleAnims</strong> - The animation to play on the weapon when the weapon is idle.
</li> <li> <strong>ArmIdleAnims</strong> - The animation to play on the arms mesh of the player's character when the weapon is idle.
</li> <li> <strong>PivotTranslation</strong> - A vector to offset the pivot of the rotating pickup mesh for this weapon.
</li> <li> <strong>LockerRotation</strong> - The rotation to use when placing the pickup mesh in a weapon locker.
</li> <li> <strong>LockerOffset</strong> - The offset to use when placing the pickup mesh in a weapon locker.
</li></ul>
<p />
<strong>Sounds</strong>
<p /> <ul>
<li> <strong>WeaponFireSnd</strong> - The SoundCue to play when the weapon is fired for each fire mode.
</li> <li> <strong>WeaponPutDownSound</strong> - The SoundCue to play when the weapon is put away.
</li> <li> <strong>WeaponEquipSound</strong> - The SoundCue to play when the weapon is equipped.
</li> <li> <strong>ZoomInSound</strong> - The SoundCue to play when the weapon zooms in.
</li> <li> <strong>ZoomOutSound</strong> - The SoundCue to play when the weapon zooms out.
</li></ul>
<p />
<h3><a name="UTWeapon Functions"></a> UTWeapon Functions </h3>
<p />
These functions are those first defined in the UTWeapon class. Many functions of this class are inherited from the other weapon classes. You can find descriptions of those in the other sections.
<p />
<strong>AI</strong>
<p /> <ul>
<li> <strong>RelativeStrengthVersus [P] [Dist]</strong> - Returns the strength of this weapon when used against the given Pawn. <ul>
<li> <strong>P</strong> - References the Pawn to check against.
</li> <li> <strong>Dist</strong> - Holds the distance from the weapon to the target Pawn.
</li></ul>
</li> <li> <strong>BotDesireability [PickupHolder] [P] [C]</strong> - Static. Returns how desirable a weapon is to the AI. Called when the AI is deciding which pickup to go after next. <ul>
<li> <strong>PickupHolder</strong> - References the pickup for the weapon.
</li> <li> <strong>P</strong> - References the AI's Pawn.
</li> <li> <strong>C</strong> - References the AI's controller.
</li></ul>
</li> <li> <strong>CanHeal [Other]</strong> - Returns whether this weapon can heal the given Actor. <ul>
<li> <strong>Other</strong> - References the Actor to heal.
</li></ul>
</li> <li> <strong>GetOptimalRangeFor [Target]</strong> - Returns the optimal distance for firing at the given target. <ul>
<li> <strong>Target</strong> - References the Actor to fire at.
</li></ul>
</li> <li> <strong>SuggestAttackStyle</strong> - Returns whether the AI should charge or back off when attacking with this weapon. Always returns 0. Subclasses should override this function to change behavior.
</li> <li> <strong>SuggestDefenseStyle</strong> - Returns whether the AI should charge or back off when defending against this weapon. Always returns 0. Subclasses should override this function to change behavior.
</li> <li> <strong>RecommendRangedAttack</strong> - Returns whether this weapon should be used for ranged attacks. Always returns false. Subclasses should override this function to change behavior.
</li> <li> <strong>RangedAttackTime</strong> - Returns the duration of a ranged attack with this weapon. Always returns 0. Subclasses should override this function to change behavior.
</li> <li> <strong>SplashJump</strong> - Returns whether the AI should jump while firing to improve splash damage. Always returns false. Subclasses should override this function to change behavior.
</li> <li> <strong>ShouldFireWithoutTarget</strong> - Returns whether this weapon should be fired even if the AI doesn't have a target. Always returns false. Subclasses should override this function to change behavior, e.g. for a weapon that launches mines.
</li></ul>
<p />
<strong>Aim</strong>
<p /> <ul>
<li> <strong>InstantFireTraceStart</strong> - Returns the location to start tracing this instant hit shot from.
</li> <li> <strong>InstantFireTraceEnd [StartTrace]</strong> - Returns the endpoint for this instant hit shot.
</li> <li> <strong>InstantAimHelp [StartTrace] [EndTrace] [RealImpact]</strong> - Checks for a near miss of the target when using aiming help and returns a near miss as a hit. <ul>
<li> <strong>StartTrace</strong> - Holds the location the shot was taken from.
</li> <li> <strong>EndTrace</strong> - Holds the end point of the shot trace.
</li> <li> <strong>RealImpact</strong> - Holds the impact info returned from the CalcWeaponFire() function.
</li></ul>
</li> <li> <strong>GetZoomedState</strong> - Returns the current zoom state of the weapon.
</li> <li> <strong>CheckZoom [FireModeNum]</strong> - Called from BeginFire() to check the zoom state. If zoomed, ends firing and returns true. <ul>
<li> <strong>FireModeNum</strong> - Holds the fire mode to check the zoom state for.
</li></ul>
</li> <li> <strong>StartZoom [PC]</strong> - Called when zooming begins. Plays zooming in sound. <ul>
<li> <strong>PC</strong> - References the player controller.
</li></ul>
</li> <li> <strong>EndZoom [PC]</strong> - Called when zooming ends. Plays zooming out sound. <ul>
<li> <strong>PC</strong> - References the player controller.
</li></ul>
</li> <li> <strong>ThrottleLook [aTurn] [aLookup]</strong> - Function stub that allows the weapon to adjust the turning speed of the Pawn. Subclasses should override this function. <ul>
<li> <strong>aTurn</strong> - Out. Outputs the adjusted horizontal turning.
</li> <li> <strong>aLookup</strong> - Out. Outputs the adjusted vertical turning.
</li></ul>
</li> <li> <strong>CanViewAccelerationWhenFiring</strong> - Returns whether the weapon is allowed to have view acceleration while firing. Always returns false. Subclasses should override this function to change behavior.
</li></ul>
<p />
<strong>Ammo</strong>
<p /> <ul>
<li> <strong>GetAmmoCount</strong> - Returns the current amount of ammo the weapon has.
</li> <li> <strong>AmmoMaxed [mode]</strong> - Returns whether the weapon's ammo is maxed out.
</li> <li> <strong>DesireAmmo [bDetour]</strong> - Returns the percentage of the "clip" that is empty for this weapon. <ul>
<li> <strong>bDetour</strong> - Not used.
</li></ul>
</li> <li> <strong>NeedAmmo</strong> - Returns whether the weapon's current amount of ammo is less than default ammo count.
</li></ul>
<p />
<strong>Damage</strong>
<p /> <ul>
<li> <strong>AdjustPlayerDamage [Damage] [InstigatedBy] [HitLocation] [Momentum] [DamageType]</strong> - Function stub called when the weapon's owner takes damage while using this weapon to adjust the Damage done. Subclasses should override this function, e.g. for shields, etc. <ul>
<li> <strong>Damage</strong> - Out. Holds the original damage amount and outputs the adjusted amount.
</li> <li> <strong>InstigatedBy</strong> - References the controller responsible for doing the damage.
</li> <li> <strong>HitLocation</strong> - Holds the location of the damage being done.
</li> <li> <strong>Momentum</strong> - Out. Holds the original momentum and outputs the adjusted momentum.
</li> <li> <strong>DamageType</strong> - Holds the damage type for the damage being inflicted.
</li></ul>
</li></ul>
<p />
<strong>Display</strong>
<p /> <ul>
<li> <strong>ActiveRenderOverlays [H]</strong> - Called by InventoryMangaer when this weapon is active to draw elements on the HUD, such as the crosshair. <ul>
<li> <strong>H</strong> - References the HUD giving access to the current Canvas for drawing.
</li></ul>
</li> <li> <strong>DrawWeaponCrosshair [HUD]</strong> - Draws the weapon's crosshair on the HUD. Called from ActiveRenderOverlays(). <ul>
<li> <strong>HUD</strong> - References the HUD giving access to the current Canvas for drawing.
</li></ul>
</li> <li> <strong>DrawLockedOn [H]</strong> - Draws the locked on symbol when the weapon has a target lock. <ul>
<li> <strong>H</strong> - References the HUD giving access to the current Canvas for drawing.
</li></ul>
</li> <li> <strong>ShakeView</strong> - Plays a view shake camera animation on the owning client when a shot is fired.
</li> <li> <strong>WeaponCalcCamera [fDeltaTime] [out_CamLoc] [out_CamRot]</strong> - Stub function that allows the weapon to adjust the owner's camera. Subclasses should override this function. <ul>
<li> <strong>fDeltaTime</strong> - Holds the amount of time since the last frame.
</li> <li> <strong>out_CamLoc</strong> - Holds the current camera location and outputs the adjusted location.
</li> <li> <strong>out_CamRot</strong> - Holds the current camera rotation and outputs the adjusted rotation.
</li></ul>
</li> <li> <strong>CoversScreenSpace [ScreenLoc] [Canvas]</strong> - Returns whether the weapon covers the given screen location. <ul>
<li> <strong>ScreenLoc</strong> - Holds the location on the screen to check.
</li> <li> <strong>Canvas</strong> - References the current Canvas.
</li></ul>
</li> <li> <strong>DrawKillIcon [Canvas] [ScreenX] [ScreenY] [HUDScaleX] [HUDScaleY]</strong> - Static. Draws weapon's icon on the HUD when something was killed by this weapon. <ul>
<li> <strong>Canvas</strong> - References the current Canvas for drawing.
</li> <li> <strong>ScreenX</strong> - Holds the X corrdinate to draw at.
</li> <li> <strong>ScreenY</strong> - Holds the Y corrdinate to draw at.
</li> <li> <strong>HUDScaleX</strong> - Holds the HUD's horizontal scale (relative to 1024).
</li> <li> <strong>HUDScaleY</strong> - Holds the HUD's vertical scale (relative to 768).
</li></ul>
</li> <li> <strong>EnableFriendlyWarningCrosshair</strong> - Returns whether the weapon displays a friendly warning crosshair. Always returns true. Subclasses should override this function to change behavior, e.g. for weapons that can shoot or be used on friendlies.
</li></ul>
<p />
<strong>Effects</strong>
<p /> <ul>
<li> <strong>MuzzleFlashTimer</strong> - Deactivates the muzzle flash particle system when the muzzle flash timer has elapsed.
</li> <li> <strong>CauseMuzzleFlash</strong> - Activates the muzzle flash particle system and sets a timer to deactivate it.
</li> <li> <strong>CauseMuzzleFlashLight</strong> - Turns on the muzzle flash light.
</li> <li> <strong>StopMuzzleFlash</strong> - Clears the muzzle flash timer and deactivates the muzzle flash particle system.
</li> <li> <strong>SetMuzzleFlashparams [PSC]</strong> - Sets up any custom parameters on the muzzle flash particle system. <ul>
<li> <strong>PSC</strong> - References the muzzle flash particle system component.
</li></ul>
</li> <li> <strong>AttachMuzzleFlash</strong> - Creates and attaches the muzzle flash components. Called when the weapon is attached.
</li> <li> <strong>DetachMuzzleFlash</strong> - Removes and detaches the muzzle flash components. Called when the weapon is detached.
</li> <li> <strong>GetEffectLocation</strong> - Returns the location from which to spawn firing effects such as tracers.
</li></ul>
<p />
<strong>Firing and Timing</strong>
<p /> <ul>
<li> <strong>bReadyToFire</strong> - Returns whether the weapon is ready to be fired.
</li> <li> <strong>ClientEndFire [FireModeNum]</strong> - Called on client to stop firing the given fire mode. <ul>
<li> <strong>FireModeNum</strong> - Holds the fire mode to stop firing.
</li></ul>
</li> <li> <strong>GetPowerPerc</strong> - Returns the current power percentage (value from 0.0 to 1.0) for the weapon. Always returns 0.0. Subclasses should override this function to change behavior, e.g. for weapons that charge or power up and fire on release.
</li> <li> <strong>IsFullyCharged</strong> - Returns whether the weapon is fully charged, e.g. from the player or AI holding the fire button.
</li></ul>
<p />
<strong>Inventory</strong>
<p /> <ul>
<li> <strong>CalcInventoryWeight</strong> - Calculates the unique inventory weight for the weapon to use for weapon switching.
</li> <li> <strong>ShouldSwitchTo [InWeapon]</strong> - Returns whether this weapon is lower priority than the given weapon. <ul>
<li> <strong>InWeapon</strong> - References the weapon to check against.
</li></ul>
</li> <li> <strong>GetEquipTime</strong> - Returns the amount of time it takes to equip the weapon.
</li> <li> <strong>PerformWeaponChange</strong> - Called when the Pawn owning this weapon is changing weapons.
</li> <li> <strong>ServerReselectWeapon</strong> - Function stub that is called on server when player re-selects the currently active weapon.
</li> <li> <strong>AllowSwitchTo [NewWeapon]</strong> - Returns whether the owner is allowed to switch from this weapon to the given weapon. Always returns true. Subclasses should override this function to change behavior. <ul>
<li> <strong>NewWeapon</strong> - References the new weapon to switch to.
</li></ul>
</li> <li> <strong>DetourWeight [Other] [PathWeight]</strong> - Returns the desirability of this weapon as a pickup to the given Pawn with the given path weight. <ul>
<li> <strong>Other</strong> - References the Pawn (AI) to check for.
</li> <li> <strong>PathWeight</strong> - Holds the path weight from the Pawn to this weapon pickup.
</li></ul>
</li></ul>
<p />
<strong>Mesh and Animation</strong>
<p /> <ul>
<li> <strong>CreateOverlayMesh</strong> - Attempts to set up the component for the overlay mesh.
</li> <li> <strong>SetSkin [NewMaterial]</strong> - Applies the new material to the weapon mesh. If the new material is none, the materials are cleared. <ul>
<li> <strong>NewMaterial</strong> - References the new material to use.
</li></ul>
</li> <li> <strong>PlayArmAnimation [Sequence] [fDesiredDuration] [OffHand] [bLoop] [SkelMesh]</strong> -
</li> <li> <strong>PlayWeaponPutDown</strong> - Plays the animation(s) for the weapon being put away.
</li> <li> <strong>PlayWeaponEquip</strong> - Plays the animation(s) for the weapon being equipped.
</li> <li> <strong>ChangeVisibility [bIsVisible]</strong> - Called by the Pawn owning the weapon when the visibility of the weapon should change and sets the visibility accordingly. <ul>
<li> <strong>bIsVisible</strong> - If true, set the weapon visible. Otherwise, set the weapon not visible.
</li></ul>
</li> <li> <strong>PreloadTextures [bForcePreload]</strong> - Forces streamed textures to be loaded in order to get MIPS streamed in before the weapon is equipped. <ul>
<li> <strong>bForcePreload</strong> - If true, stream in textures. Otherwise, clear forced loading.
</li></ul>
</li> <li> <strong>SetupArmsAnim</strong> - Sets up arm meshes with animations, if an AnimSet was specified. Otherwise, hides arm meshes.
</li> <li> <strong>GetHand</strong> - Returns the current hand the owner should hold the weapon with.
</li></ul>
<p />
<strong>Sounds</strong>
<p /> <ul>
<li> <strong>PlayFiringSound</strong> - Plays the weapon firing sound for the current fire mode.
</li></ul>
<p />
<h2><a name="Attachments"></a> Attachments </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
When viewing the player in third person, or any other perspective where the player's mesh is visible, the weapon uses a completely different set of properties for the visual aspect. This is done through the use of an <em>Attachment</em> class. Each weapon has an Attachment class which holds references to the third person mesh, the animations for that mesh, the muzzle flash and other effects, and many other properties that are only used when viewing the weapon in any view other than first person. All of the properties that govern how the weapon functions as far as firing or being used remain the same and are taken from the main weapon class. This way, you get the ability to have all the visual aspects of the third person weapon self-contained in their own class while not having to duplicate properties that would be common to both.
<p />
<img alt="attachment.jpg" src="rsrc/Three/WeaponsTechnicalGuide/attachment.jpg" />
<p />
<h3><a name="UTWeaponAttachment Properties"></a> UTWeaponAttachment Properties </h3>
<p />
These are the properties for the visual aspect of the weapon when viewed in third person.
<p />
<strong>Effects</strong>
<p /> <ul>
<li> <strong>SplashEffect</strong> - The actor to spawn when a shot fired from this weapon hits a water volume.
</li> <li> <strong>bMakeSplash</strong> - If true, display splash effect for local player.
</li> <li> <strong>MuzzleFlashSocket</strong> - The name of the socket to use when attaching muzzle flash effects to this weapon.
</li> <li> <strong>MuzzleFlashPSC</strong> - The particle system component for the muzzle flash effect.
</li> <li> <strong>MuzzleFlashPSCTemplate</strong> - The ParticleSystem to use as the muzzle flash effect for the main fire mode.
</li> <li> <strong>MuzzleFlashAltPSCTemplate</strong> - The ParticleSystem to use as the muzzle flash effect for the alt fire mode.
</li> <li> <strong>MuzzleFlashColor</strong> - The color to pass to the 'MuzzleFlashColor' parameter in the muzzle flash ParticleSystem, if it exists.
</li> <li> <strong>bMuzzleFlashPSCLoops</strong> - If true, the muzzle flash effect will be allowed to loop instead of being deactivated. This is useful for rapid fire weapons like a minigun.
</li> <li> <strong>MuzzleFlashLight</strong> - The light that flashes when the weapon fires.
</li> <li> <strong>MuzzleFlashLightClass</strong> - The class used for the muzzle flash light.
</li> <li> <strong>MuzzleFlashDuration</strong> - The amount of time the muzzle flash stays on.
</li> <li> <strong>MaxFireEffectDistance</strong> - Maximum distance the camera can be from this weapon attachment to have the muzzle flash effect displayed.
</li> <li> <strong>ImpactEffects</strong> - The material impact effects to use for impacts with the various types of surfaces for the main fire mode.
</li> <li> <strong>AltImpactEffects</strong> - The material impact effects to use for impacts with the various types of surfaces for the alt fire mode.
</li> <li> <strong>DefaultImpactEffect</strong> - The default material impact effect to use for impacts with a surface that has no matching material-specific effect for the main fire mode.
</li> <li> <strong>DefaultAltImpactEffect</strong> - The default material impact effect to use for impacts with a surface that has no matching material-specific effect for the alt fire mode.
</li> <li> <strong>MaxImpactEffectDistance</strong> - The maximum distance the camera can be from the impact from this weapon to display the impact effect.
</li> <li> <strong>bAlignToSurfaceNormal</strong> - If true, the impact effect displayed for this weapon will be aligned to the surface that was hit. This is useful for impact effects that use decals.
</li></ul>
<p />
<strong>Firing and Timing</strong>
<p /> <ul>
<li> <strong>WeaponClass</strong> - The weapon class that uses this attachment.
</li></ul>
<p />
<strong>Mesh and Animation</strong>
<p /> <ul>
<li> <strong>Mesh</strong> - Sets the mesh (type is not limited here, but Unreal assumes skeletal mesh) to use for the weapon. This is the first person mesh.
</li> <li> <strong>OverlayMesh</strong> - Sets the mesh to use for overlay effects.
</li> <li> <strong>FireAnim</strong> - The animation to play on the weapon when firing the main fire mode.
</li> <li> <strong>AltFireAnim</strong> - The animation to play on the weapon when firing the alt fire mode.
</li> <li> <strong>WeaponAnimType</strong> - The animation type used by this weapon. Used to determine which profile is used by the aim node in the Animtree for the Pawn using this weapon. <ul>
<li> <em>EWAT_Default</em> - Causes the weapon to use the 'Default' aim profile.
</li> <li> <em>EWAT_Pistol</em> - Causes the weapon to use the 'SinglePistol' aim profile.
</li> <li> <em>EWAT_DualPistols</em> - Causes the weapon to use the 'DualPistols' aim profile.
</li> <li> <em>EWAT_ShoulderRocket</em> - Causes the weapon to use the 'ShoulderRocket' aim profile.
</li> <li> <em>EWAT_Stinger</em> - Causes the weapon to use the 'Stinger' aim profile.
</li></ul>
</li> <li> <strong>DistFactorForRefPose</strong> - The minimum size of the weapon mesh in screen space where animations will still be played on the weapon. If the mesh is smaller than this, animations will be disabled as an optimization.
</li></ul>
<p />
<strong>Sounds</strong>
<p /> <ul>
<li> <strong>BulletWhip</strong> - The sound made by the "bullets" shot from this weapon.
</li> <li> <strong>bSuppressSounds</strong> - If true, do not play sounds made by this weapon.
</li></ul>
<p />
<h3><a name="UTWeaponAttachment Functions"></a> UTWeaponAttachment Functions </h3>
<p />
These functions are unique to the UTWeaponAttachment class. Many functions in this class have corresponding functions in the other weapon classes. You can find the descriptions of those in the other sections.
<p />
<strong>Effects</strong>
<p /> <ul>
<li> <strong>FirstPersonFireEffects [PawnWeapon] [HitLocation]</strong> - Plays any first person perspective firing effects that are necessary (muzzle flash, etc.). <ul>
<li> <strong>PawnWeapon</strong> - References the weapon to play effects for.
</li> <li> <strong>HitLocation</strong> - Holds a location to play an effect.
</li></ul>
</li> <li> <strong>StopFirstPersonFireEffects [PawnWeapon]</strong> - Stops any first person firing effects that are playing. <ul>
<li> <strong>PawnWeapon</strong> - References the weapon to stop effects for.
</li></ul>
</li> <li> <strong>ThirdPersonFireEffects [HitLocation]</strong> - Plays any third person perspective firing effects (muzzle flash, anims, etc.); <ul>
<li> <strong>HitLocation</strong> - Holds a location to play an effect.
</li></ul>
</li> <li> <strong>StopThirdPersonFireEffects</strong> - Stops any third person firing effects that are playing.
</li> <li> <strong>GetImpactEffect [HitMaterial]</strong> - Returns the material impact effect to use for hits on the given physical material. <ul>
<li> <strong>HitMaterial</strong> - Holds the physical material that was shot.
</li></ul>
</li> <li> <strong>AllowImpactEffects [HitActor] [HitLocation] [HitNormal]</strong> - Returns whether a hit against the given actor should spawn impact effects. <ul>
<li> <strong>HitActor</strong> - References the Actor that was hit.
</li> <li> <strong>HitLocation</strong> - Holds the location of the impact.
</li> <li> <strong>HitNormal</strong> - Holds the surface normal at the impact.
</li></ul>
</li> <li> <strong>SetImpactedActor [HitActor] [HitLocation] [HitNormal] [HitInfo]</strong> - Function stub for setting the actor impacted by a shot. Subclasses should override this function. <ul>
<li> <strong>HitActor</strong> - References the Actor that was hit.
</li> <li> <strong>HitLocation</strong> - Holds the impact location.
</li> <li> <strong>HitNormal</strong> - Holds the surface normal at the impact.
</li> <li> <strong>HitInfo</strong> - Holds a TraceHitInfo struct about the impact.
</li></ul>
</li> <li> <strong>PlayImpactEffects [HitLocation]</strong> - Spawn any effects that should occur at the point of impact. <ul>
<li> <strong>HitLocation</strong> - Holds the location of the impact.
</li></ul>
</li></ul>
<p />
<strong>Sounds</strong>
<p /> <ul>
<li> <strong>CheckBulletWhip [FireDir] [HitLocation]</strong> - Checks for bullet whips (shots flying by player's heads) and plays the corresponding sound accordingly. <ul>
<li> <strong>FireDir</strong> - Holds the direction the "bullet" was traveling.
</li> <li> <strong>HitLocation</strong> - Holds the location of impact.
</li></ul>
</li></ul>
<p />
<h2><a name="Projectiles"></a> Projectiles </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
Projectiles are the physical objects fired by weapons that use a projectile fire mode. The weapon simply spawns a projectile and tells it what direction it was fired in. The rest of the process is completely up to the projectile. These objects calculate their own movement, usually based on physics, and use collision events to determine what was hit and how to apply damage or other effects to the Actor that was hit.
<p />
<h3><a name="Projectile Properties"></a> Projectile Properties </h3>
<p />
These properties are found in the base projectile class. They are common to all projectiles and are general in nature.
<p />
<strong>Collision</strong>
<p /> <ul>
<li> <strong>bSwitchToZeroCollision</strong> - If true and this projectile has a non-zero collision extent, it will switch to a zero collision extent if it hits an actor with bBlockNonZeroExtents=False.
</li> <li> <strong>ZeroCollider</strong> - Holds a reference to the Actor that was hit that caused the change to zero extent collision.
</li> <li> <strong>ZeroColliderComponent</strong> - Holds a reference to the component of the Actor that was hit that caused the change to zero extent collision.
</li> <li> <strong>bBlockedByInstigator</strong> - If true, the instigator of the projectile will collide with the projectile.
</li> <li> <strong>CylinderComponent</strong> - The collision component for the projectile.
</li></ul>
<p />
<strong>Damage</strong>
<p /> <ul>
<li> <strong>Damage</strong> - The amount of damage done by this projectile to the Actor(s) it hits.
</li> <li> <strong>DamageRadius</strong> - The radius around the impact site that this projectile should cause splash damage to.
</li> <li> <strong>MomemtumTransfer</strong> - The momentum imparted by the projectile to the Actor(s) it damages.
</li> <li> <strong>MyDamageType</strong> - The damage class used to inflict damage by this projectile.
</li> <li> <strong>InstigatorController</strong> - Holds a reference to the controller of the instigator of this projectile.
</li> <li> <strong>ImpactedActor</strong> - Holds a reference to the Actor impacted by this projectile. This Actor always gets full damage applied even if the projectile does radius damage and this Actor would be ignored by the HurtRadius() function.
</li></ul>
<p />
<strong>Movement</strong>
<p /> <ul>
<li> <strong>Speed</strong> - The initial speed of the projectile when fired.
</li> <li> <strong>MaxSpeed</strong> - The maximum speed the projectile can attain. A value of 0 means no limit.
</li> <li> <strong>bRotationFollowsVelocity</strong> - If true, the projectile's rotation will have its rotation updated each frame so that it always points in the direction it is moving.
</li> <li> <strong>NetCullDistanceSquared</strong> - The maximum distance the projectile can be from the camera and still be considered relevant on the client.
</li></ul>
<p />
<strong>Sounds</strong>
<p /> <ul>
<li> <strong>SpawnSound</strong> - The SoundCue to play when the projectile is spawned (or fired as it were).
</li> <li> <strong>ImpactSound</strong> - The SoundCue to play when the projectile hits something in the world.
</li></ul>
<p />
<h3><a name="Projectile Functions"></a> Projectile Functions </h3>
<p />
<strong>Collision</strong>
<p /> <ul>
<li> <strong>Touch [Other] [OtherComp] [HitLocation] [HitNormal]</strong> - Inherited from Actor. Executed when the projectile collides with something. <ul>
<li> <strong>Other</strong> - References the Actor the projectile collided with.
</li> <li> <strong>OtherComp</strong> - References the component of the Actor the projectile collided with.
</li> <li> <strong>HitLocation</strong> - Holds the location where the collision occurred.
</li> <li> <strong>HitNormal</strong> - Holds the surface normal where the collision occurred.
</li></ul>
</li> <li> <strong>ProcessTouch [Other] [HitLocation] [HitNormal]</strong> - Processes the touch event causing the projectile to explode (by way of the Explode() function) if it collides with anything other than the instigator. <ul>
<li> <strong>Other</strong> - References the Actor the projectile collided with.
</li> <li> <strong>HitLocation</strong> - Holds the location where the collision occurred.
</li> <li> <strong>HitNormal</strong> - Holds the surface normal where the collision occurred.
</li></ul>
</li> <li> <strong>HitWall [HitNormal] [Wall] [WallComp]</strong> - Inherited from Actor. Executed when the projectile hits a wall. By Default, applies damage to the impacted wall (if not static) and causes the projectile to explode (by way of the Explode() function). <ul>
<li> <strong>HitNormal</strong> - The surface normal where the collision occurred.
</li> <li> <strong>Wall</strong> - References the wall Actor that the projectile collided with, if it was an Actor.
</li> <li> <strong>WallComponent</strong> - References the component that the projectile collided with.
</li></ul>
</li> <li> <strong>Explode [HitLocation] [HitNormal]</strong> - Applies radius damage (by way of the ProjectileHurtRadius() function) and destroys the projectile (by way of the Destroy() function). <ul>
<li> <strong>HitLocation</strong> - Holds the location where the collision that caused the explosion occurred.
</li> <li> <strong>HitNormal</strong> - Holds the surface normal where the collision that caused the explosion occurred.
</li></ul>
</li></ul>
<p />
<strong>Damage and Impact</strong>
<p /> <ul>
<li> <strong>ProjectileHurtRadius [HurtOrigin] [HitNormal]</strong> - Adjusts the impact location up to avoid world geometry so that more traces to Actors in the vicinity will succeed and then calls HurtRadius() with the new impact location. <ul>
<li> <strong>HurtOrigin</strong> - The location where the projectile impacted.
</li> <li> <strong>HitNormal</strong> - The surface normal at the location the projectile impacted.
</li></ul>
</li> <li> <strong>HurtRadius [DamageAmount] [inDamageRadius] [DamageType] [Momentum] [HurtOrigin] [IgnoredActor] [InstigatorController] [bDoFullDamage]</strong> - Causes damage to all actors within a specified radius. Applies full damage to the ImpactedActor and then calls the parent class's HurtRadius() function passing the ImpactedActor as the IgnoredActor. <ul>
<li> <strong>DamageAmount</strong> - The amount of damage to do when full damage is applied.
</li> <li> <strong>InDamageRadius</strong> - The radius within which Actors will have damage applied.
</li> <li> <strong>DamageType</strong> - The damage type to use when doing damage.
</li> <li> <strong>Momentum</strong> - The momentum to impart on actors when applying damage.
</li> <li> <strong>HurtOrigin</strong> - The origin from which to apply the radius damage.
</li> <li> <strong>IgnoredActor</strong> - Optional. Actor that was impacted by the projectile. Has full damage applied.
</li> <li> <strong>InstigatorController</strong> - Optional. The controller of the instigator of this projectile, if one exists.
</li> <li> <strong>bDoFullDamage</strong> - Optional. If true, apply the full amount of damage to all Actors within the radius. Otherwise, attenuate damage over the radius.
</li></ul>
</li> <li> <strong>ApplyFluidSurfaceImpact [Fluid] [HitLocation]</strong> - Inherited from Actor. Calls the parent class's ApplyFluidSurfaceImpact() function and plays the fluid surface actor's ProjectileEntryEffect particle effect. <ul>
<li> <strong>Fluid</strong> - References the fluid surface actor that was hit.
</li> <li> <strong>HitLocation</strong> - Holds the location where the projectile collided with the fluid surface actor.
</li></ul>
</li></ul>
<p />
<strong>Movement</strong>
<p /> <ul>
<li> <strong>Init [Direction]</strong> - Initializes the projectile by setting its rotation and velocity. <ul>
<li> <strong>Direction</strong> - The direction the projectile was fired in. Used for setting rotation and multiplied by speed to set velocity.
</li></ul>
</li> <li> <strong>RandSpin [SpinRate]</strong> - Populates the components of the rotation rate (Pitch, Yaw, and Roll) of the projectile with random values. <ul>
<li> <strong>SpinRate</strong> - The maximum (positiove or negative) value the random rate for any component will be.
</li></ul>
</li> <li> <strong>GetTimeToLocation [TargetLoc]</strong> - Returns the amount of time it would take the projectile to get to a particular location given its current speed. <ul>
<li> <strong>TargetLoc</strong> - Holds the destination location.
</li></ul>
</li> <li> <strong>StaticGetTimeToLocation [TargetLoc] [StartLoc] [RequestedBy]</strong> - A static version of GetTimeToLocation() that Returns the amount of time it would take the projectile to get from one location to another given its default speed. <ul>
<li> <strong>TargetLoc</strong> - Holds the destination location.
</li> <li> <strong>StartLoc</strong> - Holds the starting location.
</li> <li> <strong>RequestedBy</strong> - References the controller that called this function.
</li></ul>
</li> <li> <strong>GetRange</strong> - Retruns the maxmimum distance the projectile can travel over its lifetime.
</li></ul>
<p />
<h3><a name="UTProjectile Properties"></a> UTProjectile Properties </h3>
<p />
<strong>Effects</strong>
<p /> <ul>
<li> <strong>ProjEffects</strong> - The particle system component that is played while in flight.
</li> <li> <strong>ProjFlightTemplate</strong> - The particle system used to visually represents the projectile.
</li> <li> <strong>ProjExplosionTemplate</strong> - The particle system that is played when the projectile explodes.
</li> <li> <strong>bAdvancedExplosionEffect</strong> - If true, the ProjExplosionTemplate particle system will be passed the direction of travel and hit normal of the projectile at impact to the 'Velocity' and 'HitNormal' parameters, respectively. When setting this property, make sure the explosion particle system is set up with these parameters.
</li> <li> <strong>MaxEffectDistance</strong> - The maximum distance the impact can be from the camera to display the explosion effect.
</li> <li> <strong>ExplosionDecal</strong> - The decal to apply to the surface the projectile impacted when it explodes.
</li> <li> <strong>DecalWidth</strong> - The width of the explosion decal.
</li> <li> <strong>DecalHeight</strong> - The height of the explosion decal.
</li> <li> <strong>DurationOfDecal</strong> - The amount of time the explosion decal should be displayed on the surface before fading away.
</li> <li> <strong>DecalDissolveParamName</strong> - The name of the parameter in the decal material to use to fade the decal away.
</li> <li> <strong>bSurppressExplosionFX</strong> - If true, the explosion effect will not be played when the projectile is destroyed. This is useful for destroying projectiles with LimitationVolumes or in other manners where the destruction should not result in a visual explosion.
</li> <li> <strong>bWaitForEffects</strong> - If true, the projectile will remain alive, but hidden, until the flight effect completes.
</li> <li> <strong>bAttachExplosionToVehicles</strong> - If true and if the projectile impacted a vehicle, the explosion effect will be attached to the impacted vehicle.
</li> <li> <strong>ProjectileLight</strong> - The light component of this projectile. This is only spawned when the projectile was fired by the local player.
</li> <li> <strong>ProjectileLightClass</strong> - The class of the projectile's light.
</li> <li> <strong>ExplosionLightClass</strong> - The class of the light used when the projectile explodes.
</li> <li> <strong>MaxExplosionLightDistance</strong> - The maximum distance the impact can be from the camera to display the explosion light.
</li></ul>
<p />
<strong>Sounds</strong>
<p /> <ul>
<li> <strong>bSuppressSounds</strong> - If true, sounds will be disabled on this projectile.
</li> <li> <strong>AmbientSound</strong> - The SoundCue to play looped while this projectile is in flight.
</li> <li> <strong>ExplosionSound</strong> - The SoundCue to play when this projectile explodes.
</li> <li> <strong>bImportantAmbientSound</strong> - If true, the ambient sound of this projectile will never be cut for performance reasons.
</li></ul>
<p />
<h3><a name="UTProjectile Functions"></a> UTProjectile Functions </h3>
<p />
<strong>Collision</strong>
<p /> <ul>
<li> <strong>Landed [HitNormal] [FloorActor]</strong> - Inherited from Actor. Executed when the projectile collides with the floor or ground. <ul>
<li> <strong>HitNormal</strong> - Holds the surface normal where the projectile collided with the floor.
</li> <li> <strong>FloorActor</strong> - References the Actor the projectile collided with.
</li></ul>
</li> <li> <strong>Destroyed</strong> - Inherited from Actor. Executed when the projectile is destroyed. By default, calls <em>SpawnExplosionEffects()</em> to spawn the explosion and cleans up the flight effects.
</li></ul>
<p />
<strong>Effects</strong>
<p /> <ul>
<li> <strong>SpawnFlightEffects</strong> - Spawns and sets up the effects used during flight for the projectile.
</li> <li> <strong>SpawnExplosionEffects [HitLocation] [HitNormal]</strong> - Spawns and sets up the explosion effects, decal, and light when the projectile explodes. <ul>
<li> <strong>HitLocation</strong> - Holds the location of the impact that caused the projectile to explode.
</li> <li> <strong>HitNormal</strong> - Holds the surface normal at the impact that caused the projectile to explode.
</li></ul>
</li> <li> <strong>SetExplosionEffectParameters [ProjExplosion]</strong> - Function stub to be used by subclasses to set up additional parameters on the explosion particle system, if needed. Called by the SpawnExplosionEffects() function. <ul>
<li> <strong>ProjExplosion</strong> - References the explosion effect particle system component.
</li></ul>
</li> <li> <strong>ShouldSpawnExplosionLight [HitLocation] [HitNormal]</strong> - Returns a boolean value determining whether the explosion light should be spawned or not based on the location of the explosion. <ul>
<li> <strong>HitLocation</strong> - Holds the location of the explosion.
</li> <li> <strong>HitNormal</strong> - Holds the surface normal at the explosion.
</li></ul>
</li> <li> <strong>MyOnParticleSystemFinished [PSC]</strong> - Called by the flight particle system component when it finished. Used when <em>bWaitForEffects</em> is true to clean up flight effects. <ul>
<li> <strong>PSC</strong> - References the particle system component calling the function.
</li></ul>
</li> <li> <strong>Shutdown</strong> - Cleans up any effects, shuts down the physics, and destroys the projectile.
</li></ul>
<p />
<strong>Movement</strong>
<p /> <ul>
<li> <strong>CalculateTravelTime [Dist] [MoveSpeed] [MaxMoveSpeed] [AccelMag]</strong> - Static function that returns the amount of time it would take the projectile to travel the specified distance with the given movement properties. Called by GetTimeToLocation() and StaticGetTimeToLocation(). <ul>
<li> <strong>Dist</strong> - Holds the distance to be traveled.
</li> <li> <strong>MoveSpeed</strong> - Holds the starting speed of the projectile.
</li> <li> <strong>MaxMoveSpeed</strong> - Holds the maximum speed of the projectile.
</li> <li> <strong>AccelMag</strong> - Holds the acceleration of the projectile.
</li></ul>
</li></ul>
<p />
<h2><a name="Pickups"></a> Pickups </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
Pickups are items placed throughout the world which give some sort of inventory related item to the player when run over. In terms of the weapon system, there are a few types of pickups you should be aware of: Weapon Factories, Weapon Lockers, and Ammo Factories.
<p />
<h3><a name="Weapon Factory"></a> Weapon Factory </h3>
<p />
A weapon factory is a pickup which gives the player a single specific type of weapon. It's only job is to place that type of weapon along with the default amount of ammunition into the inventory of the player when run over. Each weapon does not have its own factory, though. A single class is used with a designer-configurable property to tell the factory which type of weapon to give to the player.
<p />
<img alt="weaponfactory.jpg" src="rsrc/Three/WeaponsTechnicalGuide/weaponfactory.jpg" />
<p />
<h3><a name="Weapon Locker"></a> Weapon Locker </h3>
<p />
A weapon locker is a pickup that can give several different types of weapons to the player all at once. The types of weapons the locker can give are set in an array by the designer when placing the weapon locker in the world. Each weapon has a default ammunition amount specific to weapon lockers that is used when the weapon is recieved from a locker.
<p />
<img alt="weaponlocker.jpg" src="rsrc/Three/WeaponsTechnicalGuide/weaponlocker.jpg" />
<p />
<h3><a name="Ammo Factory"></a> Ammo Factory </h3>
<p />
An ammo factory is a pickup that simply gives a specific type of ammunition to the player. The ammo factory has a particular weapon type that supplies ammunition for and the player must have that type of weapon in its inventory to use this type of pickup. Each type of weapon should have its own ammo factory class.
<p />
<img alt="ammofactory.jpg" src="rsrc/Three/WeaponsTechnicalGuide/ammofactory.jpg" />
<p />
</noautolink>
<p />
<style type="text/css">
<!--
div.codesnippet
{
    margin:0px 10px;
    padding:0px 10px;
    background:#f0f0f0;
    font:12px Courier;
    max-height:500px;
    overflow:auto;
    border:2px inset #989898;
}
-->
</style>
<p />
<p />
<p />
<p />
<p />
<p />


<!-- BEGIN UE4 NOTICE -->



<div id="version_message" style="display:none;">

    <div style="position:fixed;top:0px;left:0px;width:100%;height:100%;background:#000;opacity:0.5;">

    </div>

    <div style="position:fixed;top:50%;left:50%;margin:-70px 0px 0px -240px;background:#FFF;border-radius:6px;width:480px;box-shadow:0px 5px 30px -5px rgba(0,0,0,0.9);">

        <div style="font-size:16px;font-weight:bold;background: url(rsrc/Three/warning.png) no-repeat scroll 5px 5px;padding:4px 10px 5px 25px;height:21px;width:440px;">

            Important!

        </div>

        <div style="font-size:11px;padding:5px 10px 10px;width:460px;">

            <p>You are viewing documentation for the <strong>Unreal Development Kit (UDK)</strong>.</p>



            <p>If you are looking for the Unreal Engine 4 documentation, please visit the <a style="color:#000;" href="https://docs.unrealengine.com">Unreal Engine 4 Documentation</a> site.</p>

        </div>

        <div style="height:20px;padding:4px;margin:6px;border-top:1px solid #a0a0a0;">

            <form onsubmit="return closeVersionMessage();">

                <input type="checkbox" id="dismiss" value="dismiss" />

                <label for="dsimiss">Don't show me this again</label>

                <input type="submit" value="Close" style="cursor:pointer;float:right;width:60px;color:#f0f0f0;font-weight:bold;background:#882222;height:24px;padding:2px 3px 3px;text-align:center;border:1px outset #000;" />

            </form>

        </div>

    </div>

</div>



<script type="text/javascript">

    window.onload = function () {

        LoadVersionMessage();

    }



    function LoadVersionMessage()

    {

        var showMessage = "false";
        if(showMessage != "false")

        {

            showVersionMessage();

        }

    }



    function showVersionMessage()

    {

        var message = document.getElementById("version_message");

        if(message)

        {

            message.style.display = "block";

        }

    }



    function closeVersionMessage() {

        var dismiss = document.getElementById("dismiss");

        var message = document.getElementById("version_message");

        if (message) {

            message.style.display = "none";

        }

        if (dismiss.checked) {

            eraseCookie("doc_version_message");

            createCookie("doc_version_message", "false", 365);

            dismiss.checked = false;

        }

        return false;

    }



    function createCookie(name, value, days) {

        if (days) {

            var date = new Date();

            date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));

            var expires = "; expires=" + date.toGMTString();

        }

        else var expires = "";

        document.cookie = name + "=" + value + expires + "; path=/";

    }



    function readCookie(name) {

        var nameEQ = name + "=";

        var ca = document.cookie.split(';');

        for (var i = 0; i < ca.length; i++) {

            var c = ca[i];

            while (c.charAt(0) == ' ') c = c.substring(1, c.length);

            if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);

        }

        return null;

    }



    function eraseCookie(name) {

        createCookie(name, "", -1);

    }

</script>



<!-- END UE4 NOTICE -->



</div></div><div id="footer"><div style="BACKGROUND-COLOR: transparent; margin: 0; padding: 0; width: 100%;"><div>&nbsp;</div><div style="float: left; text-align: left; vertical-align: bottom; width: 50%;"><a href="http://www.videogamevoters.org"><img src="rsrc/vgvn.jpg" border="0" width="234" height="60" alt="Video Game Voters Network" /></a></div><div style="float: right; text-align: right; vertical-align: bottom; width: 50%;">Copyright &copy; 2001-2012 <a href="http://www.epicgames.com" target="_top">Epic Games, Inc.</a><br /><a href="../Main/TermsAndConditions.html" class="twikiLink">Terms and Conditions</a><br /><a href="http://epicgames.com/privacynotice" target="_top">Privacy Notice</a></div></div></div></div>
<p />
</html></body>
