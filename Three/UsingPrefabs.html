<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
	"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title> UDK | UsingPrefabs    </title>

<style type="text/css" media="all">@import "rsrc/twiki_webs.css";</style>
<style type="text/css" media="all">@import "rsrc/udn_new.css";</style>
<link rel="icon" href="rsrc/Three/WebPreferences/favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="rsrc/Three/WebPreferences/favicon.ico" type="image/x-icon" />


<!-- view.static_udn3.tmpl  -->
<script language="JavaScript" type="text/javascript" src="rsrc/udn.js"></script>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

</head>
<p />
<body id="webbgThree">
<p />

<p />
<div id="webThree"><div id="head">
<!--
<div class="header">
 -->
<div style="background: url(/pub/webbg_udn.jpg); background-repeat: no-repeat; height:140px; width: 100%;" >
<!--
<div style="background: transparent url(/pub/udn_header_bg.jpg); background-repeat: repeat-x; height:140px; width: 100%; margin-left: 991px;">
 -->
<p />
<div id="nav">
<ul class="nav">
<font color=black>|</font>&nbsp;&nbsp;<li class=nav_Three><a href="../Main/WebHome.html" class="twikiLink">Main</a></li><font color=black>|</font><li class=nav_Three><a href="../Two/WebHome.html" class="twikiLink">UnrealEngine2</a></li><font color=black>|</font><li class=nav_Three><a href="WebHome.html" class="twikiLink">UnrealEngine3</a></li><font color=black>|</font><li class=nav_Three><a href="https://docs.unrealengine.com" class="twikiLink">UnrealEngine4</a></li><font color=black>|</font><li class=nav_Three><a href="../Main/BusinessAndLegal.html" class="twikiLink">Business &amp; Legal</a></li><font color=black>|</font>
</ul><br><br><br>
</div>
</div>
</div> <!-- end head -->
<div id="pagedefault">
<div id="maincol">
<div id="tool">
<div id="tooltop">UDN</div>
<div id="tooltext" style="padding: 10px 10px 10px 10px;">
Search public documentation: <br>
<form ACTION="/search/index.php" METHOD="GET" NAME="main" ID="main">
<input TYPE="TEXT" NAME="q" SIZE="15" STYLE="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: xx-small;">
<input TYPE="SUBMIT" VALUE="Search" STYLE="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: xx-small;"><br>
</form>
</div>
<div id="toolband">UsingPrefabs  </b></div>
<div id="tooltext">
<a href="UsingPrefabsJP.html" class="twikiLink">日本語訳</a><br><a href="UsingPrefabsCH.html" class="twikiLink">中国翻译</a><br><a href="UsingPrefabsKR.html" class="twikiLink">한국어</a><br>

<!-- Three/UsingPrefabs -->
<hr size="1" noshade="noshade" />
Interested in the Unreal Engine? <br>
Visit the <a href="http://www.unrealtechnology.com" target="_top">Unreal Technology</a> site.<br>
<br>
Looking for jobs and company info? <br>
Check out the <a href="http://www.epicgames.com" target="_top">Epic games</a> site.<br>
<br>
Questions about support via UDN? <br>
Contact the <a href="../Main/ContactUDNStaff.html" class="twikiLink">UDN Staff</a> <br>
<br>
</div> <!-- end toolbox content -->
<div id="toolbottom"></div>
</div> <!-- end tool -->
<p />
<noautolink>
<p />
<div style="padding:0px 0px 0px 4px;font:10px Verdana;">
<b><a href="WebHome.html" class="twikiLink">UE3 Home</a></b> &gt; <b><a href="LevelEditingHome.html" class="twikiLink">Level Editing</a></b> &gt; Using Prefabs <br/>
<b><a href="WebHome.html" class="twikiLink">UE3 Home</a></b> &gt; <b><a href="LevelDesignerHome.html" class="twikiLink">Level Designer</a></b> &gt; Using Prefabs
</div>
<hr size="1" noshade="noshade">
<h1><a name="Using Prefabs"></a> Using Prefabs </h1>
<hr size="1" noshade="noshade">
<p />
<div class="twikiToc"> <ul>
<li> <a href="UsingPrefabs.html#Using Prefabs"> Using Prefabs</a> <ul>
<li> <a href="UsingPrefabs.html#Overview"> Overview</a>
</li> <li> <a href="UsingPrefabs.html#Suggested Workflow"> Suggested Workflow</a>
</li> <li> <a href="UsingPrefabs.html#Creating a Prefab"> Creating a Prefab</a>
</li> <li> <a href="UsingPrefabs.html#Placing a Prefab Instance"> Placing a Prefab Instance</a>
</li> <li> <a href="UsingPrefabs.html#Editing a Prefab"> Editing a Prefab</a>
</li> <li> <a href="UsingPrefabs.html#Updating a Prefab"> Updating a Prefab</a>
</li> <li> <a href="UsingPrefabs.html#Reseting a Prefab"> Reseting a Prefab</a>
</li> <li> <a href="UsingPrefabs.html#Add a Kismet Sequence to a Prefab"> Add a Kismet Sequence to a Prefab</a>
</li> <li> <a href="UsingPrefabs.html#Converting a Prefab back to Normal Actors."> Converting a Prefab back to Normal Actors.</a>
</li> <li> <a href="UsingPrefabs.html#Prefab Tips"> Prefab Tips</a>
</li></ul>
</li></ul>
</div>
<p />
<h2><a name="Overview"></a> Overview </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
Prefabs are collections of actors and associated Kismet that can be stored in a package and instanced into a level.
<p />
Quite often when constructing a level you want to create some arrangement of actors and associated Kismet, and then re-use that collection in the same or other levels. An example might be a flaming torch, which consists of a static mesh, a light, a particle system and some Kismet which allows it to be blown out. Prefabs allows you to create this kind of collection once, and then save it in a package as a <strong>Prefab</strong>. You can then select the Prefab in the Content Browser, and add it many times through the level.
<p />
Prefabs can have changes made to them in a level, and those changes can then be propagated to all existing instances of that Prefab. Because this uses Unreal's property system, only properties still at their original prefab defaults will be updated when the Prefab changes. For example, imagine you have a Prefab that contains a yellow light, and you then change one instance of the Prefab to have a blue light. Then you change the Prefab itself to have a green light. Only instances who's light is still yellow will have the color changed to green. This is very useful, as it allows you modify, or even remove, parts of a Prefab instance to make it fit a particular usage, but also receive updates to the Prefab.
<p />
<h2><a name="Suggested Workflow"></a> Suggested Workflow </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
While the functionality listed in this document is still accurate from a technical standpoint, Epic's level designers and artists use the following internal workflow to avoid any issues when using prefabs:
<p /> <ul>
<li> <strong>Use Prefabs as a level placement device only.</strong>
</li> <li> This means that once a prefab is placed in a level, it should be immediately converted back to straightforward actors by right-clicking and choosing <em>Convert PrefabInstance To Normal Actors</em>.
</li> <li> Avoid certain advanced features, including propagating actor property changes to prefab instances already placed in the level, and storing Kismet logic within the prefab asset.
</li></ul>
<p />
While these features do technically work, it is possible that their use my lead to various issues. As such, Epic's internal staff now only uses prefabs as described above and strongly recommends this workflow.
<p />
<p />
<h2><a name="Creating a Prefab"></a> Creating a Prefab </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
To create a new Prefab, first assemble the actors as you wish in the level.
<p />
<img src="rsrc/Three/UsingPrefabs/Prefab_00_ArrangingActors.jpg" alt="Prefab_00_ArrangingActors.jpg" width='545' height='871' />
<p />
Then select them all, right-click and choose <strong>Create Prefab</strong> from the context menu.
<p />
<img src="rsrc/Three/UsingPrefabs/Prefab_01_CreatePrefab.jpg" alt="Prefab_01_CreatePrefab.jpg" width='701' height='913' />
<p />
You will be prompted for a Package Name, optional Group Name and a name for the new Prefab.
<p />
<img src="rsrc/Three/UsingPrefabs/Prefab_02_PackageGroupingNameDialogBox.jpg" alt="Prefab_02_PackageGroupingNameDialogBox.jpg" width='420' height='137' />
<p />
It will then ask you if you want to replace the selected Actors with an instance of the new Prefab. The origin that is selected for the new Prefab is the origin of the largest Actor that was selected.
<p />
<img src="rsrc/Three/UsingPrefabs/Prefab_03_ReplaceActorsWithNewPrefab.jpg" alt="Prefab_03_ReplaceActorsWithNewPrefab.jpg" width='461' height='121' />
<p />
You should now be able to see the new Prefab in the Content Browser. Prefabs display a thumbnail showing the the Prefab in the level when you created it. This is taken from the position of the camera in the perspective editor view port when the Prefab was created, so its worth getting a good view on your objects before you create the Prefab.
<p />
<img src="rsrc/Three/UsingPrefabs/Prefab_04_PrefabInContentBrowser.jpg" alt="Prefab_04_PrefabInContentBrowser.jpg" width='529' height='547' />
<p />
<p />
<h2><a name="Placing a Prefab Instance"></a> Placing a Prefab Instance </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
To place an instance of a Prefab, simply select it in the Content Browser, right-click in the level and choose <em>Add Prefab: <Prefab Name></em>. It should appear in the level. You will also see that all instances of a Prefab have a PrefabInstance Actor associated with them. This looks like a red <em>P</em> icon, and represents the origin of the Prefab.
<p />
<img src="rsrc/Three/UsingPrefabs/Prefab_05_Prefab.jpg" alt="Prefab_05_Prefab.jpg" width='497' height='718' />
<p />
This is used for keeping track of the Prefab that was used for this instance, and which Actors are part of it.
<p />
When you create a Prefab, references between Actors within the Prefab are correctly preserved. So if you have an Actor attached to another Actor in the Prefab, this will be handled correctly each time you place the Prefab. However, any references to Actors <em>outside</em> the Prefab will be cleared.
<p />
<p />
<h2><a name="Editing a Prefab"></a> Editing a Prefab </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
By default, when you click on any Actor within a Prefab instance it selects the whole instance. This is to make working with prefabs easier, as you can then move them around as one unit.
<p />
<img src="rsrc/Three/UsingPrefabs/Prefab_06_PrefabTranslation.jpg" alt="Prefab_06_PrefabTranslation.jpg" width='479' height='773' />
<p />
However, you sometimes want to edit a particular Actor within a Prefab. To do this, you will need to first unlock prefabs from selection. This is done by opening the View menu and unchecking the "Lock Prefabs from Selection". From there you can select the individual actors that belong to that Prefab.
<p />
<img src="rsrc/Three/UsingPrefabs/Prefab_07_LockPrefabsFromSelection.jpg" alt="Prefab_07_LockPrefabsFromSelection.jpg" width='408' height='715' />
<p />
<p />
<h2><a name="Updating a Prefab"></a> Updating a Prefab </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
If you wish to update a Prefab stored in the package, right clicking on a modified Prefab Instance and select <em>Update Prefab <Prefab Name> From This Instance</em> within the context menu. This will then copy the properties from the selected instance to its Prefab. It will then propagate any changes to all instances of that Prefab currently in the level. If you have deleted an Actor from that instance, then that Actor will be removed from the Prefab itself and from all instances of the Prefab. If you wish to add a new Actor to a Prefab, select the Prefab instance and any Actors you wish to add, and do the update step. These Actors will then be added to the Prefab and all instances. The preview image for the Prefab is also re-captured when you update a Prefab.
<p />
As noted above, if you change a property on an instance of a Prefab, that value will not be changed when the base Prefab is updated. Also, when you delete an Actor from an instance of a Prefab, that Actor will not re-appear when the Prefab is updated. BSP brushes and Volumes do not work in this way though, and are always copied from the Prefab.
<p />
When you open a map which contains instances of a Prefab that has been updated since the map was saved, it will automatically update any instances of that Prefab in the map and show you this dialog:
<p />
<img src="rsrc/Three/UsingPrefabs/Prefab_08_PrefabsContextMenu.jpg" alt="Prefab_08_PrefabsContextMenu.jpg" width='581' height='938' />
<p />
<p />
<h2><a name="Reseting a Prefab"></a> Reseting a Prefab </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
If you've made changes to a Prefab that you don't like, you can always revert back to the prefab stored inside the package. First make sure that you have checked Locked Prefabs from Selection, then right click and select <em>Reset Instance From Prefab <Prefab Name></em>.
<p />
<p />
<h2><a name="Add a Kismet Sequence to a Prefab"></a> Add a Kismet Sequence to a Prefab </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
Prefabs can contain <a href="KismetUserGuide.html" class="twikiLink">Kismet</a> scripting as well as collections of Actors. When you create or update a Prefab, it will search the Level Sequences to see if there are any references to Actors in the Prefab. If it finds any, it will look for the <em>highest</em> sequence in the hierarchy which contains them all, and then ask you if that is the correct Sequence to use for this Prefab:
<p />
<img src="rsrc/Three/UsingPrefabs/Prefab_09_PrefabKismet.jpg" alt="Prefab_09_PrefabKismet.jpg" width='478' height='173' />
<p />
If you answer <em>Yes</em>, it performs an extra check that there are no references within this Sequence to Actors that are not in the Prefab. If this is the case, it will display a warning and will not include the Sequence in the Prefab.
<p />
When you place a Prefab that contains a <a href="KismetUserGuide.html" class="twikiLink">Kismet</a> sequence into a level, it will instance the <a href="KismetUserGuide.html" class="twikiLink">Kismet</a> sequence into a top-level sub-sequence called <em>Prefabs</em>. Each instance of a Prefab in a level has its own copy of the associated <a href="KismetUserGuide.html" class="twikiLink">Kismet</a> sequence. When the Prefab is updated, the <a href="KismetUserGuide.html" class="twikiLink">Kismet</a> sequence for each instance is completely replaced from the one in the Prefab, so it not possible to customize the <a href="KismetUserGuide.html" class="twikiLink">Kismet</a> sequence per-instance. However, it is possible to add input, outputs and variable connectors to the <a href="KismetUserGuide.html" class="twikiLink">Kismet</a> sequences of the Prefab. In this way you can expose functionality to Level Designers. An example of this might be a door prefab whose sequences exposes inputs for locking and opening the door, and an output which is fired each time the door is opened.
<p />
<p />
<h2><a name="Converting a Prefab back to Normal Actors."></a> Converting a Prefab back to Normal Actors. </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
Select the Prefab, then right click and select the 'Convert PrefabInstance To Normal Actors' option in the context menu. This will delete the prefab instance and convert all of the prefabs actors into normal actors again.
<p />
<img src="rsrc/Three/UsingPrefabs/Prefab_08_PrefabsContextMenu.jpg" alt="Prefab_08_PrefabsContextMenu.jpg" width='581' height='938' />
<p />
<p />
<h2><a name="Prefab Tips"></a> Prefab Tips </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p /> <ul>
<li> If you select an Actor that is part of a Prefab instance, you can press <em>Shift-P</em> to select all Actors which are part of that instance. You can also do this by choosing the <em>Select All Actors In Prefab(s)</em> option from the context menu.
</li> <li> If you select a PrefabInstance, you can choose <em>Open Sequence For PrefabInstance In Kismet</em>, to open <a href="KismetUserGuide.html" class="twikiLink">Kismet</a> and jump straight to the sub-sequence for that instance.
</li></ul>
<p />
<p />
<p />
</noautolink>
<p />
<p />
<p />
<p />
<p />
<p />


<!-- BEGIN UE4 NOTICE -->



<div id="version_message" style="display:none;">

    <div style="position:fixed;top:0px;left:0px;width:100%;height:100%;background:#000;opacity:0.5;">

    </div>

    <div style="position:fixed;top:50%;left:50%;margin:-70px 0px 0px -240px;background:#FFF;border-radius:6px;width:480px;box-shadow:0px 5px 30px -5px rgba(0,0,0,0.9);">

        <div style="font-size:16px;font-weight:bold;background: url(rsrc/Three/warning.png) no-repeat scroll 5px 5px;padding:4px 10px 5px 25px;height:21px;width:440px;">

            Important!

        </div>

        <div style="font-size:11px;padding:5px 10px 10px;width:460px;">

            <p>You are viewing documentation for the <strong>Unreal Development Kit (UDK)</strong>.</p>



            <p>If you are looking for the Unreal Engine 4 documentation, please visit the <a style="color:#000;" href="https://docs.unrealengine.com">Unreal Engine 4 Documentation</a> site.</p>

        </div>

        <div style="height:20px;padding:4px;margin:6px;border-top:1px solid #a0a0a0;">

            <form onsubmit="return closeVersionMessage();">

                <input type="checkbox" id="dismiss" value="dismiss" />

                <label for="dsimiss">Don't show me this again</label>

                <input type="submit" value="Close" style="cursor:pointer;float:right;width:60px;color:#f0f0f0;font-weight:bold;background:#882222;height:24px;padding:2px 3px 3px;text-align:center;border:1px outset #000;" />

            </form>

        </div>

    </div>

</div>



<script type="text/javascript">

    window.onload = function () {

        LoadVersionMessage();

    }



    function LoadVersionMessage()

    {

        var showMessage = "false";
        if(showMessage != "false")

        {

            showVersionMessage();

        }

    }



    function showVersionMessage()

    {

        var message = document.getElementById("version_message");

        if(message)

        {

            message.style.display = "block";

        }

    }



    function closeVersionMessage() {

        var dismiss = document.getElementById("dismiss");

        var message = document.getElementById("version_message");

        if (message) {

            message.style.display = "none";

        }

        if (dismiss.checked) {

            eraseCookie("doc_version_message");

            createCookie("doc_version_message", "false", 365);

            dismiss.checked = false;

        }

        return false;

    }



    function createCookie(name, value, days) {

        if (days) {

            var date = new Date();

            date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));

            var expires = "; expires=" + date.toGMTString();

        }

        else var expires = "";

        document.cookie = name + "=" + value + expires + "; path=/";

    }



    function readCookie(name) {

        var nameEQ = name + "=";

        var ca = document.cookie.split(';');

        for (var i = 0; i < ca.length; i++) {

            var c = ca[i];

            while (c.charAt(0) == ' ') c = c.substring(1, c.length);

            if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);

        }

        return null;

    }



    function eraseCookie(name) {

        createCookie(name, "", -1);

    }

</script>



<!-- END UE4 NOTICE -->



</div></div><div id="footer"><div style="BACKGROUND-COLOR: transparent; margin: 0; padding: 0; width: 100%;"><div>&nbsp;</div><div style="float: left; text-align: left; vertical-align: bottom; width: 50%;"><a href="http://www.videogamevoters.org"><img src="rsrc/vgvn.jpg" border="0" width="234" height="60" alt="Video Game Voters Network" /></a></div><div style="float: right; text-align: right; vertical-align: bottom; width: 50%;">Copyright &copy; 2001-2012 <a href="http://www.epicgames.com" target="_top">Epic Games, Inc.</a><br /><a href="../Main/TermsAndConditions.html" class="twikiLink">Terms and Conditions</a><br /><a href="http://epicgames.com/privacynotice" target="_top">Privacy Notice</a></div></div></div></div>
<p />
</html></body>
