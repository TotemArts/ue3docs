<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
	"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title> UDK | PhysXParticleSystemReference    </title>

<style type="text/css" media="all">@import "rsrc/twiki_webs.css";</style>
<style type="text/css" media="all">@import "rsrc/udn_new.css";</style>
<link rel="icon" href="rsrc/Three/WebPreferences/favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="rsrc/Three/WebPreferences/favicon.ico" type="image/x-icon" />


<!-- view.static_udn3.tmpl  -->
<script language="JavaScript" type="text/javascript" src="rsrc/udn.js"></script>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

</head>
<p />
<body id="webbgThree">
<p />

<p />
<div id="webThree"><div id="head">
<!--
<div class="header">
 -->
<div style="background: url(/pub/webbg_udn.jpg); background-repeat: no-repeat; height:140px; width: 100%;" >
<!--
<div style="background: transparent url(/pub/udn_header_bg.jpg); background-repeat: repeat-x; height:140px; width: 100%; margin-left: 991px;">
 -->
<p />
<div id="nav">
<ul class="nav">
<font color=black>|</font>&nbsp;&nbsp;<li class=nav_Three><a href="../Main/WebHome.html" class="twikiLink">Main</a></li><font color=black>|</font><li class=nav_Three><a href="../Two/WebHome.html" class="twikiLink">UnrealEngine2</a></li><font color=black>|</font><li class=nav_Three><a href="WebHome.html" class="twikiLink">UnrealEngine3</a></li><font color=black>|</font><li class=nav_Three><a href="https://docs.unrealengine.com" class="twikiLink">UnrealEngine4</a></li><font color=black>|</font><li class=nav_Three><a href="../Main/BusinessAndLegal.html" class="twikiLink">Business &amp; Legal</a></li><font color=black>|</font>
</ul><br><br><br>
</div>
</div>
</div> <!-- end head -->
<div id="pagedefault">
<div id="maincol">
<div id="tool">
<div id="tooltop">UDN</div>
<div id="tooltext" style="padding: 10px 10px 10px 10px;">
Search public documentation: <br>
<form ACTION="/search/index.php" METHOD="GET" NAME="main" ID="main">
<input TYPE="TEXT" NAME="q" SIZE="15" STYLE="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: xx-small;">
<input TYPE="SUBMIT" VALUE="Search" STYLE="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: xx-small;"><br>
</form>
</div>
<div id="toolband">PhysXParticleSystemReference  </b></div>
<div id="tooltext">
<a href="PhysXParticleSystemReferenceJP.html" class="twikiLink">日本語訳</a><br><a href="PhysXParticleSystemReferenceCH.html" class="twikiLink">中国翻译</a><br><a href="PhysXParticleSystemReferenceKR.html" class="twikiLink">한국어</a><br>

<!-- Three/PhysXParticleSystemReference -->
<hr size="1" noshade="noshade" />
Interested in the Unreal Engine? <br>
Visit the <a href="http://www.unrealtechnology.com" target="_top">Unreal Technology</a> site.<br>
<br>
Looking for jobs and company info? <br>
Check out the <a href="http://www.epicgames.com" target="_top">Epic games</a> site.<br>
<br>
Questions about support via UDN? <br>
Contact the <a href="../Main/ContactUDNStaff.html" class="twikiLink">UDN Staff</a> <br>
<br>
</div> <!-- end toolbox content -->
<div id="toolbottom"></div>
</div> <!-- end tool -->
<p />
<noautolink>
<div style="padding:0px 0px 0px 4px;font:10px Verdana;">
<b><a href="WebHome.html" class="twikiLink">UE3 Home</a></b> &gt; <b><a href="PhysicsHome.html" class="twikiLink">Physics</a></b> &gt; PhysX Particle System Reference
</div>
<hr size="1" noshade="noshade">
<h1><a name="PhysX Particle System Reference"></a> PhysX Particle System Reference </h1>
<hr size="1" noshade="noshade">
<p />
<div class="twikiToc"> <ul>
<li> <a href="PhysXParticleSystemReference.html#PhysX Particle System Reference"> PhysX Particle System Reference</a> <ul>
<li> <a href="PhysXParticleSystemReference.html#Overview"> Overview</a>
</li> <li> <a href="PhysXParticleSystemReference.html#PhysXParticleSystem"> PhysXParticleSystem</a>
</li> <li> <a href="PhysXParticleSystemReference.html#PhysX Mesh Emitter"> PhysX Mesh Emitter</a>
</li> <li> <a href="PhysXParticleSystemReference.html#PhysX Sprite Emitter"> PhysX Sprite Emitter</a>
</li> <li> <a href="PhysXParticleSystemReference.html#Global Particle LOD"> Global Particle LOD</a>
</li> <li> <a href="PhysXParticleSystemReference.html#Limitations and known issues"> Limitations and known issues</a>
</li> <li> <a href="PhysXParticleSystemReference.html#Downloads"> Downloads</a>
</li></ul>
</li></ul>
</div>
<p />
<h2><a name="Overview"></a> Overview </h2>
<hr size="1" noshade="noshade">
<p />
The PhysXParticleSystem is a container for PhysX fluid parameters. This set of parameters is organized for better clarity in the editor, and also has some fields that reflect new parameters in 2.8.0 (which have just been integrated). The PhysXParticleSystem may be shared by many emitters, which allows you to easily re-use your tuning of the physical aspects of the particle simulation. The PhysXParticleSystem provides particle movement and collision with the PhysX scene. Additionally, it can be configured to perform SPH (Smoothed particle hydrodynamics) fluid simulation.
<p />
PhysXParticleSystem objects can be used by referencing them from special PhysX emitter type data modules. There are two supported modules to pick from: <strong>PhysXMeshTypeData</strong> and <strong>PhysXSpriteTypeData</strong>. Both emitter types expose parameters for adjusting global LOD behaviour.
<p />
The PhysXMeshTypeData can be used to display particles as rotating meshes. It is suitable for simulating small simple objects, such as debris or leaves. This type of emitter has been optimized with a fast instanced rendering path in order to enable massive particle effects.
<p />
The PhysXSpriteTypeData can drive animation of all sorts of sprite particles through a PhysXParticleSystem.
<p />
For all particles that are simulated using the PhysXParticleSystem objects, LOD can be controlled. The total amount of simulated particles, as well as particle lifetime and spawning behavior, can be adjusted for individual emitters.
<p />
<h2><a name="PhysXParticleSystem"></a> PhysXParticleSystem </h2>
<hr size="1" noshade="noshade">
For creating a new PhysXParticleSystem, right click in the <a href="ContentBrowserReference.html" class="twikiLink">Content Browser</a> and choose "New PhysXParticleSystem" from the context menu. The PhysXParticleSystem can then be edited when you double click on the icon.
<p />
<img src="rsrc/Three/PhysXParticleSystemReference/PhysXParticleSystem.gif"/>
<p />
Most commonly used parameters are exposed in the first three categories: <strong>Buffer</strong>, <strong>Collision</strong>, <strong>Dynamics</strong>. Parameters, which are less frequently used or are more difficult to tweak, as SPH parameters are listed under <strong>SdkExpert</strong>.
<p /> <ul>
<li> <strong>Buffer</strong> <ul>
<li> <strong>MaxParticles</strong> - The maximum total number of particles for this PhysXParticleSystem.
</li></ul>
</li> <li> <strong>Collision</strong> <ul>
<li> <strong>bDynamicCollision</strong> - Enable/disable collision with dynamic rigid bodies.
</li> <li> <strong>CollisionDistance</strong> - Distance at which particles collide with a rigid body surface.
</li> <li> <strong>FrictionWithDynamicShapes</strong> - Friction coefficient for collision with dynamic rigid bodies.
</li> <li> <strong>FrictionWithStaticShapes</strong> - Friction coefficient for collision with static rigid bodies.
</li> <li> <strong>RestitutionWithDynamicShapes</strong> - Restitution coefficient for collision with dynamic rigid bodies.
</li> <li> <strong>RestitutionWithStaticShapes</strong> - Restitution coefficient for collision with static rigid bodies.
</li></ul>
</li> <li> <strong>Dynamics</strong> <ul>
<li> <strong>bDisableGravity</strong> - Disables scene gravity for PhysXParticleSystem.
</li> <li> <strong>Damping</strong> - Velocity damping.
</li> <li> <strong>ExternalAcceleration</strong> - Acceleration vector, which is applied every simulation step.
</li> <li> <strong>MaxMotionDistance</strong> - Limit how far particles can move within one simulation step.
</li></ul>
</li> <li> <strong>SdkExpert</strong> <ul>
<li> <strong>bStaticCollision</strong> - Enable/disable collision with static rigid bodies.
</li> <li> <strong>bTwoWayCollision</strong> - Enable/disable two way interaction between particles and rigid bodies.
</li> <li> <strong>CollisionResponseCoefficient</strong> - Scaling factor for two way interaction.
</li> <li> <strong>KernelRadiusMultiplier</strong> - Defines particle interaction radius for SPH, relative to <strong>RestParticleDistance</strong>.
</li> <li> <strong>PacketSizeMultiplier</strong> - Defines relative grid cell size for parallel computations.
</li> <li> <strong>RestDensity</strong> - Sets the mass of the particles, a value around 1000 gives good results for SPH.
</li> <li> <strong>RestParticleDistance</strong> - Defines the spacing of the particles in the rest state.
</li> <li> <strong>SimulationMethod</strong> - Enables/disables SPH computations.
</li> <li> <strong>Stiffness</strong> - SPH stiffness.
</li> <li> <strong>Viscosity</strong> - SPH viscosity.
</li></ul>
</li></ul>
<p />
Some guidelines: <ul>
<li> Enabling <strong>bTwoWayCollision</strong> disables automatic orientation of mesh particles on collision.
</li> <li> If using SPH, <strong>KernelRadiusMultiplier</strong> should usually be between 1.7 and 2.0 for good performance and behavior.
</li> <li> When not using SPH, the <strong>RestDensity</strong> can be used to scale the effect of force fields on the particles. This might be necessary, since the current PhysX force fields don't support feature specific scaling.
</li></ul>
<p />
Performance Tuning: <ul>
<li> <strong>CollisionDistance</strong> and especially <strong>MaxMotionDistance</strong> should be set as low as possible for a given effect.
</li> <li> In order to parallelize computations a regular grid in space is used. The grid cells (packets) are used for both collision and SPH dynamics.
</li> <li> The packet size is defined with: KernelRadiusMultiplier * RestParticleDistance * PacketSizeMultiplier.
</li> <li> The packet size is crucial for good performance for a given use case: <ul>
<li> Fewer packets (larger ones) are generally better for performance.
</li> <li> The size has an impact on collision efficiency in terms of computation time (Also memory usage on the PPU [Physics Processing Unit]).
</li></ul>
</li> <li> For SPH a relative strict set of values for the three packet size defining parameters is valid.  <ul>
<li> <strong>KernelRadiusMultlier</strong> needs to be set to about 2.0.
</li> <li> <strong>RestParticleDistance</strong> is given by the effect scale.
</li> <li> <strong>PacketSizeMultiplier</strong> can be choose dependent on how sparse the scenario is. If the particles are relative dense, choose a smaller size.
</li></ul>
</li> <li> For non-interacting particles the optimal set for collision needs to be chosen. <ul>
<li> <strong>KernelRadiusMultiplier</strong> and <strong>RestParticleDistance</strong> can be chosen rather large with respect to <strong>PacketSizeMultiplier</strong> in order to reduce memory consumption on the PPU.
</li></ul>
</li></ul>
<p />
<p />
<h2><a name="PhysX Mesh Emitter"></a> PhysX Mesh Emitter </h2>
<hr size="1" noshade="noshade">
The PhysXMeshEmitter can be created by selecting the "PhysX Mesh Data" in the "Type Data" field within <a href="CascadeUserGuide.html" class="twikiLink">Cascade</a>.
<p />
<img src="rsrc/Three/PhysXParticleSystemReference/PhysXMeshEmitter.gif"/>
<p />
The property dialog for the "PhysX Mesh Data" contains a few PhysX specific properties:
<p /> <ul>
<li> <strong>PhysXParSys</strong> - The PhysXParticleSystem which is used to simulate the particles.
</li> <li> <strong>PhysXRotationMethod</strong> - Select a method which reflects the basic shape features of your particle mesh.
</li> <li> <strong>FluidRotationCoefficient</strong> - Defines how much, linear velocity or collisions result in particle mesh rotation.
</li> <li> <strong>VerticalLod</strong> - Parameters for global <strong>EmitterLodControl</strong>.
</li></ul>
<p />
All spawning modules are supported. However, from the available update modules only <strong>SizeByLife</strong> is supported.
<p />
Some guidelines: <ul>
<li> Try to share the same PhysXParticleSystem for different emitters if possible.
</li> <li> The generic PhysXRotationMethod should match your mesh as closely as possible. You might have to reorient your mesh in order to achieve a better fit.
</li></ul>
<p />
<h2><a name="PhysX Sprite Emitter"></a> PhysX Sprite Emitter </h2>
<hr size="1" noshade="noshade">
The PhysXSpriteEmitter can be created by selecting the "PhysX Sprite Data" in the "Type Data" field within <a href="CascadeUserGuide.html" class="twikiLink">Cascade</a>.
<p />
<img src="rsrc/Three/PhysXParticleSystemReference/PhysXSpriteEmitter.gif"/>
<p />
The property dialog for the "PhysX Sprite Data" contains some PhysX specific properties:
<p /> <ul>
<li> <strong>PhysXParSys</strong> -The PhysXParticleSystem which is used to simulate the particles.
</li> <li> <strong>VerticalLod</strong> - Parameters for global <strong>EmitterLodControl</strong>.
</li></ul>
<p />
The PhysX sprite emitter isn't as optimized as the PhysX mesh emitter. However it provides some more flexibility. All modules are supported with the exception of those that update particle locations or velocities during the simulation, or kill particles.
<p />
<h2><a name="Global Particle LOD"></a> Global Particle LOD </h2>
<hr size="1" noshade="noshade">
The Unreal emitter system provides LOD functionality based on distances. The PhysX emitter implementation provides additional LOD mechanisms which let you set global particle budgets.
<p />
There are two basic methods to apply global particle LOD which can work in concert.  <ul>
<li> <strong>FIFO mode</strong> - The particles of an emitter effect are organized in a priority queue. Particles which are older get a lower priority and are therefor removed earliest if the particle budget is exceeded. The priority for removing particles with respect to different emitter effects can be configured as well.
</li> <li> <strong>Emission volume reduction</strong> - In order to meet a particle budget for a specific emitter, the emission volume can be reduced. The volume is defined as the product of the mean particle lifetime and the mean particle rate. The overall particle budget is distributed among all the active emitters.
</li></ul>
<p />
Different LOD settings are present on different levels:
<p /> <ul>
<li> <strong>BaseEngine.ini</strong> (corresponding game ...Engine.ini, below "[Engine.PhysicsLODVerticalEmitter]") <ul>
<li> <strong>ParticlePercentage</strong> - Defines the global particle LOD setting in percentage.  <ul>
<li> <strong>Default:</strong> 100
</li></ul>
</li></ul>
</li> <li> <strong>WorldInfo.Physics.VerticalProperties.Emitters</strong> <ul>
<li> <strong>ParticlesLodMin</strong> - The global particle budget of the map at 0 <strong>ParticlePercentage</strong>.
</li> <li> <strong>ParticlesLodMax</strong> - The global particle budget of the map at 100 <strong>ParticlePercentage</strong>.
</li> <li> <strong>bApplyCylindricalPacketCulling</strong> - If set, packet distance is evaluated in the horizontal plane around the camera.
</li> <li> <strong>PacketsPerPhysXParticleSystemMax</strong> - The upper limit for fluid packets for each PhysXParticleSystem. Sensible values are between 50 and 600, but try to keep this as few as possible.
</li> <li> <strong>SpawnLodVsFifoBias</strong> - Defines how much emitter spawning rate and lifetime should be impacted by the global particle number restriction. 0 means that no emission volume reduction is applied.
</li></ul>
</li> <li> <strong>PhysXMeshTypeData.VerticalLOD</strong> / <strong>PhysXSpriteTypeData.VerticalLOD</strong> <ul>
<li> <strong>WeightForFifo</strong> - The relative weight for an emitter effect with respect to removing old particles. A relatively low value makes the system delete particles from the other emitter effects, if possible.
</li> <li> <strong>WeightForSpawnLOD</strong> - Same as <strong>WeightForFIFO</strong>, but with respect to emission volume reduction.
</li> <li> <strong>SpawnLodRateVsLifeBias</strong> - Defines how much the spawning volume should be affected by means of either reducing the emission rate or reducing particle lifetimes.
</li> <li> <strong>RelativeFadeoutTime</strong> - Needs to be set to the fraction of the particle lifetime that is used to graphically fade out the particle. The LOD system will try to fade particles out rather than delete them immediately.
</li></ul>
</li></ul>
<p />
<h2><a name="Limitations and known issues"></a> Limitations and known issues </h2>
<hr size="1" noshade="noshade"> <ul>
<li> The PhysXMeshTypeData emitter only supports the <strong>SizeByLife</strong> update module. We plan to extend this at least with runtime vertex color updates.
</li> <li> Real time preview doesn't work properly with PhysX emitters.
</li> <li> Currently all PhysXMeshTypeData emitters of the same type are rendered in one batch. In the future we would like to support custom grouping of the emitter instances for batched rendering.
</li> <li> PhysX emitters don't work with the Cascade preview collision mesh.
</li> <li> No support for emitter warm up time.
</li> <li> <strong>bUseLocalSpace</strong> is not supported! (All PhysX particles will use world space).
</li></ul>
<p />
<h2><a name="Downloads"></a> Downloads </h2>
<hr size="1" noshade="noshade">
<p /> <ul>
<li> <a href="rsrc/Three/PhysXParticleSystemReference/PhysXParticlesExample.zip" target="_top">Download</a> an example of physics particle systems.
</li></ul>
<p />
</noautolink>
<p />
<p />
<p />
<p />
<p />
<p />


<!-- BEGIN UE4 NOTICE -->



<div id="version_message" style="display:none;">

    <div style="position:fixed;top:0px;left:0px;width:100%;height:100%;background:#000;opacity:0.5;">

    </div>

    <div style="position:fixed;top:50%;left:50%;margin:-70px 0px 0px -240px;background:#FFF;border-radius:6px;width:480px;box-shadow:0px 5px 30px -5px rgba(0,0,0,0.9);">

        <div style="font-size:16px;font-weight:bold;background: url(rsrc/Three/warning.png) no-repeat scroll 5px 5px;padding:4px 10px 5px 25px;height:21px;width:440px;">

            Important!

        </div>

        <div style="font-size:11px;padding:5px 10px 10px;width:460px;">

            <p>You are viewing documentation for the <strong>Unreal Development Kit (UDK)</strong>.</p>



            <p>If you are looking for the Unreal Engine 4 documentation, please visit the <a style="color:#000;" href="https://docs.unrealengine.com">Unreal Engine 4 Documentation</a> site.</p>

        </div>

        <div style="height:20px;padding:4px;margin:6px;border-top:1px solid #a0a0a0;">

            <form onsubmit="return closeVersionMessage();">

                <input type="checkbox" id="dismiss" value="dismiss" />

                <label for="dsimiss">Don't show me this again</label>

                <input type="submit" value="Close" style="cursor:pointer;float:right;width:60px;color:#f0f0f0;font-weight:bold;background:#882222;height:24px;padding:2px 3px 3px;text-align:center;border:1px outset #000;" />

            </form>

        </div>

    </div>

</div>



<script type="text/javascript">

    window.onload = function () {

        LoadVersionMessage();

    }



    function LoadVersionMessage()

    {

        var showMessage = "false";
        if(showMessage != "false")

        {

            showVersionMessage();

        }

    }



    function showVersionMessage()

    {

        var message = document.getElementById("version_message");

        if(message)

        {

            message.style.display = "block";

        }

    }



    function closeVersionMessage() {

        var dismiss = document.getElementById("dismiss");

        var message = document.getElementById("version_message");

        if (message) {

            message.style.display = "none";

        }

        if (dismiss.checked) {

            eraseCookie("doc_version_message");

            createCookie("doc_version_message", "false", 365);

            dismiss.checked = false;

        }

        return false;

    }



    function createCookie(name, value, days) {

        if (days) {

            var date = new Date();

            date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));

            var expires = "; expires=" + date.toGMTString();

        }

        else var expires = "";

        document.cookie = name + "=" + value + expires + "; path=/";

    }



    function readCookie(name) {

        var nameEQ = name + "=";

        var ca = document.cookie.split(';');

        for (var i = 0; i < ca.length; i++) {

            var c = ca[i];

            while (c.charAt(0) == ' ') c = c.substring(1, c.length);

            if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);

        }

        return null;

    }



    function eraseCookie(name) {

        createCookie(name, "", -1);

    }

</script>



<!-- END UE4 NOTICE -->



</div></div><div id="footer"><div style="BACKGROUND-COLOR: transparent; margin: 0; padding: 0; width: 100%;"><div>&nbsp;</div><div style="float: left; text-align: left; vertical-align: bottom; width: 50%;"><a href="http://www.videogamevoters.org"><img src="rsrc/vgvn.jpg" border="0" width="234" height="60" alt="Video Game Voters Network" /></a></div><div style="float: right; text-align: right; vertical-align: bottom; width: 50%;">Copyright &copy; 2001-2012 <a href="http://www.epicgames.com" target="_top">Epic Games, Inc.</a><br /><a href="../Main/TermsAndConditions.html" class="twikiLink">Terms and Conditions</a><br /><a href="http://epicgames.com/privacynotice" target="_top">Privacy Notice</a></div></div></div></div>
<p />
</html></body>
