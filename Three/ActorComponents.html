<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
	"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title> UDK | ActorComponents    </title>

<style type="text/css" media="all">@import "rsrc/twiki_webs.css";</style>
<style type="text/css" media="all">@import "rsrc/udn_new.css";</style>
<link rel="icon" href="rsrc/Three/WebPreferences/favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="rsrc/Three/WebPreferences/favicon.ico" type="image/x-icon" />


<!-- view.static_udn3.tmpl  -->
<script language="JavaScript" type="text/javascript" src="rsrc/udn.js"></script>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

</head>
<p />
<body id="webbgThree">
<p />

<p />
<div id="webThree"><div id="head">
<!--
<div class="header">
 -->
<div style="background: url(/pub/webbg_udn.jpg); background-repeat: no-repeat; height:140px; width: 100%;" >
<!--
<div style="background: transparent url(/pub/udn_header_bg.jpg); background-repeat: repeat-x; height:140px; width: 100%; margin-left: 991px;">
 -->
<p />
<div id="nav">
<ul class="nav">
<font color=black>|</font>&nbsp;&nbsp;<li class=nav_Three><a href="../Main/WebHome.html" class="twikiLink">Main</a></li><font color=black>|</font><li class=nav_Three><a href="../Two/WebHome.html" class="twikiLink">UnrealEngine2</a></li><font color=black>|</font><li class=nav_Three><a href="WebHome.html" class="twikiLink">UnrealEngine3</a></li><font color=black>|</font><li class=nav_Three><a href="https://docs.unrealengine.com" class="twikiLink">UnrealEngine4</a></li><font color=black>|</font><li class=nav_Three><a href="../Main/BusinessAndLegal.html" class="twikiLink">Business &amp; Legal</a></li><font color=black>|</font>
</ul><br><br><br>
</div>
</div>
</div> <!-- end head -->
<div id="pagedefault">
<div id="maincol">
<div id="tool">
<div id="tooltop">UDN</div>
<div id="tooltext" style="padding: 10px 10px 10px 10px;">
Search public documentation: <br>
<form ACTION="/search/index.php" METHOD="GET" NAME="main" ID="main">
<input TYPE="TEXT" NAME="q" SIZE="15" STYLE="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: xx-small;">
<input TYPE="SUBMIT" VALUE="Search" STYLE="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: xx-small;"><br>
</form>
</div>
<div id="toolband">ActorComponents  </b></div>
<div id="tooltext">
<a href="ActorComponentsJP.html" class="twikiLink">日本語訳</a><br><a href="ActorComponentsCH.html" class="twikiLink">中国翻译</a><br><a href="ActorComponentsKR.html" class="twikiLink">한국어</a><br>

<!-- Three/ActorComponents -->
<hr size="1" noshade="noshade" />
Interested in the Unreal Engine? <br>
Visit the <a href="http://www.unrealtechnology.com" target="_top">Unreal Technology</a> site.<br>
<br>
Looking for jobs and company info? <br>
Check out the <a href="http://www.epicgames.com" target="_top">Epic games</a> site.<br>
<br>
Questions about support via UDN? <br>
Contact the <a href="../Main/ContactUDNStaff.html" class="twikiLink">UDN Staff</a> <br>
<br>
</div> <!-- end toolbox content -->
<div id="toolbottom"></div>
</div> <!-- end tool -->
<p />
<noautolink>
<p />
<div style="padding:0px 0px 0px 4px;font:10px Verdana;">
<!--  -->
<b><a href="WebHome.html" class="twikiLink">UE3 Home</a></b> &gt; <b><a href="UnrealScriptHome.html" class="twikiLink">UnrealScript</a></b> &gt; Actor Components <br/>
<b><a href="WebHome.html" class="twikiLink">UE3 Home</a></b> &gt; <b><a href="GameplayProgrammingHome.html" class="twikiLink">Gameplay Programming</a></b> &gt; Actor Components
</div>
<hr size="1" noshade="noshade">
<h1><a name="Actor Components"></a> Actor Components </h1>
<hr size="1" noshade="noshade">
<p />
<div class="twikiToc"> <ul>
<li> <a href="ActorComponents.html#Actor Components"> Actor Components</a> <ul>
<li> <a href="ActorComponents.html#Overview"> Overview</a>
</li> <li> <a href="ActorComponents.html#Using Actor Components"> Using Actor Components</a> <ul>
<li> <a href="ActorComponents.html#ActorComponent versus _PrimitiveComponent"> ActorComponent versus PrimitiveComponent</a>
</li> <li> <a href="ActorComponents.html#Adding a Component"> Adding a Component</a>
</li> <li> <a href="ActorComponents.html#Modifying a Component"> Modifying a Component</a>
</li> <li> <a href="ActorComponents.html#Removing a Component"> Removing a Component</a>
</li> <li> <a href="ActorComponents.html#Component templates"> Component templates</a>
</li> <li> <a href="ActorComponents.html#Creating component templates"> Creating component templates</a>
</li> <li> <a href="ActorComponents.html#Instancing and attaching component templates"> Instancing and attaching component templates</a>
</li> <li> <a href="ActorComponents.html#Changing properties of a component template inherited from a super class"> Changing properties of a component template inherited from a super class</a>
</li> <li> <a href="ActorComponents.html#Dynamically created components"> Dynamically created components</a>
</li> <li> <a href="ActorComponents.html#Common _PrimitiveComponent options"> Common PrimitiveComponent options</a>
</li> <li> <a href="ActorComponents.html#Actor collision and _PrimitiveComponents"> Actor collision and PrimitiveComponents</a>
</li></ul>
</li> <li> <a href="ActorComponents.html#Built-in component types"> Built-in component types</a>
</li> <li> <a href="ActorComponents.html#Creating new component types"> Creating new component types</a> <ul>
<li> <a href="ActorComponents.html#SetParentToWorld"> SetParentToWorld</a>
</li> <li> <a href="ActorComponents.html#Attach"> Attach</a>
</li> <li> <a href="ActorComponents.html#UpdateTransform"> UpdateTransform</a>
</li> <li> <a href="ActorComponents.html#Detach"> Detach</a>
</li> <li> <a href="ActorComponents.html#IsValidComponent"> IsValidComponent</a>
</li></ul>
</li> <li> <a href="ActorComponents.html#Additional Notes"> Additional Notes</a> <ul>
<li> <a href="ActorComponents.html#Attachments"> Attachments</a>
</li> <li> <a href="ActorComponents.html#Garbage Collection"> Garbage Collection</a>
</li></ul>
</li></ul>
</li></ul>
</div>
<p />
<h2><a name="Overview"></a> Overview </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
In the Unreal Engine, all game-related objects are derived from the base Actor class. In previous generations of the Unreal Engine, the base Actor class was very heavyweight and any Actor-derived subclass inherited all properties, regardless of their behavior.
<p />
Actor Components solve the problem by defining multiple lightweight components that provide an interface for modular extensibility of Actor rendering and collision.
<p />
Component prototypes are defined in the default properties of a class, using a modified version of sub-object syntax that was previously defined in Unreal Engine 2. The prototype is named, and is inherited by subclasses. A subclass can override some or all of the default properties of the prototype. To use the component, add it to the Actor’s Components array via the default properties. Component prototypes referenced in the default properties are instanced along with the Actor class. Default property changes are propagated to existing instances of an Actor class saved in a level.
<p />
<p />
<h2><a name="Using Actor Components"></a> Using Actor Components </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
<h3><a name="ActorComponent versus _PrimitiveComponent"></a> ActorComponent versus PrimitiveComponent </h3>
<p />
An ActorComponent is an object which can be attached to an actor in the world.
<p />
A PrimitiveComponent is an ActorComponent which can be rendered and collided against.
<p />
<h3><a name="Adding a Component"></a> Adding a Component </h3>
<p />
Any Actor that’s instanced has a SpriteComponent that’s instanced along with it (unless a subclass removes Sprite from its Components array).
<p />
Components referenced by the components array are bound to the Actor’s location.
<p />
Example:
<p />
<pre>
class Actor extends Object;

var const array&#60;ActorComponent&#62;   Components;

defaultproperties
{
   Begin Object Class&#61;SpriteComponent Name&#61;Sprite
      Sprite&#61;S&#95;Actor
      HiddenGame&#61;True
   End Object
   Components.Add(Sprite)
}
</pre>
<p />
<h3><a name="Modifying a Component"></a> Modifying a Component </h3>
<p />
Example:
<p />
<pre>
class Trigger extends Actor;

defaultproperties
{
   Begin Object Name&#61;Sprite
      Sprite&#61;S&#95;Trigger
   End Object
}
</pre>
<p />
<h3><a name="Removing a Component"></a> Removing a Component </h3>
<p />
Example:
<p />
<pre>
class StaticMeshActor extends Actor;

defaultproperties
{
   Components.Remove(Sprite)
   …
}
</pre>
<p />
Since the Sprite component prototype is no longer referenced in the default properties of the StaticMeshActor class, it is not instanced with StaticMeshActors.
<p />
<h3><a name="Component templates"></a> Component templates </h3>
<p />
Component templates are used to declare the default components of an actor class.  A component template is a named object which contains the default properties for a component referenced in the default properties of a class.  When the class is instanced, any component templates it references are instanced along with it.
<p />
Component templates are inherited by subclasses of the class in which they are declared.  Each subclass can override individual properties of the inherited template.
<p />
An instance of a component template is serialized relative to the template's default properties.  This allows instances of actor components to continue to receive changes to the template properties after being placed in a level.
<p />
<h3><a name="Creating component templates"></a> Creating component templates </h3>
<p />
Component templates are declared in the default properties of a class:
<p />
<pre>
Begin Object Class&#61;SpriteComponent Name&#61;Sprite
   Sprite&#61;Texture2D&#39;EngineResources.S&#95;Actor&#39;
   HiddenGame&#61;True
   AlwaysLoadOnClient&#61;False
   AlwaysLoadOnServer&#61;False
End Object
</pre>
<p />
<h3><a name="Instancing and attaching component templates"></a> Instancing and attaching component templates </h3>
<p />
A component template will not be instanced with the class unless it is referenced by the class's default properties, and an actor component will not be attached to an actor unless it is in the actor's Components array.  You can instance an actor component template with an actor class and automatically attach the instanced component to the actor instance by adding the component template to the actor's Components array in the default properties:
<p />
<pre>
Begin Object Class&#61;SpriteComponent Name&#61;Sprite
   // Sprite component properties are assigned values here
End Object
Components.Add(Sprite)
</pre>
<p />
<h3><a name="Changing properties of a component template inherited from a super class"></a> Changing properties of a component template inherited from a super class </h3>
<p />
Component templates are inherited by subclasses of the class the template is initially declared in.  The subclass can override individual properties on inherited templates.  This example inherits the Sprite template from Actor and modifies only the sprite texture property:
<p />
<pre>
Begin Object Name&#61;Sprite
   Sprite&#61;Texture2D&#39;EngineResources.S&#95;SkyLight&#39;
End Object
</pre>
<p />
<h3><a name="Dynamically created components"></a> Dynamically created components </h3>
<p />
To dynamically create an instance of a component, use the UnrealScript new operator and call the actor's AttachComponent method to attach the new component to the actor.
<p />
The parameter to the new operator is the outer object to create the component in; this should be the actor which it will be attached to.  This ensures that the component's Outer reference doesn't unnecessarily prevent another actor from being garbage collected before the actor the component is attached to.
<p />
<pre>
local StaticMeshComponent NewComponent;
NewComponent &#61; new(self) class&#39;StaticMeshComponent&#39;;
// Set the static mesh component&#39;s properties here.
AttachComponent(NewComponent);
</pre>
<p />
To detach and free the component which you attached earlier, use the actor's DetachComponent method.  Once no references to the component exist, it will be garbage collected.
<p />
<h3><a name="Common _PrimitiveComponent options"></a> Common PrimitiveComponent options </h3>
<p />
<table cellspacing="1" cellpadding="1" class="twikiTable" border="0"><tr><td bgcolor="#eaeaea" class="twikiFirstCol"> Type </td><td bgcolor="#eaeaea"> Name </td><td bgcolor="#eaeaea"> Description </td></tr>
<tr><td bgcolor="#ffffff" class="twikiFirstCol"> boolean </td><td bgcolor="#ffffff"> AlwaysLoadOnClient </td><td bgcolor="#ffffff"> If AlwaysLoadOnClient=False, and the primitive has HiddenGame=True and CollideActors=False, the primitive will not be loaded on game clients. </td></tr>
<tr><td bgcolor="#eaeaea" class="twikiFirstCol"> boolean </td><td bgcolor="#eaeaea"> AlwaysLoadOnServer </td><td bgcolor="#eaeaea"> If AlwaysLoadOnServer=False, and the primitive has CollideActors=False, the primitive will not be loaded on game servers. </td></tr>
<tr><td bgcolor="#ffffff" class="twikiFirstCol"> boolean </td><td bgcolor="#ffffff"> BlockActors </td><td bgcolor="#ffffff"> If the PrimitiveComponent has collision enabled, BlockActors determines whether the primitive's collision will block other actors. </td></tr>
<tr><td bgcolor="#eaeaea" class="twikiFirstCol"> boolean </td><td bgcolor="#eaeaea"> CastShadow </td><td bgcolor="#eaeaea"> True if the PrimitiveComponent should cast a shadow, false if it should not. </td></tr>
<tr><td bgcolor="#ffffff" class="twikiFirstCol"> boolean </td><td bgcolor="#ffffff"> CollideActors </td><td bgcolor="#ffffff"> If either of the actor's bCollideActors or the PrimitiveComponent's CollideActors properties are false, the primitive will have no collision. </td></tr>
<tr><td bgcolor="#eaeaea" class="twikiFirstCol"> boolean </td><td bgcolor="#eaeaea"> HiddenEditor </td><td bgcolor="#eaeaea"> False if the PrimitiveComponent should be rendered in the editor, true if it should not. </td></tr>
<tr><td bgcolor="#ffffff" class="twikiFirstCol"> boolean </td><td bgcolor="#ffffff"> HiddenGame </td><td bgcolor="#ffffff"> False if the PrimitiveComponent should be rendered in the game, true if it should not. </td></tr>
</table>
<p />
<h3><a name="Actor collision and _PrimitiveComponents"></a> Actor collision and PrimitiveComponents </h3>
<p />
Collision tests will be performed against all of the colliding PrimitiveComponents attached to an actor, but when an actor moves, it only performs a test for a single PrimitiveComponent.  This PrimitiveComponent is chosen by setting the Actor property CollisionComponent to reference the component to be used for actor movement collision checks.  When the actor moves, it will take the bounding box of the component referenced by CollisionComponent and sweep it against all colliding PrimitiveComponents.
<p />
<p />
<h2><a name="Built-in component types"></a> Built-in component types </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p /> <ul>
<li> PrimitiveComponent <ul>
<li> ArrowComponent
</li> <li> CameraConeComponent
</li> <li> CylinderComponent
</li> <li> DrawFrustumComponent
</li> <li> MeshComponent <ul>
<li> StaticMeshComponent
</li> <li> SkeletalMeshComponent
</li></ul>
</li> <li> ParticleSystemComponent
</li> <li> SpriteComponent
</li></ul>
</li> <li> LightComponent <ul>
<li> DirectionalLightComponent
</li> <li> PointLightComponent <ul>
<li> SpotLightComponent
</li></ul>
</li> <li> SkyLightComponent
</li></ul>
</li> <li> AudioComponent
</li> <li> HeightFogComponent
</li> <li> SceneCaptureComponent <ul>
<li> SceneCapture2DComponent
</li> <li> SceneCaptureCubeMapComponent
</li> <li> SceneCaptureParaboloidComponent
</li> <li> SceneCaptureReflectComponent
</li></ul>
</li></ul>
<p />
<p />
<h2><a name="Creating new component types"></a> Creating new component types </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
To implement a new actor component type, you can override these ActorComponent functions to handle attachment, detachment and movement.
<p />
<h3><a name="SetParentToWorld"></a> SetParentToWorld </h3>
<p />
UActorComponent::SetParentToWorld is called whenever the transform the component is attached to changes.  It will always be followed with either a call to Attach or UpdateTransform.
<p />
<h3><a name="Attach"></a> Attach </h3>
<p />
UActorComponent::Attach is called when the component is initially attached.  It will always be called after UActorComponent::Scene has been set and SetParentToWorld has been called.  Additionally, it will never be called if UActorComponent::IsValidComponent returns false.
<p />
<h3><a name="UpdateTransform"></a> UpdateTransform </h3>
<p />
UActorComponent::UpdateTransform is called whenever the transform the component is attached to moves.  It will always be preceded by a call to SetParentToWorld, and will never be called on a component which isn't attached.
<p />
<h3><a name="Detach"></a> Detach </h3>
<p />
UActorComponent::Detach is called when the component is detached.  It will never be called on a component which isn't attached.
<p />
<h3><a name="IsValidComponent"></a> IsValidComponent </h3>
<p />
UActorComponent::IsValidComponent can be overridden to do additional parameter validation on the component's properties.  If it returns false, then the component will not be attached.
<p />
<p />
<h2><a name="Additional Notes"></a> Additional Notes </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
<h3><a name="Attachments"></a> Attachments </h3>
<p />
Previously, Unreal Engine 2 allowed Actors to be attached to a skeletal mesh bone. Unreal Engine 3 only allows Actor components to be attached to a skeletal mesh bone.
<p />
For attachments, rather than adding the component to the Components array, add an entry to the Attachments array in the default properties of a SkeletalMeshComponent. Alternatively, an instanced reference can be added to the component and attach the component in script using SkeletalMeshComponent’s AttachComponent and DetachComponent functions.
<p />
<h3><a name="Garbage Collection"></a> Garbage Collection </h3>
<p />
In general, Actors which are <em>destroyed</em> are added to a list. Periodically (based on the ini option TimeBetweenPurgingPendingKillObjects), it clears references to the actors in the list, frees the actors and empties the list.
<p />
Deletion of Actor Components is an extension of Actor garbage collection. Components are deleted along with their Actor. References from Actors to components are cleared before the component is deleted.
<p />
See the <a href="https://udn.epicgames.com/Three/GarbageCollection" class="restricted" class="restricted" class="twikiLink">Garbage Collection</a> page for more information.
<p />
</noautolink>
<p />
<p />
<p />
<p />
<p />
<p />


<!-- BEGIN UE4 NOTICE -->



<div id="version_message" style="display:none;">

    <div style="position:fixed;top:0px;left:0px;width:100%;height:100%;background:#000;opacity:0.5;">

    </div>

    <div style="position:fixed;top:50%;left:50%;margin:-70px 0px 0px -240px;background:#FFF;border-radius:6px;width:480px;box-shadow:0px 5px 30px -5px rgba(0,0,0,0.9);">

        <div style="font-size:16px;font-weight:bold;background: url(rsrc/Three/warning.png) no-repeat scroll 5px 5px;padding:4px 10px 5px 25px;height:21px;width:440px;">

            Important!

        </div>

        <div style="font-size:11px;padding:5px 10px 10px;width:460px;">

            <p>You are viewing documentation for the <strong>Unreal Development Kit (UDK)</strong>.</p>



            <p>If you are looking for the Unreal Engine 4 documentation, please visit the <a style="color:#000;" href="https://docs.unrealengine.com">Unreal Engine 4 Documentation</a> site.</p>

        </div>

        <div style="height:20px;padding:4px;margin:6px;border-top:1px solid #a0a0a0;">

            <form onsubmit="return closeVersionMessage();">

                <input type="checkbox" id="dismiss" value="dismiss" />

                <label for="dsimiss">Don't show me this again</label>

                <input type="submit" value="Close" style="cursor:pointer;float:right;width:60px;color:#f0f0f0;font-weight:bold;background:#882222;height:24px;padding:2px 3px 3px;text-align:center;border:1px outset #000;" />

            </form>

        </div>

    </div>

</div>



<script type="text/javascript">

    window.onload = function () {

        LoadVersionMessage();

    }



    function LoadVersionMessage()

    {

        var showMessage = "false";
        if(showMessage != "false")

        {

            showVersionMessage();

        }

    }



    function showVersionMessage()

    {

        var message = document.getElementById("version_message");

        if(message)

        {

            message.style.display = "block";

        }

    }



    function closeVersionMessage() {

        var dismiss = document.getElementById("dismiss");

        var message = document.getElementById("version_message");

        if (message) {

            message.style.display = "none";

        }

        if (dismiss.checked) {

            eraseCookie("doc_version_message");

            createCookie("doc_version_message", "false", 365);

            dismiss.checked = false;

        }

        return false;

    }



    function createCookie(name, value, days) {

        if (days) {

            var date = new Date();

            date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));

            var expires = "; expires=" + date.toGMTString();

        }

        else var expires = "";

        document.cookie = name + "=" + value + expires + "; path=/";

    }



    function readCookie(name) {

        var nameEQ = name + "=";

        var ca = document.cookie.split(';');

        for (var i = 0; i < ca.length; i++) {

            var c = ca[i];

            while (c.charAt(0) == ' ') c = c.substring(1, c.length);

            if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);

        }

        return null;

    }



    function eraseCookie(name) {

        createCookie(name, "", -1);

    }

</script>



<!-- END UE4 NOTICE -->



</div></div><div id="footer"><div style="BACKGROUND-COLOR: transparent; margin: 0; padding: 0; width: 100%;"><div>&nbsp;</div><div style="float: left; text-align: left; vertical-align: bottom; width: 50%;"><a href="http://www.videogamevoters.org"><img src="rsrc/vgvn.jpg" border="0" width="234" height="60" alt="Video Game Voters Network" /></a></div><div style="float: right; text-align: right; vertical-align: bottom; width: 50%;">Copyright &copy; 2001-2012 <a href="http://www.epicgames.com" target="_top">Epic Games, Inc.</a><br /><a href="../Main/TermsAndConditions.html" class="twikiLink">Terms and Conditions</a><br /><a href="http://epicgames.com/privacynotice" target="_top">Privacy Notice</a></div></div></div></div>
<p />
</html></body>
