<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
	"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title> UDK | MOBAKitWeapons    </title>

<style type="text/css" media="all">@import "rsrc/twiki_webs.css";</style>
<style type="text/css" media="all">@import "rsrc/udn_new.css";</style>
<link rel="icon" href="rsrc/Three/WebPreferences/favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="rsrc/Three/WebPreferences/favicon.ico" type="image/x-icon" />


<!-- view.static_udn3.tmpl  -->
<script language="JavaScript" type="text/javascript" src="rsrc/udn.js"></script>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

</head>
<p />
<body id="webbgThree">
<p />

<p />
<div id="webThree"><div id="head">
<!--
<div class="header">
 -->
<div style="background: url(/pub/webbg_udn.jpg); background-repeat: no-repeat; height:140px; width: 100%;" >
<!--
<div style="background: transparent url(/pub/udn_header_bg.jpg); background-repeat: repeat-x; height:140px; width: 100%; margin-left: 991px;">
 -->
<p />
<div id="nav">
<ul class="nav">
<font color=black>|</font>&nbsp;&nbsp;<li class=nav_Three><a href="../Main/WebHome.html" class="twikiLink">Main</a></li><font color=black>|</font><li class=nav_Three><a href="../Two/WebHome.html" class="twikiLink">UnrealEngine2</a></li><font color=black>|</font><li class=nav_Three><a href="WebHome.html" class="twikiLink">UnrealEngine3</a></li><font color=black>|</font><li class=nav_Three><a href="https://docs.unrealengine.com" class="twikiLink">UnrealEngine4</a></li><font color=black>|</font><li class=nav_Three><a href="../Main/BusinessAndLegal.html" class="twikiLink">Business &amp; Legal</a></li><font color=black>|</font>
</ul><br><br><br>
</div>
</div>
</div> <!-- end head -->
<div id="pagedefault">
<div id="maincol">
<div id="tool">
<div id="tooltop">UDN</div>
<div id="tooltext" style="padding: 10px 10px 10px 10px;">
Search public documentation: <br>
<form ACTION="/search/index.php" METHOD="GET" NAME="main" ID="main">
<input TYPE="TEXT" NAME="q" SIZE="15" STYLE="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: xx-small;">
<input TYPE="SUBMIT" VALUE="Search" STYLE="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: xx-small;"><br>
</form>
</div>
<div id="toolband">MOBAKitWeapons  </b></div>
<div id="tooltext">
<a href="https://udn.epicgames.com/Three/MOBAKitWeaponsJP" class="restricted" class="restricted" class="twikiLink">日本語訳</a><br><a href="MOBAKitWeaponsCH.html" class="twikiLink">中国翻译</a><br><a href="MOBAKitWeaponsKR.html" class="twikiLink">한국어</a><br>

<!-- Three/MOBAKitWeapons -->
<hr size="1" noshade="noshade" />
Interested in the Unreal Engine? <br>
Visit the <a href="http://www.unrealtechnology.com" target="_top">Unreal Technology</a> site.<br>
<br>
Looking for jobs and company info? <br>
Check out the <a href="http://www.epicgames.com" target="_top">Epic games</a> site.<br>
<br>
Questions about support via UDN? <br>
Contact the <a href="../Main/ContactUDNStaff.html" class="twikiLink">UDN Staff</a> <br>
<br>
</div> <!-- end toolbox content -->
<div id="toolbottom"></div>
</div> <!-- end tool -->
<p />
<noautolink>
<div style="padding:0px 0px 0px 4px;font:10px Verdana;">
<style type="text/css" media="all">@import "rsrc/UDNCSS_test.css";</style>
<b><a href="WebHome.html" class="twikiLink">UE3 Home</a></b> &gt; <b><a href="DevelopmentKitGems.html" class="twikiLink">Unreal Development Kit Gems</a></b> &gt; <b><a href="MOBAKit.html" class="twikiLink">MOBA Starter Kit</a></b> &gt; Weapon System <br/>
</div>
<hr size="1" noshade="noshade">
<p />
<h1><a name="MOBA Starter Kit - Weapon System"></a> MOBA Starter Kit - Weapon System </h1>
<hr size="1" noshade="noshade">
<p />
<strong><em>Last tested against UDK May, 2012</em></strong>
<p />
<div class="twikiToc"> <ul>
<li> <a href="MOBAKitWeapons.html#MOBA Starter Kit - Weapon System"> MOBA Starter Kit - Weapon System</a> <ul>
<li> <a href="MOBAKitWeapons.html#Overview"> Overview</a>
</li> <li> <a href="MOBAKitWeapons.html#UDKMOBAWeaponFireMode"> UDKMOBAWeaponFireMode</a> <ul>
<li> <a href="MOBAKitWeapons.html#Functions"> Functions</a>
</li> <li> <a href="MOBAKitWeapons.html#Variables"> Variables</a>
</li></ul>
</li> <li> <a href="MOBAKitWeapons.html#UDKMOBAWeaponConeFireMode"> UDKMOBAWeaponConeFireMode</a> <ul>
<li> <a href="MOBAKitWeapons.html#Functions"> Functions</a>
</li> <li> <a href="MOBAKitWeapons.html#Variables"> Variables</a>
</li></ul>
</li> <li> <a href="MOBAKitWeapons.html#UDKMOBAWeaponProjectileFireMode"> UDKMOBAWeaponProjectileFireMode</a> <ul>
<li> <a href="MOBAKitWeapons.html#Functions"> Functions</a>
</li> <li> <a href="MOBAKitWeapons.html#Variables"> Variables</a>
</li></ul>
</li> <li> <a href="MOBAKitWeapons.html#UDKMOBAProjectile"> UDKMOBAProjectile</a> <ul>
<li> <a href="MOBAKitWeapons.html#Functions"> Functions</a>
</li> <li> <a href="MOBAKitWeapons.html#Variables"> Variables</a>
</li></ul>
</li> <li> <a href="MOBAKitWeapons.html#UDKMOBAWeaponTraceFireMode"> UDKMOBAWeaponTraceFireMode</a> <ul>
<li> <a href="MOBAKitWeapons.html#Functions"> Functions</a>
</li> <li> <a href="MOBAKitWeapons.html#Variables"> Variables</a>
</li></ul>
</li> <li> <a href="MOBAKitWeapons.html#How do I add a weapon to my hero/creep?"> How do I add a weapon to my hero/creep?</a>
</li> <li> <a href="MOBAKitWeapons.html#How do I create new fire modes?"> How do I create new fire modes?</a>
</li></ul>
</li></ul>
</div>
<p />
<h2><a name="Overview"></a> Overview </h2>
<hr size="1" noshade="noshade">
The weapon system in this Starter Kit differs from the standard weapon system in UDK. This is because the complexities of the weapon largely relied on the stats of the creep, hero or tower; rather than within the weapon itself. This, instead of having most of the data stored within the weapon code, weapons act more like a notification system where they collate data from the stats system and then negatively apply the data to enemy creeps, heroes or towers.
<p />
<h2><a name="UDKMOBAWeaponFireMode"></a> UDKMOBAWeaponFireMode </h2>
<hr size="1" noshade="noshade">
This is the base abstract weapon fire mode class. This sets up most of the base functions and variables used by the child classes so that there is a common interface for all other classes that need to interact with weapons.
<p />
<h3><a name="Functions"></a> Functions </h3> <ul>
<li> <strong>SetOwner()</strong> - This sets the owner of the fire mode. This is needed by the fire mode, because as an object it does not store any information about location, rotation and so forth. Thus for weapons to interact with the world, they need to know the owner who is an Actor (more likely to be a Pawn).
</li> <li> <strong>GetAttackingAngle()</strong> - This returns the attacking angle of the weapon. This allows weapons to have "fuzzy" aiming where Pawns do not have to aim precisely at other Pawns in order to fire the weapon.
</li> <li> <strong>Destroy()</strong> - This cleans up the fire mode object so that it can be removed by the garbage collector. It is important to clean up the object and null any references to Actors and Objects.
</li> <li> <strong>StartFire()</strong> - This initiates firing of the weapon. This works by setting up a timer within the owner (set by <strong>SetOwner()</strong>), and then the timer fires the weapons according to the firing rate which itself is influenced by the <strong>AttackSpeed</strong> stat.
</li> <li> <strong>StopFire()</strong> - This stops the weapon if it is currently firing by clearing the timer.
</li> <li> <strong>IsFiring()</strong> - This returns true if the timer set up in <strong>StartFire()</strong> is currently active or not. If it returns true, then the weapon is firing.
</li> <li> <strong>Fire()</strong> - This function performs the actual firing of the weapon. This is called by the timer set up in <strong>StartFire()</strong>.
</li> <li> <strong>BeginFire()</strong> - This is the protected function that sub classes should implement to perform their own specific method of firing weapons.
</li></ul>
<p />
<h3><a name="Variables"></a> Variables </h3> <ul>
<li> <strong>WeaponOwner</strong> - This is a reference to the Actor, that implements UDKMOBAAttackInterface, which owns this weapon.
</li></ul>
<p />
<h2><a name="UDKMOBAWeaponConeFireMode"></a> UDKMOBAWeaponConeFireMode </h2>
<hr size="1" noshade="noshade">
<p />
<h3><a name="Functions"></a> Functions </h3> <ul>
<li> <strong>BeginFire()</strong> - This function overrides the <strong>BeginFire()</strong> function declared in <strong>UDKMOBAWeaponFireMode::BeginFire()</strong>. This function works by first grabbing all of the actors that are within the 'cone' of detection. This cone is defined by first getting all of the Actors within range by using the <strong>VisibleCollidingActors()</strong> iterator. Every Actor within this circle, is then checked if they are within the dot angle. This check creates the edges of the 'cone'. If there is no maximum hit count specified then all of the Actors detected are damaged. Otherwise, the detected Actors are rated and sorted, and then the highest rated Actors are damaged.
</li> <li> <strong>CompareHitActors()</strong> - This function is used by dynamic arrays to handle sorting.
</li></ul>
<p />
<h3><a name="Variables"></a> Variables </h3> <ul>
<li> <strong>Range</strong> - This is the maximum range of the weapon.
</li> <li> <strong>Extent</strong> - This is the extent trace of the weapon which is used by the <strong>VisibleCollidingActors()</strong> iterator.
</li> <li> <strong>DotAngle</strong> - Dot angle that the hit actor has to be within to count as a hit. The closer to 1.f this value is, the more 'accurate' the weapon is.
</li> <li> <strong>HitCount</strong> - Maximum number of actors to hit.
</li> <li> <strong>MomentumTransfer</strong> - Momentum to transfer to all actors that are hit.
</li></ul>
<p />
<h2><a name="UDKMOBAWeaponProjectileFireMode"></a> UDKMOBAWeaponProjectileFireMode </h2>
<hr size="1" noshade="noshade">
<p />
<h3><a name="Functions"></a> Functions </h3> <ul>
<li> <strong>BeginFire()</strong> - This function overrides the <strong>BeginFire()</strong> function declared in <strong>UDKMOBAWeaponFireMode::BeginFire()</strong>. This function simply spawns a projectile based on the <strong>ProjectileArchetype</strong> value. After setting up the projectile, it is then initialized and launched towards the enemy.
</li></ul>
<p />
<h3><a name="Variables"></a> Variables </h3> <ul>
<li> <strong>ProjectileArchetype</strong> - Archetype of the projectile to use when firing this weapon.
</li></ul>
<p />
<h2><a name="UDKMOBAProjectile"></a> UDKMOBAProjectile </h2>
<hr size="1" noshade="noshade">
This is a specialized projectile class used by <strong>UDKMOBAWeaponProjectileFireMode</strong>.
<p />
<h3><a name="Functions"></a> Functions </h3> <ul>
<li> <strong>PostBeginPlay()</strong> - This event is called when the projectile has been instanced and initialized by Unrealscript.
</li> <li> <strong>ReplicatedEvent()</strong> - This event is called when a variable flagged with rep notify has been replicated to the client. This event catches when the <strong>Enemy</strong> variable is replicated. When it does arrive on the client, it starts the homing timer so that the projectile also homes in on the target on the client side.
</li> <li> <strong>Init()</strong> - This sets the velocity of the projectile and also starts the homing timer.
</li> <li> <strong>HomingTimer()</strong> - This first checks if the enemy variable is none or is invalid to attack, if it is then the projectile is destroyed. Otherwise, it will reorient the projectile's velocity so that it seeks towards the enemy.
</li> <li> <strong>Touch()</strong> - This ensures that the projectile only responds to touch events that involve the enemy.
</li> <li> <strong>ProcessTouch()</strong> - This ensures that the projectile only deals damage and explodes when the projectile touches the enemy.
</li> <li> <strong>HitWall()</strong> - This ensures that the projectile only deals damage and explodes when the projectile touches the enemy.
</li> <li> <strong>DealEnemyDamage()</strong> - This applies damage to the enemy.
</li> <li> <strong>Explode()</strong> - This handles when the projectile explodes. It plays the impact sound, spawns the particle effect and instances a decal.
</li></ul>
<p />
<h3><a name="Variables"></a> Variables </h3> <ul>
<li> <strong>FlightParticleSystem</strong> - Particle system to instance when the projectile is flying through the air. This is often used to represent the projectile itself.
</li> <li> <strong>ImpactTemplate</strong> - Particle system to instance when the projectile collides with its target.
</li> <li> <strong>ImpactDecalMaterialInstanceTimeVarying</strong> - Impact material instance time varying to use for decals. This assumes the linear scalar data is setup for fading away.
</li> <li> <strong>ImpactDecalOpacityScalarParameterName</strong> - Impact opacity scalar parameter name. This parameter name should exist in the decal material or nothing will happen.
</li> <li> <strong>ImpactDecalLifeSpan</strong> - Impact decal life time in seconds.
</li> <li> <strong>ImpactDecalMinSize</strong> - Impact decal minimum size.
</li> <li> <strong>ImpactDecalMaxSize</strong> - Impact decal maximum size.
</li> <li> <strong>AlwaysUniformlySized</strong> - If true, then the size of the decal is always uniform (square).
</li> <li> <strong>Speed</strong> - Defines the initial velocity of the projectile.
</li> <li> <strong>MaxSpeed</strong> - Limit on speed of projectile (0 means no limit).
</li> <li> <strong>SpawnSound</strong> - Sound made when projectile is spawned.
</li> <li> <strong>ImpactSound</strong> - Sound made when projectile hits something.
</li></ul>
<p />
<h2><a name="UDKMOBAWeaponTraceFireMode"></a> UDKMOBAWeaponTraceFireMode </h2>
<hr size="1" noshade="noshade">
<p />
<h3><a name="Functions"></a> Functions </h3> <ul>
<li> <strong>BeginFire()</strong> - This function overrides the <strong>BeginFire()</strong> function declared in <strong>UDKMOBAWeaponFireMode::BeginFire()</strong>. This function uses the <strong>Trace()</strong> function to find an Actor to hit.
</li></ul>
<p />
<h3><a name="Variables"></a> Variables </h3> <ul>
<li> <strong>TraceRange</strong> - This is the maximum range of the weapon.
</li> <li> <strong>TraceExtent</strong> - Box extent to use for the trace.
</li> <li> <strong>MomentumTransfer</strong> - Momentum amount to transfer to hit actor.
</li></ul>
<p />
<h2><a name="How do I add a weapon to my hero/creep?"></a> How do I add a weapon to my hero/creep? </h2>
<hr size="1" noshade="noshade">
<p />
<img src="rsrc/Three/MOBAKitWeapons/MOBAKitWeapon_AddingWeapons.jpg" alt="MOBAKitWeapon_AddingWeapons.jpg" width='540' height='629' />
<p />
Because of this simplified weapon system, you only need to create new weapon fire mode objects within the pawn archetype itself. When you create a new UDKMOBAHeroPawn archetype for example, you use the properties window to instance a new weapon fire mode of the type that you want and then assign the various properties.
<p />
<h2><a name="How do I create new fire modes?"></a> How do I create new fire modes? </h2>
<hr size="1" noshade="noshade">
Creating new fire modes requires you to create new sub class of UDKMOBAWeaponFireMode. Most of the time, it is the <strong>BeginFire()</strong> function that you will need to subclass to insert your own firing logic.
<p />
<div class="codetitlebar">
YourNewFireMode.uc
</div>
<div class="codesnippet">
<pre>
class YourNewFireMode extends UDKMOBAWeaponFireMode;

/&#42;&#42;
 &#42; Fires the weapon.
 &#42;
 &#42; &#64;param      FireLocation      Where in the world the weapon should fire from
 &#42; &#64;param      FireRotation      Direction the weapon should fire in
 &#42; &#64;param      Enemy            Enemy to shoot at
 &#42; &#64;network                     Server
 &#42;/
protected function BeginFire(Vector FireLocation, Rotator FireRotation, Actor Enemy)
{
}

defaultproperties
{
}
</pre>
</div>
<p />
</noautolink>
<p />
<p />
<p />
<p />
<p />
<p />


<!-- BEGIN UE4 NOTICE -->



<div id="version_message" style="display:none;">

    <div style="position:fixed;top:0px;left:0px;width:100%;height:100%;background:#000;opacity:0.5;">

    </div>

    <div style="position:fixed;top:50%;left:50%;margin:-70px 0px 0px -240px;background:#FFF;border-radius:6px;width:480px;box-shadow:0px 5px 30px -5px rgba(0,0,0,0.9);">

        <div style="font-size:16px;font-weight:bold;background: url(rsrc/Three/warning.png) no-repeat scroll 5px 5px;padding:4px 10px 5px 25px;height:21px;width:440px;">

            Important!

        </div>

        <div style="font-size:11px;padding:5px 10px 10px;width:460px;">

            <p>You are viewing documentation for the <strong>Unreal Development Kit (UDK)</strong>.</p>



            <p>If you are looking for the Unreal Engine 4 documentation, please visit the <a style="color:#000;" href="https://docs.unrealengine.com">Unreal Engine 4 Documentation</a> site.</p>

        </div>

        <div style="height:20px;padding:4px;margin:6px;border-top:1px solid #a0a0a0;">

            <form onsubmit="return closeVersionMessage();">

                <input type="checkbox" id="dismiss" value="dismiss" />

                <label for="dsimiss">Don't show me this again</label>

                <input type="submit" value="Close" style="cursor:pointer;float:right;width:60px;color:#f0f0f0;font-weight:bold;background:#882222;height:24px;padding:2px 3px 3px;text-align:center;border:1px outset #000;" />

            </form>

        </div>

    </div>

</div>



<script type="text/javascript">

    window.onload = function () {

        LoadVersionMessage();

    }



    function LoadVersionMessage()

    {

        var showMessage = "false";
        if(showMessage != "false")

        {

            showVersionMessage();

        }

    }



    function showVersionMessage()

    {

        var message = document.getElementById("version_message");

        if(message)

        {

            message.style.display = "block";

        }

    }



    function closeVersionMessage() {

        var dismiss = document.getElementById("dismiss");

        var message = document.getElementById("version_message");

        if (message) {

            message.style.display = "none";

        }

        if (dismiss.checked) {

            eraseCookie("doc_version_message");

            createCookie("doc_version_message", "false", 365);

            dismiss.checked = false;

        }

        return false;

    }



    function createCookie(name, value, days) {

        if (days) {

            var date = new Date();

            date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));

            var expires = "; expires=" + date.toGMTString();

        }

        else var expires = "";

        document.cookie = name + "=" + value + expires + "; path=/";

    }



    function readCookie(name) {

        var nameEQ = name + "=";

        var ca = document.cookie.split(';');

        for (var i = 0; i < ca.length; i++) {

            var c = ca[i];

            while (c.charAt(0) == ' ') c = c.substring(1, c.length);

            if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);

        }

        return null;

    }



    function eraseCookie(name) {

        createCookie(name, "", -1);

    }

</script>



<!-- END UE4 NOTICE -->



</div></div><div id="footer"><div style="BACKGROUND-COLOR: transparent; margin: 0; padding: 0; width: 100%;"><div>&nbsp;</div><div style="float: left; text-align: left; vertical-align: bottom; width: 50%;"><a href="http://www.videogamevoters.org"><img src="rsrc/vgvn.jpg" border="0" width="234" height="60" alt="Video Game Voters Network" /></a></div><div style="float: right; text-align: right; vertical-align: bottom; width: 50%;">Copyright &copy; 2001-2012 <a href="http://www.epicgames.com" target="_top">Epic Games, Inc.</a><br /><a href="../Main/TermsAndConditions.html" class="twikiLink">Terms and Conditions</a><br /><a href="http://epicgames.com/privacynotice" target="_top">Privacy Notice</a></div></div></div></div>
<p />
</html></body>
