<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
	"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title> UDK | GFxKismetInput    </title>

<style type="text/css" media="all">@import "rsrc/twiki_webs.css";</style>
<style type="text/css" media="all">@import "rsrc/udn_new.css";</style>
<link rel="icon" href="rsrc/Three/WebPreferences/favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="rsrc/Three/WebPreferences/favicon.ico" type="image/x-icon" />


<!-- view.static_udn3.tmpl  -->
<script language="JavaScript" type="text/javascript" src="rsrc/udn.js"></script>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

</head>
<p />
<body id="webbgThree">
<p />

<p />
<div id="webThree"><div id="head">
<!--
<div class="header">
 -->
<div style="background: url(/pub/webbg_udn.jpg); background-repeat: no-repeat; height:140px; width: 100%;" >
<!--
<div style="background: transparent url(/pub/udn_header_bg.jpg); background-repeat: repeat-x; height:140px; width: 100%; margin-left: 991px;">
 -->
<p />
<div id="nav">
<ul class="nav">
<font color=black>|</font>&nbsp;&nbsp;<li class=nav_Three><a href="../Main/WebHome.html" class="twikiLink">Main</a></li><font color=black>|</font><li class=nav_Three><a href="../Two/WebHome.html" class="twikiLink">UnrealEngine2</a></li><font color=black>|</font><li class=nav_Three><a href="WebHome.html" class="twikiLink">UnrealEngine3</a></li><font color=black>|</font><li class=nav_Three><a href="https://docs.unrealengine.com" class="twikiLink">UnrealEngine4</a></li><font color=black>|</font><li class=nav_Three><a href="../Main/BusinessAndLegal.html" class="twikiLink">Business &amp; Legal</a></li><font color=black>|</font>
</ul><br><br><br>
</div>
</div>
</div> <!-- end head -->
<div id="pagedefault">
<div id="maincol">
<div id="tool">
<div id="tooltop">UDN</div>
<div id="tooltext" style="padding: 10px 10px 10px 10px;">
Search public documentation: <br>
<form ACTION="/search/index.php" METHOD="GET" NAME="main" ID="main">
<input TYPE="TEXT" NAME="q" SIZE="15" STYLE="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: xx-small;">
<input TYPE="SUBMIT" VALUE="Search" STYLE="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: xx-small;"><br>
</form>
</div>
<div id="toolband">GFxKismetInput  </b></div>
<div id="tooltext">
<a href="GFxKismetInputJP.html" class="twikiLink">日本語訳</a><br><a href="GFxKismetInputCH.html" class="twikiLink">中国翻译</a><br><a href="GFxKismetInputKR.html" class="twikiLink">한국어</a><br>

<!-- Three/GFxKismetInput -->
<hr size="1" noshade="noshade" />
Interested in the Unreal Engine? <br>
Visit the <a href="http://www.unrealtechnology.com" target="_top">Unreal Technology</a> site.<br>
<br>
Looking for jobs and company info? <br>
Check out the <a href="http://www.epicgames.com" target="_top">Epic games</a> site.<br>
<br>
Questions about support via UDN? <br>
Contact the <a href="../Main/ContactUDNStaff.html" class="twikiLink">UDN Staff</a> <br>
<br>
</div> <!-- end toolbox content -->
<div id="toolbottom"></div>
</div> <!-- end tool -->
<p />
<noautolink>
<style type="text/css" media="all">@import "rsrc/UDNCSS_test.css";</style>
<div style="padding:0px 0px 0px 4px;font:10px Verdana;">
<b><a href="WebHome.html" class="twikiLink">UE3 Home</a></b> &gt; <b><a href="UIAndHUDHome.html" class="twikiLink">User Interfaces &amp; HUDs</a></b> &gt; <b><a href="Scaleform.html" class="twikiLink">Scaleform GFx</a></b> &gt; How to capture keyboard input in Kismet
</div>
<hr size="1" noshade="noshade">
<p />
<h1><a name="How to capture keyboard input in Kismet"></a> How to capture keyboard input in Kismet </h1>
<hr size="1" noshade="noshade">
<p />
<strong><em>Last tested May, 2011</em></strong>
<p />
<div class="twikiToc"> <ul>
<li> <a href="GFxKismetInput.html#How to capture keyboard input in Kismet"> How to capture keyboard input in Kismet</a> <ul>
<li> <a href="GFxKismetInput.html#Overview"> Overview</a>
</li> <li> <a href="GFxKismetInput.html#Setup"> Setup</a>
</li> <li> <a href="GFxKismetInput.html#ActionScript"> ActionScript</a>
</li> <li> <a href="GFxKismetInput.html#UDK Initial Setup"> UDK Initial Setup</a>
</li> <li> <a href="GFxKismetInput.html#Kismet Setup"> Kismet Setup</a>
</li></ul>
</li></ul>
</div>
<p />
<h2><a name="Overview"></a> Overview </h2>
<hr size="1" noshade="noshade">
This tutorial explains how to capture keyboard input via Kismet, thus allowing a GFx movie to use that captured input to do something, without needing to write any UnrealScript at all! A GFx movie in the level that you want the player to be able to interact with when he walks up to it, such as a computer console.
<p />
<h2><a name="Setup"></a> Setup </h2>
<hr size="1" noshade="noshade">
Create a simple red square in the middle of the stage of a new Flash file. Convert the square to a movie clip, and give it an instance name of 'myGraphic' in the properties panel. Save the Flash file in the proper location of your UDK install.
<p />
<h2><a name="ActionScript"></a> ActionScript </h2>
<hr size="1" noshade="noshade">
Put this code on a new layer called 'actions' on frame 1 of your Flash file:
<p />
<div class="codetitlebar">
ActionScript
</div>
<div class="codesnippet">
<pre>
&#95;global.gfxExtensions &#61; true;
&#95;perspfov &#61; 25; // Used in 3D transformations. Can be any value from 1 to 179.

var keyboardInput:Object &#61; new Object(); // creates a new object to hold keyboard input.
Key.addListener(keyboardInput); // uses the object to listen for keyboard input.

/&#42; when a key is pressed, execute this function. &#42;/
keyboardInput.onKeyDown &#61; function()
{
    /&#42; store the keyboard input ASCII code inside &#39;keyPressed&#39;. &#42;/
    var keyPressed:Number &#61; Key.getCode();

    /&#42; if LEFT ARROW was pressed... &#42;/
    if (keyPressed &#61;&#61; 37)
    {
        /&#42; rotate the movie clip by +5 degrees. &#42;/
        myGraphic.&#95;yrotation +&#61; 5;
    }
    /&#42; if RIGHT ARROW was pressed... &#42;/
    else if (keyPressed &#61;&#61; 39)
    {
        /&#42; rotate the movie clip by -5 degrees. &#42;/
   myGraphic.&#95;yrotation -&#61; 5;
    }
}
</pre>
</div>
<p />
<img src="rsrc/TWiki/TWikiDocGraphics/warning.gif" alt="ALERT!" title="ALERT!" width="16" height="16" border="0" /> <strong>Note:</strong> Scaleform does not currently support getAscii(). Instead, be sure to use getCode().
<p />
Save and Publish the movie.
<p />
<h2><a name="UDK Initial Setup"></a> UDK Initial Setup </h2>
<hr size="1" noshade="noshade">
In UDK, create a simple test level. One room with a light and a player start should do. Then do the following:
<p /> <ul>
<li> Create a BSP cube inside the room somewhere. We'll display the GFx movie on one face of this cube.
</li> <li> Add a Trigger right in front of one of the faces of the cube.
</li> <li> Now, import the SWF file into the Content Browser.
</li> <li> Create a new TextureRenderTarget2D in the same package as the newly imported SWF. Name it 'myRT'.
</li> <li> Create a new Material in the same package. Name it 'myMat'.
</li> <li> Add a new TextureSample in the Material Editor window.
</li> <li> Attach the black (RGB) output of the Texture Sample to the Diffuse input of the Material, and the white (alpha channel) output to the Opacity input of the Material.
</li> <li> Select the Material and set the Blend Mode to BLEND_AlphaComposite in the Material drop down.
</li> <li> Leave the Material Editor open, and go back into the Content Browser and select 'myRT'.
</li> <li> Back in the Material Editor, select the Texture Sample, then insert 'myRT' into the Texture field with the green arrow.
</li> <li> Close the Material Editor window and save changes.
</li> <li> Save the package that contains the SWF file, render texture, and material.
</li> <li> Select a face of the BSP cube, preferably the one next to the Trigger, and with 'myMat' selected in the Content Browser, right click, then choose: Apply Material : myMat.
</li> <li> Build all and save the level.
</li></ul>
<p />
<p />
<h2><a name="Kismet Setup"></a> Kismet Setup </h2>
<hr size="1" noshade="noshade">
<p />
Open Kismet and do the following:
<p /> <ul>
<li> Add a Level Loaded event.
</li> <li> Add an Open GFx Movie action.
</li> <li> Connect Loaded and Visible to In on Open GFx Movie.
</li> <li> Create a new Object Variable and attach it to the Movie Player output of Open GFx Movie.
</li> <li> Select Open GFx Movie, and insert the SWF from the Content Browser in the Movie field.
</li> <li> Insert 'myRT' from the Content Browser in the Render Texture field.
</li> <li> Set the Render Texture Mode to RTM_AlphaComposite.
</li> <li> Now, select the Trigger in the level, then right click in Kismet and select: New Event Using Trigger_x -&gt; Touch.
</li> <li> In the new Trigger node's Sequence Event drop down, set the Max Trigger Count to 0.
</li> <li> Add a new Set GFx Captured Keys action.
</li> <li> Connect the Movie Player input to the Object Variable you created above in Step 4.
</li> <li> Connect the Touched output of the Trigger node to the Activate input of the Captured Keys node, then connect the UnTouched output to the DeActivated input.
</li> <li> Select the Captured Keys node, and add two Capture Keys using the green plus icon.
</li> <li> Set [0] to Left and set [1] to Right.
</li></ul>
<p />
<p />
Save the level, then play in editor.
<p />
You should be able to walk up to the GFx movie, which shows a red square, then use the Left Arrow and Right Arrow keys of your keyboard to alter its rotation in 3D space. Walking away from the movie will release the Left and Right arrow keys.
<p />
You could just as easily put the material 'myMat' on a static mesh instead of a BSP.
<p />
</noautolink>
<p />
<p />
<p />
<p />
<p />
<p />


<!-- BEGIN UE4 NOTICE -->



<div id="version_message" style="display:none;">

    <div style="position:fixed;top:0px;left:0px;width:100%;height:100%;background:#000;opacity:0.5;">

    </div>

    <div style="position:fixed;top:50%;left:50%;margin:-70px 0px 0px -240px;background:#FFF;border-radius:6px;width:480px;box-shadow:0px 5px 30px -5px rgba(0,0,0,0.9);">

        <div style="font-size:16px;font-weight:bold;background: url(rsrc/Three/warning.png) no-repeat scroll 5px 5px;padding:4px 10px 5px 25px;height:21px;width:440px;">

            Important!

        </div>

        <div style="font-size:11px;padding:5px 10px 10px;width:460px;">

            <p>You are viewing documentation for the <strong>Unreal Development Kit (UDK)</strong>.</p>



            <p>If you are looking for the Unreal Engine 4 documentation, please visit the <a style="color:#000;" href="https://docs.unrealengine.com">Unreal Engine 4 Documentation</a> site.</p>

        </div>

        <div style="height:20px;padding:4px;margin:6px;border-top:1px solid #a0a0a0;">

            <form onsubmit="return closeVersionMessage();">

                <input type="checkbox" id="dismiss" value="dismiss" />

                <label for="dsimiss">Don't show me this again</label>

                <input type="submit" value="Close" style="cursor:pointer;float:right;width:60px;color:#f0f0f0;font-weight:bold;background:#882222;height:24px;padding:2px 3px 3px;text-align:center;border:1px outset #000;" />

            </form>

        </div>

    </div>

</div>



<script type="text/javascript">

    window.onload = function () {

        LoadVersionMessage();

    }



    function LoadVersionMessage()

    {

        var showMessage = "false";
        if(showMessage != "false")

        {

            showVersionMessage();

        }

    }



    function showVersionMessage()

    {

        var message = document.getElementById("version_message");

        if(message)

        {

            message.style.display = "block";

        }

    }



    function closeVersionMessage() {

        var dismiss = document.getElementById("dismiss");

        var message = document.getElementById("version_message");

        if (message) {

            message.style.display = "none";

        }

        if (dismiss.checked) {

            eraseCookie("doc_version_message");

            createCookie("doc_version_message", "false", 365);

            dismiss.checked = false;

        }

        return false;

    }



    function createCookie(name, value, days) {

        if (days) {

            var date = new Date();

            date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));

            var expires = "; expires=" + date.toGMTString();

        }

        else var expires = "";

        document.cookie = name + "=" + value + expires + "; path=/";

    }



    function readCookie(name) {

        var nameEQ = name + "=";

        var ca = document.cookie.split(';');

        for (var i = 0; i < ca.length; i++) {

            var c = ca[i];

            while (c.charAt(0) == ' ') c = c.substring(1, c.length);

            if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);

        }

        return null;

    }



    function eraseCookie(name) {

        createCookie(name, "", -1);

    }

</script>



<!-- END UE4 NOTICE -->



</div></div><div id="footer"><div style="BACKGROUND-COLOR: transparent; margin: 0; padding: 0; width: 100%;"><div>&nbsp;</div><div style="float: left; text-align: left; vertical-align: bottom; width: 50%;"><a href="http://www.videogamevoters.org"><img src="rsrc/vgvn.jpg" border="0" width="234" height="60" alt="Video Game Voters Network" /></a></div><div style="float: right; text-align: right; vertical-align: bottom; width: 50%;">Copyright &copy; 2001-2012 <a href="http://www.epicgames.com" target="_top">Epic Games, Inc.</a><br /><a href="../Main/TermsAndConditions.html" class="twikiLink">Terms and Conditions</a><br /><a href="http://epicgames.com/privacynotice" target="_top">Privacy Notice</a></div></div></div></div>
<p />
</html></body>
