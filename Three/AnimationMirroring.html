<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
	"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title> UDK | AnimationMirroring    </title>

<style type="text/css" media="all">@import "rsrc/twiki_webs.css";</style>
<style type="text/css" media="all">@import "rsrc/udn_new.css";</style>
<link rel="icon" href="rsrc/Three/WebPreferences/favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="rsrc/Three/WebPreferences/favicon.ico" type="image/x-icon" />


<!-- view.static_udn3.tmpl  -->
<script language="JavaScript" type="text/javascript" src="rsrc/udn.js"></script>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

</head>
<p />
<body id="webbgThree">
<p />

<p />
<div id="webThree"><div id="head">
<!--
<div class="header">
 -->
<div style="background: url(/pub/webbg_udn.jpg); background-repeat: no-repeat; height:140px; width: 100%;" >
<!--
<div style="background: transparent url(/pub/udn_header_bg.jpg); background-repeat: repeat-x; height:140px; width: 100%; margin-left: 991px;">
 -->
<p />
<div id="nav">
<ul class="nav">
<font color=black>|</font>&nbsp;&nbsp;<li class=nav_Three><a href="../Main/WebHome.html" class="twikiLink">Main</a></li><font color=black>|</font><li class=nav_Three><a href="../Two/WebHome.html" class="twikiLink">UnrealEngine2</a></li><font color=black>|</font><li class=nav_Three><a href="WebHome.html" class="twikiLink">UnrealEngine3</a></li><font color=black>|</font><li class=nav_Three><a href="https://docs.unrealengine.com" class="twikiLink">UnrealEngine4</a></li><font color=black>|</font><li class=nav_Three><a href="../Main/BusinessAndLegal.html" class="twikiLink">Business &amp; Legal</a></li><font color=black>|</font>
</ul><br><br><br>
</div>
</div>
</div> <!-- end head -->
<div id="pagedefault">
<div id="maincol">
<div id="tool">
<div id="tooltop">UDN</div>
<div id="tooltext" style="padding: 10px 10px 10px 10px;">
Search public documentation: <br>
<form ACTION="/search/index.php" METHOD="GET" NAME="main" ID="main">
<input TYPE="TEXT" NAME="q" SIZE="15" STYLE="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: xx-small;">
<input TYPE="SUBMIT" VALUE="Search" STYLE="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: xx-small;"><br>
</form>
</div>
<div id="toolband">AnimationMirroring  </b></div>
<div id="tooltext">
<a href="AnimationMirroringJP.html" class="twikiLink">日本語訳</a><br><a href="AnimationMirroringCH.html" class="twikiLink">中国翻译</a><br><a href="AnimationMirroringKR.html" class="twikiLink">한국어</a><br>

<!-- Three/AnimationMirroring -->
<hr size="1" noshade="noshade" />
Interested in the Unreal Engine? <br>
Visit the <a href="http://www.unrealtechnology.com" target="_top">Unreal Technology</a> site.<br>
<br>
Looking for jobs and company info? <br>
Check out the <a href="http://www.epicgames.com" target="_top">Epic games</a> site.<br>
<br>
Questions about support via UDN? <br>
Contact the <a href="../Main/ContactUDNStaff.html" class="twikiLink">UDN Staff</a> <br>
<br>
</div> <!-- end toolbox content -->
<div id="toolbottom"></div>
</div> <!-- end tool -->
<p />
<noautolink>
<style type="text/css" media="all">@import "rsrc/UDNCSS_test.css";</style>
<div style="padding:0px 0px 0px 4px;font:10px Verdana;">
<b><a href="WebHome.html" class="twikiLink">UE3 Home</a></b> &gt; <b><a href="AnimationHome.html" class="twikiLink">Animation</a></b> &gt; Animation Mirroring <br/>
<b><a href="WebHome.html" class="twikiLink">UE3 Home</a></b> &gt; <b><a href="AnimatorHome.html" class="twikiLink">Animators</a></b> &gt; Animation Mirroring
</div>
<hr size="1" noshade="noshade">
<h1><a name="Animation Mirroring"></a> Animation Mirroring </h1>
<hr size="1" noshade="noshade">
<p />
<div class="twikiToc"> <ul>
<li> <a href="AnimationMirroring.html#Animation Mirroring"> Animation Mirroring</a> <ul>
<li> <a href="AnimationMirroring.html#Overview"> Overview</a>
</li> <li> <a href="AnimationMirroring.html#Setting Up The _SkeletalMesh"> Setting Up The SkeletalMesh</a>
</li> <li> <a href="AnimationMirroring.html#Mirroring tools"> Mirroring tools</a> <ul>
<li> <a href="AnimationMirroring.html#Auto Build Mirror Table"> Auto Build Mirror Table</a>
</li> <li> <a href="AnimationMirroring.html#Check Mirror Table"> Check Mirror Table</a>
</li> <li> <a href="AnimationMirroring.html#Copy Mirror Table to Clipboard"> Copy Mirror Table to Clipboard</a>
</li> <li> <a href="AnimationMirroring.html#Copy Mirror Table from Selected Mesh."> Copy Mirror Table from Selected Mesh.</a>
</li></ul>
</li> <li> <a href="AnimationMirroring.html#Using Mirroring in an _AnimTree"> Using Mirroring in an AnimTree</a>
</li> <li> <a href="AnimationMirroring.html#Related topics"> Related topics</a>
</li></ul>
</li></ul>
</div>
<p />
<h2><a name="Overview"></a> Overview </h2>
<hr size="1" noshade="noshade">
In games it is common to need animations that are mirror images of each other. For example, you may need both a 'look to the left' and a 'look to the right' version of the animation. Though it is possible to create both of these animations in a 3D content creation package such as 3DSMax, Maya, etc and then import them into the engine; it is not an ideal situation. This is because sometimes it is desirable to generate these on the fly, as well as mirroring dynamic blends of animations. In order to use this system, it is important that your skeleton is symmetrical.
<p />
<img src="rsrc/Three/AnimationMirroring/SkeletalMeshMirrorExample.jpg" alt="SkeletalMeshMirrorExample.jpg" width='800' height='593' />
<p />
<h2><a name="Setting Up The _SkeletalMesh"></a> Setting Up The SkeletalMesh </h2>
<hr size="1" noshade="noshade">
Before you can use mirroring, you must set up the mirror table in the skeletal mesh. If you open the mesh in the <a href="AnimSetEditorUserGuide.html" class="twikiLink">AnimSet Editor</a>, you can find the mirroring settings under the Mesh tab on the right. The first thing to set up is the SkelMirrorAxis, which sets which axis to mirror the skeletal mesh. Note that this is in mesh space; the reference frame that the mesh was authored in, in the 3D content creation package, before RotOrigin is applied. The next thing to set is the SkelMirrorFlipAxis. When you mirror a bone transform, you need to flip one of the axes in order for the bone not to be turned inside out. Which axis is flipped depends on how your skeleton is structured, this setting lets you adjust the default axis to use. You can however override this default per bone in the SkelMirrorTable.
<p />
Here are a couple of examples of using the flip axis. In the first one, bone 62 is mapped to bone 37 - mirrored, and then the X axis is flipped:
<p />
<img src="rsrc/Three/AnimationMirroring/SkeletalMeshMirroringShoulderPads.jpg" alt="SkeletalMeshMirroringShoulderPads.jpg" width='800' height='695' />
<p />
In this example, bone 9 is mapped to bone 4 - mirrored and then the X-Axis flipped.
<p />
<img src="rsrc/Three/AnimationMirroring/SkeletalMeshMirroringFeet.jpg" alt="SkeletalMeshMirroringFeet.jpg" width='800' height='695' />
<p />
The most time consuming part of setting up mirroring for a skeletal mesh is setting up the SkelMirrorTable. This table provides information for each bone to map it to another bone. For example, the source for the right knee would be the left knee, and the source for the spine would just be the spine, as this bone is along the center line (assuming a symmetrical mammalian skeletal mesh).
<p />
<img src="rsrc/Three/AnimationMirroring/SkeletalMeshMirrorProperties.jpg" alt="SkeletalMeshMirrorProperties.jpg" width='800' height='615' />
<p />
The AnimSet Editor contains a tool for attempting to create this mapping table automatically. Under the Mesh menu, select Auto-build Mirror Table. This will create the table, and try to match bones that are in corresponding positions across the mirror plane when in the reference pose. You must set the SkelMirrorAxis setting before running this tool. The tool normally works quite well for the majority of the body, including legs, arms, fingers etc. However it may have problems if you have multiple bones in the same location, or when there are many bones very close together.
<p />
<img src="rsrc/Three/AnimationMirroring/SkeletalMeshAutobuildMirrorTable.jpg" alt="SkeletalMeshAutobuildMirrorTable.jpg" width='800' height='715' />
<p />
Once the table is created, you can see how things are working by pressing the View Mirrored <img src="rsrc/Three/AnimationMirroring/SkeletalMirroringButton.png" alt="SkeletalMirroringButton.png" width='23' height='20' /> button on the AnimSet Editor tool bar.
<p />
You will usually have to do some fix up work on the auto-generated table to get things perfect. Under the Mesh tab, when you expand the SkelMirrorTable section you should see an entry for each bone in the skeleton. Inside each entry, it shows you the index of the bone it is getting its transformation data from. These must always form pairs; if the source of bone 88 is bone 65, then the source for bone 65 must be 88.
<p />
<img src="rsrc/Three/AnimationMirroring/SkeletalMeshMirrorTable.jpg" alt="SkeletalMeshMirrorTable.jpg" width='800' height='615' />
<p />
To find which index corresponds to which bone, you can either turn on bone names in the 3D view port, use the Copy Bone Names To Clipboard option in the Mesh menu and paste a listing into a text editor, or in the skeletal tree the bone indexes is in brackets next to the bone it is associated with. You can also adjust the BoneFlipAxis per bone to override the SkelMirrorFlipAxis default.
<p />
<strong>Bone indexes associated with bones in the Skeleton Tree</strong>
<p />
<img src="rsrc/Three/AnimationMirroring/SkeletalMeshSkeletonTree.jpg" alt="SkeletalMeshSkeletonTree.jpg" width='397' height='576' />
<p />
<h2><a name="Mirroring tools"></a> Mirroring tools </h2>
<hr size="1" noshade="noshade">
In the Mesh menu of the AnimSet Editor, there are a few options to make working with Mirror Tables a little easier.
<p />
<img src="rsrc/Three/AnimationMirroring/MirrorTableMenu.jpg" width='316' height='263' />
<p />
<h3><a name="Auto Build Mirror Table"></a> Auto Build Mirror Table </h3>
This function will attempt to automatically build the mirror table for the current mesh. You can expect to have to do touch up work, but it should give a good foundation to begin. When it finishes, it will also inform you if any errors were found.
<p />
<img src="rsrc/Three/AnimationMirroring/SkeletalMeshPostAutobuildMirrorTable.jpg" alt="SkeletalMeshPostAutobuildMirrorTable.jpg" width='800' height='715' />
<p />
<h3><a name="Check Mirror Table"></a> Check Mirror Table </h3>
Will check the mirror table for problems and display a pop up window if anything is found.
<p />
<img src="rsrc/Three/AnimationMirroring/SkeletalMeshErrorsInMirrorTable.jpg" alt="SkeletalMeshErrorsInMirrorTable.jpg" width='800' height='715' />
<p />
<h3><a name="Copy Mirror Table to Clipboard"></a> Copy Mirror Table to Clipboard </h3>
Allows to check the mirroring table in a text editor.
<div class="codetitlebar">
Example Mirror Table copied into the clipboard
</div>
<div class="codesnippet">
<pre>
  0: 0 AXIS&#95;NONE
  1: 1 AXIS&#95;NONE
  2: 2 AXIS&#95;NONE
  3: 3 AXIS&#95;NONE
  4: 41 AXIS&#95;NONE
  5: 5 AXIS&#95;NONE
  6: 16 AXIS&#95;NONE
  7: 7 AXIS&#95;NONE
  8: 8 AXIS&#95;NONE
  9: 14 AXIS&#95;NONE
 10: 15 AXIS&#95;NONE
 11: 11 AXIS&#95;NONE
 12: 17 AXIS&#95;NONE
 13: 13 AXIS&#95;NONE
 14: 14 AXIS&#95;NONE
 15: 10 AXIS&#95;NONE
 16: 16 AXIS&#95;NONE
 17: 12 AXIS&#95;NONE
 18: 18 AXIS&#95;NONE
 19: 19 AXIS&#95;NONE
 20: 20 AXIS&#95;NONE
 21: 21 AXIS&#95;NONE
 22: 38 AXIS&#95;NONE
 23: 39 AXIS&#95;NONE
 24: 40 AXIS&#95;NONE
 25: 25 AXIS&#95;NONE
 26: 42 AXIS&#95;NONE
 27: 43 AXIS&#95;NONE
 28: 44 AXIS&#95;NONE
 29: 45 AXIS&#95;NONE
 30: 46 AXIS&#95;NONE
 31: 47 AXIS&#95;NONE
 32: 48 AXIS&#95;NONE
 33: 33 AXIS&#95;NONE
 34: 34 AXIS&#95;NONE
 35: 51 AXIS&#95;NONE
 36: 36 AXIS&#95;NONE
 37: 37 AXIS&#95;NONE
 38: 22 AXIS&#95;NONE
 39: 39 AXIS&#95;NONE
 40: 40 AXIS&#95;NONE
 41: 41 AXIS&#95;NONE
 42: 26 AXIS&#95;NONE
 43: 27 AXIS&#95;NONE
 44: 28 AXIS&#95;NONE
 45: 29 AXIS&#95;NONE
 46: 30 AXIS&#95;NONE
 47: 31 AXIS&#95;NONE
 48: 32 AXIS&#95;NONE
 49: 49 AXIS&#95;NONE
 50: 50 AXIS&#95;NONE
 51: 35 AXIS&#95;NONE
</pre>
</div>
<p />
<h3><a name="Copy Mirror Table from Selected Mesh."></a> Copy Mirror Table from Selected Mesh. </h3>
When meshes share the same skeleton, this is an easy way to copy the mirror table without having to recreate it.
<p />
<h2><a name="Using Mirroring in an _AnimTree"></a> Using Mirroring in an AnimTree </h2>
<hr size="1" noshade="noshade">
Once a SkeletalMesh is set up to use mirroring, it is very straight forward to use in an AnimTree. There is a AnimNode type called AnimNodeMirror which has one input and one output. If you insert one of these in the tree, it will mirror what ever the input animation blend is and output it. In this way you can mirror an individual animation or a blend of animations, and blend between mirrored and unmirrored animations, making transitions much smoother.
<p />
<img src="rsrc/Three/AnimationMirroring/mirror_node.jpg" width='404' height='305' />
<p />
The <strong>bEnableMirroring</strong> flag in the AnimNode allows you to toggle the mirroring behavior on or off. Note that mirroring an animation is quite costly, so try to use as few AnimNodeMirrors as possible.
<p />
<h2><a name="Related topics"></a> Related topics </h2>
<hr size="1" noshade="noshade"> <ul>
<li> <a href="VideoTutorials.html#SkeletalMeshPipeline" class="twikiAnchorLink">Video Tutorials</a>
</li> <li> <a href="AnimationNodes.html" class="twikiLink">Animation Nodes</a>
</li></ul>
<p />
</noautolink>
<p />
<p />
<p />
<p />
<p />
<p />


<!-- BEGIN UE4 NOTICE -->



<div id="version_message" style="display:none;">

    <div style="position:fixed;top:0px;left:0px;width:100%;height:100%;background:#000;opacity:0.5;">

    </div>

    <div style="position:fixed;top:50%;left:50%;margin:-70px 0px 0px -240px;background:#FFF;border-radius:6px;width:480px;box-shadow:0px 5px 30px -5px rgba(0,0,0,0.9);">

        <div style="font-size:16px;font-weight:bold;background: url(rsrc/Three/warning.png) no-repeat scroll 5px 5px;padding:4px 10px 5px 25px;height:21px;width:440px;">

            Important!

        </div>

        <div style="font-size:11px;padding:5px 10px 10px;width:460px;">

            <p>You are viewing documentation for the <strong>Unreal Development Kit (UDK)</strong>.</p>



            <p>If you are looking for the Unreal Engine 4 documentation, please visit the <a style="color:#000;" href="https://docs.unrealengine.com">Unreal Engine 4 Documentation</a> site.</p>

        </div>

        <div style="height:20px;padding:4px;margin:6px;border-top:1px solid #a0a0a0;">

            <form onsubmit="return closeVersionMessage();">

                <input type="checkbox" id="dismiss" value="dismiss" />

                <label for="dsimiss">Don't show me this again</label>

                <input type="submit" value="Close" style="cursor:pointer;float:right;width:60px;color:#f0f0f0;font-weight:bold;background:#882222;height:24px;padding:2px 3px 3px;text-align:center;border:1px outset #000;" />

            </form>

        </div>

    </div>

</div>



<script type="text/javascript">

    window.onload = function () {

        LoadVersionMessage();

    }



    function LoadVersionMessage()

    {

        var showMessage = "false";
        if(showMessage != "false")

        {

            showVersionMessage();

        }

    }



    function showVersionMessage()

    {

        var message = document.getElementById("version_message");

        if(message)

        {

            message.style.display = "block";

        }

    }



    function closeVersionMessage() {

        var dismiss = document.getElementById("dismiss");

        var message = document.getElementById("version_message");

        if (message) {

            message.style.display = "none";

        }

        if (dismiss.checked) {

            eraseCookie("doc_version_message");

            createCookie("doc_version_message", "false", 365);

            dismiss.checked = false;

        }

        return false;

    }



    function createCookie(name, value, days) {

        if (days) {

            var date = new Date();

            date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));

            var expires = "; expires=" + date.toGMTString();

        }

        else var expires = "";

        document.cookie = name + "=" + value + expires + "; path=/";

    }



    function readCookie(name) {

        var nameEQ = name + "=";

        var ca = document.cookie.split(';');

        for (var i = 0; i < ca.length; i++) {

            var c = ca[i];

            while (c.charAt(0) == ' ') c = c.substring(1, c.length);

            if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);

        }

        return null;

    }



    function eraseCookie(name) {

        createCookie(name, "", -1);

    }

</script>



<!-- END UE4 NOTICE -->



</div></div><div id="footer"><div style="BACKGROUND-COLOR: transparent; margin: 0; padding: 0; width: 100%;"><div>&nbsp;</div><div style="float: left; text-align: left; vertical-align: bottom; width: 50%;"><a href="http://www.videogamevoters.org"><img src="rsrc/vgvn.jpg" border="0" width="234" height="60" alt="Video Game Voters Network" /></a></div><div style="float: right; text-align: right; vertical-align: bottom; width: 50%;">Copyright &copy; 2001-2012 <a href="http://www.epicgames.com" target="_top">Epic Games, Inc.</a><br /><a href="../Main/TermsAndConditions.html" class="twikiLink">Terms and Conditions</a><br /><a href="http://epicgames.com/privacynotice" target="_top">Privacy Notice</a></div></div></div></div>
<p />
</html></body>
