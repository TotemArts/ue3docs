<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
	"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title> UDK | MobileLandscape    </title>

<style type="text/css" media="all">@import "rsrc/twiki_webs.css";</style>
<style type="text/css" media="all">@import "rsrc/udn_new.css";</style>
<link rel="icon" href="rsrc/Three/WebPreferences/favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="rsrc/Three/WebPreferences/favicon.ico" type="image/x-icon" />


<!-- view.static_udn3.tmpl  -->
<script language="JavaScript" type="text/javascript" src="rsrc/udn.js"></script>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

</head>
<p />
<body id="webbgThree">
<p />

<p />
<div id="webThree"><div id="head">
<!--
<div class="header">
 -->
<div style="background: url(/pub/webbg_udn.jpg); background-repeat: no-repeat; height:140px; width: 100%;" >
<!--
<div style="background: transparent url(/pub/udn_header_bg.jpg); background-repeat: repeat-x; height:140px; width: 100%; margin-left: 991px;">
 -->
<p />
<div id="nav">
<ul class="nav">
<font color=black>|</font>&nbsp;&nbsp;<li class=nav_Three><a href="../Main/WebHome.html" class="twikiLink">Main</a></li><font color=black>|</font><li class=nav_Three><a href="../Two/WebHome.html" class="twikiLink">UnrealEngine2</a></li><font color=black>|</font><li class=nav_Three><a href="WebHome.html" class="twikiLink">UnrealEngine3</a></li><font color=black>|</font><li class=nav_Three><a href="https://docs.unrealengine.com" class="twikiLink">UnrealEngine4</a></li><font color=black>|</font><li class=nav_Three><a href="../Main/BusinessAndLegal.html" class="twikiLink">Business &amp; Legal</a></li><font color=black>|</font>
</ul><br><br><br>
</div>
</div>
</div> <!-- end head -->
<div id="pagedefault">
<div id="maincol">
<div id="tool">
<div id="tooltop">UDN</div>
<div id="tooltext" style="padding: 10px 10px 10px 10px;">
Search public documentation: <br>
<form ACTION="/search/index.php" METHOD="GET" NAME="main" ID="main">
<input TYPE="TEXT" NAME="q" SIZE="15" STYLE="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: xx-small;">
<input TYPE="SUBMIT" VALUE="Search" STYLE="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: xx-small;"><br>
</form>
</div>
<div id="toolband">MobileLandscape  </b></div>
<div id="tooltext">
<a href="MobileLandscapeJP.html" class="twikiLink">日本語訳</a><br><a href="MobileLandscapeCH.html" class="twikiLink">中国翻译</a><br><a href="MobileLandscapeKR.html" class="twikiLink">한국어</a><br>

<!-- Three/MobileLandscape -->
<hr size="1" noshade="noshade" />
Interested in the Unreal Engine? <br>
Visit the <a href="http://www.unrealtechnology.com" target="_top">Unreal Technology</a> site.<br>
<br>
Looking for jobs and company info? <br>
Check out the <a href="http://www.epicgames.com" target="_top">Epic games</a> site.<br>
<br>
Questions about support via UDN? <br>
Contact the <a href="../Main/ContactUDNStaff.html" class="twikiLink">UDN Staff</a> <br>
<br>
</div> <!-- end toolbox content -->
<div id="toolbottom"></div>
</div> <!-- end tool -->
<p />
<noautolink>
<p />
<div style="padding:0px 0px 0px 4px;font:10px Verdana;">
<b><a href="WebHome.html" class="twikiLink">UE3 Home</a></b> &gt; <b><a href="Landscape.html" class="twikiLink">Landscape</a></b> &gt; Landscape on Mobile<br>
<b><a href="WebHome.html" class="twikiLink">UE3 Home</a></b> &gt; <b><a href="MobileHome.html" class="twikiLink">MobileHome</a></b> &gt; Landscape on Mobile</div>
<hr size="1" noshade="noshade">
<h1><a name="Landscape on Mobile"></a> Landscape on Mobile </h1>
<hr size="1" noshade="noshade">
<p />
<div class="twikiToc"> <ul>
<li> <a href="MobileLandscape.html#Landscape on Mobile"> Landscape on Mobile</a> <ul>
<li> <a href="MobileLandscape.html#Overview"> Overview</a>
</li> <li> <a href="MobileLandscape.html#Mobile Landscape Materials"> Mobile Landscape Materials</a> <ul>
<li> <a href="MobileLandscape.html#Regular Layer Blending"> Regular Layer Blending</a>
</li> <li> <a href="MobileLandscape.html#Monochrome Layer Blending"> Monochrome Layer Blending</a>
</li></ul>
</li> <li> <a href="MobileLandscape.html#Performance and Memory"> Performance and Memory</a> <ul>
<li> <a href="MobileLandscape.html#Component Size"> Component Size</a>
</li> <li> <a href="MobileLandscape.html#Mobile LOD Bias"> Mobile LOD Bias</a>
</li> <li> <a href="MobileLandscape.html#Memory Usage"> Memory Usage</a>
</li> <li> <a href="MobileLandscape.html#Stats"> Stats</a>
</li></ul>
</li> <li> <a href="MobileLandscape.html#Limitations"> Limitations</a>
</li></ul>
</li></ul>
</div>
<p />
<h2><a name="Overview"></a> Overview </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
The November 2012 release is the first to support Landscape on mobile platforms. The Emulate Mobile Features setting, as well as the Mobile Previewer and running on mobile devices are all supported. The morphing LOD that is available on other platforms also works on mobile, as does PhysX collision.
<p />
The main difference when using Landscape on a mobile platform is the mobile material setup. There are also performance and memory considerations.
<p />
<h2><a name="Mobile Landscape Materials"></a> Mobile Landscape Materials </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
Landscape on mobile makes use of the Unreal Engine 3 <a href="MobileMaterialReference.html" class="twikiLink">Mobile Material System</a>. Landscape on PC and other platforms supports a number layers, with the exact blending calculation determined inside the <a href="LandscapeMaterials.html" class="twikiLink">Landscape Material</a> nodes. On mobile, landscape supports blending of up to four layers.
<p />
It's generally a good idea to set up the material to render on PC. This will be used for editing, as well as when generating lightmaps with Lightmass. A quick way to setup a material with similar blending to mobile is to use a LandscapeLayerBlend node. Below is an example landscape with four layers, and a screen shot of the material nodes.
<p />
<img src="rsrc/Three/MobileLandscape/MobileLandscapeLayers.jpg" alt="MobileLandscapeLayers.jpg" width="1098" height="526" />
<img src="rsrc/Three/MobileLandscape/MobileLandscapeNodes.png" alt="MobileLandscapeNodes.png" width="1098" height="535" />
<p />
<p />
<h3><a name="Regular Layer Blending"></a> Regular Layer Blending </h3>
<p />
To setup this same material for mobile, first you need to set the material's usage flags correctly. Make sure <strong>Use With Landscape</strong> and <strong>Use With Mobile Landscape</strong> are both checked.
<p />
<img src="rsrc/Three/MobileLandscape/MobileLandscapeUsage.png" alt="MobileLandscapeUsage.png" width="649" height="146" />
<p />
Next, you need to specify the textures to use for each layer. The layer textures should be specified in the order they appear in the Landscape Edit mode window. Alternatively, you can list the layers to use in the <strong>Mobile Landscape Layer Names</strong> property. In this example, the order is Snow, Grass, Sand and Rock.
<p />
<img src="rsrc/Three/MobileLandscape/MobileLandscapeLayerNames.png" alt="MobileLandscapeLayerNames.png" width="673" height="158" />
<p />
The first layer is specified in the <strong>Mobile Base Texture</strong> property. The subsequent layers are specified under the Texture Blending section in the <strong>Mobile Detail Texture</strong>, <strong>Mobile Detail Texture 2</strong> and <strong>Mobile Detail Texture 3</strong> slots.
<p />
Finally you can specify a UV scale for the textures if you desire, under the Texture Transform section.
<p />
<img src="rsrc/Three/MobileLandscape/MobileLandscapeMaterialSettings.png" alt="MobileLandscapeMaterialSettings.png" width="669" height="420" />
<p />
When you have set up your material, you can press the Emulate Mobile Features button <img src="rsrc/Three/MobileLandscape/EmulateMobileFeatures.png" width="24" height="21" /> and you should see the layer blending as it will appear on a mobile device.  You can also press the Mobile Previewer button <img src="rsrc/Three/MobileLandscape/MobilePreviewer.png" width="24" height="21" /> which will use the same OpenGL ES 2.0 shaders that will be used on the mobile device.
<p />
<img src="rsrc/Three/MobileLandscape/MobilePreviewerWindow.jpg" alt="MobilePreviewerWindow.jpg" width="976" height="678" />
<p />
<h3><a name="Monochrome Layer Blending"></a> Monochrome Layer Blending </h3>
<p />
It is also possible to combine the four layer textures into a single texture, with a monochrome version of each texture stored in the R,G,B and A channels respectively. You can then specify four RGB color values to use to colorize each layer before it's blended. For example, you would specify a white color for snow, a green for grass and brown colors for a rock layer.
<p />
Doing this removes the ability to have a lot of color variation in each layer, but it simplifies the blending as only the weight texture and an single layer texture is used. This can increase performance significantly, especially on low-end devices.
<p />
To enable this feature, check the <strong>Use Mobile Landscape Monochrome Layer Blending</strong> checkbox. Then specify the color values for each layer in the <strong>Mobile Landscape Monochrome Layer Colors</strong> properties:
<p />
<img src="rsrc/Three/MobileLandscape/MobileLandscapeLayerColors.png" alt="MobileLandscapeLayerColors.png" width="673" height="158" />
<p />
Finally you need to import your combined layer texture and reference it in the <strong>Mobile Base Texture</strong> property.  The <strong>Mobile Detail Texture</strong> properties should be blank.
<p />
<h2><a name="Performance and Memory"></a> Performance and Memory </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
<h3><a name="Component Size"></a> Component Size </h3>
<p />
Limiting the number of draw calls, as well as the number of triangles is important for mobile devices. The number of draw calls is determined by the number of Landscape components, and the component size and number of subsections determines the triangle counts and how quickly the LOD transitions occur. We have found that using a landscape of size 1009x1009, with components 126x126 quads (2x2 subsections of 63x63 quads) is a good trade off between triangle count and LOD transitions.
<p />
For more information on the component size, see the <a href="LandscapeCreating.html" class="twikiLink">Creating Landscapes</a> page.
<p />
<h3><a name="Mobile LOD Bias"></a> Mobile LOD Bias </h3>
<p />
There are two settings that can be used to reduce the number of triangles rendered by landscape on mobile. First is the <strong>MobileLodBias</strong> property of the Landscape actor. Each increment of this number reduces the size of each component by 1 mip level on all mobile platforms. For example, if you set MobileLodBias=1 for a 2x2 subsection, 63x63 quad landscape, at cook time the top mip data for the heightmap will be discarded, reducing the resolution to that of a 2x2, 31x31 quad landscape. Enabling the Emulate Mobile Features button will show the landscape in the reduced resolution.
<p />
The second setting is the <strong>MobileLandscapeLodBias</strong> in <strong>BaseSystemSettings.ini</strong>. This value works the same as the MobileLodBias property but it is an extra bias performed at runtime based on the particular device. For example, the default bias for an 4th generation iPod Touch device is 1, which means it will use a half-resolution heightmap, quartering the number of triangles rendered when compared to an iPhone 4S. You can adjust these settings as required for your game.  <ul>
<li> Note that MobileLandscapeLodBias does not reduce the peak memory usage, because the full resolution data is not discarded until the render data is initialized, but it does reduce memory usage once the level is loaded.
</li></ul>
<p />
Both of these settings work simultaneously - any MobileLandscapeLodBias set in SystemSettings.ini will be applied on top of the MobileLodBias set in the actor, which occurs at cook time.
<p />
<h3><a name="Memory Usage"></a> Memory Usage </h3>
<p />
On PC, we use vertex textures to efficiently store the height and normal data and easily calculate the LOD transitions. On mobile, we use fixed vertex and index buffers. Because of this, there is increased memory usage on mobile.
<p />
<table cellspacing="1" cellpadding="1" class="twikiTable" border="0"><tr><td bgcolor="#eaeaea" class="twikiFirstCol"> &nbsp; </td><th bgcolor="#dadada">  <strong><font color="#000000">PC</font></strong>  </th><th bgcolor="#dadada">  <strong><font color="#000000">Mobile</font></strong>  </th></tr>
<tr><th bgcolor="#dadada" class="twikiFirstCol">  <strong><font color="#000000">Position data</font></strong>  </th><td bgcolor="#ffffff"> 2 bytes per vertex per LOD </td><td bgcolor="#ffffff"> 8 bytes per vertex per LOD </td></tr>
<tr><th bgcolor="#dadada" class="twikiFirstCol">  <strong><font color="#000000">Normal data</font></strong>  </th><td bgcolor="#eaeaea"> 2 bytes per vertex per LOD </td><td bgcolor="#eaeaea"> 4 bytes per vertex per LOD </td></tr>
<tr><th bgcolor="#dadada" class="twikiFirstCol">  <strong><font color="#000000">Collision data</font></strong>  </th><td bgcolor="#ffffff"> 4 bytes per vertex </td><td bgcolor="#ffffff"> 4 bytes per vertex </td></tr>
<tr><td bgcolor="#eaeaea" class="twikiFirstCol"> <strong>Layer data</strong> (4 layers) </td><td bgcolor="#eaeaea"> 4 bytes per vertex </td><td bgcolor="#eaeaea"> 4 bytes per vertex </td></tr>
</table>
<p />
<h3><a name="Stats"></a> Stats </h3>
<p />
The <strong>STAT LANDSCAPE</strong> console command will show the triangle and draw call counts for the landscape in view.
<p />
<h2><a name="Limitations"></a> Limitations </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p /> <ul>
<li> Rendering of landscape holes is not yet supported.
</li> <li> LOD is strictly distance based, and components with fixed LOD, or altering the LOD factor is not supported due to fact that only two LOD levels are available to the vertex shader.
</li> <li> Landscape editing is not possible with the Emulate Mobile Features <img src="rsrc/Three/MobileLandscape/EmulateMobileFeatures.png" width="24" height="21" /> button pressed. Entering Landscape editing mode will toggle the Emulate Mobile Features button if it's pressed.
</li> <li> Component sizes larger than 128x128 vertices are not supported, for example 127x127 quads with 2x2 subsections. Larger component sizes would require more than 65536 vertices in a vertex buffer, which will overflow the 16-bit index values. Attempting to use a larger size will cause rendering corruption. In this situation, setting MobileLodBias=1 will solve the problem as it reduces the number of vertices in the component.
</li></ul>
<p />
</noautolink>
<p />
<p />
<p />
<p />
<p />
<p />


<!-- BEGIN UE4 NOTICE -->



<div id="version_message" style="display:none;">

    <div style="position:fixed;top:0px;left:0px;width:100%;height:100%;background:#000;opacity:0.5;">

    </div>

    <div style="position:fixed;top:50%;left:50%;margin:-70px 0px 0px -240px;background:#FFF;border-radius:6px;width:480px;box-shadow:0px 5px 30px -5px rgba(0,0,0,0.9);">

        <div style="font-size:16px;font-weight:bold;background: url(rsrc/Three/warning.png) no-repeat scroll 5px 5px;padding:4px 10px 5px 25px;height:21px;width:440px;">

            Important!

        </div>

        <div style="font-size:11px;padding:5px 10px 10px;width:460px;">

            <p>You are viewing documentation for the <strong>Unreal Development Kit (UDK)</strong>.</p>



            <p>If you are looking for the Unreal Engine 4 documentation, please visit the <a style="color:#000;" href="https://docs.unrealengine.com">Unreal Engine 4 Documentation</a> site.</p>

        </div>

        <div style="height:20px;padding:4px;margin:6px;border-top:1px solid #a0a0a0;">

            <form onsubmit="return closeVersionMessage();">

                <input type="checkbox" id="dismiss" value="dismiss" />

                <label for="dsimiss">Don't show me this again</label>

                <input type="submit" value="Close" style="cursor:pointer;float:right;width:60px;color:#f0f0f0;font-weight:bold;background:#882222;height:24px;padding:2px 3px 3px;text-align:center;border:1px outset #000;" />

            </form>

        </div>

    </div>

</div>



<script type="text/javascript">

    window.onload = function () {

        LoadVersionMessage();

    }



    function LoadVersionMessage()

    {

        var showMessage = "false";
        if(showMessage != "false")

        {

            showVersionMessage();

        }

    }



    function showVersionMessage()

    {

        var message = document.getElementById("version_message");

        if(message)

        {

            message.style.display = "block";

        }

    }



    function closeVersionMessage() {

        var dismiss = document.getElementById("dismiss");

        var message = document.getElementById("version_message");

        if (message) {

            message.style.display = "none";

        }

        if (dismiss.checked) {

            eraseCookie("doc_version_message");

            createCookie("doc_version_message", "false", 365);

            dismiss.checked = false;

        }

        return false;

    }



    function createCookie(name, value, days) {

        if (days) {

            var date = new Date();

            date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));

            var expires = "; expires=" + date.toGMTString();

        }

        else var expires = "";

        document.cookie = name + "=" + value + expires + "; path=/";

    }



    function readCookie(name) {

        var nameEQ = name + "=";

        var ca = document.cookie.split(';');

        for (var i = 0; i < ca.length; i++) {

            var c = ca[i];

            while (c.charAt(0) == ' ') c = c.substring(1, c.length);

            if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);

        }

        return null;

    }



    function eraseCookie(name) {

        createCookie(name, "", -1);

    }

</script>



<!-- END UE4 NOTICE -->



</div></div><div id="footer"><div style="BACKGROUND-COLOR: transparent; margin: 0; padding: 0; width: 100%;"><div>&nbsp;</div><div style="float: left; text-align: left; vertical-align: bottom; width: 50%;"><a href="http://www.videogamevoters.org"><img src="rsrc/vgvn.jpg" border="0" width="234" height="60" alt="Video Game Voters Network" /></a></div><div style="float: right; text-align: right; vertical-align: bottom; width: 50%;">Copyright &copy; 2001-2012 <a href="http://www.epicgames.com" target="_top">Epic Games, Inc.</a><br /><a href="../Main/TermsAndConditions.html" class="twikiLink">Terms and Conditions</a><br /><a href="http://epicgames.com/privacynotice" target="_top">Privacy Notice</a></div></div></div></div>
<p />
</html></body>
