<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
	"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title> UDK | CLIKINIList    </title>

<style type="text/css" media="all">@import "rsrc/twiki_webs.css";</style>
<style type="text/css" media="all">@import "rsrc/udn_new.css";</style>
<link rel="icon" href="rsrc/Three/WebPreferences/favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="rsrc/Three/WebPreferences/favicon.ico" type="image/x-icon" />


<!-- view.static_udn3.tmpl  -->
<script language="JavaScript" type="text/javascript" src="rsrc/udn.js"></script>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

</head>
<p />
<body id="webbgThree">
<p />

<p />
<div id="webThree"><div id="head">
<!--
<div class="header">
 -->
<div style="background: url(/pub/webbg_udn.jpg); background-repeat: no-repeat; height:140px; width: 100%;" >
<!--
<div style="background: transparent url(/pub/udn_header_bg.jpg); background-repeat: repeat-x; height:140px; width: 100%; margin-left: 991px;">
 -->
<p />
<div id="nav">
<ul class="nav">
<font color=black>|</font>&nbsp;&nbsp;<li class=nav_Three><a href="../Main/WebHome.html" class="twikiLink">Main</a></li><font color=black>|</font><li class=nav_Three><a href="../Two/WebHome.html" class="twikiLink">UnrealEngine2</a></li><font color=black>|</font><li class=nav_Three><a href="WebHome.html" class="twikiLink">UnrealEngine3</a></li><font color=black>|</font><li class=nav_Three><a href="https://docs.unrealengine.com" class="twikiLink">UnrealEngine4</a></li><font color=black>|</font><li class=nav_Three><a href="../Main/BusinessAndLegal.html" class="twikiLink">Business &amp; Legal</a></li><font color=black>|</font>
</ul><br><br><br>
</div>
</div>
</div> <!-- end head -->
<div id="pagedefault">
<div id="maincol">
<div id="tool">
<div id="tooltop">UDN</div>
<div id="tooltext" style="padding: 10px 10px 10px 10px;">
Search public documentation: <br>
<form ACTION="/search/index.php" METHOD="GET" NAME="main" ID="main">
<input TYPE="TEXT" NAME="q" SIZE="15" STYLE="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: xx-small;">
<input TYPE="SUBMIT" VALUE="Search" STYLE="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: xx-small;"><br>
</form>
</div>
<div id="toolband">CLIKINIList  </b></div>
<div id="tooltext">
<a href="CLIKINIListJP.html" class="twikiLink">日本語訳</a><br><a href="CLIKINIListCH.html" class="twikiLink">中国翻译</a><br><a href="CLIKINIListKR.html" class="twikiLink">한국어</a><br>

<!-- Three/CLIKINIList -->
<hr size="1" noshade="noshade" />
Interested in the Unreal Engine? <br>
Visit the <a href="http://www.unrealtechnology.com" target="_top">Unreal Technology</a> site.<br>
<br>
Looking for jobs and company info? <br>
Check out the <a href="http://www.epicgames.com" target="_top">Epic games</a> site.<br>
<br>
Questions about support via UDN? <br>
Contact the <a href="../Main/ContactUDNStaff.html" class="twikiLink">UDN Staff</a> <br>
<br>
</div> <!-- end toolbox content -->
<div id="toolbottom"></div>
</div> <!-- end tool -->
<p />
<noautolink>
<style type="text/css" media="all">@import "rsrc/UDNCSS_test.css";</style>
<div style="padding:0px 0px 0px 4px;font:10px Verdana;">
<b><a href="WebHome.html" class="twikiLink">UE3 Home</a></b> &gt; <b><a href="UIAndHUDHome.html" class="twikiLink">User Interfaces &amp; HUDs</a></b> &gt; <b><a href="Scaleform.html" class="twikiLink">Scaleform GFx</a></b> &gt; How to populate a list from an ini file
</div>
<hr size="1" noshade="noshade">
<p />
<h1><a name="How to populate a list from an ini file"></a> How to populate a list from an ini file </h1>
<hr size="1" noshade="noshade">
<p />
<div class="twikiToc"> <ul>
<li> <a href="CLIKINIList.html#How to populate a list from an ini file"> How to populate a list from an ini file</a> <ul>
<li> <a href="CLIKINIList.html#Overview"> Overview</a>
</li> <li> <a href="CLIKINIList.html#The INI file"> The INI file</a>
</li> <li> <a href="CLIKINIList.html#Unrealscript"> Unrealscript</a>
</li> <li> <a href="CLIKINIList.html#Addendum"> Addendum</a>
</li></ul>
</li></ul>
</div>
<p />
<h2><a name="Overview"></a> Overview </h2>
<hr size="1" noshade="noshade">
Populating a scrolling list, drop down, etc. in ActionScript is quite easy. Assuming you have a drop down menu with the instance name "dropDownList", simply use the 'dataProvider' property to fill that list:
<p />
<div class="codetitlebar">
ActionScript
</div>
<div class="codesnippet">
<pre>
dropDownList.dataProvider &#61; &#91;&#34;row1&#34;, &#34;row2&#34;, &#34;row3&#34;, &#34;row4&#34;, &#34;row5&#34;, &#34;row6&#34;, &#34;row7&#34;, &#34;row8&#34;];
</pre>
</div>
<p />
But most of the time, you'll want to populate your list dynamically via UnrealScript. This is easy enough.
<p />
<h2><a name="The INI file"></a> The INI file </h2>
<hr size="1" noshade="noshade">
<p />
We'll populate our list via a UDK config file, specifically DefaultUI.ini. Open that file, and add this to the bottom. (NOTE: This assumes the class containing your drop down list is called SFMenuTutorial):
<p />
<div class="codesnippet">
<pre>
&#91;UTGame.SFMenuTutorial]
+ListOptions&#61;(OptionName&#61;&#34;Option 1&#34;,OptionLabel&#61;&#34;Cool&#34;,OptionDesc&#61;&#34;Something cool.&#34;)
+ListOptions&#61;(OptionName&#61;&#34;Option 2&#34;,OptionLabel&#61;&#34;Awesome&#34;,OptionDesc&#61;&#34;Something awesome.&#34;)
+ListOptions&#61;(OptionName&#61;&#34;Option 3&#34;,OptionLabel&#61;&#34;Amazing&#34;,OptionDesc&#61;&#34;Something amazing.&#34;)
</pre>
</div>
<p />
Each line represents an option in the list.
<p />
OptionLabel will be displayed in the list. The other items are optional. You can include as many items as you wish in each row, as long as you separate them with commas.
<p />
<h2><a name="Unrealscript"></a> Unrealscript </h2>
<hr size="1" noshade="noshade">
Now, in your UnrealScript file that contains the dropdown scrolling list (mine is called SFMenuTutorial), be sure to include the UI file in the configuration declaration. This is basically the name of the configuration file minus the "Default" part. In the case of "DefaultUI.ini", use just "UI" like so:
<p />
<div class="codetitlebar">
Unrealscript
</div>
<div class="codesnippet">
<pre>
class SFMenuTutorial extends GFxMoviePlayer
  config(UI);
</pre>
</div>
<p />
Next, we declare some important variables. The first variable is used as a reference to the actual drop down scrolling list in Flash. The next is a structure - each option in the list is made up of three string variables.
<p />
<div class="codetitlebar">
Unrealscript
</div>
<div class="codesnippet">
<pre>
/&#42;&#42; The drop down menu &#42;/
var GFxClikWidget DropDown;

/&#42;&#42; Structure which defines each option in the list. &#42;/
struct Option
{
  var string OptionName;
  var string OptionLabel; // This will be displayed in the list.
  var string OptionDesc;
};
</pre>
</div>
<p />
Then we declare an array of this structure type (Option) that will hold each of the options defined in DefaultUI. The array has the keyword "config" added after the "var" keyword to indicate that the data for this array is found in a config file. The data we want is found in any row item named ListOptions in that config file (see above):
<p />
<div class="codetitlebar">
Unrealscript
</div>
<div class="codesnippet">
<pre>
/&#42;&#42; Aray of all list options, defined in DefaultUI.ini &#42;/
var config array&#60;Option&#62; ListOptions;
</pre>
</div>
<p />
Next, we initialize the drop down list, assuming the drop down list in Flash has an instance name of "dropDownList":
<p />
<div class="codetitlebar">
Unrealscript
</div>
<div class="codesnippet">
<pre>
event bool WidgetInitialized(name WidgetName, name WidgetPath, GFxObject Widget)
{
  switch(WidgetName)
  {
  case (&#39;dropDownList&#39;):
    DropDown &#61; GFxClikWidget(Widget);
    SetUpDataProvider(DropDown);
    break;

  default:
    break;
  }
  return true;
}
</pre>
</div>
<p />
Notice we execute the function SetUpDataProvider(), passing it the newly referenced 'DropDown' widget as an argument. That function comes next. Essentially, we create a temporary object (TempObj) to hold the various options found in the ListOptions rows of the config file, and we store each option as an element object in an array called DataProvider. We then assign that array of our option objects (DataProvider) to the "dataProvider" property of the drop down menu using SetObject.
<p />
<div class="codetitlebar">
Unrealscript
</div>
<div class="codesnippet">
<pre>
function SetUpDataProvider(GFxClikWidget Widget)
{
  local byte i;
  local GFxObject DataProvider;
  local GFxObject TempObj;

  DataProvider &#61; CreateArray();

  switch(Widget)
  {
  case(DropDown):
    for (i &#61; 0; i &#60; ListOptions.Length; i++)
    {
      TempObj &#61; CreateObject(&#34;Object&#34;);
      TempObj.SetString(&#34;name&#34;, ListOptions&#91;i].OptionName);
      TempObj.SetString(&#34;label&#34;, ListOptions&#91;i].OptionLabel); // this will be displayed in the list
      TempObj.SetString(&#34;desc&#34;, ListOptions&#91;i].OptionDesc);

      DataProvider.SetElementObject(i, TempObj);
    }
  }

  Widget.SetObject(&#34;dataProvider&#34;, DataProvider);
}
</pre>
</div>
<p />
Last of all, be sure to bind the widget for the drop down in the default properties.
<p />
<div class="codetitlebar">
Unrealscript
</div>
<div class="codesnippet">
<pre>
defaultproperties
{
  WidgetBindings.Add((WidgetName&#61;&#34;dropDownList&#34;,WidgetClass&#61;class&#39;GFxClikWidget&#39;))
}
</pre>
</div>
<p />
That's all there is to it!
<p />
<h2><a name="Addendum"></a> Addendum </h2>
<hr size="1" noshade="noshade">
With a drop down list, the number of rows displayed varies automatically. So if you have less than 5 rows of options, say 3, the list only displays 3 rows. At most, it will display 5, which is hard coded into the class 'DropdownMenu.as', but this value can be changed.
<p />
As for a ScrollingList, you must specify the rowCount manually in UnrealScript, like so:
<p />
<div class="codetitlebar">
Unrealscript
</div>
<div class="codesnippet">
<pre>
MyScrollingList.SetFloat(&#34;rowCount&#34;,ListOptions.Length);
</pre>
</div>
</noautolink>
<p />
<p />
<p />
<p />
<p />
<p />


<!-- BEGIN UE4 NOTICE -->



<div id="version_message" style="display:none;">

    <div style="position:fixed;top:0px;left:0px;width:100%;height:100%;background:#000;opacity:0.5;">

    </div>

    <div style="position:fixed;top:50%;left:50%;margin:-70px 0px 0px -240px;background:#FFF;border-radius:6px;width:480px;box-shadow:0px 5px 30px -5px rgba(0,0,0,0.9);">

        <div style="font-size:16px;font-weight:bold;background: url(rsrc/Three/warning.png) no-repeat scroll 5px 5px;padding:4px 10px 5px 25px;height:21px;width:440px;">

            Important!

        </div>

        <div style="font-size:11px;padding:5px 10px 10px;width:460px;">

            <p>You are viewing documentation for the <strong>Unreal Development Kit (UDK)</strong>.</p>



            <p>If you are looking for the Unreal Engine 4 documentation, please visit the <a style="color:#000;" href="https://docs.unrealengine.com">Unreal Engine 4 Documentation</a> site.</p>

        </div>

        <div style="height:20px;padding:4px;margin:6px;border-top:1px solid #a0a0a0;">

            <form onsubmit="return closeVersionMessage();">

                <input type="checkbox" id="dismiss" value="dismiss" />

                <label for="dsimiss">Don't show me this again</label>

                <input type="submit" value="Close" style="cursor:pointer;float:right;width:60px;color:#f0f0f0;font-weight:bold;background:#882222;height:24px;padding:2px 3px 3px;text-align:center;border:1px outset #000;" />

            </form>

        </div>

    </div>

</div>



<script type="text/javascript">

    window.onload = function () {

        LoadVersionMessage();

    }



    function LoadVersionMessage()

    {

        var showMessage = "false";
        if(showMessage != "false")

        {

            showVersionMessage();

        }

    }



    function showVersionMessage()

    {

        var message = document.getElementById("version_message");

        if(message)

        {

            message.style.display = "block";

        }

    }



    function closeVersionMessage() {

        var dismiss = document.getElementById("dismiss");

        var message = document.getElementById("version_message");

        if (message) {

            message.style.display = "none";

        }

        if (dismiss.checked) {

            eraseCookie("doc_version_message");

            createCookie("doc_version_message", "false", 365);

            dismiss.checked = false;

        }

        return false;

    }



    function createCookie(name, value, days) {

        if (days) {

            var date = new Date();

            date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));

            var expires = "; expires=" + date.toGMTString();

        }

        else var expires = "";

        document.cookie = name + "=" + value + expires + "; path=/";

    }



    function readCookie(name) {

        var nameEQ = name + "=";

        var ca = document.cookie.split(';');

        for (var i = 0; i < ca.length; i++) {

            var c = ca[i];

            while (c.charAt(0) == ' ') c = c.substring(1, c.length);

            if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);

        }

        return null;

    }



    function eraseCookie(name) {

        createCookie(name, "", -1);

    }

</script>



<!-- END UE4 NOTICE -->



</div></div><div id="footer"><div style="BACKGROUND-COLOR: transparent; margin: 0; padding: 0; width: 100%;"><div>&nbsp;</div><div style="float: left; text-align: left; vertical-align: bottom; width: 50%;"><a href="http://www.videogamevoters.org"><img src="rsrc/vgvn.jpg" border="0" width="234" height="60" alt="Video Game Voters Network" /></a></div><div style="float: right; text-align: right; vertical-align: bottom; width: 50%;">Copyright &copy; 2001-2012 <a href="http://www.epicgames.com" target="_top">Epic Games, Inc.</a><br /><a href="../Main/TermsAndConditions.html" class="twikiLink">Terms and Conditions</a><br /><a href="http://epicgames.com/privacynotice" target="_top">Privacy Notice</a></div></div></div></div>
<p />
</html></body>
