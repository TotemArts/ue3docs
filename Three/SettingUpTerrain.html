<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
	"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title> UDK | SettingUpTerrain    </title>

<style type="text/css" media="all">@import "rsrc/twiki_webs.css";</style>
<style type="text/css" media="all">@import "rsrc/udn_new.css";</style>
<link rel="icon" href="rsrc/Three/WebPreferences/favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="rsrc/Three/WebPreferences/favicon.ico" type="image/x-icon" />


<!-- view.static_udn3.tmpl  -->
<script language="JavaScript" type="text/javascript" src="rsrc/udn.js"></script>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

</head>
<p />
<body id="webbgThree">
<p />

<p />
<div id="webThree"><div id="head">
<!--
<div class="header">
 -->
<div style="background: url(/pub/webbg_udn.jpg); background-repeat: no-repeat; height:140px; width: 100%;" >
<!--
<div style="background: transparent url(/pub/udn_header_bg.jpg); background-repeat: repeat-x; height:140px; width: 100%; margin-left: 991px;">
 -->
<p />
<div id="nav">
<ul class="nav">
<font color=black>|</font>&nbsp;&nbsp;<li class=nav_Three><a href="../Main/WebHome.html" class="twikiLink">Main</a></li><font color=black>|</font><li class=nav_Three><a href="../Two/WebHome.html" class="twikiLink">UnrealEngine2</a></li><font color=black>|</font><li class=nav_Three><a href="WebHome.html" class="twikiLink">UnrealEngine3</a></li><font color=black>|</font><li class=nav_Three><a href="https://docs.unrealengine.com" class="twikiLink">UnrealEngine4</a></li><font color=black>|</font><li class=nav_Three><a href="../Main/BusinessAndLegal.html" class="twikiLink">Business &amp; Legal</a></li><font color=black>|</font>
</ul><br><br><br>
</div>
</div>
</div> <!-- end head -->
<div id="pagedefault">
<div id="maincol">
<div id="tool">
<div id="tooltop">UDN</div>
<div id="tooltext" style="padding: 10px 10px 10px 10px;">
Search public documentation: <br>
<form ACTION="/search/index.php" METHOD="GET" NAME="main" ID="main">
<input TYPE="TEXT" NAME="q" SIZE="15" STYLE="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: xx-small;">
<input TYPE="SUBMIT" VALUE="Search" STYLE="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: xx-small;"><br>
</form>
</div>
<div id="toolband">SettingUpTerrain  </b></div>
<div id="tooltext">
<a href="SettingUpTerrainJP.html" class="twikiLink">日本語訳</a><br><a href="SettingUpTerrainCH.html" class="twikiLink">中国翻译</a><br><a href="SettingUpTerrainKR.html" class="twikiLink">한국어</a><br>

<!-- Three/SettingUpTerrain -->
<hr size="1" noshade="noshade" />
Interested in the Unreal Engine? <br>
Visit the <a href="http://www.unrealtechnology.com" target="_top">Unreal Technology</a> site.<br>
<br>
Looking for jobs and company info? <br>
Check out the <a href="http://www.epicgames.com" target="_top">Epic games</a> site.<br>
<br>
Questions about support via UDN? <br>
Contact the <a href="../Main/ContactUDNStaff.html" class="twikiLink">UDN Staff</a> <br>
<br>
</div> <!-- end toolbox content -->
<div id="toolbottom"></div>
</div> <!-- end tool -->
<p />
<noautolink>
<p />
<div style="padding:0px 0px 0px 4px;font:10px Verdana;">
<b><a href="WebHome.html" class="twikiLink">UE3 Home</a></b> &gt; <b><a href="TerrainHome.html" class="twikiLink">Terrain System</a></b> &gt; Setting up Terrain in Unreal
</div>
<hr size="1" noshade="noshade">
<h1><a name="Setting up Terrain in Unreal"></a> Setting up Terrain in Unreal </h1>
<hr size="1" noshade="noshade">
<p />
<div class="twikiToc"> <ul>
<li> <a href="SettingUpTerrain.html#Setting up Terrain in Unreal"> Setting up Terrain in Unreal</a> <ul>
<li> <a href="SettingUpTerrain.html#Creating a Terrain Actor"> Creating a Terrain Actor</a>
</li> <li> <a href="SettingUpTerrain.html#Terrain Properties"> Terrain Properties</a>
</li> <li> <a href="SettingUpTerrain.html#Creating Terrain Layers"> Creating Terrain Layers</a> <ul>
<li> <a href="SettingUpTerrain.html#Terrain Materials"> Terrain Materials</a> <ul>
<li> <a href="SettingUpTerrain.html#Displacement"> Displacement</a>
</li> <li> <a href="SettingUpTerrain.html#Foliage"> Foliage</a>
</li> <li> <a href="SettingUpTerrain.html#Material"> Material</a>
</li></ul>
</li> <li> <a href="SettingUpTerrain.html#Terrain Layers"> Terrain Layers</a>
</li></ul>
</li> <li> <a href="SettingUpTerrain.html#Decoration Layers"> Decoration Layers</a>
</li></ul>
</li></ul>
</div>
<p />
<h2><a name="Creating a Terrain Actor"></a> Creating a Terrain Actor </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
Select "New Terrain" from the Tools menu. From here you can set it's location in the world and the number of patches. Selecting 'Finish' will create the new terrain.
<p />
<img alt="terrain_wizard.jpg" src="rsrc/Three/SettingUpTerrain/terrain_wizard.jpg" />
<p />
Alternately you can place a terrain using the actor browser and opening the `Info' branch of the actor tree. Under this you should see 'Terrain'.
<p />
<img alt="TerrainInBrowser.jpg" src="rsrc/Three/SettingUpTerrain/TerrainInBrowser.jpg" />
<p />
Select this and go back to the main editor viewports. Find the location you wish the LOWER-LEFT corner of your terrain to be (you can move the terrain later if you like). Right-click on the location you wish your terrain to be and add it exactly as you would any other actor.
<p />
This should create a terrain actor with a single four by four quad of terrain patches extending from it. This is because the defaults for terrain are set to four by four patches of terrain with a MaxTesselationLevel of 4.
<p />
Below, you will see that in the non-perspective views of the editor, this will show up as a single square consisting of two triangles. In the perspective view itself, the terrain will show up as a four by four grid of patches due to the rendering occurring at full resolution.
<p />
<img alt="Terrain_InitialView.jpg" src="rsrc/Three/SettingUpTerrain/Terrain_InitialView.jpg" />
<p />
<p />
<h2><a name="Terrain Properties"></a> Terrain Properties </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
<img alt="BaseTerrainProp2.jpg" src="rsrc/Three/SettingUpTerrain/BaseTerrainProp2.jpg" />
<p />
Expand this by setting the values for <strong>NumPatchesX</strong> and <strong>NumPatchesY</strong> to the desired value. The value set here is the highest density of the terrain, before any tessellation is done. For the purposes of demonstration, we will assume that there are 16 patches in both X and Y. You should now have a large flat plane with the default material mapped to it. Now we need to create a layer setup for the terrain.
<p />
For a full reference on terrain properties, please refer to the <a href="UsingTerrain.html" class="twikiLink">Terrain Reference</a> page.
<p />
<p />
<h2><a name="Creating Terrain Layers"></a> Creating Terrain Layers </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
Layers are used on terrain in two different ways. The first is as a procedural setup, where the layer contains a list of materials and parameters for where those materials are used.  This allows an artist to define a certain look for an area based on heights and slopes. A single layer can contain multiple terrain materials each with their own parameters for how they are used on the terrain.
<p />
The second way terrain layers can be used is similar to the method in Unreal Engine 2.0 and later, where each layer contains a single material, and the artist can paint using any layer to create the look of an area. These two methods can be mixed as well, the procedural layer being used to define the majority of an area, and the single material approach being used to add detail or redefine an area at will (such as painting a path through a field).
<p />
<h3><a name="Terrain Materials"></a> Terrain Materials </h3>
<p />
<img alt="TerrainMaterial.jpg" src="rsrc/Three/SettingUpTerrain/TerrainMaterial.jpg" />
<p />
Terrain Materials are used to pass the material you wish to render on to the Terrain Layer. They also contain many other properties to allow the artist to customize that material by adding displacement, foliage, or changing the scaling of the material on the terrain.
<p />
To create a terrain material, use file-&gt;new in the Browser and select TerrainMaterial or right click in the Browser (on empty space) and select New TerrainMaterial. This will prompt you to name the object. After that is done, right click on the new object and select Properties. This opens up the Properties window, with 3 rollouts. Displacement contains settings for utilizing a displacement map with this material, Foliage is an expandable array of meshes to be rendered on the terrain (covered in section 3), and Material covers all the properties for rendering a pixel shader on the terrain.
<p />
<h4><a name="Displacement"></a> Displacement </h4>
<p />
DisplacementMap uses a grayscale image to move the vertices of the terrain along the surface normal. To create a displacement map, create a texture in a paint program that can store alpha channels, and put the displacement map in that channel. Save as a 32bit .TGA and import into Unreal Engine 3.0 with TC_DisplacementMap as the compression setting. Use this texture in the DisplacementMap field in the TerrainMaterial. The scaling factor below the DisplacementMap field adjusts the strength of the displacement.
<p />
<h4><a name="Foliage"></a> Foliage </h4>
<p />
Foliage contains an empty array, which can be added to by clicking on the + symbol that appears on the right side of the FoliageMeshes rollout. Adding an entry to this array will reveal a set of options that determine where and how the assigned mesh will render.
<p />
<strong>StaticMesh</strong> - Enter the mesh you wish to use as foliage
<p />
<strong>Material</strong> - Override the material assigned to the mesh
<p />
<strong>Density</strong> - Number of meshes per quad
<p />
<strong>MaxDrawRadius</strong> - Furthest away you will see a mesh
<p />
<strong>MinTransitionRadius</strong> - How far away will the mesh cease to blend/scale in
<p />
<strong>MinScale</strong> - Uniform scale modifier
<p />
<strong>MaxScale</strong> - Uniform scale modifier
<p />
<strong>Seed</strong> - Sets random distribution
<p />
<strong>SwayScale</strong> - Multiplier for windsources
<p />
<strong>StaticLighting (flag)</strong> - Switches between lighting styles for foliage
<p />
<h4><a name="Material"></a> Material </h4>
<p />
Material contains the options for how the shader is mapped onto the terrain.
<p />
<strong>MappingPanU</strong> - offsets the default mapping along U
<p />
<strong>MappingPanV</strong> - offsets the default mapping along V
<p />
<strong>MappingRotation</strong> - Offsets the default rotation
<p />
<strong>MappingScale</strong> - Uniformly scales shader on terrain
<p />
<strong>MappingType</strong> - Determines the mapping plane to use on terrain
<p />
<strong>Material</strong> - What shader to use on the terrain.
<p />
<h3><a name="Terrain Layers"></a> Terrain Layers </h3>
<p />
<img alt="TerrainLayers.jpg" src="rsrc/Three/SettingUpTerrain/TerrainLayers.jpg" />
<p />
TerrainLayerSetup objects are used to create Terrain Layers. Creating a TerrainLayerSetup is much the same as creating a TerrainMaterial, however instead of assigning the shader to use, we assign TerrainMaterials.
<p />
TerrainLayerSetups can contain as many TerrainMaterials as you choose to enter, but it is important to note that they stack from the top down, so that entry [0] will be rendered on top of entry [1].
<p />
This is the list of settings in a TerrainLayerSetup.
<p />
<strong>UseNoise</strong> - Set this flag to enable noise for this terrain material.
<p />
<strong>NoiseScale</strong> - Determines the scaling value of noise if UseNoise is enabled.
<p />
<strong>NoisePercent</strong> - How noisy this material will be. Most values in the range of 0.00 to 1.00.
<p />
<strong>Min/MaxHeight</strong> - Used in procedural terrain texturing. Clamps this material to being rendered if terrain is within limits set in properties.
<p />
<strong>Enabled</strong> - If flagged, enabled this branch of procedural texturing.
<p />
<strong>Base</strong> - Value in world-space to clamp this material to. Min of 128 and a max of 1024 will cause material to only appear if terrain height is between those two values.
<p />
<strong>NoiseScale</strong> - Frequency of noise affecting base height. Smaller values will give more noise.
<p />
<strong>NoiseAmount</strong> - Amount of noise added to the base amount.
<p />
<strong>Min/MaxSlope</strong> - Used in procedural terrain texturing. Clamps this material to being rendered if terrain angle is within limits set in properties.
<p />
Most properties are the same as <strong>Min/MaxHeight</strong>.
<p />
<strong>Base</strong> in this case refers to the angle of the slope. 0 is 0 degrees, 1 is 45 degrees, scaling up to 90 degrees being infinity.
<p />
<strong>Alpha</strong> - The overall strength of this section of the terrain layer to be rendered on the terrain. Setting a value of .5 will render the current terrain material at half-opacity on the terrain.
<p />
<strong>Material</strong> - The terrain material to be used in this portion of the layer
<p />
<p />
<h2><a name="Decoration Layers"></a> Decoration Layers </h2>
<div style="margin-top:-10px;"><hr size="1" noshade="noshade"></div>
<p />
<img alt="DecoLayers.jpg" src="rsrc/Three/SettingUpTerrain/DecoLayers.jpg" />
<p />
Decoration Layers (<em>Deco Layers</em>) are used to add detail objects to the terrain. These objects have full collision with the player, receive lighting, and cast shadows.
<p />
It is possible to have multiple static meshes in a single decoration layer, but if this is the case, it will randomly pick a mesh from that layer to apply when that layer is painted in. Creating multiple decoration layers allows for more specific control over the placement of meshes.
<p />
Deco Layers appear directly under the Terrain properties of the Terrain Actor, and layers can be added in the same manner as any other dynamic array of elements. Each of these layers has its own <strong>Name</strong> field, which will show up inside the terrain tool.
<p />
Under <strong>Name</strong> is <strong>Decorations</strong>, another array. Creating an element in this array exposes the settings for what mesh will be used and how that mesh will appear and be positioned on the terrain.
<p />
<strong>Factory</strong> - This allows you to define a <code>StaticMeshFactory</code>, which contains the settings for what mesh you wish to use, whether the mesh will be visible in the game, in the editor, if it will cast shadows, and how it will collide with the player and the world.
<p />
<strong>MinScale</strong> - The smallest scale that the mesh will appear as.
<p />
<strong>MaxScale</strong> - The largest scale that the mesh will appear as.
<p />
<strong>Density</strong> - The density of meshes that will be placed when painting.
<p />
<strong>SlopeRotationBlend</strong> - Percentage of terrain angle that will be passed on to meshes painted onto the terrain
<p />
<strong>RandSeed</strong> - The random seed for the placement of meshes.
<p />
</noautolink>
<p />
<p />
<p />
<p />
<p />
<p />


<!-- BEGIN UE4 NOTICE -->



<div id="version_message" style="display:none;">

    <div style="position:fixed;top:0px;left:0px;width:100%;height:100%;background:#000;opacity:0.5;">

    </div>

    <div style="position:fixed;top:50%;left:50%;margin:-70px 0px 0px -240px;background:#FFF;border-radius:6px;width:480px;box-shadow:0px 5px 30px -5px rgba(0,0,0,0.9);">

        <div style="font-size:16px;font-weight:bold;background: url(rsrc/Three/warning.png) no-repeat scroll 5px 5px;padding:4px 10px 5px 25px;height:21px;width:440px;">

            Important!

        </div>

        <div style="font-size:11px;padding:5px 10px 10px;width:460px;">

            <p>You are viewing documentation for the <strong>Unreal Development Kit (UDK)</strong>.</p>



            <p>If you are looking for the Unreal Engine 4 documentation, please visit the <a style="color:#000;" href="https://docs.unrealengine.com">Unreal Engine 4 Documentation</a> site.</p>

        </div>

        <div style="height:20px;padding:4px;margin:6px;border-top:1px solid #a0a0a0;">

            <form onsubmit="return closeVersionMessage();">

                <input type="checkbox" id="dismiss" value="dismiss" />

                <label for="dsimiss">Don't show me this again</label>

                <input type="submit" value="Close" style="cursor:pointer;float:right;width:60px;color:#f0f0f0;font-weight:bold;background:#882222;height:24px;padding:2px 3px 3px;text-align:center;border:1px outset #000;" />

            </form>

        </div>

    </div>

</div>



<script type="text/javascript">

    window.onload = function () {

        LoadVersionMessage();

    }



    function LoadVersionMessage()

    {

        var showMessage = "false";
        if(showMessage != "false")

        {

            showVersionMessage();

        }

    }



    function showVersionMessage()

    {

        var message = document.getElementById("version_message");

        if(message)

        {

            message.style.display = "block";

        }

    }



    function closeVersionMessage() {

        var dismiss = document.getElementById("dismiss");

        var message = document.getElementById("version_message");

        if (message) {

            message.style.display = "none";

        }

        if (dismiss.checked) {

            eraseCookie("doc_version_message");

            createCookie("doc_version_message", "false", 365);

            dismiss.checked = false;

        }

        return false;

    }



    function createCookie(name, value, days) {

        if (days) {

            var date = new Date();

            date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));

            var expires = "; expires=" + date.toGMTString();

        }

        else var expires = "";

        document.cookie = name + "=" + value + expires + "; path=/";

    }



    function readCookie(name) {

        var nameEQ = name + "=";

        var ca = document.cookie.split(';');

        for (var i = 0; i < ca.length; i++) {

            var c = ca[i];

            while (c.charAt(0) == ' ') c = c.substring(1, c.length);

            if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);

        }

        return null;

    }



    function eraseCookie(name) {

        createCookie(name, "", -1);

    }

</script>



<!-- END UE4 NOTICE -->



</div></div><div id="footer"><div style="BACKGROUND-COLOR: transparent; margin: 0; padding: 0; width: 100%;"><div>&nbsp;</div><div style="float: left; text-align: left; vertical-align: bottom; width: 50%;"><a href="http://www.videogamevoters.org"><img src="rsrc/vgvn.jpg" border="0" width="234" height="60" alt="Video Game Voters Network" /></a></div><div style="float: right; text-align: right; vertical-align: bottom; width: 50%;">Copyright &copy; 2001-2012 <a href="http://www.epicgames.com" target="_top">Epic Games, Inc.</a><br /><a href="../Main/TermsAndConditions.html" class="twikiLink">Terms and Conditions</a><br /><a href="http://epicgames.com/privacynotice" target="_top">Privacy Notice</a></div></div></div></div>
<p />
</html></body>
